#!/bin/sh
#
# $NetBSD: swap1,v 1.9.36.1 2009/05/13 19:18:03 jym Exp $
#

# PROVIDE: localswap
# REQUIRE: DISKS root
# KEYWORD: shutdown

$_rc_subr_loaded . /etc/rc.subr

name="swap1"
start_cmd="swap1_start"
stop_cmd="swap1_stop"

#		Add all block-type swap devices; these might be necessary
#		during disk checks.
#
swap1_start()
{
	if ! checkyesno no_swap; then
		swapctl -A -t blk
	fi
}

#		Remove all block-type swap devices
#
swap1_stop()
{
	if checkyesno swapoff || [ -n "$rc_force" ]; then
		echo "Removing block-type swap devices"
		swapctl -U -t blk
	fi
}

load_rc_config swap
run_rc_command "$1"
