#!/bin/sh
#
# $NetBSD: nfslocking,v 1.6.6.1 2005/05/09 22:42:13 riz Exp $
#

# PROVIDE: nfslocking
# REQUIRE: nfsd
# BEFORE:  DAEMON

. /etc/rc.subr

arg=$1

nfslocking_precmd()
{
	checkyesno nfs_server || checkyesno nfs_client || [ -n "$rc_force" ]
}

name="statd"
rcvar=$name
command="/usr/sbin/rpc.${name}"
start_precmd='nfslocking_precmd'
stop_precmd=$start_precmd
status_precmd=$start_precmd
load_rc_config $name
load_rc_config_var nfsd nfs_server
run_rc_command "$arg"

name="lockd"
rcvar=$name
command="/usr/sbin/rpc.${name}"
start_precmd='nfslocking_precmd'
stop_precmd=$start_precmd
status_precmd=$start_precmd
load_rc_config $name
load_rc_config_var nfsd nfs_server
run_rc_command "$arg"
