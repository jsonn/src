2003-07-10  Kazu Hirata	 <kazu@cs.umass.edu>

	PR c/11449
	* fold-const.c (sign_bit_p): Return EXP if VAL is the sign bit
	of HOST_WIDE_INT.
	(fold_single_bit_test): If sign_bit_p() fails, assume that the
	bit being tested is not a sign bit.

2003-07-04  Jeff Law  <law@redhat.com>

	PR c/11428
	* expr.c (do_store_flag): Pass in the correct result type
	when calling fold_single_bit_test.
	* fold-const.c (fold_single_bit_test): Use result_type for the
	result when folding a sign bit test.

2003-07-02  Jeff Law  <law@redhat.com>

	* expr.c (do_store_flag): Remove special case folding for
	single bit tests.  Instead call back into the commonized folder
	routine.
	* fold-const.c (fold_single_bit_test): New function, mostly
	extracted from do_store_flag, with an additional case extracted
	from fold.
	(fold): Call fold_single_bit_test appropriately.
	* tree.h (fold_single_bit_test): Prototype.

2004-01-27  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/10904
	PR target/13058
	* config/sparc/sparc.h (CANNOT_CHANGE_MODE_CLASS): New.
	Forbid mode changes from SImode for lower FP regs if ARCH64.

2004-02-14  Release Manager

	* GCC 3.3.3 Released.

2004-02-12  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/14113
	Backport from mainline:

	2004-02-03  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* config/sparc/sparc.md (call followed by jump define_peephole's):
	Delete.

2004-02-06  H.J. Lu  <hongjiu.lu@intel.com>

	* doc/invoke.texi: Mention SSE2 and SSE3.

	* config/i386/i386.h: Deprecate -mpni/-mno-pni.

2004-02-06  Kelley Cook  <kcook@gcc.gnu.org>

	* config/i386/i386.c: Rename pni to sse3.
	* config/i386/i386.h: Likewise.
        * config/i386/i386.md: Likewise.
	* config/i386/pmmintrin.h: Likewise.
	* doc/extend.texi: Likewise.
	* doc/invoke.texi: Likewise.

2004-02-03  Wolfgang Bangerth  <bangerth@dealii.org>

	PR other/14003
	* doc/invoke.texi (x86 options): Fix spelling/wording.

2004-02-01  Geoffrey Keating  <geoffk@apple.com>

	PR bootstrap/13960
	* config/rs6000/rs6000.h (LEGITIMATE_LO_SUM_ADDRESS_P): Accept
	lo_sum addresses on Darwin.

2004-01-30  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* config/sparc/sparc.c: Update copyright.
	* config/sparc/sparc.h: Likewise.
	* config/sparc/sparc.md: Likewise.

2004-01-29  Roger Sayle  <roger@eyesopen.com>

	PR java/13824
	* tree.c (unsafe_for_reeval): Handle EXIT_BLOCK_EXPR nodes specially
	as their EXIT_BLOCK_LABELED_BLOCK operands can lead to unbounded
	recursion.

2004-01-29  H.J. Lu  <hongjiu.lu@intel.com>

	* doc/invoke.texi: Remove the pni option from -mfpmath=.

2004-01-29  Gabriel Dos Reis  <gdr@integrable-solutions.net>

	Backport from mainline
	
	2004-01-20  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>

	PR optimization/12440
	* loop.c: Include ggc.h.
	(loop_optimize): Run garbage collector between optimization of loops.
	* Makefile.in (loop.o): Add GGC_H dependency.

2004-01-24  Matthias Klose  <doko@debian.org>

	* objc/objc-act.c (is_public): Fix typo in message.

2004-01-23  Richard Henderson  <rth@redhat.com>

        PR opt/12941
        * combine.c (SHIFT_COUNT_TRUNCATED): Provide default value.
        (simplify_comparison): Don't simplify (eq (zero_extract c 1 r) 0)
        if SHIFT_COUNT_TRUNCATED is set.

2004-01-23  Ian Lance Taylor  <ian@wasabisystems.com>

	* doc/invoke.texi (Optimize Options): Note that --param arguments
	are subject to change without notice.

2004-01-23  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* reload.c (can_reload_into): Add prototype and K&R style function
	declaration.

2004-01-21  Andreas Jaeger  <aj@suse.de>
	    Michael Matz  <matz@suse.de>

	* doc/extend.texi (Extended Asm): Clarify memory clobber.

2004-01-21  Ralf Corsepius  <corsepiu@faw.uni-ulm.de>

	PR target/13073
        * config/h8300/t-rtems (h8300-*-rtems*): New.
        * config.gcc: Use config/h8300/t-rtems.
	
2004-01-20  Gabriel Dos Reis  <gdr@integrable-solutions.net>

        Backport from mainline

        2004-01-10  Jan Hubicka  <jh@suse.cz>
        PR opt/12826
        * loop.c (insert_loop_mem): Prefer VOLATILE memory references to be
        stored. 
        
2004-01-16  Jan Hubicka  <jh@suse.cz>

	PR opt/13608
	* i386.c (ix86_compute_frame_layout): Fix for alloca on leaf function.

2004-01-16  Segher Boessenkool  <boessen@de.ibm.com>

        PR target/11793
	* config/rs6000/rs6000.h (LEGITIMATE_CONSTANT_P): Handle
	vectors.
	
2004-01-16  Jan Hubicka  <jh@suse.cz>

        PR opt/11350
        * cfgcleanup.c (try_optimize_cfg): Suppress tablejump removal
	after reload.
        * cfgrtl.c (try_redirect_by_replacing_branch): Likewise.

2004-01-15  J"orn Rennecke <joern.rennecke@superh.com>

	PR optimization/10392
	* reload.c (can_reload_into): New function.
	(push_reload): Use it.

2004-01-14  J"orn Rennecke <joern.rennecke@superh.com>

	PR target/9365
	* sh.c (gen_block_redirect): Add special handling of RETURN.
	(gen_far_branch) Don't call gen_stuff_delay_slot if there is no
	far branch target (i.e. it's a return).

2004-01-14  Hartmut Penner  <hpenner@de.ibm.com>

	* gcc/config/rs6000/rs6000.c (rs6000_stack_info)
	Calculate always vrsave_mask if TARGET_ALTIVEC.
	(rs6000_emit_prologue): Emit code for vrsave
	only if TARGET_ALTIVEC_VRSAVE.
	(rs6000_emit_epilogue): Likewise.
 
2003-01-14  Nicola Pero  <n.pero@mi.flashnet.it>

	PR objc/7993
        * objc-act.c (is_private): Do not emit the 'instance variable %s
        is declared private' error.
        (is_public): Emit the error after calling is_private.
        (lookup_objc_ivar): If the instance variable is private, return 0
        - the instance variable is invisible here.
       
2004-01-12  Marc Espie <espie@openbsd.org>

	* system.h: handle YYBYACC like YYBISON.

2004-01-12  Matthias Klose  <doko@debian.org>

        Backport from mainline

        2003-12-08 Stuart Hastings <stuart@apple.com>
        * config/i386/i386.md: Typo in split of fp-valued if_then_else.

2004-01-12  Roger Sayle  <roger@eyesopen.com>

	PR middle-end/11397
	* varasm.c (assemble_alias): Remove weak aliases from weak_decls.

2004-01-12  J"orn Rennecke <joern.rennecke@superh.com>

	PR target/13585
	* sh-protos.h (check_use_sfunc_addr): Declare.
	* sh.c (extract_sfunc_addr, check_use_sfunc_addr): New functions.
	* sh.md (use_sfunc_addr): Use check_use_sfunc_addr in insn predicate.

2004-01-12  Matthias Klose  <doko@debian.org>

	Backport from mainline

	2004-01-11  Richard Henderson  <rth@redhat.com>
	PR opt/12441
	Revert: Sat Mar 30 14:08:55 CET 2002  Jan Hubicka  <jh@suse.cz>
	* i386.c (aligned_operand): Be prepared for SUBREGed registers.
	(ix86_decompose_address): Use REG_P instead of GET_CODE (...) == REG.
	(ix86_address_cost): Be prepared for SUBREGed registers.
	(legitimate_address_p): Accept SUBREGed registers.

2004-01-11  Richard Henderson  <rth@redhat.com>

	* config/alpha/alpha.c (alpha_encode_section_info): Use 'I'
	for TLS_MODEL_INITIAL_EXEC.
	(tls_symbolic_operand_1): Update to match.
	(tls_symbolic_operand_type): Likewise.

2004-01-11  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/13392
	* builtins.c (expand_builtin_expect_jump): Handle conditional jumps
	to drop through label.  Don't fall back to SCC even when conditional
	jump has not been found.

2004-01-09  Jeff Bailey  <jbailey@nisa.net>

	PR target/12561
	* config/t-gnu: Rename SYSTEM_HEADER_DIR to NATIVE_SYSTEM_HEADER_DIR.

2004-01-09  Richard Henderson  <rth@redhat.com>

	* recog.c (constrain_operands): Validate mem operands.

2004-01-02  Nathanael Nerode  <neroden@gcc.gnu.org>

	PR target/13069
	Backport the following from mainline: 

	2003-03-08  Neil Booth  <neil@daikokuya.co.uk>
        * config/sh/rtemself.h (TARGET_OS_CPP_BUILTINS): Use instead of
        CPP_PREDEFINES.
        * config/sh/rtems.h (TARGET_OS_CPP_BUILTINS): Use instead of
        CPP_PREDEFINES.

	2003-09-27  Kelley Cook  <kcook@gcc.gnu.org>
	* config/sh/rtemself.h, config/sh/rtems.h: GNU CC -> GCC.

2004-01-02  Roger Sayle  <roger@eyesopen.com>

	* tree.h (integer_nonzerop): Use PARAMS macro with prototype.
	* tree.c (integer_nonzerop): Use K&R style function declaration.

2004-01-02  Andreas Schwab  <schwab@suse.de>

	* doc/c-tree.texi: Fix @item vs. @itemx.
	* doc/cpp.texi: Likewise.
	* doc/install.texi: Likewise.
	* doc/invoke.texi: Likewise.

2004-01-02  Andreas Jaeger  <aj@suse.de>, Gerald Pfeifer  <gp@suse.de>

	* doc/install.texi (Specific): Mention x86_64.

2004-01-01  Jakub Jelinek  <jakub@redhat.com>

	PR optimization/13521
	Backport from mainline:
		2003-03-22  Richard Henderson <rth@redhat.com>

		* cfgcleanup.c (insns_match_p): Do not do EQUIV substitution
		after reload.

2003-12-31  Roger Sayle  <roger@eyesopen.com>

	PR fortran/12632
	* tree.c (integer_nonzerop): New predicate for nonzero integers.
	* tree.h (integer_nonzerop): Add function prototype.
	* fold-const.c (fold) <COND_EXPR>: Don't fold a constant condition,
	if we'd replace a COND_EXPR of non-void type by one of its operands
	of void type.

2003-12-31  Kazu Hirata  <kazu@cs.umass.edu>

	Backport from mainline:

	2003-09-12  Richard Sandiford  <rsandifo@redhat.com>

	PR target/13373
	* config/mcore/mcore-protos.h (mcore_r15_operand_p): Declare.
	(mcore_secondary_reload_class): Declare.
	(mcore_output_inline_const_forced): Remove.
	* config/mcore/mcore.md (movsi): Remove the code that forced
	non-inlineable constants into a register if the target was r15
	or the stack pointer.  Remove constant restrictions from the main
	define_insn.  Remove r <- I, r <- M and r <- N alternatives in favor
	of an r <- P alternative.  Remove fallback define_insn for reload.
	(movhi, movqi): Use gen_lowpart rather than gen_SUBREG.  Remove reload
	define_insn.  Use mcore_output_move in the remaining define_insn.
	Adjust condition and constraints in the way as for movsi.
	(movdi): Always split unacceptable constants into two.  Use
	simplify_gen_subreg instead of operand_subword{,_force}.
	* config/mcore/mcore.c (mcore_output_inline_const_forced): Remove.
	(mcore_output_move): Support HImode and QImode moves as well.
	(mcore_m15_operand_p): New function.
	(mcore_reload_class): Use it to detect cases where LRW_REGS are better.
	(mcore_secondary_reload_class): New function.
	* config/mcore/mcore.h (SECONDARY_RELOAD_CLASS): Redefine in
	terms of mcore_secondary_reload_class.

2003-12-31  Zack Weinberg  <zack@codesourcery.com>

	* config/ia64/ia64.c (ia64_va_arg): Pass pointer for
	variable-sized type through convert_memory_address.
	(ia64_in_small_data_p): Always return false for FUNCTION_DECLs.

2003-12-24  Andrew Pinski  <pinskia@physics.uc.edu>

	PR bootstrap/13068
	Backport from mainline:
		2003-05-09  Matt Kraai <kraai@alumni.cmu.edu>

		* mklibgcc.in: Remove extra quotes.
		2003-05-08  Aldy Hernandez  <aldyh@redhat.com>

		* mklibgcc.in: Use mkinstalldirs when installing multilib
		directories.

2003-12-24  Roger Sayle  <roger@eyesopen.com>

	Backport from mainline:

	2003-09-18  Mark Mitchell  <mark@codesourcery.com>
	* explow.c (convert_memory_address): Define even when
	POINTERS_EXTEND_UNSIGNED is not defined.  Do nothing if the address
	is already in the right mode.

2003-12-23  Andrew Pinski  <pinskia@physics.uc.edu>

	PR middle-end/13475
	Backport from mainline:
		2003-06-19  Aldy Hernandez  <aldyh@redhat.com>

		* expr.c (const_vector_from_tree): Initialize remaining
		elements to 0.

2003-12-23  Kazu Hirata  <kazu@cs.umass.edu>

	PR target/11576
	* config/h8300/h8300.h (CONSTANT_ADDRESS_P): Allow CONST and
	HIGH on all variants.

2003-12-23  Matthias Klose  <doko@debian.org>

	* config/mips/linux.h (LIB_SPEC): Use -lpthread when
	-pthread was specified.

2003-12-23  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/13394
	* toplev.c (rest_of_compilation): Move call to
	check_function_return_warnings right after the sibcall
	optimization pass.

2003-12-23  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/13382
	* c-typeck.c (convert_for_assignment): When converting from
	integral type to pointer type, always call convert.

2003-12-22  Gabriel Dos Reis <gdr@integrable-solutions.net>

	PR target/11271
	* reload.c: Revert last backport from mainline.  It breaks s390.

2003-12-21  Roger Sayle  <roger@eyesopen.com>

	* config/ia64/hpux.h (TARGET_OS_CPP_BUILTINS): Define _ILP32
	when compiling in ILP32 mode.

2003-12-21  Gabriel Dos Reis <gdr@integrable-solutions.net>

    Backport from mainline:
    2003-10-31  Richard Earnshaw  <rearnsha@arm.com>

	    PR target/11271
	    * reload.c (find_reloads_address): Handle any register in
	    (PLUS (PLUS (REG) (REG)) (CONST_INT).

2003-12-21  Roger Sayle  <roger@eyesopen.com>

	PR middle-end/13400
	* ifcvt.c (noce_process_if_block): Disable unconditional write
	optimizations if we could introduce a store to trapping memory
	that wasn't present previously.

2003-12-20  Roger Sayle  <roger@eyesopen.com>

	PR optimization/13031
	* gcse.c (cprop_jump): Backport code clean-up and bug-fix
	from mainline [2003-05-20 Sayle, Hirata and Rennecke patch].
	(cprop_insn): Don't attemp further substitutions if the
	current instruction has been deleted.
	(local_cprop_pass): Likewise.

2003-12-19  Jakub Jelinek  <jakub@redhat.com>

	PR c++/13239
	* builtins.c (expand_builtin_expect_jump): Update
	TREE_VALUE (arglist) if unsave_expr_now langhook
	created a new tree.

2003-12-18  Mark Mitchell  <mark@codesourcery.com>

	* config/sol2.h (LINK_ARCH32_SPEC): Define in terms of ...
	(LINK_ARCH32_SPEC_BASE): ... this new macro.
	* config/sparc/sol2-bi.h (LINK_ARCH64_SPEC): Define in terms of
	...
	(LINK_ARCH64_SPEC_BASE): ... this new macro.
	* config/sparc/sol2-gld-bi.h (LINK_ARCH32_SPEC): New macro.
	(LINK_ARCH64_SPEC): Likewise.

2003-12-17  Ulrich Weigand  <uweigand@de.ibm.com>

	PR target/11992
	* config/s390/s390.md ("*cmpmem_long_64"): Use CLCLE instruction
	instead of CLCL.
	("*cmpmem_long_31"): Likewise.

2003-12-16  Zack Weinberg  <zack@codesourcery.com>

	Backport the following patches from mainline.

    2003-12-05  Mark Mitchell  <mark@codesourcery.com>

	* config/ia64/ia64.h (MUST_PASS_IN_STACK): Define.

    2003-12-01  James E Wilson  <wilson@specifixinc.com>

	* config/ia64/ia64.h (FUNCTION_ARG_REGNO_P): Use AR_REG_FIRST not
	GR_ARG_FIRST.

    2003-10-21  Zack Weinberg  <zack@codesourcery.com>

	* config/ia64/ia64.md (cmpxchg_acq_si): Mark operand 3 as DImode.
	* config/ia64/ia64.c (ia64_expand_fetch_and_op,
	ia64_expand_op_and_fetch): Make sure the REG for ar.ccv is
	DImode.   Use convert_move to load ar.ccv.
	(ia64_expand_compare_and_swap): Likewise.
	If expand_expr doesn't put 'old' and 'new' in the proper
	modes, run them through convert_to_mode.

    2003-10-14  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/ia64.c (ia64_expand_call): Force function address
	to DImode.
	* config/ia64/ia64.md (call_gp): Put DImode on operand 0.

    2003-06-11  Richard Henderson  <rth@redhat.com>

	* config/ia64/ia64.md (call_gp): Fix memory mode.

    2003-05-14  Eric Christopher  <echristo@redhat.com>

	* combine.c: Fix header comments.
	(distribute_notes): Remove usage of elim_i1, elim_i2. Propagate
	to all calls and prototype.

2003-12-16  David O'Brien  <obrien@FreeBSD.org>

	* config/alpha/freebsd.h (FBSD_TARGET_CPU_CPP_BUILTINS): Add __LP64__.
	* config/sparc/freebsd.h (FBSD_TARGET_CPU_CPP_BUILTINS): Likewise.
	* config/i386/freebsd64.h (FBSD_TARGET_CPU_CPP_BUILTINS): Conditionally
	add __LP64__.

2003-12-16  Hartmut Penner  <hpenner@de.ibm.com>

	* altivec.h (vec_cmple, vec_all_numeric): Fix typo.
	* testsuite/gcc.dg/altivec-10.c: Test for above.

2003-12-15  Kazu Hirata  <kazu@cs.umass.edu>

	PR target/13122
	* config/h8300/h8300.md (pushqi1_h8300hs_normal): New.
	(pushqi1): Call gen_pushqi1_h8300hs_normal in normal mode.
	(pushhi1_h8300hs_normal): New.
	(pushhi1): Call gen_pushqi1_h8300hs_normal in normal mode.

	* config/h8300/h8300.h (LINK_SPEC): Support normal mode.
	* config/h8300/h8300.c (asm_file_start): Correctly output
	an architecture directive.
	* config/h8300/lib1funcs.asm: Correctly specify an
	architecture directive.

2003-12-12  Roger Sayle  <roger@eyesopen.com>

	PR optimization/13037
	* loop.c (update_giv_derive): Ignore redundant sets of a biv when
	calculating how to derive a giv from a biv.

2003-12-12  Jakub Jelinek  <jakub@redhat.com>

	* config/ia64/linux.h (IA64_GATE_AREA_END): Increase by 64K.
	(MD_FALLBACK_FRAME_STATE_FOR): Set fpsr_loc, br_loc[6] and
	br_loc[7].  Update comment.
	(MD_HANDLE_UNWABI): Define.
	* config/ia64/unwind-ia64.c (struct unw_state_record): Add
	unwabi field.
	(struct _Unwind_Context): Increase br_loc array size to 8 entries.
	(desc_abi): Set unwabi.
	(uw_update_reg_address): Allow br up to 7.
	(uw_update_context): Invoke MD_HANDLE_UNWABI if defined.
	(uw_install_context): Load b1..b5 from correct locations.
	Fix insn loading ar.fpsr.
	* doc/tm.texi: Document MD_HANDLE_UNWABI.

2003-12-12  Hans-Peter Nilsson  <hp@axis.com>

	PR target/13256
	Backport from mainline:
	* resource.h (enum mark_resource_type): Remove member MARK_DEST.
	The only user changed as follows:
	* resource.c (mark_set_resources) <case SET>: Always recurse for
	SET_SRC (x).
	<case SIGN_EXTRACT, case ZERO_EXTRACT>: Always recurse on
	operands.
	<case STRICT_LOW_PART>: Delete, deferring to default code.

	PR target/12598
	Backport from mainline:
	* config/cris/cris.md (define_split "*mov_sidesi_biap_mem"+1)
	(define_splits "*mov_sidesi_mem"+1, "casesi"+9, +10, +11, +12):
	Use cris_mem_op and replace_equiv_address, not gen_rtx_MEM.
	("call", "call_value", define_split "*mov_sidesi_mem"+19, +20)
	(define_split "*mov_sidesi_mem"+21, +22, +23, +24, +25, +26, +27)
	(define_split "*mov_sidesi_mem"+28, +29, +30): Use
	replace_equiv_address, not gen_rtx_MEM.
	* config/cris/cris.c (cris_mem_op): New match_operator function.
	(cris_notice_update_cc): Use replace_equiv_address, not
	gen_rtx_MEM.
	* config/cris/cris.h (PREDICATE_CODES): Add cris_mem_op.

2003-12-11  Eric Botcazou  <ebotcazou@libertysurf.fr>

	Backport from mainline:

	2003-12-07  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/13318
	* loop.c (express_from): Protect integer division from overflow.

2003-12-11  Eric Botcazou  <ebotcazou@libertysurf.fr>

	Backport from mainline:

	2003-12-07  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/13060
	* function.c (fixup_var_refs_1) [SUBREG]: Recognize even if a
	replacement already exists.  Fix again the whole insn if that fails.

2003-12-11  Eric Botcazou  <ebotcazou@libertysurf.fr>

	Backport from mainline:

	2003-12-07  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/12965
	* caller-save.c (save_call_clobbered_regs): Do not save/restore
	registers around no-return calls.

2003-12-10  Andrew Pinski  <pinskia@physics.uc.edu>

	* emit-rtl.c (copy_rtx_if_shared_1): Fix warning.

2003-12-10  Nathanael Nerode  <neroden@gcc.gnu.org>

	Backport from mainline (fixes unreported regression):
	* cpptrad.c (_cpp_scan_out_logical_line): Improve test for
	  whether directive begins at the beginning of a line.

2003-12-10  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/13354
	* config/sparc/sparc.c (sparc_output_mi_thunk): Load DELTA
	manually if one can do that with only one instruction.

2003-12-09  Kelley Cook  <kelleycook@wideopenwest.com>

	2003-06-04  Kelley Cook  <kelleycook@wideopenwest.com>
	PR optimization/4490
	* config/i386/i386.md: Don't use XFMode if TARGET_128BIT_LONG_DOUBLE.

2003-12-08  David Edelsohn  <edelsohn@gnu.org>
	    Graham Reed <greed@pobox.com>

	PR target/13150
	* collect2.c (GCC_OK_SYMBOL): Add support for AIX C_WEAKEXT.
	(GCC_UNDEF_SYMBOL): Same.

2003-12-08  Andrew Pinski  <pinskia@physics.uc.edu>

	PR middle-end/10060
	* emit-rtl.c (copy_rtx_if_shared): Split out into ...
	(copy_rtx_if_shared_1): here and optimize the last one
	in the sequence into tail-recursion.
	(reset_used_flags): Optimize the last one
	in the sequence into tail-recursion.

2003-12-07  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.c (rs6000_elf_section_type_flags): Don't
	set SECTION_WRITE on TARGET_RELOCATABLE.

2003-12-05  Andrew Pinski <pinskia@physics.uc.edu>

	PR driver/13211
	* gcc.c (execute) Increment execution_count when returning
	early because verbose_only_flag is true.

2003-12-05  Stuart Menefy <stuart.menefy@st.com>
	    J"orn Rennecke <joern.rennecke@superh.com>

	PR target/13302
	* sh.c (sh_build_builtin_va_list): Use (*lang_hooks.types.make_type).

2003-12-04  Andrew Pinski  <pinskia@physics.uc.edu>

	PR target/11322
	* config/sh/netbsd-elf.h (NO_PROFILE_COUNTERS): Define.

	PR target/12467
	* config/rs6000/altivec.md (altivec_vmsummbm): Fix typo.

2003-12-04  H.J. Lu  <hongjiu.lu@intel.com>

	* Makefile.in (stmp-fixinc): Don't bail out if SYSTEM_HEADER_DIR
	does not exist and it's the default sys-include directory.

2003-12-03  Mark Mitchell  <mark@codesourcery.com>

	* config/ia64/hpux.h (TARGET_HAVE_TLS): Define it to false.
	* config/ia64/ia64.h (TARGET_HAVE_TLS): Define it to true if
	HAVE_AS_TLS is true.
	* config/ia64/ia64.c (TARGET_HAVE_TLS): Do not define it.

2003-12-03  James E Wilson  <wilson@specifixinc.com>

       2003-11-29  James E Wilson  <wilson@specifixinc.com>
       * gcc.c (init_spec): Pass -lunwind to init_gcc_specs in eh_name
       instead of in shared_name.

2003-12-03 David Mosberger  <davidm@hpl.hp.com>

       2003-11-20 David Mosberger  <davidm@hpl.hp.com>
       * config/t-libunwind (LIB2ADDEH): Add unwind-c.c.
       (SHLIB_LC): Define.
       * unwind-libunwind.c (_Unwind_GetCFA): Implement.
       (_Unwind_GetBSP) [UNW_TARGET_IA64]: New function.

2003-12-03  Jakub Jelinek  <jakub@redhat.com>

	* expr.c (store_constructor): Only set RTX_UNCHANGING_P for
	read-only field if cleared is 0.

2003-12-03  Kean Johnston  <jkj@sco.com>

	PR 12969
	* fixinc/inclhack.def (AAB_svr4_replace_byteorder): Revert the
	change I made on 2003-08-11 that removes the mach lines.
	Restore them to the same list thats in the head, as per
	Nathanael Nerode's changes.
	* fixinc/fixincl.x: Regenerated
	* fixinc/tests/base/ansi/string.h: Fix test case

2003-12-03  James E Wilson  <wilson@specifixinc.com>

	2003-12-01  James E Wilson  <wilson@specifixinc.com>
	PR target/8407
	* config/ia64/ia64.c (ia64_function_arg): For single-reg HFA, call
	gen_rtx_REG to create new reg with argument mode.

2003-12-03  Josef Zlomek  <zlomekj@suse.cz>

	Backport from mainline

	2003-10-31  Josef Zlomek  <zlomekj@suse.cz>

		PR/10239
		* cfgrtl.c (delete_insn): Decrease LABEL_NUSES for all
		REG_LABEL notes.

	2003-10-31  Josef Zlomek  <zlomekj@suse.cz>

		PR/11640
		* cfgrtl.c (try_redirect_by_replacing_jump): Move jump
		immediatelly before BARRIER.

2003-12-01  Kaz Kojima  <kkojima@gcc.gnu.org>

	Backport from mainline

	2002-11-19  Kaz Kojima  <kkojima@gcc.gnu.org>

	* config.gcc (sh*-*-linux*): Add t-slibgcc-elf-ver and t-linux.
	to tmake_file.
	* config/sh/libgcc-glibc.ver: New file.

	Backport from mainline

	2003-10-08  Kaz Kojima  <kkojima@gcc.gnu.org>

	* config/sh/t-linux (SHLIB_LINK): Override to use a linker script
	libgcc_s.so.
	(SHLIB_INSTALL): Likewise.

2003-12-01  Roger Sayle  <roger@eyesopen.com>

	PR optimization/11634
	* recog.c (split_insn): Factor test of INSN_P and handling of
	set_noop_p out of here into the two callers.
	(split_all_insns): Add INSN_P test and set_noop_p handling here.
	If deleting a no-op set after reload that has a REG_UNUSED note,
	mark the basic block as changed and recalculate life information.
	(split_all_insns_noflow): Add INSN_P test and set_noop_p handling
	here.

2003-12-01  Zack Weinberg  <zack@codesourcery.com>

	PR 12505
	* configure.in: Check for system-provided 'uchar' type.
	* configure, config.in: Regenerate.
	* cpphash.h: Only typedef 'uchar' if the system doesn't.

2003-12-01  Ulrich Weigand  <uweigand@de.ibm.com>

	* unroll.c (find_splittable_givs): Add missing extend_value_for_giv.

2003-12-01  Eric Botcazou  <ebotcazou@libertysurf.fr>

	Backport from mainline:

	2003-11-27  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/13041
	* final.c (frame_pointer_needed): Fix comment.
	* reload1.c (reload): Decrease alignment of the frame
	pointer if it was used for register allocation.

2003-12-01  Eric Botcazou  <ebotcazou@libertysurf.fr>

	Backport from mainline:

	2003-11-27  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/12900
	* reg-stack (move_for_stack_reg): New prototype.  Return
	whether a control flow insn was deleted.
	(subst_stack_regs_pat): Likewise, using the information provided
	by move_for_stack_reg.
	(subst_stack_regs): Likewise, using the information provided
	by subst_stack_regs_pat.
	(convert_regs_1): Record whether a control flow insn was deleted,
	using the information provided by subst_stack_regs.  Purge dead
	edges only if a control flow insn was deleted.

2003-12-01  Gabriel Dos Reis <gdr@integrable-solutions.net>

	* doc/c-tree.texi (Function Bodies): Update HANDLER documentation.

2003-11-29  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("cmpint_di"): Fix incorrect instruction lengths.

2003-11-19  Alan Modra  <amodra@bigpond.net.au>

	Backport 2003-03-26  Alan Modra  <amodra@bigpond.net.au>
	* cppinit.c (init_standard_includes): Add both "translated" and
	non-translated header paths.

2003-11-18  Gerald Pfeifer  <gerald@pfeifer.com>

	Fix links in online manuals.
	* doc/invoke.texi (H8/300 Options): @xref to ld, not ld.info.

2003-11-17  Gerald Pfeifer  <gerald@pfeifer.com>

	* doc/invoke.texi (Warning Options): Simplify and clarify the
	description of -Wnonnull.

2003-11-14  Matthias Klose  <doko@debian.org>

	Backport from mainline

	2003-06-04  Jakub Jelinek  <jakub@redhat.com>

	* function.c (trampolines_created): New variable.
	(expand_function_end): Set it when doing INITIALIZE_TRAMPOLINE.
	* function.h (trampolines_created): Add.
	* config/s390/linux.h (ASM_FILE_END): Define.
	* config/alpha/linux-elf.h (ASM_FILE_END): Define.
	* config/m68k/linux.h (ASM_FILE_END): Define.
	* config/rs6000/linux.h (ASM_FILE_END): Define.
	* config/rs6000/linux64.h (ASM_FILE_END): Define.
	* config/sparc/linux.h (ASM_FILE_END): Define.
	* config/sparc/linux64.h (ASM_FILE_END): Define.
	* config/i386/i386.c (ix86_asm_file_end): Use SUBTARGET_FILE_END.
	* config/i386/linux.h (SUBTARGET_FILE_END): Define.
	* config/i386/linux64.h (SUBTARGET_FILE_END): Define.

	2003-06-05  Jakub Jelinek  <jakub@redhat.com>

	* mklibgcc.in: Propagate .note.GNU-stack section if needed into
	the .hidden assembly stubs.

2003-11-13  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/12926
	* expr.c (expand_assignment) [COMPONENT_REF]: Don't put
	the UNCHANGING_RTX_P flag on memory references to read-only
	components that are not addressable.

2003-11-12  Alexey Starovoytov  <alexey.starovoytov@sun.com>

	PR optimization/12953
	* c-objc-common.c (inline_forbidden_p): Added check for BUILT_IN
	before switch by FUNCTION_CODE.

2003-11-10  Waldek Hebisch  <hebisch@math.uni.wroc.pl>

	PR target/12865
	* config/sparc/sparc.c (sparc_initialize_trampoline): Call
	__enable_execute_stack only after writing onto the stack.
	(sparc64_initialize_trampoline): Likewise.

2003-11-08  Roger Sayle  <roger@eyesopen.com>

	Backport from mainline
	PR optimization/10467, PR optimization/11741
	* gcse.c (pre_insert_copy_insn): Tweak the logic for finding the
	appropriate set to match the code in hash_scan_insn.

2003-11-06  H.J. Lu <hongjiu.lu@intel.com>

	* cppinit.c (init_standard_includes): Updated.

	* Makefile.in (fixinc.sh): Updated.

	Backport from 3.4-branch

	2003-07-16  Daniel Jacobowitz  <drow@mvista.com>

	* gcc.c (STANDARD_STARTFILE_PREFIX): Remove unnecessary definition.
	(main): Remove unnecessary case.  Only use standard_startfile_prefix
	if native.

	2003-04-11 Alexandre Oliva  <aoliva@redhat.com>

	* Makefile.in (fixinc.sh): Pass BUILD_LIBERTY as LIBERTY to
	mkfixinc.sh.
	* fixinc/mkfixinc.sh (defs): Add LIBERTY.
	* configure.in (STMP_FIXINC, STMP_FIXPROTO): Don't disable on
	build != host sysrooted builds.
	* configure.in (SYSTEM_HEADER_DIR): Make sure it contains
	TARGET_SYSTEM_ROOT even on sysrooted natives.
	* configure: Rebuilt.

	2003-03-04  Daniel Jacobowitz  <drow@mvista.com>

	* configure.in: Don't always define TARGET_SYSTEM_ROOT.
	* configure: Regenerated.
	* gcc.c: Check whether TARGET_SYSTEM_ROOT is defined.

	2003-01-16  Daniel Jacobowitz  <drow@mvista.com>

	* Makefile.in (PREPROCESSOR_DEFINES): Add
	@TARGET_SYSTEM_ROOT_DEFINE@.
	* configure.in (PREFIX_INCLUDE_DIR): Don't define if $with_sysroot
	is specified or if building a cross compiler.
	(TARGET_SYSTEM_ROOT_DEFINE): Add TARGET_SYSTEM_ROOT_RELOCATABLE
	if the sysroot is under $exec_prefix.
	* configure: Regenerated.
	* cppdefault.h: Use native include paths if TARGET_SYSTEM_ROOT is
	defined.
	(struct default_include): Add add_sysroot field.
	(cpp_SYSROOT): Declare.
	* cppdefault.c (cpp_include_defaults): Fill in add_sysroot
	field.
	(cpp_SYSROOT): New variable.
	* cppinit.c (cpp_create_reader): Initialize
	CPP_OPTION (pfile, sysroot).
	(init_standard_includes): Handle add_sysroot.  Do not
	add unrelocated copies of relocated directories.
	(COMMAND_LINE_OPTIONS): Add -isysroot.
	(cpp_handle_option): Handle -isysroot.
	* cpplib.h (struct cpp_options): Add sysroot member.
	* gcc.c (The Specs Language): Update description of %I.
	(target_system_root_changed): New variable.
	(process_command): Conditionalize make_relative_prefix call
	on !VMS and TARGET_SYSTEM_ROOT_RELOCATABLE.  Set
	target_system_root_changed.
	(do_spec_1): Add -isysroot to %I.
	* doc/invoke.texi (Spec Files): Update description of %I.
	* doc/install.texi (--with-sysroot): Update comment about
	relocation.

	2002-10-19  Alexandre Oliva  <aoliva@redhat.com>
		    Angela Marie Thomas  <angela@releasedominatrix.com>
		    Brendan Kehoe  <brendan@zen.org>
		    Nick Clifton  <nickc@redhat.com>
		    Andrew Haley  <aph@redhat.com>

	* configure.in (--with-sysroot): New.  Don't inhibit libc if
	given.  AC_SUBST TARGET_SYSTEM_ROOT, TARGET_SYSTEM_ROOT_DEFINE
	and CROSS_SYSTEM_HEADER_DIR.
	* configure: Rebuilt.
	* Makefile.in (CROSS_SYSTEM_HEADER_DIR): Set in configure.
	(TARGET_SYSTEM_ROOT): New.
	(DRIVER_DEFINES): Define CROSS_INCLUDE_DIR from
	CROSS_SYSTEM_HEADER_DIR.
	(install-gcc-tooldir): New target.
	(stmp-fixinc): Do not create $(libsubdir), but rather bail out
	of SYSTEM_HEADER_DIR does not exist.
	(deduced.h, stmp-fixproto): Quote SYSTEM_HEADER_DIR properly.
	(install-mkheaders): Likewise.
	* gcc.c (target_system_root): New variable.
	(add_sysrooted_prefix): New function.
	(process_command): Recompute run-time target_system_root from
	gcc_exec_prefix, keeping it unchanged if the relocated sysroot
	does not exist.
	(do_spec_1): Process 'R' spec.
	(main): Add md_exec_prefix to exec_prefixes regardless of
	startfile_prefix_spec.  Use add_sysrooted_prefix for
	startfile_prefixes, and don't skip the default ones when cross
	compiling with sysroot enabled.  Removed unused case of
	non-absolute standard_startfile_prefix.
	* config/interix.h: Remove the only potential, yet disabled,
	occurrence of non-absolute (empty) standard_startfile_prefix.
	* config/sh/linux.h (LIB_SPEC): Add -rpath-link in non-static
	linking.
	* config/mips/linux.h (LIB_SPEC): Define as in sh/linux.h.
	* doc/install.texi (--with-sysroot): Document.
	(--with-headers, --with-libs): Deprecate.

2003-11-06  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390-protos.h (s390_output_dwarf_dtprel): Declare.
	* config/s390/s390.c (s390_output_dwarf_dtprel): New function.
	* config/s390/s390.h (ASM_OUTPUT_DWARF_DTPREL): Define.

2003-11-06  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_function_arg_pass_by_reference): Return
	true for all arguments larger than 8 bytes, as well as for all vector
	type arguments.
	* config/s390/s390.h (RETURN_IN_MEMORY): Likewise for return values.

2003-11-05  Roger Sayle  <roger@eyesopen.com>

	PR optimization/10339
	* builtins.c (expand_builtin_strcmp): Try to emit cmpstrsi insn
	directly instead of unsafely transforming call into a memcmp.
	(expand_builtin_strncmp): Likewise.

2003-11-03  Alexander Kabaev  <ak03@gte.com>

	* real.c (encode_ieee_single): Ensure proper promotion.

2003-11-04  H.J. Lu <hongjiu.lu@intel.com>

	Backport from 3.4-branch

	2003-07-13  Andreas Jaeger  <aj@suse.de>

	* config.gcc: Add pmmintrin.h for x86_64-*-*.

	2003-06-26  H.J. Lu  <hongjiu.lu@intel.com>

	* config.gcc (extra_headers): Add pmmintrin.h for i[34567]86-*-*.

	* config/i386/i386.c (override_options): Turn on MASK_SSE2
	for -mpni.
	(bdesc_2arg): Add PNI builtins with 2 args.
	(bdesc_1arg): Add PNI builtins with 1 arg.
	(ix86_init_mmx_sse_builtins): Handle PNI builtins.
	(ix86_expand_builtin): Likewise.

	* config/i386/i386.h (MASK_3DNOW, MASK_3DNOW_A,
	MASK_128BIT_LONG_DOUBLE, MASK_64BIT, MASK_MS_BITFIELD_LAYOUT,
	MASK_TLS_DIRECT_SEG_REFS): Renumbered.
	(TARGET_PNI): New.
	(TARGET_SWITCHES): Add -mpni and -mno-pni.
	(TARGET_CPU_CPP_BUILTINS): Defined __PNI__ for PNI.
	(ix86_builtins): Add PNI builtins.
	(config/i386/i386.md): Add PNI patterns.

	* config/i386/pmmintrin.h: New file.

	* config/i386/i386.c (override_options): Turn on MASK_SSE for
	-msse2.
	(MASK_SSE1): Removed.
	(MASK_SSE164): Removed.
	(MASK_SSE264): Removed.
	(bdesc_2arg): Replace MASK_SSE1 with MASK_SSE. Replace
	MASK_SSE164 with MASK_SSE | MASK_64BIT. Replace MASK_SSE264
	with MASK_SSE2 | MASK_64BIT.
	(bdesc_1arg): Likewise.
	(ix86_init_mmx_sse_builtins): Likewise.

	* config/i386/i386.h (TARGET_SSE): Remove MASK_SSE2.

	2003-06-20  H.J. Lu  <hongjiu.lu@intel.com>

	* doc/extend.texi: Document new builtin functions for Intel
	Prescott New Intrunctions.

	* doc/invoke.texi: Document new command-line options, -mpni and
	-mno-pni, for Intel Prescott New Intrunctions.

	2003-06-05  H.J. Lu  <hongjiu.lu@intel.com>

	* config.gcc (extra_headers): Add emmintrin.h for i[34567]86-*-*
	and x86_64-*-*.

	* config/i386/mmintrin.h: Update version and add alternate
	intrinsic names.
	* config/i386/xmmintrin.h: Likewise.

	* config/i386/xmmintrin.h: Include <emmintrin.h>. Move SSE2
	intrinsics to ...
	* config/i386/emmintrin.h: Here. New file.

2003-11-04  H.J. Lu  <hongjiu.lu@intel.com>

	Backport from 3.4-branch
	2003-04-25  H.J. Lu   <hjl@gnu.org>

	* config/ia64/ia64.c (ia64_expand_compare_and_swap): Add rmode
	for return mode.
	(ia64_expand_builtin): Set rmode to SImode for
	IA64_BUILTIN_BOOL_COMPARE_AND_SWAP_SI,
	IA64_BUILTIN_VAL_COMPARE_AND_SWAP_SI and
	IA64_BUILTIN_BOOL_COMPARE_AND_SWAP_DI. Set remode to DImode
	for IA64_BUILTIN_VAL_COMPARE_AND_SWAP_DI.

	2003-04-24  H.J. Lu  <hjl@gnu.org>

	* config/ia64/ia64.c (ia64_init_builtins): Add si_ftype_pdi_di_di
	for __sync_bool_compare_and_swap_di for int return type.

	* config/ia64/ia64intrin.h (__sync_bool_compare_and_swap_di):
	Change return type to int.
	(__sync_bool_compare_and_swap): Likewise.

2003-11-03  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>

	* doc/contrib.texi: Add Giovanni Bajo, Dara Hazeghi, Falk Hueffner,
	and Andrew Pinski.

2003-11-03  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* fixinc/inclhack.def (stdio_va_list): Allow tab before va_list.
	Merge two substitutions.
	* fixinc/fixincl.x: Regenerate.
	Fixes PR bootstrap/12666.

2003-10-28  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	PR target/11598
	PR libgcj/10610
	* config/rs6000/sysv4.h (PREFERRED_STACK_BOUNDARY): New macro.

2003-10-27  Falk Hueffner  <falk@debian.org>

	PR target/12654
	* config/alpha/alpha.c (alpha_emit_conditional_branch): Don't do
	comparison against constant by adjusting the argument except for
	EQ and NE.

2003-10-26  Ottavio Campana <ottavio@campana.vi.it>

	PR target/12690
	* config/i386/mmintrin.h (_mm_set1_pi8): Fix comment.

2003-10-25  Bruce Korb  <bkorb@gnu.org>

	* gcc/fixinc/tests/base/ansi/string.h:
	This fixes a result from a broken sed or a hand-edited output file.
	The '__GNUC__' wrappers were misplaced.

2003-10-25  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/12712
	* reg-stack.c (convert_regs_1): Create an arbitrary input stack
	if the block has no predecessors.
	(convert_regs_2): Document the problem with successors whose
	only predecessor is the block to be processed.
	(convert_regs): Don't create the arbitrary input stack here.

2003-10-22  David Taylor <dtaylor@emc.com>

	PR debug/12500
	* dbxout.c (dbxout_typedefs): Use COMPLETE_OR_VOID_TYPE_P.

2003-10-20  Zack Weinberg  <zack@codesourcery.com>

	* fixinc/inclhack.def (hpux11_snprintf): New edit.
	* fixinc/fixincl.x: Regenerate.
	* fixinc/tests/base/stdio.h: Add test for hpux11_snprintf.

2003-05-16  Jakub Jelinek  <jakub@redhat.com>

	* config/ia64/unwind-ia64.c (uw_update_reg_address): Handle
	.save XX, r0.

2003-10-19  Mark Mitchell  <mark@codesourcery.com>

	* doc/include/gcc-common.texi: Bump version number.
	* version.c (version_string): Reset to prerelease format.

2003-10-18  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/extend.texi: Fix typos.

2003-10-16  Release Manager

	* GCC 3.3.2 Released.

2003-10-14  Jason Merrill  <jason@redhat.com>

	PR c/11885
	* stor-layout.c (update_alignment_for_field): Packed non-bit-fields
	get byte alignment.

2003-10-14  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* fixinc/inclhack.def (alpha_pthread_gcc): New fix.
	* fixinc/fixincl.x: Regenerate.
	* fixinc/tests/base/pthread.h [ALPHA_PTHREAD_GCC_CHECK]: New
	testcase.
	Fixes PR bootstrap/9330.

2003-10-14  Steven Bosscher  <steven@gcc.gnu.org>

	PR target/11087
	Backport from gcc-3_3-rhl-branch and mainline.

	2003-07-17  Jakub Jelinek  <jakub@redhat.com>

	* loop.c (basic_induction_var): Check if convert_modes
	emitted any instructions. Remove them and return 0 if so.

2003-10-13  Matt Kraai <kraai@alumni.cmu.edu>

	PR target/11949
	Backport from mainline:

	2003-05-05  Aldy Hernandez  <aldyh@redhat.com>

	* testsuite/gcc.c-torture/compile/simd-6.c: New.
	* c-typeck.c (digest_init): Handle arrays of vector constants.

2003-10-11  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/12544
	* function.c (put_var_into_stack): Don't generate ADDRESSOFs
	for DECL_NONLOCAL decls.

2003-10-09  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/12510
	Backport from mainline:

	2003-09-08  Jakub Jelinek  <jakub@redhat.com>

	* toplev.c (rest_of_compilation): Call split_all_insns before
	regstack if optimizing but not scheduling after reload.

2003-10-09  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* fixinc/inclhack.def (stdio_va_list): Removed _ap fix.
	(irix_stdio_va_list): Don't require leading printf, IRIX 6.5.21
	introduced some multi-line prototypes.
	* fixinc/fixincl.x: Regenerate.
	Fixes PR libf2c/12263.

2003-10-08  Timo Kokkonen  <tjko@iki.fi>
	    Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR bootstrap/12490
	* scan-decls.c (MAX_EXTERN_C_BRACES): New preprocessor constant
	to define the size of the extern_C_braces array.  Set it to 200.
	(scan_decls): Abort when extern_C_braces_length is out-of-bounds.

2003-10-06  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/12215
	* cse.c (cse_set_around_loop): Emit the move at the beginning
	of the next basic block for trapping sets.

2003-10-06  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11637
	* combine.c (adjust_for_new_dest): New function to adjust the
	notes and LOG_LINKS when the dest of an insn has changed.
	(try_combine): Use it when deleting the first insn of a two-insn
	parallel or splitting a two-load parallel.

2003-10-04  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/t-m68hc11-gas (MULTILIB_MATCHES): m68hcs12 is
	identical to m68hc12 as far as libraries are concerned.

2003-10-04  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/12446
	* c-typeck.c (convert_for_assignment): Issue an error for
	array to pointer assignment after default conversion.
	(digest_init): Likewise.

2003-10-03  Gerald Pfeifer  <gerald@pfeifer.com>

	* doc/extend.texi (Function Attributes): Fix title of GNU C
	Preprocessor manual.
	(C++ Extensions): Fix reference to "Predefined Macros" in the
	GNU C Preprocessor manual.

2003-10-03  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>

	PR/11883
	* cfgloop.c (flow_loops_find): Fix handling of abnormal edges.

2003-10-02  Mark Mitchell  <mark@codesourcery.com>

	PR optimization/12180
	* c-objc-common.c (inline_forbidden_p): Do not permit inlining of
	functions containing calls to __builtin_next_arg.

2003-10-02  Josef Zlomek  <zlomekj@suse.cz>

	PR/12292
	* combine.c (make_field_assignment): Check whether rtx's code
	is CONST_INT before using INTVAL.

2003-10-02  Josef Zlomek  <zlomekj@suse.cz>

	Waldek Hebisch <hebisch@math.uni.wroc.pl>
	PR/12072
	* varasm.c (compare_constant): Fix thinko.

2003-10-01  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* aclocal.m4: Add hpux10* and hpux11.00 to /dev/zero blacklist.
	* configure: Rebuilt.

2003-10-01  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* aclocal.m4: Add ultrix* to /dev/zero blacklist.
	* configure: Rebuilt.

2003-10-01  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config.gcc (sparc-*-solaris2*): Handle Solaris 10 and up like
	Solaris 7-9.

	* fixinc/inclhack.def (solaris_widec): Replace solaris2.[0-5]* by
	wildcards which explicitly match micro versions.
	* fixinc/fixincl.x: Regenerate.

2003-10-01  Richard Henderson  <rth@redhat.com>

	* dwarf2out.c (expand_builtin_init_dwarf_reg_sizes): Honor
	DWARF_ALT_FRAME_RETURN_COLUMN.
	* unwind-dw2.c (dwarf_reg_size_table): Expand by one.
	(_Unwind_GetGR, _Unwind_SetGR): Validate lookup column.
	(uw_frame_state_for): Return end-of-stack for null return address.

	* config/alpha/alpha.c (alpha_sa_mask): Add r31 for eh_return.
	(alpha_expand_prologue): Store a zero for it.
	(alpha_expand_epilogue): Don't reload it.
	* config/alpha/alpha.h (DWARF_ALT_FRAME_RETURN_COLUMN): New.
	* config/alpha/linux.h (MD_FALLBACK_FRAME_STATE_FOR): Use column 64
	for the sigframe return address.

2003-10-01  Nick Clifton  <nickc@redhat.com>

	* Import this patch from mainline:

	2003-02-01  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* collect2.c (pexecute_pid): Rename to pid.
	(collect_wait, collect_execute, scan_prog_file, scan_libraries): Use
	pid.

2003-09-23  David S. Miller  <davem@redhat.com>

	* config/sparc/linux.h (LINK_GCC_C_SEQUENCE_SPEC): Undefine
	before redefining.
	* config/sparc/linux64.h (LINK_GCC_C_SEQUENCE_SPEC): Likewise.

2003-10-01  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11753
	* config/sparc/sparc.md (length attribute) [fcc branch]: Add 1 to
	the length in the non-V9 case.

2003-09-27  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/12340
	* loop.h (struct induction): Document the new semantics
	of the 'same' field for bivs.
	* unroll.c (biv_total_increment): Don't count the same
	biv increment several times.
	(loop_iterations) [GENERAL_INDUCT]: Likewise.

2003-09-26  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR bootstrap/12358
	* pa.c (output_bvb): Fix typo.

2003-09-24  Alexandre Oliva  <aoliva@redhat.com>

	* cpplib.c (do_pragma): Reintroduce cb_line_change call in the
	code path that calls a handler.

2003-09-23  Geoffrey Keating  <geoffk@apple.com>

	* config/t-darwin (crt2.o): Add stmp-int-hdrs to dependencies.

	* config/rs6000/rs6000.c (function_arg_pass_by_reference): Don't
	pass zero-size arrays by reference.
	(rs6000_va_arg): Likewise.

2003-09-22	Joel Sherrill <joel@oarcorp.com>

	* combine.c, config/mips/t-elf, config/c4x/rtems.h: Revert patches
	which should not have been committed with other RTEMS changes.

2003-09-22  Olivier Hainque  <hainque@act-europe.fr>

	PR target/9786
	* reg-stack.c (convert_regs_1): Purge possible dead eh edges
	after potential deletion of trapping insn. Avoids later ICE
	from call to fixup_abnormal_edges.
	(convert_regs_2): Stack the current block successors before
	processing this block, that is, before the potential deletion of
	dead edges by convert_regs_1, because these edges have been used
	to initialize the predecessors count.

2003-09-21  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/12301
	* reorg.c (stop_search_p): Return 1 for insns that can
	throw internally.

2003-09-19  Joel Sherrill <joel@oarcorp.com>

	* config/m68k/t-m68kbare, config/m68k/t-rtems: Change 68681 to
	68881.

2003-09-19  Ralf Corsepius <corsepiu@faw.uni-ulm.de>

	* config/m68k/t-rtems (m68k-*-rtems*): New.
	* config.gcc: Use config/m68k/t-rtems.

2003-09-19  Ralf Corsepius <corsepiu@faw.uni-ulm.de>

	* config/mips/t-rtems: New.
	* config.gcc (mips*-*-rtems*): Use config/mips/t-rtems.

2003-09-19  T. Papadopoulo <Theodore.Papadopoulo@sophia.inria.fr>
	    Eric Botcazou <ebotcazou@libertysurf.fr>

	PR target/12166
	* config/sparc/sol2-c1.asm (start): Set __Argv if GCRT1.

2003-09-18  Mark Mitchell  <mark@codesourcery.com>

	PR target/11184
	* builtins.c (expand_builtin_apply): Use convert_memory_address
	before returning the value.

2003-09-17  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* configure.in (gcc_cv_as_hidden): Only disable if no GNU ld
	detected.
	* configure: Regenerate.
	Fixes PR target/12248.

2003-09-17  Richard Henderson  <rth@redhat.com>

	* config/alpha/alpha.c (alpha_expand_mov): Do gen_movdi_er_maybe_g
	always during initial code generation.
	* config/alpha/alpha.md (movdi_er_maybe_g): Don't conditionalize
	on flag_inline_functions.

2003-09-17  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11646
	* cfgrtl.c (purge_dead_edges) [JUMP_INSN]: Rematerialize the
	EDGE_ABNORMAL flag for EH edges.
	* toplev.c (rest_of_compilation): Delete unreachable blocks
	if dead edges were purged after the first CSE pass.

2003-09-16  Jakub Jelinek  <jakub@redhat.com>

	* config/linux.h (LINK_GCC_C_SEQUENCE_SPEC): Define.
	* config/alpha/linux.h (LINK_GCC_C_SEQUENCE_SPEC): Define.
	* config/arm/linux-elf.h (LINK_GCC_C_SEQUENCE_SPEC): Define.
	* config/rs6000/linux.h (LINK_GCC_C_SEQUENCE_SPEC): Define.
	* config/rs6000/linux64.h (LINK_GCC_C_SEQUENCE_SPEC): Define.
	* config/sh/linux.h (LINK_GCC_C_SEQUENCE_SPEC): Define.
	* config/sparc/linux.h (LINK_GCC_C_SEQUENCE_SPEC): Define.
	* config/sparc/linux64.h (LINK_GCC_C_SEQUENCE_SPEC): Define.

2003-09-15  Alexandre Oliva  <aoliva@redhat.com>

	* cpplib.c (do_pragma): Remove unnecessary cb_line_change.

2003-09-14  Alexandre Oliva  <aoliva@redhat.com>

	* cppmain.c (cb_line_change): Revert 2003-08-04's change.
	* c-lex.c (cb_line_change): Skip line changing whenever
	cppmain.c would.

2003-09-11  Alexandre Oliva  <aoliva@redhat.com>

	PR fortran/11522
	* dwarf2out.c (gen_inlined_subroutine_die): Emit abstract function
	for ultimate origin even if block is abstract.

2003-09-10  Martin Husemann  <martin@duskware.de>

	PR target/11965
	* config/sparc/sparc.c (sparc_v8plus_shift): Protect against
	constants greater than 63.
	* config/sparc/sparc.md (ashlsi3, ashrsi3, lshrsi3): Protect
	against constants greater than 31.
	(*ashldi3_sp64, *ashrdi3_sp64, *lshrdi3_sp64): Protect against
	constants greater than 63.

2003-09-09  Richard Henderson  <rth@redhat.com>

	PR target/12224:
	* config/ia64/ia64.c (ia64_expand_move): Properly truncate
	result when op0 is SImode.

2003-09-09  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* configure.in (gcc_cv_as_ix86_cmov_sun_syntax): Check if
	assembler supports Sun syntax for cmov.
	* configure: Regenerate.
	* config.in: Li{ewise.
	* config/i386/i386.c: Rename CMOV_SUN_AS_SYNTAX to
	HAVE_AS_IX86_CMOV_SUN_SYNTAX.
	* config/i386/sol2.h (CMOV_SUN_AS_SYNTAX): Remove.
	Fixes PR target/12101.

2003-09-09  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* configure.in (gcc_cv_as_hidden): Disable unless using GNU ld.
	* configure: Regenerate.

2003-09-08  Mark Mitchell  <mark@codesourcery.com>

	* mklibgcc.in (libcc.a): Depend on stmp-dirs.
	(libgov.a): Likewise.
	(libgcc_eh.a): Likewise.

2003-09-07  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/11689
	* config/i386/i386.c (memory_address_length): Fix computation when
	the base is esp or ebp.

2003-09-07  Mark Mitchell  <mark@codesourcery.com>

	PR c++/11852
	* varasm.c (initializer_constant_valid_p): Correct logic for
	CONSTRUCTORs.

Sun Sep  7 14:53:36 CEST 2003  Jan Hubicka  <jh@suse.cz>

	* cfgcleanup.c (try_simplify_condjump): Fix again the preivous patch.

2003-09-07  Christian Ehrhardt  <ehrhardt@mathematik.uni-ulm.de>

	PR optimization/11662
	Backport from mainline:

	2003-07-10  Denis Chertykov  <denisc@overta.ru>
		    Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>

	* combine.c (gen_binary): Handle the CLOBBER rtx and
	don't build a binary operation with it.

Sat Sep  6 23:16:35 CEST 2003  Jan Hubicka  <jh@suse.cz>

	* cfgcleanup.c (try_simplify_condjump): Fix my previous patch.

	PR target/12070
	* calls.c (emit_library_call_value_1): Fix saving of BLKmode arguments.

	PR opt/12082
	* cfgcleanup.c (try_simplify_condjump): Avoid unreachable code warning.

2003-09-06  Steven Bosscher  <steven@gcc.gnu.org>

	PR c/9862
	* c-decl.c (c_expand_body): Move return warning from here...
	(finish_function): ...to here.

2003-09-05  Jan Hubicka  <jh@suse.cz>

	PR target/8869
	* expr.c (convert_modes): Deal properly with integer to vector
	constant conversion.

2003-09-05  Andrew Pinski <pinskia@physics.uc.edu>

	PR c/10962
	* c-decl.c (field_decl_cmp): Add back function.
	(finish_struct): Sort fields if number greater than 15
	and no anymous structs/unions.

2003-09-04  Jakub Jelinek  <jakub@redhat.com>

	* config/ia64/libgcc-ia64.ver: Export _Unwind_GetBSP@@GCC_3.3.2.
	* config/ia64/unwind-ia64.c (_Unwind_GetBSP): New function.
	* unwind.h (_Unwind_GetBSP): New prototype.
	* libgcc-std.ver: Add empty GCC_3.3.2 version.
	* mkmap-symver.awk: For symbol versions with no exported symbols,
	don't put anything into version script, just change all symbol
	versions which inherit from it to inherit from its ancestor.

2003-09-02  Kazuhiro Inaoka  <inaoka.kazuhiro@renesas.com>

	This is a fix for PR 10988:
	* m32r.c (m32r_print_operand): Correct comment.
	(m32r_expand_block_move): Correct the handling of leftover/small
	blocks.
	(m32r_block_small_immediate_operand): New predicate.
	* m32r.md (movstrsi_small_internal): New pattern.
	* m32r.h (PREDICATE_CODES): Add m32r_block_small_immediate_operand.
	* m32r-protos.h: Add prototype for m32r_block_small_immediate_operand.

2003-08-25  Richard Henderson  <rth@redhat.com>

	* config/i386.i386.c (ix86_return_in_memory): Reformat.  Return true
	for 16-byte vector modes if sse not enabled; warn for abi change.
	(ix86_value_regno): Only return xmm0 for 16-byte vector types.

2003-08-25  Zack Weinberg  <zack@codesourcery.com>

	* config.gcc (hppa*-*-hpux11*, ia64*-*-hpux*): Remove
	commented-out logic to use DCE threads (if present), add
	support for POSIX threads.
	* config/ia64/hpux.h: Define CPP_SPEC to set appropriate
	#defines for -pthread.  Add -lpthread to LIB_SPEC when
	-pthread.  In both cases take -mt as a synonym for -pthread
	for acc compatibility.
	Define GTHREAD_USE_WEAK to 0.
	* config/pa/pa-hpux11.h: Likewise for CPP_SPEC and LIB_SPEC.
	Remove old logic for DCE threads from LIB_SPEC.
	* config/pa/pa64-hpux.h: Define GTHREAD_USE_WEAK to 0.

2003-08-25  Ulrich Weigand  <uweigand@de.ibm.com>

	* combine.c (distribute_notes): Handle REG_ALWAYS_RETURN.

2003-08-23  Jakub Jelinek  <jakub@redhat.com>

	* c-decl.c (pushdecl): Only put decls which finish_struct will do
	something about onto incomplete chain.
	(finish_struct): If not removing type from incomplete
	list, update prev.

2003-08-23  Alexandre Oliva  <aoliva@redhat.com>

	* cppmain.c (cb_line_change): Don't skip line changing while
	parsing macro arguments in the top-level context.

2003-08-22  Mark Mitchell  <mark@codesourcery.com>

	* config/ia64/hpux.h (SUPPORTS_INIT_PRIORITY): Define to 0.

	* config/ia64/ia64.c (ia64_output_mi_thunk): Support ILP32 mode.

2003-08-21  Kazu Hirata  <kazu@cs.umass.edu>

	PR target/11805
	* config/h8300/h8300.md (two anonymous patterns): Remove.

2003-08-20  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* stmt.c (expand_asm_operands): Avoid string concatenation.
	* tree.c (default_flag_random_seed): Avoid ISO C definition.
	* varasm.c (output_constant_def): Delete unused variable.

2003-08-18  Matt Kraai  <kraai@alumni.cmu.edu>

	PR c/11207
	* c-typeck.c (set_init_index): Check for negative index.

2003-08-14  Mark Mitchell  <mark@codesourcery.com>

	* version.c (version_string): Use "prerelease" not "experimental".

2003-08-11  James E Wilson  <wilson@tuliptree.org>

	PR optimization/11319
	PR target/10021
	* alias.c (find_base_value, case REG): Return 0 not src if no base
	found.

2003-08-11  Kean Johnston  <jkj@sco.com>

	* fixinc/inclhack.def (sco_math): Updated test text and select trigger
	according to bkorb's review.
	* fixinc/inclhack.def (sco_regset): Ditto.
	* fixinc/inclhack.def (AAB_svr4_replace_byteorder): Remove all mach
	lines so that this file is unconditionally replaced.
	* fixinc/inclhack.def (sco_string): Use ansi/string.h as the first file
	to check so that the Ultrix string.h check doesnt overwrite the test
	case with its replacement text.
	* fixinc/fixincl.x: Regenerated
	* fixinc/tests/base/math.h: Updated sco_math result text
	* fixinc/tests/base/ansi/string.h: New file.
	* fixinc/tests/base/sys/regset.h: Compacted result text to fewer lines.

2003-08-11  Dale Johannesen  <dalej@apple.com>
	* config/rs6000/rs6000.md (ctrsi, ctrdi):  Reenable handling of
	decrement-and-branch farther away than 32 bits.

2003-08-10  Zack Weinberg  <zack@codesourcery.com>

	Backport the following changes from mainline:

    2003-05-08  David Mosberger <davidm@hpl.hp.com>

	* unwind-libunwind.c (_Unwind_FindEnclosingFunction): New.

    2003-04-03  Richard Henderson  <rth@redhat.com>

	* unwind-libunwind.c (_Unwind_GetCFA): New.

    2003-03-27  David Mosberger <davidm@hpl.hp.com>

	* unwind-libunwind.c (uw_frame_state_for): Adjust for libunwind
	v0.9 API change: replace read of UNW_REG_HANDLER with
	unw_get_proc_info().
	(_Unwind_GetLanguageSpecificData): Replace read of UNW_REG_LSDA
	with unw_get_proc_info().
	(_Unwind_GetRegionStart): Replace UNW_REG_PROC_START with
	unw_get_proc_info().

    2003-03-13  Nathanael Nerode  <neroden@gcc.gnu.org>

	* unwind-libunwind.c: Replace "GNU CC" with "GCC".

    2002-10-02  David Mosberger-Tang  <David.Mosberger@acm.org>

	* config/t-libunwind: Mention unwind-sjlj.c.
	* unwind-libunwind.c: Change #ifdef __USING_LIBUNWIND_EXCEPTIONS__
	to #ifndef __USING_SJLJ_EXCEPTIONS__.

	* configure.in: Move sjlj-exceptions and --enable-libunwind-exceptions
	before inclusion of config.gcc, but after configuring the compiler etc.
	Determine default value for --enable-libunwind-exceptions based on
	whether the host has a libunwind library (not guaranteed to be correct,
	but it's a reasonable first guess and can always be overridden with an
	explicit --enable/disable-libunwind-exceptions.
	* config.gcc: For target ia64*-*-linux*, mention t-libunwind as a
	tmake_file when $use_libunwind_exceptions is enabled.
	* Makefile.in: Update comment: LIB2ADDEH is updated not just by
	ia64 (e.g., config/t-linux also updates it).
	* gcc.c (init_spec) [USE_LIBUNWIND_EXCEPTIONS]: Mention -lunwind
	along with the shared version of libgcc since the latter requires
	the former.

	* unwind-libunwind.c: New file.
	* config/t-libunwind: Ditto.

2003-08-10  Richard Henderson  <rth@redhat.com>

	PR target/11693
	* config/ia64/ia64.c (ia64_emit_nops): Skip L slots when
	padding before inline assembly.

2003-08-10  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR c++/11712
	* pa-hpux.h, pa-hpux10.h, pa-hpux11.h (TARGET_OS_CPP_BUILTINS): Define
	__STDC_EXT__ when using C++ dialect.

2003-08-08  Kean Johnston  <jkj@sco.com>

	PR target/9877
	PR target/8336
	* config.gcc (sco3.2v5*): Use elfos.h and dbxelf.h in tm_file;
	Eliminate need for t-sco5gas target fragment.
	No longer build crt{begin,end}S.o, that were used for COFF support.
	* tlink.c (recompile_files): Add missing = in putenv() calls.
	* unwind-dw2.c (_Unwind_GetCFA): Correct return cast.
	* config/i386/sco5.h: Major overhaul to remove all COFF support
	* config/i386/t-sco5: Multilib for PIC support
	* config/i386/t-sco5gas: Remove
	* config/i386/i386.c: Check value as well as presence of
	SUPPORTS_ONE_ONLY
	* doc/install.texi: Update for modern SCO instructions
	* fixinc/check.tpl: Allow user to specify diff program for make check
	* fixinc/inclhack.def: Fix several SCO header files, namely string.h,
	math.h, sys/byteorder.h and sys/regset.h.
	* fixinc/fixincl.x: Regenerate
	* fixinc/tests/base/math.h: Update
	* fixinc/tests/base/sys/byteorder.h: Update
	* fixinc/tests/base/string.h: Added
	* fixinc/tests/base/sys/regset.h: Added
	* testsuite/gcc.dg/nest.c: Allow failure on SCO (-pg not supported)

2003-08-08  Roger Sayle  <roger@eyesopen.com>

	PR c/11370
	* calls.c (emit_call_1): Don't bother popping the arguments off of
	the stack after a noreturn function call;  The adjustment is dead.
	(expand_call): Likewise.

2003-08-08  SUGIOKA Toshinobu  <sugioka@itonet.co.jp>

	* config.gcc: Do not override sh/t-linux with sh/t-le.

2003-08-08  Kaz Kojima  <kkojima@gcc.gnu.org>

	* config/sh/linux.h (SUBTARGET_LINK_SPEC): Don't set rpath.
	(LIB_SPEC): Set -lpthread always when -pthread set.  Set -lieee
	when -mieee-fp set and -shared not set.

2003-08-08  Richard Henderson  <rth@redhat.com>

	PR target/11535
	* config/ia64/ia64.c (ia64_initial_elimination_offset): Remove
	RETURN_ADDRESS_POINTER_REGNUM.
	(ia64_expand_prologue): Don't frob it.
	(ia64_output_function_epilogue): Likewise.
	(ia64_return_addr_rtx): New.
	(ia64_split_return_addr_rtx): New.
	* config/ia64/ia64-protos.h: Update.
	* config/ia64/ia64.h (FIRST_PSEUDO_REGISTER): Decrement.
	(RETURN_ADDRESS_POINTER_REGNUM): Remove.
	(GENERAL_REGNO_P): Don't check it.
	(AR_*_REGNUM): Renumber.
	(FIXED_REGISTERS): Remove RETURN_ADDRESS_POINTER_REGNUM.
	(CALL_USED_REGISTERS, CALL_REALLY_USED_REGISTERS): Likewise.
	(REG_ALLOC_ORDER, REG_CLASS_CONTENTS): Likewise.
	(ELIMINABLE_REGS, REGISTER_NAMES): Likewise.
	(RETURN_ADDR_RTX): Use ia64_return_addr_rtx.
	* config/ia64/ia64.md (UNSPEC_RET_ADDR): New.
	(movdi_ret_addr): New.

2003-08-03  Geoffrey Keating  <geoffk@apple.com>

	PR 11709
	* varasm.c (output_constant_def_contents): Use
	ASM_DECLARE_CONSTANT_NAME if defined.
	* doc/tm.texi (Label Output): Document ASM_DECLARE_CONSTANT_NAME.
	* config/darwin.h (ASM_DECLARE_OBJECT_NAME): Ensure zero-sized
	objects get at least one byte to prevent assembler problems.
	(ASM_DECLARE_CONSTANT_NAME): New.

2003-08-07  Mark Mitchell  <mark@codesourcery.com>

	* version.c (version_string): Reset to prerelease.
	* doc/include/gcc-common.texi: Update version.

2003-08-04  Release Manager

	* GCC 3.3.1 Released.

2003-08-04  Release Manager

	* GCC 3.3.1 Released.

2003-08-03  Neil Booth  <neil@daikokuya.co.uk>

	PR preprocessor/11534
	* cppexp.c (parse_defined): Warn only if -pedantic.

2003-08-03  Mark Mitchell  <mark@codesourcery.com>

	* Makefile.in (ORDINARY_FLAGS_TO_PASS): Pass AR.

	* Makefile.in (STAGE2_FLAGS_TO_PASS): Pass AR_FOR_TARGET and
	RANLIB_FOR_TARGET.
	(stage1_build): Likewise.

2003-08-03  Jan Hubicka  <jh@suse.cz>

	PR 10510
	* config/pa/pa.h (MAYBE_FP_REG_CLASS_P): New.
	(SECONDARY_MEMORY_NEEDED): Use it.

2003-08-01  Geoffrey Keating  <geoffk@apple.com>

	PR 11709 (partial fix)
	* config/rs6000/rs6000.c (rs6000_output_function_epilogue): Don't
	insert a label at the end of an function under Mach-O.

	PR 11313
	* c-pragma.c (maybe_apply_pragma_weak): Don't get DECL_ASSEMBLER_NAME
	when it's not needed.

2003-07-29  Richard Henderson  <rth@redhat.com>

	PR target/10681

	2003-06-27  J"orn Rennecke <joern.rennecke@superh.com>
	* flow.c (propagate_one_insn): Use proper test for a register
	being part of the return value.

	2003-06-26  Richard Henderson  <rth@redhat.com>
	* flow.c (propagate_one_insn): Preserve live-at-end registers
	across tail calls.

	2003-06-26  Richard Henderson  <rth@redhat.com>
	* config/ia64/ia64.c (ia64_expand_call): Don't add ar.pfs for sibcalls.
	(ia64_split_call): Only load descriptor for GP register inputs.
	(ia64_expand_epilogue): Check current_frame_info.mask not
	current_function_is_leaf to restore ar.pfs.

2003-07-26  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Testing): Adjust required versions of DejaGnu.

2003-07-24  Aldy Hernandez  <aldyh@redhat.com>

	Backport the folling patch.

	2003-04-01  Aldy Hernandez  <aldyh@redhat.com>

	PR/8878
	* expr.c (expand_expr): Handle VECTOR_CST.
	(const_vector_from_tree): New.

	* varasm.c (output_constant): Handle VECTOR_CST.

	* c-typeck.c (digest_init): Build a vector constant from a
	VECTOR_TYPE.

2003-07-23  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR target/11607 and PR target/11516
	* pa.md (extzv, extv, insv): Revert latter half of last patch.

2003-07-23  Mark Mitchell  <mark@codesourcery.com>

	PR optimization/10679
	* tree-inline.c (inlinable_function_p): Honor MIN_INLINE_INSNS.

2003-07-22  Bob Wilson  <bob.wilson@acm.org>

	* unwind-c.c (PERSONALITY_FUNCTION): Delete duplicate define.

2003-07-23  Dave Fluri  <dave.fluri@onlink.net>

	* doc/extend.texi: Fixes to spelling, grammar, and diction.

2003-07-21  H.J. Lu <hongjiu.lu@intel.com>

	PR optimization/11599
	* config/ia64/ia64.md (prefetch): Support predicate.

2003-07-17  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11536
	* unroll.c (loop_iterations): Do not replace a register holding
	the final value by its equivalent before the loop if it is not
	invariant.

2003-07-21  Ben Elliston  <bje@wasabisystems.com>

	* doc/invoke.texi (V850 Options): Spelling fixes.

2003-07-21  Lisa M. Goldstein  <opus@gnu.org>

	* doc/invoke.texi: Fixes to style, grammar and diction.

2003-07-20  Mark Mitchell  <mark@codesourcery.com>

	PR debug/11279
	* dwarf2out.c (gen_enumeration_type_die): Remember that
	enumerators can be unsigned.

2003-07-19  Kelley Cook  <kelleycook@wideopenwest.com>

	* c-tree.texi: Backport changes from mainline.
	* c-tree.texi: Ditto.
	* collect2.texi: Ditto.
	* cpp.texi: Ditto.
	* cppopts.texi: Ditto.
	* extend.texi: Ditto.
	* fragments.texi: Ditto.
	* headerdirs.texi: Ditto.
	* install.texi: Ditto.
	* invoke.texi: Ditto.
	* md.texi: Ditto.
	* portability.texi: Ditto.
	* rtl.texi: Ditto.
	* sourcebuild.texi: Ditto.
	* trouble.texi: Ditto.

2003-07-19  Kelley Cook  <kelleycook@wideopenwest.com>

	PR optimization/4490
	* doc/invoke.texi (m96bit-long-double, m128bit-long-double):  Reword
	documentation to accurately reflect what these options do.

2003-07-18  Richard Henderson  <rth@redhat.com>
	    David S. Miller  <davem@redhat.com>

	PR target/11556
	* optabs.c (prepare_operand): Fail gracefully instead of abort
	if the predicate doesn't satisfy.
	(gen_cond_trap): Allow prepare_operand to fail.
	Pass correct opnum argument to prepare_operand.

2003-07-18  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11083
	* toplev.c (rest_of_compilation): Delete unreachable blocks
	if dead edges were purged after the addressof pass.

2003-07-17  Mark Mitchell  <mark@codesourcery.com>

	PR optimization/11557
	* calls.c (flags_from_decl_or_type): Do not set ECF_LIBCALL_BLOCK
	unless we know which function is being called.

2003-07-17  Nathanael Nerode  <neroden@gcc.gnu.org>

	PR bootstrap/11043
	* config/arc/t-arc: Replace bogus references to "x-crtinit.o",
	"x-crtfini.o" with "crtinit.o", "crtfini.o".

2003-07-17  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR other/11466
	* doc/invoke.texi (SPARC Options): Document "-mlittle-endian"
	and its restrictions for the SPARC64 port.

	Backport from mainline:
	2003-06-13  Florian Weimer  <fw@deneb.enyo.de>

	* doc/invoke.texi (SPARC Options): Document "-mimpure-text".

2003-07-17  Eric Botcazou <ebotcazou@libertysurf.fr>
	    Phil Edwards <phil@jaj.com>

	* doc/install.texi (*-*-solaris2*): Document the step-by-step
	procedure to bootstrap and install.
	Document the preference for the legacy Sun tools in /usr/bin
	over the POSIX tools in /usr/xpg4/bin for the build process.

2003-07-16  Richard Henderson  <rth@redhat.com>

	PR target/10907
	* config/ia64/ia64.c (ia64_epilogue_uses): GP is live at end
	even with !TARGET_CONST_GP.
	(ia64_function_ok_for_sibcall): Reject non-local functions.

2003-07-15  Geoffrey Keating  <geoffk@apple.com>

	* config/darwin.c (machopic_select_section): Use decl_readonly_section
	to do most of the work.

2003-07-15  David S. Miller  <davem@redhat.com>

	* config/sparc/sparc.c (sparc_nonflat_function_epilogue): Only
	emit nop if the last real insn is CALL_INSN.

2003-07-15  Loren James Rittle  <ljrittle@acm.org>

	* config/i386/freebsd.h (SET_ASM_OP): Remove.
	(SUBTARGET_OVERRIDE_OPTIONS): Handle TARGET_64BIT case.
	(ASM_COMMENT_START, ASM_APP_ON, ASM_APP_OFF, DBX_REGISTER_NUMBER
	 MCOUNT_NAME, SIZE_TYPE, PTRDIFF_TYPE, WCHAR_TYPE_SIZE): Whitespace.

2003-07-15  Mark Mitchell  <mark@codesourcery.com>

	PR debug/11473
	* dbxout.c (dbxout_type): Use TYPE_SIZE to determine the sizes of
	base classes.

2003-07-15  James A. Morrison  <ja2morri@student.math.uwaterloo.ca>

	* doc/include/texinfo.tex: Upgrade to texinfo 4.6.

2003-07-15  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11320
	* sched-int.h (struct deps) [reg_conditional_sets]: New field.
	(struct sched_info) [compute_jump_reg_dependencies]: New prototype.
	* sched-deps.c (sched_analyze_insn) [JUMP_INSN]: Update call to
	current_sched_info->compute_jump_reg_dependencies. Record which
	registers are used and which registers are set by the jump.
	Clear deps->reg_conditional_sets after a barrier.
	Set deps->reg_conditional_sets if the insn is a COND_EXEC.
	Clear deps->reg_conditional_sets if the insn is not a COND_EXEC.
	(init_deps): Initialize reg_conditional_sets.
	(free_deps): Clear reg_conditional_sets.
	* sched-ebb.c (compute_jump_reg_dependencies): New prototype.
	Mark registers live on entry of the fallthrough block and conditionally
	set as set by the jump. Mark registers live on entry of non-fallthrough
	blocks as used by the jump.
	* sched-rgn.c (compute_jump_reg_dependencies): New prototype.
	Mark new parameters as unused.

2003-07-14  Mark Mitchell  <mark@codesourcery.com>

	PR debug/11098
	* integrate.c (copy_decl_for_inlining): Do not mark copied decls
	as DECL_ABSTRACT.

2003-07-14  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	PR optimization/11440
	* gcse.c (try_replace_reg): Don't attach notes to ZERO_EXTRACT or
	SIGN_EXTRACT SETs.

2003-07-13  Aaron W. LaFramboise  <awlaframboise@aol.com>

	* config/i386/gthr-win32.c (__GTHREAD_HIDE_WIN32API): Define to 1.

2003-07-13  Roger Sayle  <roger@eyesopen.com>

	PR optimization/11059
	* expr.c (can_store_by_pieces): Return true if length is zero.
	(store_by_pieces): Do nothing if length is zero.
	(clear_by_pieces): Do nothing if length is zero.
	(clear_storage): Do nothing if length is zero.
	(store_constructor): Simplify code when size is zero, or the
	target has already been cleared.  This avoids emitting a
	blockage instruction when initializing empty structures.

2003-07-13  Richard Henderson  <rth@redhat.com>

	* libgcc-std.ver (GCC_3.3.1): Export __gcc_personality_sj0,
	__gcc_personality_v0.

2003-07-11  Dara Hazeghi  <dhazeghi@yahoo.com>

	PR optimization/10877
	* doc/install.tex: Update required binutils for i?86-*-linux*

2003-07-11  Ben Elliston  <bje@redhat.com>

	PR c++/1607
	* doc/extend.texi (Function Attributes): Document the effect of
	the C++ "this" parameter on the counting of arguments for the
	"format" and "format_arg" attributes.

2003-07-11  Danny Smith  <dannysmith@users.sourceforge.net>

	Backport from mainline.

	2003-05-13  Richard Henderson  <rth@redhat.com>

	* c-decl.c (duplicate_decls): Re-invoke make_decl_rtl if
	the old decl had instantiated DECL_RTL.

	2003-05-21  Danny Smith  <dannysmitx@users.sourceforge.net>

	PR c++/9738
	* config/i386/winnt.c (i386_pe_encode_section_info): Enable
	even if not first.

	2003-07-04  Danny Smith  <dannysmith@users.sourceforge.net>

	PR c++/5287, PR c++/7910, PR c++/11021
	* config/i386/winnt.c (ix86_handle_dll_attribute): Don't add
	dllimport attribute if function is defined at declaration, but
	report error instead. Likewise for dllimport'd variable
	definitions.  Set implicit TREE_PUBLIC for dllimport'd variables
	declared within functions, Report error if dllimport or dllexport
	symbol is not global.
	(i386_pe_dllimport_p): Ignore dllimport attribute of functions
	if defined after declaration or if inlined. Don't allow definition
	of static data members of C++ classes. Don't dllimport virtual
	methods.
	(i386_pe_mark_dllexport): Warn about inconsistent dll attributes.
	(i386_pe_mark_dllimport): Remove unnecessary checks.
	(i386_pe_encode_section_info): Warn if the dllimport attribute
	and symbol prefix have been instantiated and then overridden.

	* doc/extend.texi: Document dllimport and dllexport attributes.

2003-07-10  James E Wilson  <wilson@tuliptree.org>

	PR optimization/9745
	* loop.c (loop_iv_add_mult_emit_before): Call loop_regs_update before
	loop_insn_emit_before.
	(loop_iv_add_mult_sink, loop_iv_add_mult_hoist): Likewise.

2003-07-10  Dara Hazeghi  <dhazeghi@yahoo.com>

	PR bootstrap/10758
	* doc/install.texi: Document requirements for ia64-*-hpux* target.

2003-07-09  Mark Mitchell  <mark@codesourcery.com>

	PR c++/10032
	* doc/invoke.texi (C++ Dialect Options): Change documentation of
	-fpermissive.

2003-07-10  Matt Kraai  <kraai@alumni.cmu.edu>

	* doc/invoke.texi: Fix misspelling of "@item".

2003-07-09  Hans-Peter Nilsson  <hp@bitrange.com>

	* doc/install.texi (Configuration): Document the valgrind option
	to --enable-checking.

2003-07-08  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR Target/11453
	* pa.md: Disparage all mtsar constraints.
	(extzv, extv, insv): Don't fail on length of {32|64}.

2003-07-08  James E Wilson  <wilson@tuliptree.org>

	PR target/10021
	* emit-rtl.c (set_mem_attribute_minus_bitpos): When handle ARRAY_REF,
	loop over new variable t2 instead of t.

2003-07-08  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.h (HAVE_AS_DWARF2_DEBUG_LINE): Don't define
	as .file/.loc directives are incompatible with linker relaxation.

2003-07-08  Jakub Jelinek  <jakub@redhat.com>

	PR c/11420
	* config/i386/i386.c (ix86_check_movabs): New function.
	* config/i386/i386-protos.h (ix86_check_movabs): New prototype.
	* config/i386/i386.md (movabs[shqd]i_1_rex64): Kill broken alternative.
	(movabs[shqd]i_[12]_rex64): Add ix86_check_movabs check to conditions.

	* config/i386/i386.md (movdi_1_rex64): Set Y<-m alternative's type
	to ssemov.

2003-07-08  Jakub Jelinek  <jakub@redhat.com>

	* unroll.c (reg_dead_after_loop): Check for reg in REG_EQUAL and
	REG_EQUIV notes as well.

2003-07-07  Dale Johannesen <dalej@apple.com>

	PR 10900
	* config/rs6000/darwin-tramp.asm:  Fix trampolines.

2003-07-07 Andrew Pinski <pinskia@physics.uc.edu>

	PR optimization/11368
	* doc/invoke.texi (-falign-functions): Document that
	when n is zero then a machine-dependent default is used.
	(-falign-labels): Document that when n is zero then a
	machine-dependent default is used and that -falign-labels =1
	is equivalent to -fno-align-labels.
	(-falign-loops): Likewise.
	(-falign-jumps): Likewise.

2003-07-07  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>
	    Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11198
	* alias.c (objects_must_conflict_p): Return 1 if the types have
	the same alias set, not if the alias sets only conflict.

2003-07-06  Matthias Klose  <doko@debian.org>

	Backport from mainline:

	2003-07-04  Zack Weinberg  <zack@codesourcery.com>

	* doc/extend.texi: Delete entire section on multiline strings.

2003-07-04  H.J. Lu <hongjiu.lu@intel.com>

	* Makefile.in: Replace PWD with PWD_COMMAND.

2003-07-03  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11304
	Backport from mainline:

	2003-04-18  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>

	* cfgcleanup.c (flow_find_cross_jump): Use INSN_P, not active_insn_p.

2003-07-03  Roger Sayle  <roger@eyesopen.com>

	PR target/10700
	* fold-const.c (extract_muldiv_1): There's nothing that can be done
	if the expression is a SAVE_EXPR.

2003-07-03  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11381
	* simplify-rtx.c (simplify_relational_operation): Check that
	two equal operands have no side-effects before simplifying
	the comparison.

2003-07-01  Zack Weinberg  <zack@codesourcery.com>

	PR 2873
	* fixinc/inclhack.def (avoid_wchar_t_type): Add bypass
	expressions to prevent triggering on recent curses.h,
	linux/nls.h, or X11/Xlib.h.
	(stdio_va_list): Add _G_va_list to bypass pattern.
	(strict_ansi_not): Add bypass pattern for __SCO_VERSION__.
	* fixinc/fixincl.x: Regenerate.

2003-07-02  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* fixinc/inclhack.def (irix_stdio_va_list): Apply to IRIX 6.5
	<internal/stdio_core.h> too.
	(stdio_va_list): Apply to IRIX 6.5 <internal/stdio_core.h> and
	<internal/wchar_core.h> too.
	Substitute va_list uses in inline definition.
	* fixinc/fixincl.x: Regenerate.

2003-07-01  Richard Henderson  <rth@redhat.com>
	    (blame to: Loren James Rittle  <ljrittle@acm.org>)

	* real.h (ieee_extended_intel_96_round_53_format): New.
	* real.c (ieee_extended_intel_96_round_53_format): New.
	* config/i386/freebsd.h (SUBTARGET_OVERRIDE_OPTIONS): Use it
	for XFmode and TFmode.

2003-07-01  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/contrib.texi: Fix typos.
	* doc/sourcebuild.texi: Likewise.

2003-06-27  Gunther Nikl  <gni@gecko.de>

	PR target/11014
	* config/m68k/m68k.c (m68k_output_mi_thunk): Use correct assembly
	syntax for MIT / MOTOROLA.

2003-06-27  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.h (SECONDARY_OUTPUT_RELOAD_CLASS): Define.
	* config/s390/s390.c (s390_secondary_output_reload_class): New function.
	* config/s390/s390-protos.h (s390_secondary_output_reload_class):
	Declare it.
	* config/s390/s390.md ("reload_outti", "reload_outdi",
	"reload_outdf"): New expanders.

	* config/s390/s390.md ("movti" + splitters): Handle non-offsettable
	memory operands as source.
	("movdi" + splitters): Likewise.
	("movdf" + splitters): Likewise.
	* config/s390/s390.c (s390_split_ok_p): New function.
	* config/s390/s390-protos.h (s390_split_ok_p): Declare it.

2003-06-27  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config/mips/mips.md (trap): Use break 0 when !TARGET_GAS.

	* config/mips/iris6-o32.h (MIPS_ISA_DEFAULT): Remove.
	(MIPS_CPU_STRING_DEFAULT): Redefine to mips2.

	* config/mips/mips.c (TARGET_ASM_UNALIGNED_DI_OP) [TARGET_IRIX5 &&
	!TARGET_IRIX6]: Define as NULL.

	* config/mips/iris5gas.h (MDEBUG_ASM_SPEC): Override to match
	DWARF 2 default.

	* config/mips/dbxmdebug.h: New file.
	* config.gcc (mips-sgi-irix6*o32, mips-sgi-irix5*): Use it with
	gas and --with-stabs.

2003-06-27  Andreas Schwab  <schwab@suse.de>

	* config.gcc (m68k-*-linux*): Don't override extra_parts and
	gnu_ld, use the generic *-*-linux* settings instead.

2003-06-26  Roger Sayle  <roger@eyesopen.com>

	PR optimization/11054
	* rtlanal.c (reg_overlap_mentioned_p): Handle ZERO_EXTRACT
	and SIGN_EXTRACT.

2003-06-25  Zack Weinberg  <zack@codesourcery.com>

	PR bootstrap/3163
	* aclocal.m4 (AC_FUNC_MMAP_ANYWHERE, AC_FUNC_MMAP_FILE): Delete.
	(gcc_AC_FUNC_MMAP_BLACKLIST): New.
	* configure.in: Check for sys/mman.h and mmap in AC_CHECK_HEADERS
	and AC_CHECK_FUNCS lists, respectively.  Use
	gcc_AC_FUNC_MMAP_BLACKLIST, not AC_FUNC_MMAP_ANYWHERE nor
	AC_FUNC_MMAP_FILE.
	* configure, config.in: Regenerate.

	* ggc-page.c (init_gcc): Call fatal_io_error, not abort,
	if opening /dev/zero fails.

2003-06-25  Roger Sayle  <roger@eyesopen.com>

	* builtins.c (expand_builtin_strcpy): Construct new argument list
	manually instead of using chainon to modify the original arglist.
	(expand_builtin_strcmp): Likewise.

2003-06-25  David O'Brien  <obrien@FreeBSD.org>

	* config/i386/i386.h (builtin_define): Remove duplicate __amd64
	and __amd64__.

2003-06-25	Dhananjay Deshpande <dhananjayd@kpitcummins.com>

	* config/sh/sh.c (sh_register_move_cost):
	Add case for moving between MAC_REGS.

2003-06-24  Jerry Quinn  <jlquinn@optonline.net>

	PR other/11280
	* gcc/doc/invoke.texi (Optimization Options): Remove -Os from
	-freorder-functions description.

2003-06-25  Richard Sandiford  <rsandifo@redhat.com>

	PR target/11084
	* config/mips/mips.c (mips_expand_prologue): Fix setting of regno
	for the end of a variable argument list.

2003-06-25  Josef Zlomek  <zlomekj@suse.cz>

	* dwarf2out.c (gen_field_die): Return if type of decl is error mark.

2003-06-24  Falk Hueffner  <falk.hueffner@student.uni-tuebingen.de>

	PR target/11260
	* config/alpha/alpha.md (sqrtdf2): Fix operand substitution.

2003-06-24  Jakub Jelinek  <jakub@redhat.com>

	* builtins.c (expand_builtin_strcpy): Don't evaluate side-effects in
	src twice.

2003-06-23  Jakub Jelinek  <jakub@redhat.com>

	* config/s390/s390.c (s390_output_mi_thunk): Avoid .plt in -m31
	mode, as it requires pic register loaded.

2003-06-23  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/extend.texi: Fix typos.
	* doc/md.texi: Likewise.

2003-06-23  Roger Sayle  <roger@eyesopen.com>
	    Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Add a note on testing and
	remove duplicates from testers list.

2003-06-23  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/invoke.texi: Document dump options, dT and dW.

2003-06-23  Andreas Schwab  <schwab@suse.de>

	* doc/invoke.texi: Remove leading `-' from options in index.

2003-06-22  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/invoke.texi: Document dump, .cfg.

2003-06-22  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/invoke.texi: Alphabetize dump options.

2003-06-22  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/invoke.texi: Remove a duplicate -dk.

2003-06-22  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/rtl.texi: Fix the @findex for pre_modify.

Sat Jun 21 13:37:52 CEST 2003  Jan Hubicka  <jh@suse.cz>

	* i386.c (ix86_va_arg): Fix allocation of temporary slot.

2003-06-21  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Use Windows instead of Win32.

	Update Andreas Jaeger's entry.

	Merge the two entries of Kaveh Ghazi, David Edelsohn, and
	Loren J. Rittle.

2003-06-20  Geoffrey Keating  <geoffk@apple.com>

	PR c++/9393
	* doc/invoke.texi (Debugging Options): Document -frandom-seed.
	* configure.in: Check for gettimeofday.
	* tree.c (flag_random_seed): Define.
	(default_flag_random_seed): New.
	(append_random_chars): Use flag_random_seed rather than trying
	to acquire randomness here.
	* tree.h (default_flag_random_seed): Declare.
	* toplev.c (display_help): Add -frandom-seed and -fstack-limit-*
	descriptions.
	(decode_f_option): Handle -frandom-seed.
	(print_switch_values): Call default_flag_random_seed.
	* flags.h (flag_random_seed): Declare.
	* configure: Regenerate.
	* config.in: Regenerate.

2003-06-20  Mark Mitchell  <mark@codesourcery.com>

	PR c++/10888
	* tree-inline.c (expand_call_inline): Do not warn about failing to
	inline functions declared in system headers.
	* doc/invoke.texi (-Winline): Expand on documentation.

2003-06-20  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* configure.in (gcc_cv_as_gstabs_flag): Disable if assembler warns.
	* configure: Regenerate.
	Fixes PR driver/9362.

2003-06-19  Vladimir Makarov  <vmakarov@redhat.com>

	* haifa-sched.c (max_isse): Backport from the mainline.
	(choice_entry): New structure.
	(choice_stack, cycle_issued_insns, max_lookahead_tries,
	cached_first_cycle_multipass_dfa_lookahead, cached_issue_rate):
	New variables.
	(choose_ready): Calculate max_lookahead_tries.  Initiate
	ready_try.
	(schedule_block): Allocate/deallocate choice_stack.  Change
	cycle_issued_insns value as necessary.
	(sched_init): Check cached_issue_rate.

2003-06-20  Daniel Egger  <degger@fhm.edu>
	    Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Building): Correct and improve statement
	about parallel builds.

2003-06-20  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* doc/install.texi (--with-gnu-as): Mention SPARC/Solaris and
	SPARC64/Solaris as platforms where --with-gnu-as makes a difference.
	(--with-as): Add @anchor.
	(--with-gnu-ld): Fix typo.
	(--with-ld): Add @uref to --with-as.

2003-06-19  Kazu Hirata  <kazu@cs.umass.edu>

	* flow.c (initialize_uninitialized_subregs): Use
	emit_move_insn instead of emitting a hardcoded move.

2003-06-19  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.c (init_cumulative_args): Limit CALL_LIBCALL
	to ABI_V4.

2003-06-19  DJ Delorie  <dj@redhat.com>

	PR preprocessor/11022
	* cppmacro.c (warn_of_redefinition): Handle cases where the two
	definitions have different numbers of tokens.

2003-06-18  Richard Henderson  <rth@redhat.com>

	* config/ia64/unwind-ia64.c (_Unwind_GetCFA): New.
	(_Unwind_FindEnclosingFunction): Implement.

2003-06-18  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	* config/rs6000/rs6000.c (init_cumulative_args): Add and handle LIBCALL
	argument.
	(function_arg): Handle CALL_LIBCALL flag.
	* config/rs6000/rs6000-protos.h (init_cumulative_args): Update
	prototype.
	* config/rs6000/rs6000.h (CALL_LIBCALL): New macro.
	(INIT_CUMULATIVE_LIBCALL_ARGS): New macro.
	(INIT_CUMULATIVE_ARGS): Add LIBCALL argument.
	(INIT_CUMULATIVE_INCOMING_ARGS): Likewise.

2003-06-17  Jason Merrill  <jason@redhat.com>

	PR c++/10929
	* tree-inline.c (expand_call_inline): Don't warn about failing to
	inline a function which was made inline by -finline-functions.

2003-06-17  Ranjit Mathew  <rmathew@hotmail.com>

	* install.texi (Testing): Add information on how to run Java
	runtime tests separately.

2003-06-17  Christopher Faylor  <cgf@redhat.com>

	* doc/install.texi: Add msvc rebuild caveat.

2003-06-17  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/contrib.texi: Replace Hitachi with Renesas.
	* doc/install.texi: Likewise.
	* doc/invoke.texi: Likewise.

2003-06-17  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	* config/rs6000/linux.h (MD_FALLBACK_FRAME_STATE_FOR): Partly revert
	2003-01-23 patch. Corrected to handle kernels with changed ucontext.

	* config/rs6000/sysv4.h (SUBTARGET_OVERRIDE_OPTIONS): Error on invalid
	-msdata=eabi usages.

2003-06-14  Richard Earnshaw  <rearnsha@arm.com>

	PR optimization/10842
	From trunk:
	2003-01-20  Nick Clifton  <nickc@redhat.com>

	* config/arm/arm.md (sibcall_epilogue): Add an
	UNSPEC_PROLOGUE_USE to prevent the link register from being
	considered dead.

	2003-02-02  Richard Earnshaw  <rearnsha@arm.com>

	* arm.md (sibcall_epilogue): Set the "conds" to "clob".
	(epilogue_insns): Likewise.

2003-06-14  Richard Earnshaw  <rearnsha@arm.com>

	PR target/11183
	* arm.c (output_move_double): Pass SImode to adjust_address.

2003-06-13  Janis Johnson  <janis187@us.ibm.com>

	* doc/install.texi (m32r-*-elf): Change company to Renesas.

2003-06-13  Richard Earnshaw  <rearnsha@arm.com>

	* arm.c (output_call_mem): If the address references the link-register
	use an instruction sequence that avoids early-clobbering IP.
	(eliminate_lr2ip): Delete.

2003-06-12  Richard Henderson  <rth@redhat.com>

	PR target/11089
	* config/i386/i386.md (sse_movaps): Use an expander to force
	one operand to be a register.
	(sse_movups): Likewise.

2003-06-12  Richard Henderson  <rth@redhat.com>

	PR middle-end/10557
	* rtlanal.c (subreg_offset_representable_p): Relax subreg check.

2003-06-13  Eric Botcazou  <ebotcazou@libertysurf.fr>
	    Christian Ehrhardt <ehrhardt@mathematik.uni-ulm.de>

	PR target/10142
	* config/sparc/sparc.c (function_arg_record_value_parms): Add
	new 'stack' field.
	(function_arg_record_value_1): Set 'stack' to 1 if we run out of
	integer slots for an integer field.
	(function_arg_record_value_3): Shift vector index.
	(function_arg_record_value_2): Likewise.
	(function_arg_record_value): Initialize 'stack' to 0.
	Set 'stack' to 1 if we run out of integer slots for an integer field.
	Generate (parallel [(expr_list (nil) ...) ...]) if 'stack' is set to 1.

2003-06-13  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/10955
	* unroll.c (unroll_loop): Fix off-by-one bug.

2003-06-12  Richard Henderson  <rth@redhat.com>

	PR middle-end/10475
	* expmed.c (emit_store_flag): Use simplify_gen_subreg directly
	for extracting sub-words.

2003-06-12  Richard Henderson  <rth@redhat.com>

	PR target/7594
	* config/m68k/m68k.md (zero_extendhisi2): Use gen_lowpart_SUBREG.
	(zero_extendqihi2, zero_extendqisi2): Likewise.

2003-06-12  Richard Henderson  <rth@redhat.com>

	PR inline-asm/4823
	* reg-stack.c (any_malformed_asm): New.
	(check_asm_stack_operands): Set it.
	(convert_regs_1): Check it before aborting.

2003-06-12  Jakub Jelinek  <jakub@redhat.com>

	* c-decl.c (c_expand_body): Save input_filename and lineno,
	set it before tree inlining and restore before return.

2003-06-12  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_emit_prologue): Use LA instead of AR
	to initialize GOT register.

2003-06-12  Jakub Jelinek  <jakub@redhat.com>

	* c-opts.c (complain_wrong_lang): Add on argument.
	Print no- switch if on is false.
	(c_common_decode_option): Adjust caller.

2003-06-11  Richard Henderson  <rth@redhat.com>

	* stmt.c (expand_asm_operands): Don't warn for memories with
	queued addresses.

2003-06-11  Andrew Pinski  <pinskia@physics.uc.edu>

	PR target/8787
	* config/i386/djgpp.h (ASM_FILE_START): emit `.intel_syntax'
	if -masm=intel.

2003-06-10  Andrew Haley  <aph@redhat.com>

	* langhooks-def.h (LANG_HOOKS_DECL_OK_FOR_SIBCALL): New.
	(LANG_HOOKS_DECLS): Add LANG_HOOKS_DECL_OK_FOR_SIBCALL.
	(lhd_decl_ok_for_sibcall): New.
	* langhooks.c (lhd_decl_ok_for_sibcall): New.
	* langhooks.h (lang_hooks_for_decls.ok_for_sibcall): New field.
	* calls.c (expand_call): Check lang_hook before generating a
	sibcall.

2003-06-09  Richard Henderson  <rth@redhat.com>

	2003-05-11  Ulrich Weigand  <uweigand@de.ibm.com>
	* except.c (EH_RETURN_STACKADJ_RTX): Do not define.
	(EH_RETURN_HANDLER_RTX): Likewise.
	(expand_builtin_eh_return): Do not copy stack adjustment
	if EH_RETURN_STACKADJ_RTX is not defined.
	(expand_eh_return): Likewise.  Also, do not pass stack
	adjustment as argument to the eh_return pattern.
	* except.h (MUST_USE_SJLJ_EXCEPTIONS): Do not define just
	because EH_RETURN_STACKADJ_RTX is not defined.
	* unwind-dw.c (uw_update_context_1): If EH_RETURN_STACKADJ_RTX
	is not defined, treat stack pointer like a regular register.
	(uw_init_context_1): Set up fake initial stack pointer register.
	(uw_install_context_1): Do not compute stack adjustment if
	EH_RETURN_STACKADJ_RTX is not defined.

	* config/i386/i386.md ("eh_return"): Remove first argument.
	* config/mips/mips.md ("eh_return"): Likewise.
	* config/rs6000/rs6000.md ("eh_return"): Likewise.
	* config/sh/sh.md ("eh_return"): Likewise.

	* config/s390/s390.h (EH_RETURN_STACKADJ_RTX): Remove.

2003-06-08  Richard Henderson  <rth@redhat.com>

	* stmt.c (expand_asm_operands): Re-word warning.

2003-06-08  Richard Henderson  <rth@redhat.com>

	* expr.h (EXPAND_MEMORY): New.
	* expr.c (expand_expr): Check it.
	* stmt.c (expand_asm_operands): Provide it when the constraint
	requires a memory.  Warn for memory input constraints without
	a memory operand.

2003-06-07  Richard Henderson  <rth@redhat.com>

	* c-common.c (cb_register_builtins): Define __EXCEPTIONS for C also.

2003-06-07  Kelley Cook  <kelleycook@wideopenwest.com>

	* configure.in (HAVE_LD_RO_RW_SECTION_MIXING): Remove quotes in
	section names.
	* configure: Regenerate.

2003-06-07  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/linux64.h (CRT_CALL_STATIC_FUNCTION): Define.

2003-06-06  James E Wilson  <wilson@tuliptree.org>

	PR inline-asm/10890
	* reload1.c (merge_assigned_reloads): Abort only if two reloads have
	different in fields.

2003-06-06  Richard Earnshaw  <rearnsha@arm.com>

	PR target/11052
	* ifcvt.c (noce_process_if_block): Fail if the destination has
	side-effects.

2003-06-06  Dan Kegel  <dank@kegel.com>
	    Kaz Kojima  <kkojima@gcc.gnu.org>

	PR target/10331
	* config/sh/t-linux (STMP_FIXPROTO): Define.

	PR target/11096
	* config/sh/linux.h (CPLUSPLUS_CPP_SPEC): Redefine so to include
	-D_GNU_SOURCE.

2003-06-05  David Miller  <davem@redhat.com>
	    Richard Henderson  <rth@redhat.com>

	* optabs.c (HAVE_conditional_trap): Provide default.
	(gen_conditional_trap): Likewise.
	(init_optabs): Merge init_traps.
	(gen_cond_trap): Use prepare_operand.  Restructure and avoid ifdef.

2003-06-05  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* doc/md.texi (Machine Constraints): Correct the meaning of
	constraints related to floating-point registers on SPARC.

2003-06-05  Eric Botcazou  <ebotcazou@libertysurf.fr>
	    Paolo Bonzini  <bonzini@gnu.org>

	PR target/10663
	* configure.in (HAVE_LD_RO_RW_SECTION_MIXING): Redirect
	assembler and linker output to /dev/null.
	Use a 'sed' construct instead of 'grep -A1'.
	* configure: Regenerate.

2003-06-04  David Edelsohn  <edelsohn@gnu.org>

	* doc/install.texi (*-ibm-aix*): Native as and ld required
	to bootstrap on AIX 5L.

2003-06-04  Richard Henderson  <rth@redhat.com>

	* c-common.c (handle_cleanup_attribute): New.
	(c_common_attributes): Add it.
	* c-decl.c (finish_decl): Honor the cleanup attribute.
	* doc/extend.texi (Variable Attributes): Document it.

	* unwind-c.c: New file.
	* Makefile.in (LIB2ADDEH): Add it.
	* config/t-darwin, config/t-linux, config/t-linux-gnulibc1,
	config/ia64/t-ia64: Likewise.

2003-06-04  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/11018
	* config/sparc/sparc.c (sparc_v8plus_shift): Use which_alternative
	consistently to decide whether the scratch register is really
	required.

2003-06-04  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/10876
	* config/sparc/sparc.h (CONST_OK_FOR_LETTER): Add
	new 'O' constraint for constant 4096.
	(CONST_DOUBLE_OK_FOR_LETTER_P): Likewise.
	* config/sparc/sparc.md (adddi3 expander): Canonicalize pattern.
	Do not transform into MINUS insn for constant 4096.
	(*adddi3_sp64 insn): Canonicalize pattern. Add new alternative
	for constant 4096 as third operand.
	(addsi3 expander): Remove.
	(*addsi3 insn): Rename into 'addsi3'. Canonicalize pattern. Add
	new alternative for constant 4096 as third operand.
	(subdi3 expander): Do not transform into PLUS insn for constant 4096.
	(*subdi3_sp64 insn): Add new alternative for constant 4096 as third
	operand.
	(subsi3 expander): Remove.
	(*subsi3 insn): Rename into 'subsi3'. Add new alternative for
	constant 4096 as third operand.
	* doc/md.texi (Machine Constraints): Document new 'O' constraint for
	the SPARC port.

2003-06-03  Richard Henderson  <rth@redhat.com>

	* unwind.inc (_Unwind_Resume_or_Rethrow): Fix return type.
	* unwind.h (_Unwind_Resume_or_Rethrow): Update.
	(_Unwind_SjLj_Resume_or_Rethrow): Likewise.

2003-06-03  Douglas B Rupp  <rupp@gnat.com>

	* Makefile.in (TEXI_GCC_FILES): Remove vms.texi entry.
	* doc/gcc.texi: Remove vms.texi section.
	* doc/vms.texi: Remove obsolete file.

2003-06-03  Richard Henderson  <rth@redhat.com>

	PR target/10673
	* config/i386/i386.c (ix86_split_long_move): Fix base register
	mode for XFmode splits for TARGET_64BIT.

2003-06-02  Kazuhiro Inaoka  <inaoka.kazuhiro@renesas.com>

	* gcc/config.gcc Add support multilib parts for m32rx processor.

2003-06-01  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/11044
	* config/i386/i386.md (length attribute): Set length to 4
	for instructions of type "fcmp".

2003-06-01  Josef Zlomek  <zlomekj@suse.cz>

	* rtl.def (CONST_DOUBLE): Update comment.

2003-06-01  Seth Arnold  <sarnold@wirex.com>
	    Aldy Hernandez  <aldyh@redhat.com>

	PR10871
	* config/rs6000/rs6000.c (rs6000_stack_info): Do not add
	vrsave_size twice.

2003-05-31  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* doc/install.texi (mips-sgi-irix5): Add missing
	HTML <hr> marker.

2003-05-31  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* doc/md.texi (Machine Constraints): Document
	missing SPARC constraints.

2003-05-31  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* doc/md.texi (Automaton pipeline description): Use
	"type" instead of "cpu" as the attribute in the examples.

2003-05-30  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config/mips/mips.h (SUBTARGET_ASM_DEBUGGING_SPEC): Move
	-mdebug/-no-mdebug switches ...
	(MDEBUG_ASM_SPEC): ... here.
	Use only with gas.
	(EXTRA_SPECS): Initialize mdebug_asm_spec.
	(CONSTANT_ADDRESS_P): Allow native IRIX 6 O32 assembler.

2003-05-29  Gabriel Dos Reis <gdr@integrable-solutions.net>

	* diagnostic.h (output_verbatim): Remove printf attribute.
	(verbatim): Likewise.
	* diagnostic.c (output_pointer): New function.
	(output_format): Use it.  Handle %p format specifier.

2003-05-27  Denis Chertykov  <denisc@overta.ru>

	* cselib.c (cselib_invalidate_regno): Abort if hardreg have a
	VOIDmode.
	* cselib.c (cselib_process_insn): Pass reg_raw_mode for hardreg in
	call of cselib_invalidate_regno.

2003-05-25  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Update Kean Johnston.

Fri May 23 21:19:31 CEST 2003  Jan Hubicka  <jh@suse.cz>
			       Andreas Jaeger  <aj@suse.de>

	* i386.h (TARGET_CPU_CPP_BUILTINS): Define __amd64 and __amd64__;
	do not use assertion.

Fri May 23 20:55:39 CEST 2003  Jan Hubicka  <jh@suse.cz>

	* i386.md (sse_loadss, sse_loadss_1, sse2_loadsd, sse2_loadsd_1):
	Rewrite

2003-05-23  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* doc/install.texi: Remove sparc64-*-*. Add sparc64-*-solaris2*.
	Document sparcv9-*-solaris2* as a synonym for sparc64-*-solaris2*.

2003-05-22  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR bootstrap/10805
	* doc/install.texi (sparc-sun-solaris2.7): Document bootstrap
	failure with Sun assembler 5.0 Alpha 03/27/98.

2003-03-21  Loren James Rittle  <ljrittle@acm.org>

	* config/sparc/freebsd.h (CPP_CPU64_DEFAULT_SPEC): Add -D__sparcv9
	-D__sparc__ to match system compiler convention.

2003-05-20  Kevin Ryde <user42@zip.com.au>
	    Wolfgang Bangerth <bangerth@dealii.org>

	PR c/10355
	* doc/extend.texi: Put a warning into the documentation
	of attribute regparm.

2003-05-20  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("*iordi3_oi"): Do not mark commutative.
	("*iorsi3_oi"): Likewise.

2003-05-19  John David Anglin  <dave.anglin@nrc-gnrc.gc.ca>

	* pa/milli64.S ($$mulI): Fix typo.

2003-05-19  Gabriel Dos Reis  <gdr@integrable-solutions.net>

	* hashtable.h (struct ht_identifier): Add new field "hash_value".
	* hashtable.c (ht_lookup): Use it.
	(ht_expand): Likewise.  Avoid doing the same computation twice.
	* tree.h (IDENTIFIER_HASH_VALUE): New macro.

2003-05-19  Nick Clifton  <nickc@redhat.com>

	* config/arm/arm.c (use_return_insn): Do not use a single return
	instruction for interrupt handlers which have to create a stack
	frame.
	(arm_expand_prologue): Do not pre-bias the return address of
	interrupt handlers which create a stack frame.

2003-05-19  Eric Botcazou  <ebotcazou@libertysurf.fr>

	Backport from mainline:

	2003-05-10  Alexander Aganichev  <aaganichev@yandex.ru>

	* config/i386/i386.h (MODES_TIEABLE_P): Fix typo.

2003-05-16  Wolfgang Bangerth <bangerth@dealii.org>

	* doc/bugreport.texi: Remove most of the preface of the
	bugs section.

2003-05-16  Nick Clifton  <nickc@redhat.com>

	* config/mcore/mcore.md (jump): Use emit_jump_insn to generate the
	jump insn.

2003-05-15  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/invoke.texi (Warning Options): Mark -Wmissing-declarations
	as a C only option.

2003-05-15  Wolfgang Bangerth <bangerth@dealii.org>

	* doc/bugreport.texi: Remove most of the bug reporting
	instructions and merge them into bugs.html.

2003-05-14  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* sparc.c (print_operand): Fix uninitialized warning.

2003-05-14  Mark Mitchell  <mark@codesourcery.com>

	* version.c: Reset to prerelease format.
	* doc/include/gcc-common.texi: Update version number.

2003-05-13  Release Manager

	* GCC 3.3 Released.

2003-05-12  Mark Mitchell  <mark@codesourcery.com>

	PR other/10745
	* configure.in: Correct detection of GNU ld version number.
	* configure: Regenerated.

2003-05-08  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (gen_block_redirect, split_branches): Use
	CODE_FOR_jump_compact instead of CODE_FOR_jump

2003-05-06  Eric Christopher  <echristo@redhat.com>

	* config/mips/linux.h: Fix typo.

2003-05-06  Ulrich Weigand  <uweigand@de.ibm.com>

	PR other/10650
	* unwind-dw2.c (uw_update_context_1): Don't set sp as cfa on s390.
	(uw_init_context_1): Set initial sp to outer cfa on s390.

2003-05-06  Mark Mitchell  <mark@codesourcery.com>

	PR other/10658
	* gcc.c (process_command): Update copyright date.

2003-05-06  Bruce Korb  <bkorb@gnu.org>

	* inclhack.def: fix up whitespace differences from mainline.
	mark fix tests that fail on BSD systems (like mainline).
	Fixup the solaris_mutex_init test to cope with Sol. 2.6 (like mainline).
	Removed unused SONY commentary (its obsolete anyway).
	(svr4_mach_defines): remove i860 machine from comment (like mainline).
	* gcc/fixinc/tests/base/pthread.h: solaris_mutex_init fix tests
	* gcc/fixinc/tests/base/testing.h: remove ^M chars from some mistake
	* gcc/fixinc/tests/base/Xm/Traversal.h: accommodate BSD's sed
	* gcc/fixinc/tests/base/sys/stat.h: accommodate BSD's sed
	* gcc/fixinc/fixincl.x: regenerated

2003-05-06  Phil Edwards  <pme@gcc.gnu.org>

	* doc/install.texi (mips-*-*):  Add note about libstdc++.

2003-05-05  Mark Mitchell  <mark@codesourcery.com>
	    Kean Johnston <jkj@sco.com>

	* toplev.c (check_global_declarations): Do not warn about unused
	static consts.

2003-05-05  Richard Henderson  <rth@redhat.com>

	* builtins.c (expand_builtin) <BUILT_IN_DWARF_FP_REGNUM>: Remove.
	<BUILT_IN_DWARF_SP_COLUMN>: New.
	* builtins.def (BUILT_IN_DWARF_FP_REGNUM): Remove.
	(BUILT_IN_DWARF_SP_COLUMN): New.
	* dwarf2out.c (expand_builtin_dwarf_fp_regnum): Remove.
	(expand_builtin_dwarf_sp_column): New.
	* except.h: Update to match.
	* unwind-dw2.c (execute_stack_op): Correct stack push typo.
	(execute_cfa_program): Record location expression address
	before extracting length.
	(uw_update_context_1): Install old CFA into stack pointer column.
	(uw_init_context_1): Set cfa_reg to stack pointer column.

2003-05-05  David O'Brien  <obrien@FreeBSD.org>

	* config/rs6000/sysv4.h (CPP_OS_FREEBSD_SPEC): Add __ELF__ to mirror
	other FreeBSD ports.
	(LINK_OS_FREEBSD_SPEC): Mirror conventions on other FreeBSD ports.

2003-05-05  Jason Merrill  <jason@redhat.com>

	* stor-layout.c (update_alignment_for_field): Set DECL_ALIGN for
	the field.

2003-05-02  Zack Weinberg  <zack@codesourcery.com>

	PR c/10604
	* c-opts.c (c_common_decode_option <OPT_Wall>): Set
	warn_sign_compare for C++ only.
	* doc/invoke.texi: Clarify documentation of -Wsign-compare.

2003-05-03  Falk Hueffner <falk.hueffner@student.uni-tuebingen.de>
	    Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Add Zdenek Dvorak, Aldy
	Hernandez, and Kazu Hirata.

2003-05-02  Richard Henderson  <rth@redhat.com>

	PR c++/10570
	* except.c: Revert 04-01 and 04-02 forced-unwind changes.
	* flags.h, toplev.c, doc/invoke.texi: Likewise.

	* unwind-dw2.c (_Unwind_GetCFA): Fix ptr->int conversion warning.
	* unwind.inc (_Unwind_DeleteException): Check for null
	exception_cleanup.

	* unwind-sjlj.c (_Unwind_SjLj_Resume_or_Rethrow): New.
	* unwind.inc (_Unwind_Resume_or_Rethrow): New.
	* unwind.h: Declare them.
	* libgcc-std.ver (GCC_3.3): Export them.

2003-05-02  Steven Bosscher  <steven@gcc.gnu.org>

	* tree-inline.c (find_alloca_call):
	Use walk_tree_without_duplicates, instead of walk_tree.
	(find_builtin_longjmp_call): Ditto.
	* c-objc-common.c (c_cannot_inline_fn): Ditto.

2003-05-02  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Add Daniel Berlin.

2003-05-01  Rodney Brown  <rbrown64@csc.com.au>

      * rtl.h (subreg_offset_representable_p): Prototype.

2003-05-01  Roger Sayle  <roger@eyesopen.com>

	PR fortran/9974
	* gcse.c (reg_killed_on_edge): New function to test whether the
	given reg is overwritten by any instruction queued on an edge.
	(bypass_block): Ignore substitutions killed on incoming edges.
	Don't bypass outgoing edges that have queued instructions.

2003-04-30  Andreas Schwab  <schwab@suse.de>

	* doc/extend.texi (Other Builtins): Enclose multiple word data
	type in braces for @deftypefn.

2003-04-29  Jason Merrill  <jason@redhat.com>

	PR middle-end/10336
	* jump.c (never_reached_warning): Really stop looking if we reach
	the beginning of the function.

Tue Apr 29 21:07:00 CEST 2003  Jan Hubicka  <jh@suse.cz>

	* cse.c (count_reg_usage): Revert my previous patch.

2003-04-29  Alexander Kabaev  <kan@FreeBSD.ORG>

	bootstrap/10452
	* gengtype-yacc.y: Improve portability.

2003-04-29  Zack Weinberg  <zack@codesourcery.com>

	* config.gcc: Install obsolete target list for GCC 3.3.
	* doc/install.texi: Mention in specific-target instructions
	that certain configurations are deprecated.

2003-04-29  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>

	* c-pragma.c (maybe_apply_renaming_pragma): Fix typo.
	* gcc.c (display_help): Likewise.
	* toplev.c (f_options): Likewise.
	* params.def (PARAM_MAX_INLINE_SCOPE): Likewise.
	* config/c4x/c4x.h (TARGET_SWITCHES): Likewise.
	* config/mcore/mcore.h (TARGET_SWITCHES): Likewise.
	* config/s390/s390.h (TARGET_SWITCHES): Likewise.
	* config/v850/v850.h (TARGET_SWITCHES): Likewise.

2003-04-29  Danny Smith  <dannysmith@users.sourceforge.net>

	* config/i386/mingw32.h (LIBGCC_SPEC): Add libmingwex.a.
	Update copyright.
	* config/i386/cygwin.h (LIBGCC_SPEC): Add libmingwex.a, for
	-mno-cygwin case.

2003-04-29  J"orn Rennecke <joern.rennecke@superh.com>

	* varasm.c (default_assemble_visibility): Use assemble_name.

2003-04-29  David O'Brien  <obrien@FreeBSD.org>

	* config/i386/freebsd64.h (LINK_SPEC): Mirror FreeBSD linker.
	* config/rs6000/freebsd.h (LINK_SHLIB_SPEC): New macro.
	(SIZE_TYPE): New macro.
	* config/i386/freebsd-aout.h (NO_PROFILE_COUNTERS): New macro.
	(SET_ASM_OP): New macro.
	(HANDLE_SYSV_PRAGMA): New macro.
	(ASM_WEAKEN_LABEL): New macro.

2003-04-28  Mark Mitchell  <mark@codesourcery.com>

	PR c++/10180
	* tree-inline.c (expand_call_inline): Call push_srcloc when
	encountering EXPR_WITH_FILE_LOCATION.  Honor warn_inline.

2003-04-28  Mike Stump  <mrs@apple.com>

	* gdbinit.in: Update to reflect new identifier structure.

2003-04-28  Richard Henderson  <rth@redhat.com>

	* config/sparc/sparc.c (print_operand): Add 's' to sign-extend.
	* config/sparc/sparc.md (const_mulsidi3_v8plus): Fix mode of
	integral constant mult operand.
	(const_mulsidi3_sp32, const_mulsidi3_sp64): Likewise.
	(const_smulsi3_highpart_v8plus): Likewise.
	(const_smulsi3_highpart): Likewise.
	(const_umulsidi3_sp32): Likewise; sign-extend it in the output.
	(const_umulsidi3_sp64, const_umulsidi3_v8plus): Likewise.
	(const_umulsi3_highpart_v8plus): Likewise.
	(const_umulsi3_highpart): Likewise.

2003-04-28  David O'Brien  <obrien@FreeBSD.org>

	* config/i386/i386.h (builtin_define): Add __amd64 and __amd64__.

Mon Apr 28 09:54:56 CEST 2003  Jan Hubicka  <jh@suse.cz>

	PR c/10308
	* reload.c (find_reloads_address_1): Reload plus at the place of
	index register.

2003-04-26  Richard Henderson  <rth@redhat.com>

	* config/ia64/ia64.c (ia64_compute_frame_size): Allow inline asm
	to clobber ar.pfs and ar.unat.
	(ia64_expand_prologue): Force alloc instruction if ar.pfs saved;
	fix test for spilling ar.pfs to the stack.

2003-04-26  Stephane Carrez  <stcarrez@nerim.fr>

	* doc/install.texi (Binaries): Mention binaries for HC11/HC12.

2003-04-26 Stephane Carrez <stcarrez@nerim.fr>

	* doc/extend.texi (Function Attributes): Document "near" and "far"
	for 68HC11 and 68HC12.

2003-04-25  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/linux.h (TARGET_OS_CPP_BUILTINS): Back out previous
	addition of __PIC__ and __pic__ macros.
	* config/xtensa/xtensa.h: Clean up indentation.

2003-04-25  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/linux.h (TARGET_OS_CPP_BUILTINS): Remove definition of
	_GNU_SOURCE.  Add definitions of __PIC__ and __pic__.
	(SUBTARGET_CPP_SPEC): Define.
	(LIB_SPEC): Delete.
	* config/xtensa/xtensa-protos.h (xtensa_declare_object): Delete.
	* config/xtensa/xtensa.c (xtensa_declare_object): Delete.
	* config/xtensa/xtensa.h (CPP_SPEC, SUBTARGET_CPP_SPEC, EXTRA_SPECS):
	Define.
	(ASM_OUTPUT_COMMON, ASM_OUTPUT_LOCAL): Delete.
	(ASM_OUTPUT_ALIGNED_BSS, BSS_SECTION_ASM_OP): Define.

2003-04-25  Richard  Henderson  <rth@redhat.com>

	PR opt/10315
	* config/rs6000/rs6000.c (rs6000_emit_move): Only elide proper
	checks during reload; use validize_mem instead of adjust_address.

Fri Apr 25 15:43:23 CEST 2003  Jan Hubicka  <jh@suse.cz>

	* emit-rtl.c (subreg_hard_regno):  Check that register is
	representable.
	* reload.c (reload_inner_reg_of_subreg):  When register is not
	representable, reload the whole thing.
	(find_reloads): Likewsie.
	* rtlanal.c (subreg_representable_p):  New function.

Sun Apr 20 18:23:18 CEST 2003  Richard Henderson  <rth@redhat.com>

	(backported to 3.3 by Jan Hubicka)

	* config/ia64/ia64.md (UNSPECV_SETJMP_RECEIVER): New.
	(builtin_setjmp_receiver): Delay call to ia64_reload_gp
	until after reload.

	* emit-rtl.c (try_split): Handle 1-1 splits of call insns properly.

	* config/ia64/ia64.c (TARGET_FUNCTION_OK_FOR_SIBCALL): New.
	(ia64_gp_save_reg): Remove.
	(struct ia64_frame_info): Move to the beginning of the file;
	add reg_save_gp.
	(ia64_expand_call): Rearrange for new call patterns.
	(ia64_reload_gp): New.
	(ia64_split_call): New.
	(ia64_compute_frame_size): Allocate reg_save_gp.
	(ia64_expand_prologue): Save reg_save_gp.
	(ia64_expand_epilogue): Don't restore gp.
	(ia64_hard_regno_rename_ok): Remove R4 hack.
	(ia64_function_ok_for_sibcall): New.
	(ia64_output_mi_thunk): Set reload_completed, no_new_pseudos;
	call try_split on sibcall pattern.
	* config/ia64/ia64-protos.h: Update.
	* config/ia64/ia64.md (call_nogp, call_value_nogp, sibcall_nogp):
	Rename from nopic versions.  Confiscate 2nd argument to call as
	a marker.
	(call_pic, call_value_pic, sibcall_pic): Remove.
	(call_gp, call_value_gp, sibcall_gp): New.
	(builtin_setjmp_setup): Remove.
	(builtin_setjmp_receiver): Call ia64_reload_gp.

2003-04-24  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR opt/8705
	* gcse.c (try_replace_reg): On a successful substitution of a constant
	into a single set, try to simplify the source of the set.
	* loop.c (scan_loop): Don't try to optimize a MODE_CC set with a
	constant source.

2003-04-24  Alexander Kabaev <kan@FreeBSD.ORG>

	bootstrap/10453
	* config/sparc/sparc.md (umulsidi3, mulsidi3): Avoid using
	const_umulsidi3_sp32 and const_mulsidi3_sp32 on 64bit targets
	where they might be not present. Use their _sp64 equivalent
	instead.

2003-04-23  Richard Henderson  <rth@redhat.com>

	PR opt/8300
	* toplev.c (rest_of_compilation): Delay no_new_pseudos until
	after initialize_uninitialized_subregs; update reg info assuming
	new pseudos were created.

2003-04-23  Olivier Hainque  <hainque@act-europe.fr>

	* config/pa/pa.md (extv, extzv): FAIL if the bitfield length is zero.

2003-04-23  James A Morrison  <ja2morri@uwaterloo.ca>

	* invoke.texi: Eliminate extra white-space caused by @gccoptlist{
	on its own line.
	Ensure there are two spaces between each pair of options and add
	@gol where appropriate.

2003-04-23  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_expand_cmpstr): Disable CLC loop.

2003-04-22  Devang Patel  <dpatel@apple.com>

	* cpptrad.c (_cpp_replacement_text_len): Add check for macro parameter count.
	(_cpp_copy_replacement_text): Same.

2003-04-22  Richard Henderson  <rth@redhat.com>

	PR 8866
	* rtl.h (MEM_NOTRAP_P): New.
	(MEM_COPY_ATTRIBUTES): Copy it.
	* rtlanal.c (may_trap_p): Check it.
	* expr.c (do_tablejump): Set it.

	* cfgrtl.c (try_redirect_by_replacing_jump): Revert last three changes.

2003-04-22  David Turner <novalis@gnu.org>

	* gbl-ctors.h: Add special license exception.
	* libgcc2.h: Likewise.
	* tsystem.h: Likewise.
	* gcov-io.h: Likewise.

2003-04-21  Mark Mitchell  <mark@codesourcery.com>

	* Makefile.in (calls.o): Depend on except.h.
	* calls.c: Include except.h.
	(emit_call_1): Call note_eh_region_may_contain_throw if
	appropriate.
	* except.c (eh_region): Add may_contain_throw.
	(expand_eh_region_end_cleanup): Do not include handler code when
	it cannot be reached.
	(note_eh_region_may_contain_throw): New function.
	* except.h (note_eh_region_may_contain_throw): New function.

2003-04-21  Mark Mitchell  <mark@codesourcery.com>

	* config/i386/winnt.c (i386_pe_mark_dllimport): Revert previous
	changes.

2003-04-21  Mark Mitchell  <mark@codesourcery.com>

	* config/i386/winnt.c (i386_pe_}ark_dllimport): Make the new RTL
	have the same form as the old RTL.

2003-04-18  Mark Mitchell  <mark@codesourcery.com>

	* cfgrtl.c (try_redirect_by_replacing_jump): Create a basic block
	for orphaned jump tables.

2003-04-20  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR/8705
	* pa.md (movccfp): New expander.
	(setccfp0, setccfp1): Rename to movccfp0 and movccfp1, respectively.
	Reverse fcmp conditions.

2003-04-20  Marek Michalkiewicz  <marekm@amelek.gda.pl>

	* config/avr/avr.md (*cmpqi_sign_extend): Handle negative values
	of operand 1 correctly.

2003-04-19  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* cfgrtl.c (try_redirect_by_replacing_jump): Remove unused variables.
	* flow.c (life_analysis): Fix warning.

2003-04-18  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Prefer "bug fix" over "bugfix".
	Add Segher Boessenkool.

2003-04-18  Alexander Sotirov  <sluncho@mirizma.org>

	PR c/9177
	* c-decl.c (c_expand_body): Don't garbage collect the function
	body if we are going to dump it later.

2003-04-18  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/7675
	* c-typeck.c (build_external_ref): Set the DECL_NONLOCAL flag
	on VAR_DECL, PARM_DECL and FUNCTION_DECL from within
	nested functions if they refer to declarations from parent functions.
	* stmt.c (expand_decl): Don't put automatic variables in registers
	if the DECL_NONLOCAL flag is set.

2003-04-17  Janis Johnson  <janis187@us.ibm.com>

	* doc/sourcebuild.texi (Test Suites): Document support for testing
	binary compatibility (moved from testsuite/README.compat).

2003-04-17  Simon Law  <sfllaw@engmail.uwaterloo.ca>

	* doc/include/gpl.texi: Fix double-spacing after "MA" to match
	the one provided by the FSF.

2003-04-17  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Binaries): Update URL and list of platforms
	provided by ftp.thewrittenword.com.

2003-04-17  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* doc/invoke.texi (inline-limit): Fix pasto.

2003-04-16  Mark Mitchell  <mark@codesourcery.com>

	PR middle-end/8866
	* cfgtrl.c (try_redirect_by_replacing_jump): Do not delete
	jumptables.

2003-04-16  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR/10271
	* pa-protos.h (function_arg): Remove last argument.
	* pa.c (function_arg): Likewise.  Use CUMULATIVE_ARGS struct instead.
	* pa.h (struct hppa_args): Add member incoming.
	(INIT_CUMULATIVE_ARGS, INIT_CUMULATIVE_INCOMING_ARGS): Initialize
	member incoming.
	(FUNCTION_ARG): Revise call to function_arg.
	(FUNCTION_INCOMING_ARG): Delete.

2003-04-15  J"orn Rennecke <joern.rennecke@superh.com>

	PR target/9594:
	* sh.c (barrier_align): Also recognize stuff_delay_slot as
	an indicator that a barrier was created by branch splitting.

	merge from mainline:

	2003-03-05  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (OVERRIDE_OPTIONS): For TARGET_SHMEDIA, the minimum value
	for align_jumps is 4.

	(SECONDARY_INPUT_RELOAD_CLASS): If reloading a PLUS into FPUL,
	use GENERAL_REGS.

	2003-03-03  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (OVERRIDE_OPTIONS): Set default values for align_loops
	and align_jumps if not set.
	Force align_jumps to be at least 2.
	When relaxing, force align_functions to be at least the maximum of
	align_loops, align_jumps and 4.
	* sh.c (find_barrier, barrier_align): Honour align_jumps_log.
	(sh_loop_align): Honour align_loops_log.

	* sh.md (length attribute): Use prev_nonnote_insn instead of PREV_INSN
	to check for indirect_jump_scratch.
	(indirect_jump_scratch): Add second set.
	* sh.c (output_far_jump): Use prev_nonnote_insn instead of PREV_INSN
	when looking for indirect_jump_scratch.
	Extract scratch register taking new structure of indirect_jump_scratch
	into account.
	(gen_block_redirect): Set INSN_SCOPE for indirect_jump_scratch.

2003-04-15  James A. Morrison  <ja2morri@uwaterloo.ca>

	* invoke.texi (Spec Files): Wrap if-exists-else example.
	(MCore): Remove duplicate @itemx entries and @opindex entries.

2003-04-15  Ulrich Weigand  <uweigand@de.ibm.com>

	* unwind.inc (_Unwind_Backtrace): New function.
	* unwind.h (_Unwind_Backtrace): Declare it.
	* libgcc-std.ver (_Unwind_Backtrace): Export it.

2003-04-15  Jason Merrill  <jason@redhat.com>

	PR middle-end/10336, c++/10401
	* jump.c (never_reached_warning): Also stop looking if we reach the
	beginning of the function.

2003-04-15  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	PR target/10338
	PR bootstrap/10198
	PR bootstrap/10140
	* fixinc/gnu-regex.c (regerror): Use mempcpy not __mempcpy.

2003-04-15  Jakub Jelinek  <jakub@redhat.com>

	* config/rs6000/rs6000.h (EPILOGUE_USES): Use register 2,
	instead of TOC_REGISTER in epilogue in
	current_function_calls_eh_return functions.

2003-04-14  Hans-Peter Nilsson  <hp@axis.com>

	PR target/10377
	* config/cris/cris.md ("*mov_sideqi", "*mov_sidehi")
	("*mov_sidesi", "*mov_sideqi_mem", "*mov_sidehi_mem")
	("*mov_sidesi_mem", "*clear_sidesi", "*clear_sidehi")
	("*clear_sideqi", "*ext_sideqihi", "*ext_sideqisi")
	("*ext_sidehisi", "*op_sideqi", "*op_sidehi", "*op_sidesi")
	("*op_swap_sideqi", "*op_swap_sidehi", "*op_swap_sidesi")
	("*extopqihi_side", "*extopqisi_side", "*extophisi_side")
	("*extopqihi_swap_side", "*extopqisi_swap_side")
	("*extophisi_swap_side", 8th, 9th, 10th, 11th, 14th peepholes):
	When next to constraint R, replace constraint i with n.

Mon Apr 14 16:14:37 CEST 2003  Jan Hubicka  <jh@suse.cz>

	PR opt/10024
	* cfgrtl.c (force_nonfallthru_and_redirect): Use unchecked_make_edge.

2003-04-14  Kriang Lerdsuwanakij  <lerdsuwa@users.sourceforge.net>

	* doc/contrib.texi (Contributors): Correct my entry.

2003-04-12  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11-protos.h
	(m68hc11_eq_compare_operator): Declare
	* config/m68hc11/m68hc11.h (PREDICATE_CODES): Register new predicate.
	* config/m68hc11/m68hc11.c (m68hc11_eq_compare_operator): New predicate
	(d_register_operand): Check the operand mode.
	(hard_addr_reg_operand): Likewise.

2003-04-12  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("decrement_and_branch_until_zero"): New
	pattern for dbcc/ibcc generation for 68HC12.
	("doloop_end"): New pattern.
	("m68hc12_dbcc_dec_hi"): New pattern for dbeq/dbne.
	("m68hc12_dbcc_inc_hi"): New pattern for ibeq/ibne.
	("m68hc12_dbcc_dec_qi"): New pattern.
	("m68hc12_dbcc_inc_qi"): New pattern.
	(split): Add split for the above when we can't use dbcc/ibcc due to
	reloading.
	(peephole2): Add peephole2 to generate the above when possible.

2003-04-12  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("bitcmpqi" split): No need to test the
	mode of operand 0.
	(peephole2 optimize const load): Likewise for operand 2.
	("*rotlhi3_with_carry"): Change pattern to a const 1 rotate which
	clobbers CC_REGNUM.
	("*rotrhi3_with_carry"): Likewise.
	(ashift:DI 1 split): Update pattern to create the above rotate.
	(lshiftrt:DI 1 split): Likewise.

2003-04-12  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md (SOFT_Z_REGNUM): New constant.
	("tstqi_z_used" split): Use it.
	("cmphi_z_used"): Likewise.
	("bitcmpqi_z_used"): Likewise; also use SP_REGNUM constant.
	("cmpqi_z_used"): Likewise.

2003-04-12  Mark Mitchell  <mark@codesourcery.com>

	PR c++/7910
	* config/i386/winnt.c (i386_pe_mark_dllimport): Fix thinko.

2003-04-12  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.h (TARGET_SWITCHES): Fix -mnominmax option;
	recognize -mnorelax.
	(reg_class): Add Z_OR_S_REGS to represent soft registers with Z
	(REG_CLASS_NAMES): Add its name.
	(REG_CLASS_CONTENTS): Define its content.

2003-04-12  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/larith.asm (memcpy): Use ARG macro to access stack
	parameters so that offsets are valid for far definition.
	(__mulsi3): Likewise and use ret to return.
	(___adddi3, ___subdi3, ___notdi2, ): Don't use it to save the result.

2003-04-11  Geoffrey Keating  <geoffk@apple.com>

	* doc/extend.texi (Empty Structures): New.

2003-04-11  Richard Henderson  <rth@redhat.com>

	PR c++/10202
	* expr.c (expand_expr): Use COMPLETE_OR_UNBOUND_ARRAY_TYPE_P
	not COMPLETE_TYPE_P for re-invoking layout_decl.

2003-04-11  Simon Law  <sfllaw@engmail.uwaterloo.ca>

	* doc/bugreport.texi: Fix paragraph breaking between sections
	in preparation for TeXinfo's paragraph indentation fixes.
	* doc/extend.texi: Ditto.
	* doc/invoke.texi: Ditto.
	* doc/objc.texi: Ditto.
	* doc/gcov.texi: Wrap 'gcov' in @command{}.
	* doc/invoke.texi (Darwin Options): Add a preamble.

2003-04-11  Richard Henderson  <rth@redhat.com>

	PR c/10201
	* expr.c (expand_expr): Move DECL_RTL frobbing ...
	* stor-layout.c (layout_decl): ... here.

2003-04-11  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* doc/install.texi (hppa): Update links for HP-UX patches.  Revise
	notes on linker selection and configuration for 64-bit HP-UX port.
	* doc/invoke.texi (hppa): Remove hppa text from description for
	-ffunction-sections and -fdata-sections.  Document -static, -nolibdld
	and -threads options.

	* pa-hpux10.h (LIB_SPEC): Add link options to resolve dependency of
	libc.a on libdld.sl when -static is specified and -nolibdld is not
	specified.
	* pa64-hpux.h (LIB_SPEC): Likewise.
	* pa-hpux11.h (LIB_SPEC): Likewise.
	(LINK_SPEC): Add __gcc_plt_call as an undefined symbol when -shared
	is not specified.

2003-04-08  Jonathan Wakely  <redi@gcc.gnu.org>

 	* doc/extend.texi (Template Instantiation): Refer to ISO standard,
 	not Working Paper.
 	* doc/invoke.texi (C++ Dialect Options): Same.

Fri Apr 11 00:12:14 CEST 2003  Jan Hubicka  <jh@suse.cz>

	PR inline-asm/8803
	* function.c (instantate_virtual_regs):  Verify that all ASM statements
	match after the virutal regs instantiation.

2003-04-10  Steve Ellcey  <sje@cup.hp.com>

	* ia64-protos.h (addp4_optimize_ok): New.
	* ia64.c (addp4_optimize_ok): New.
	* ia64.md (*ptr_extend_plus_1): Use addp4_optimize_ok.
	(*ptr_extend_plus_2): Ditto.

2003-04-10  Steve Ellcey  <sje@cup.hp.com>

	* expr.c (expand_assignment): Extend offset_rtx with convert_to_mode
	not with convert_memory_address.
	(store_constructor): Ditto, and same for copy_size_rtx.
	(expand_expr): Ditto.

2003-04-10  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (larl_operand): Do not allow symbols
	marked with '@'.
	(s390_encode_section_info): Mark symbols with forced 1-byte
	alignment with '@'.
	(s390_strip_name_encoding): Strip '@'.
	(legitimize_pic_address): Handle symbols that are not valid
	LARL operands in 64-bit mode.

2003-04-10  Andrew Haley  <aph@redhat.com>

	* tree-inline.c (inlinable_function_p): Disable inlining for
	synchronized methods.

2003-04-09  Alexandre Oliva  <aoliva@redhat.com>

	* config/fp-bit.c (unpack_d): Handle pair of doubles with
	different signs correctly.

2003-04-08  Richard Henderson  <rth@redhat.com>

	PR target/9886
	* config/ia64/ia64.md (cmovdi_internal): Use 'n' not 'i' constraints.
	(cmovsi_internal): Likewise.

2003-04-07  Matt Kraai  <kraai@alumni.cmu.edu>

	* doc/install.texi: Use @command and @samp for single- and
	multi-word commands respectively.
	* doc/makefile.texi: Likewise.
	* doc/sourcebuild.texi: Likewise.

2003-04-07  Christian Ehrhardt  <ehrhardt@mathematik.uni-ulm.de>
	    Richard Henderson  <rth@redhat.com>

	PR c/9516
	* expr.c (safe_from_p): Rearrange to avoid deep recursion in
	favour of looping and tail recursion for TREE_LIST and binops.

2003-04-07  Glen Nakamura  <glen@imodulo.com>

	PR opt/8634
	* explow.c (maybe_set_unchanging): Don't flag non-static const
	aggregate type initializers with RTX_UNCHANGING_P.

2003-04-07  Richard Henderson  <rth@redhat.com>

	PR opt/8634
	* function.c (purge_addressof_1): Don't try arithmetics for
	unchanging memories.

2003-04-07  Janis Johnson  <janis187@us.ibm.com>

	* doc/sourcebuild.texi (Test Suites): Document testing support for
	gcov and profile-directed optimizations; describe gcc.misc-tests.

2003-04-07  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* doc/rtl.texi (Comparison operations): Update to
	record the allowed comparison modes.

Mon Apr  7 22:13:38 CEST 2003  Jan Hubicka  <jh@suse.cz>

	PR target/10077
	* i386.md (movsi_1):  Fix SSEMOV alternative.

Mon Apr  7 15:56:30 CEST 2003  Jan Hubicka  <jh@suse.cz>

	PR opt/10024
	Revert Zack's change
	* cfglayout.c (cfg_layout_redirect_edge):
	Redirect any branch edges unified with the fallthru one.
	* cfgrtl.c (force_nonfallthru_and_redirect):  Do not special
	case fallthru edges when called via cfglayout.c

2003-04-07  James A Morrison <ja2morri@student.math.uwaterloo.ca>

	* doc/extend.texi (Darwin Pragmas): Fix spelling of Mac OS.

2003-04-05  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* c-decl.c (set_save_expr_context): Prototype.

2003-04-05  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.h (RTX_COSTS): Halve Power multiply costs.
	* config/rs6000/rs6000.md: Correct Power4 multiply latency.

2003-04-05  Zack Weinberg  <zack@codesourcery.com>

	PR optimization/10024
	* cfgrtl.c (force_nonfallthru_and_redirect): If e is the edge
	we want, use it.

2003-04-05  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	PR bootstrap/10267
	* doc/install.texi (*-*-solaris2): /bin/ksh is not just recommended
	for configuring.

2003-04-04  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* c-decl.c (set_save_expr_context): Use traditional-style function
	definition.

2003-04-04  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Add entries for Wolfgang
	Bangerth, DJ Delorie, Christian Ehrhardt, Christopher Faylor,
	Nathanael Nerode, Diego Novillo, Hartmut Penner, Volker Reichelt,
	Danny Smith, and Ulrich Weigand.
	Update Kriang Lerdsuwanakij and fix a typo in Janis Johnson's
	entry.

2003-04-04  Zack Weinberg  <zack@codesourcery.com>

	PR bootstrap/10216
	* configure.in: Check whether it is necessary to link against
	libm to use ldexp.
	* configure: Regenerate.
	* Makefile.in: Add LDEXP_LIB substitution variable.

2003-04-03  Jason Merrill  <jason@redhat.com>

	PR c/10175
	* jump.c (never_reached_warning): Revert patch of 2002-11-02.
	Look backwards for a line note.

2003-04-02  Mike Stump  <mrs@apple.com>

	* doc/extend.texi (PowerPC AltiVec Built-in Functions): Split up
	some to avoid faulting makeinfo --html.

2003-04-02  Richard Henderson  <rth@redhat.com>

	* libgcc-std.ver (_Unwind_GetCFA): New.
	* unwind-dw2.c (_Unwind_GetCFA): New.
	* unwind-sjlj.c (_Unwind_GetCFA): New.
	* unwind.h: Declare it.

2003-04-02  Mike Stump  <mrs@apple.com>

	* doc/install.texi (Specific): Update pointers to apple.com.

2003-04-01  Jan Hubicka  <jh@suse.cz>

	PR inline-asm/8088
	* i386.c (ix86_hard_regno_mode_ok):  Return 0 for MMX/SSE registers
	when MMX/SSE is not available.

2003-04-02  Richard Henderson  <rth@redhat.com>

	* except.c (sjlj_find_directly_reachable_regions): Recognize when
	must-not-throw region has been deleted.

2003-04-02  Richard Henderson  <rth@redhat.com>

	* dwarf2out.c (output_call_frame_info): Ignore fde->nothrow as an
	optimization when flag_exceptions not enabled.

2003-04-01  Richard Henderson  <rth@redhat.com>

	* except.c (convert_from_eh_region_ranges_1): Smash REG_EH_REGION
	notes for nothrow calls if flag_forced_unwind_exceptions.
	(build_post_landing_pads): Mind flag_forced_unwind_exceptions.
	(sjlj_find_directly_reachable_regions): Likewise.
	(reachable_handlers): Likewise.
	(can_throw_external): Likewise.
	(collect_one_action_chain): Record cleanups after catch-all and
	must-not-throw if flag_forced_unwind_exceptions.
	* flags.h (flag_forced_unwind_exceptions): Declare.
	* toplev.c (flag_forced_unwind_exceptions): New.
	(lang_independent_options): Add it.
	* doc/invoke.texi: Add it.

2003-04-01  Geoffrey Keating  <geoffk@apple.com>

	* unwind-dw2-fde-darwin.c (DESTRUCTOR_MAY_BE_CALLED_LIVE): New.
	(live_image_destructor): Reset image to initial state.
	(examine_objects): Set DESTRUCTOR_MAY_BE_CALLED_LIVE.

2003-04-01  Dale Johannesen  <dalej@apple.com>

	* cse.c (count_reg_usage): Fix handling of REG_EQUAL notes.
	(Zdenek Dvorak's fix from 3.4 branch)

2003-04-01  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_fixup_clobbered_return_reg):
	Do nothing if __builtin_return_address was not used.

2003-04-01  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.c (function_arg_pass_by_reference):
	Return true for variable sized types.
	(rs6000_va_arg): Handle variable sized types passed by reference
	on non-SVR4 ABI.

2003-03-31  Mark Mitchell  <mark@codesourcery.com>

	PR c/9936
	* c-decl.c (grokdeclarator): Clear SAVE_EXPR_CONTEXT for
	variably-sized arrays in parameters.
	(set_save_expr_context): New function.
	(c_expand_body): Use it, via walk_tree.

2003-03-31  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.c (hard_reg_operand): Check the mode.

2003-03-31  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.c (m68hc11_gen_movhi): Don't rely on REG_WAS_0
	notes as they are boggus.
	(m68hc11_gen_movqi): Likewise.

2003-03-31  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.c (expand_prologue): For an interrupt handler
	save the soft registers after the frame pointer so that gdb can unwind
	the frame more easily.
	(expand_epilogue): Likewise in opposite order; allow to use X register
	as scratch if the return value is by reference.

2003-03-31  Jason Merrill  <jason@redhat.com>

	PR java/10145
	* stor-layout.c (update_alignment_for_field): Respect
	DECL_USER_ALIGN for zero-length bitfields, too.
	* c-decl.c (finish_struct): Don't set DECL_ALIGN for normal
	fields.

2003-03-30  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	PR other/6955
	* collect2.c (collect_wait): Use WCOREDUMP and fix output message.
	* system.h (WCOREDUMP, WCOREFLG): Define if necessary.

2003-03-30  Richard Henderson  <rth@redhat.com>

	PR c/10083
	* config/alpha/alpha.md (umuldi3_highpart): Change to expander;
	don't zero_extend const inputs.

2003-03-29  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi: Add Eric Botcazou and Roger Sayle.
	Uniformly use bugfix instead of bug fix.

2003-03-29  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	PR doc/895
	* ONEWS: Remove those items that already appear in the EGCS
	release notes on our web pages.

2003-03-29  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.h (FUNCTION_VALUE_REGNO_P): Respect
	TARGET_HARD_FLOAT.  Reformat.
	(FUNCTION_ARG_REGNO_P): Likewise, and remove unneeded casts.

2003-03-29  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_emit_prologoue): Make sure backchain is
	set up before any trapping memory access if flag_non_call_exceptions.

2003-03-29  Alan Modra  <amodra@bigpond.net.au>

	* reload1.c (reload_as_needed): Allow a USE in asm reloads.

	* loop.c: (find_mem_in_note_1, find_mem_in_note): Comment.

2003-03-28  Loren James Rittle  <ljrittle@acm.org>

	* doc/install.texi (*-*-freebsd*): Update with known status.

2003-03-28  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("literal_pool_31"): Output pool anchor
	label even if pool empty when generating PIC.
	("literal_pool_31", "literal_pool_64"): Coding style cleanup.

2003-03-28  Kazu Hirata  <kazu@cs.umass.edu>,
	    Dhananjay Deshpande  <dhananjayd@kpit.com>

	PR target/10205
	* config/h8300/h8300.c (h8300_initial_elimination_offset):
	Correct the offset computation when TARGET_NORMAL.

2003-03-28  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/10067
	* config/sparc/sparc.md (jump pattern): Correct order
	when issuing the annuling marker.

2003-03-28  Alan Modra  <amodra@bigpond.net.au>

	* loop.c: (find_mem_in_note_1, find_mem_in_note): New functions.
	(replace_loop_mems): Add "written" param.  Remove invalid REG_EQUAL
	notes after hoisting.
	(load_mems): Adjust replace_loop_mems call.

2003-03-28  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/8281
	* config/sparc/sparc.md (movdi_insn_sp32_v9): Remove 'f-f' alternative.
	(movdi reg/reg split): Match only on sparc32, and v9 when int regs.

2003-03-28  Eric Botcazou  <ebotcazou@libertysurf.fr>
	    Richard Henderson  <rth@redhat.com>

	PR target/10114 and PR target/10084
	* dwarf2out.c (mem_loc_descriptor): Handle LO_SUM.

2003-03-27  Olivier Hainque  <hainque@act-europe.fr>

	PR ada/9953
	* ada/Makefile.in (gnatlib configuration for HPUX): Split
	the general section for HPUX into specific sections for
	HPUX 10 and HPUX 11. Fix the setting of TGT_LIB in the HPUX
	11 case.

2003-03-26  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_optimize_prolog): Do not save/restore
	registers used for global asm variables.
	(s390_frame_info, s390_arg_frame_offset): Likewise.
	(s390_emit_prologue, s390_emit_epilogue): Likewise.

2003-03-26  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Update Janis Johnson.

2003-03-26  Jakub Jelinek  <jakub@redhat.com>

	* config/ia64/ia64.c (ia64_expand_op_and_fetch): Fix comment.
	(ia64_expand_compare_and_swap): Use always DImode ar.ccv,
	zero extend old to it.
	* config/ia64/ia64.md (cmpxchg_acq_si): Remove mode from ccv
	operand.

2003-03-26  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/7784
	* reload.c (find_reloads_address): Handle
	(PLUS (PLUS (REG) (REG)) (CONST_INT)) form for
	all base registers.

2003-03-25  Marcelo Abreu  <mmabreu@inf.ufrgs.br>

	PR other/10203
	* version.c: Reference the GCC web site in the URL.

2003-03-25  Jan Hubicka  <jh@suse.cz>

	PR opt/10056
	* cfglayout.c (fixup_reorder_chain):  Fix dealing with the conditional
	jump jumping to the next instruction.
	* cfgrtl.c (force_nonfallthru_and_redirect):  Likewise.
	* cfg.c (unchecked_make_edge): New.
	* basic-block.h (unchecked_make_edge): Declare.

2003-03-25  Jason Merrill  <jason@redhat.com>

	PR optimization/10171
	* unroll.c (unroll_loop): Don't delete the jump at the end unless
	we also delete a jump at the beginning.

2003-03-25  Stephane Carrez  <stcarrez@nerim.fr>

	* doc/contrib.texi (Contributors): Mention self as 68HC11/68HC12
	contributor.

2003-03-25  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/passes.texi (Passes): Properly document that we do not
	perform jump2 any longer; remove command-line option -dJ.

2003-03-25  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/8746
	* config/i386/i386.md (and promoting splitters): Disable HImode to
	SImode promoting when the sign bit matters and is not preserved, or
	when TARGET_FAST_PREFIX is true. Disable promoting when optimizing
	for size.

2003-03-24  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/t-m68hc11-gas (LIB1ASMFUNCS): Add _call_far and
	_return_far
	(MULTILIB_OPTIONS): Don't multilib on -mlong-calls.
	(MULTILIB_EXCEPTIONS): Likewise.
	* config/m68hc11/m68hc11.md ("call"): Support far calls for 68HC11
	by calling some board support routine.
	("call_value"): Likewise.
	("*return_void"): Likewise for return.
	("*return_16bit"): Likewise.
	("*return_32bit"): Likewise.
	* config/m68hc11/m68hc11.h (ASM_DECLARE_FUNCTION_NAME): Generate .far
	for 68HC11 too.
	(DWARF2_ADDR_SIZE): Use 4 so that addresses can
	* config/m68hc11/m68hc11.c (m68hc11_override_options): Accept
	-mlong-calls for 68HC11.
	* config/m68hc11/larith.asm (declare_near): New macro.
	(__premain, ___negsi2, ___one_cmplsi2, ___ashlsi3): Use it.
	(___ashrsi3, ___lshrsi3, ___lshrhi3, ___lshlhi3): Likewise.
	(___rotrhi3, ___rotlhi3, ___ashrhi3, ___ashrqi3): Likewise.
	(___lshlqi3, __divmodhi4, ___mulqi3, ___mulhi3): Likewise.
	(__mulhi32): Likewise.
	(ret): Update macro for 68HC11.
	(__far_trampoline): Implement for 68HC11.
	(__call_a16, __call_a32, __return_void, __return_16): New support
	routines for 68HC11 memory bank switching calling support.
	(__return_32): Likewise.

2003-03-21  Glen Nakamura  <glen@imodulo.com>

	PR opt/10087
	* loop.c (loop_givs_reduce): Skip bivs with duplicate locations
	while incrementing giv.
	(record_biv): Check for duplicate biv locations and
	set (struct induction *) v->same if found.

2003-03-24  Janis Johnson  <janis187@us.ibm.com>

	* doc/install.texi (Testing): Mention test result links from build
	status pages.

2003-03-24  Mark Mitchell  <mark@codesourcery.com>

	* function.c (put_var_into_stack): Change bool parameter to int.
	(gen_mem_addressof): Likewise.
	* rtl.h (gen_mem_addressof): Likewise.
	* tree.h (put_var_into_stack): Likewise.
	* config/alpha/alpha.c (alpha_gp_save_rtx): Adjust call to
	gen_mem_addressof or put_var_into_stack.
	* config/c4x/c4x.c (c4x_expand_builtin): Likewise.

2003-03-24  Andreas Schwab  <schwab@suse.de>

	* config/ia64/ia64.c (spill_tfmode_operand): Adjust calls to
	gen_mem_addressof.

2003-03-24  Jakub Jelinek  <jakub@redhat.com>

	* expr.c (do_jump): Handle UNSAVE_EXPR specially.

2003-03-23  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/10072
	* combine.c (simplify_if_then_else): Check that the mode
	has MODE_INT class before applying the (OP Z (mult COND C2))
	transformation.

2003-03-23  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/9414
	* config/sparc/sparc.md (widening peepholes): Use
	widen_memory_access instead of change_address.

2003-03-23  Mark Mitchell  <mark@codesourcery.com>

	PR c++/7086
	* c-typeck.c (c_mark_addressable): Adjust calls to
	put_var_into_stack.
	* expr.c (expand_expr): Likewise.
	* function.c (put_var_into_stack): Add rescan parameter.  Do not
	call fixup_var_refs when rescan is false.
	(gen_mem_addressof): Likewise.
	(assign_parms): Adjust calls to put_var_into_stack.
	(setjmp_protect): Likewise.
	(setjmp_protect_args): Likewise.
	* rtl.h (gen_mem_addressof): Change prototype.
	* stmt.c (expand_decl): Adjust calls to put_var_into_stack.
	* tree.h (put_var_into_stack): Change prototype.

2003-03-23  Arpad Beszedes <beszedes@cc.u-szeged.hu>

	PR middle-end/9967
	* builtins.c (expand_builtin_fputs): When optimizing for size,
	don't transform fputs into fwrite.

2003-03-24  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/sysv4.h (ASM_OUTPUT_ALIGNED_BSS): Remove unnecessary
	globalize_label.

	Merge from mainline.
	2003-01-13  Andreas Schwab  <schwab@suse.de>
	* config/rs6000/sysv4.h (ASM_OUTPUT_ALIGNED_LOCAL): Output type
	directive.

2003-03-23  Glen Nakamura <glen@imodulo.com>

	PR c/8224
	* fold-const.c (extract_muldiv_1): Don't pass through type conversions
	when signedness changes for division or modulus.

2003-03-23  Richard Henderson  <rth@redhat.com>

	* cfgcleanup.c (try_optimize_cfg): Allow merging of tablejumps
	before flow2.
	* cfgrtl.c (try_redirect_by_replacing_jump): Similarly.

2003-03-23  Richard Henderson  <rth@redhat.com>

	PR opt/10116
	* ifcvt.c (find_if_block): Disallow tablejump insns outgoing
	from then_bb or else_bb after flow2.
	* jump.c (tablejump_p): New.
	* rtl.h: Declare it.

2003-03-22  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.c (output_cbranch): Fix typo in comment.

2003-03-22  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.c (output_cbranch, output_bb, output_bvb): Output nop for
	conditional branch to the following instruction.  Use next_real_insn
	instead of next_active_insn.
	(output_dbra, output_movb, jump_in_call_delay): Use next_real_insn
	instead of next_active_insn.

2003-03-22  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("movti", "*movdi_31", "*movdf_31"): Use 'o' instead
	of 'm' constraint in forced-split alternatives.
	("*adddi3_31", "*subdi3_31"): Likewise.  Also, pass 0 instead of 1 as
	VALIDATE_ADDRESS parameter to operand_subword.

2003-03-22  Svein E. Seldal  <Svein.Seldal@solidas.com>

	* config/c4x/t-c4x (MULTILIB_MATCHES): Make gcc recognize a c33 as
	a c30 instead of a c40 processor.

2003-03-21  Richard Henderson  <rth@redhat.com>

	PR opt/2001
	* bb-reorder.c (maybe_duplicate_computed_goto_succ): New.
	(make_reorder_chain_1): Call it.

	* function.h (struct function): Add computed_goto_common_label,
	computed_goto_common_reg.
	* function.c (free_after_compilation): Zap them.
	* stmt.c (expand_computed_goto): Use them to produce one
	indirect branch per function.

2003-03-22  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("call_value"): Fix trap check.

2003-03-22  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.h (ASM_DECLARE_FUNCTION_NAME): Fix typo in
	writing .interrupt command.
	* config/m68hc11/m68hc11.md ("call"): Look at the symbol to see
	if it's a far or near function.
	("call_value"): Likewise.
	* config/m68hc11/m68hc11.c (m68hc11_attribute_table): Add far and
	near attributes.
	(m68hc11_handle_fntype_attribute): Accept attributes on methods.
	(m68hc11_override_options): Ignore -mlong-calls for 68HC11.
	(m68hc11_initial_elimination_offset): Set current_function_far
	according to attributes.
	(expand_prologue): Likewise.
	(trap_handler_symbol): New global to keep track of trap handlers.
	(m68hc11_encode_section_info): Mark symbol as far if needed; set
	trap symbol.
	(m68hc11_is_far_symbol): New function.
	(m68hc11_is_trap_symbol): New function.
	* config/m68hc11/m68hc11-protos.h (m68hc11_is_far_symbol): Declare.
	(m68hc11_is_trap_symbol): Declare.

2003-03-21  Jan Hubicka  <jh@suse.cz>

	PR inline-asm/7916

	* function.c (instantiate_virtual_regs_lossage): New function.
	(instantiate_virtual_regs_1): Use it.
	(instantiate_virtual_regs): Do not continue in substition when insn has
	been deleted.

2003-03-21  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.h: Do not include fixdfdi.h on s390x.
	(TARGET_64BIT): Define as compile-time constant when IN_LIBGCC2.
	(MIN_UNITS_PER_WORD): Do not define when IN_LIBGCC2.

2003-03-21  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>

	PR doc-bug/9813
	* doc/extend.texi: Move misplaced paragraph about underscores in
	variables in macros.

2003-03-21  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>

	* doc/invoke.texi: Fix table environment.

2003-03-21 Richard Earnshaw  <rearnsha@arm.com>

	* ifcvt.c (find_if_case_1): If we add a new bb, update the dominance
	information.

2003-03-21  Eric Botcazou  <ebotcazou@libertysurf.fr>
	    Richard Henderson  <rth@redhat.com>

	PR optimization/8366
	* config/sparc/sparc.h: (SYMBOLIC_CONST): New macro.
	(GO_IF_LEGITIMATE_ADDRESS): Use it. Reject the form
	PIC+SYMBOLIC_CONST in other modes than Pmode.
	(GO_IF_MODE_DEPENDENT_ADDRESS): Use it. Mark
	the form PIC+SYMBOLIC_CONST as mode dependent.

2003-03-20  Richard Henderson  <rth@redhat.com>

	* fold-const.c (extract_muldiv_1): Revert changing order of
	operands in case MULT_EXPR of 2003-02-16 patch.

2003-03-20  Richard Henderson  <rth@redhat.com>

	PR c/8602
	* integrate.c (output_inline_function): Reset input_filename
	and lineno from the decl before rest_of_compilation.

2003-03-20  Richard Earnshaw  <rearnsha@arm.com>

	PR 10066
	* arm.md (UNSPEC_PIC_BASE): New constant.
	(pic_add_dot_plus_four): Wrap with unspec.
	(pic_add_dot_plus_eight): Likewise.

2003-03-19  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_preferred_reload_class): Do not
	force constants to the pool unless necessary.
	(s390_decompose_address): Prefer to use pointer as base,
	not index register.
	* config/s390/s390.md ("*tsthiCCT_only"): Remove '?' from
	Q alternative.
	("*movdi_64", "*movsi", "movhi", "movqi_64", "movqi",
	"*movdf_64", "*movsf"): Add '?' to Q->Q alternatives.
	("*extractqi", "*extracthi", "*zero_extendhisi2_31",
	"*zero_extendqisi2_31", "*zero_extendqihi2_31",
	"*adddi3_31", "*subdi3_31"): Do not set "type" attribute.

2003-03-19  Jakub Jelinek  <jakub@redhat.com>

	* config/rs6000/rs6000.c (rs6000_emit_load_toc_table): Don't call
	rs6000_maybe_dead if !fromprolog.

2003-03-19  Jakub Jelinek  <jakub@redhat.com>

	* ifcvt.c (dead_or_predicable): Fail if there are any references
	to tablejump in merge_bb other than the final JUMP_INSN.

2003-03-19  Jakub Jelinek  <jakub@redhat.com>

	* stmt.c (expand_start_case): Call emit_queue ().

2003-03-19  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR 10062
	* config/pa/pa-hpux.h (TARGET_HPUX_UNWIND_LIBRARY): Redefine.
	* pa-protos.h (output_lbranch): New prototype.
	* pa.c (compute_frame_size): Change size of the frame marker on the
	64-bit ports to 48 bytes.
	(pa_output_function_prologue): Document why SAVE_SP is set.
	(hppa_expand_prologue): Save previous stack pointer into frame marker
	on targets which use the hpux unwind library.
	(output_cbranch): Use output_lbranch.
	(output_lbranch): New function to output long unconditional branches.
	* pa.h (TARGET_HPUX_UNWIND_LIBRARY): Define.
	(STACK_POINTER_OFFSET): Update offset for 48-byte frame marker on
	64-bit ports.
	* pa.md (jump): Use output_lbranch.
	(allocate_stack): New expander for dynamic stack allocation.

2003-03-18  Alexandre Oliva  <aoliva@redhat.com>

	* toplev.c (independent_decode_option): Return success for --help,
	--target-help and --version.

2003-03-19  Alan Modra  <amodra@bigpond.net.au>

	PR target/10073
	* combine.c (force_to_mode <NOT>): Use gen_int_mode.

2003-03-18  Andreas Schwab  <schwab@suse.de>

	PR target/7248
	* config/m68k/m68k.md (iordi3): Fix setting low half to -1.  From
	martin@blom.org.

2003-03-17  Jason Merrill  <jason@redhat.com>

	PR c++/10091
	* expr.c (expand_expr) [ADDR_EXPR]: Disallow taking the address of
	an unaligned member of TREE_ADDRESSABLE type.

2003-03-17  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* dwarf2asm.h: Delete obsolete comment.
	(dw2_asm_output_data, dw2_asm_output_delta, dw2_asm_output_offset,
	dw2_asm_output_pcrel, dw2_asm_output_addr,
	dw2_asm_output_addr_rtx, dw2_asm_output_encoded_addr_rtx,
	dw2_asm_output_nstring, dw2_asm_output_data_uleb128,
	dw2_asm_output_data_sleb128, dw2_asm_output_delta_uleb128,
	dw2_asm_output_delta_sleb128): Add ATTRIBUTE_NULL_PRINTF.

2003-03-17  Steve Ellcey  <sje@cup.hp.com>

	* stmt.c (tail_recursion_args): Call promote_mode to set
	unsignedp flag correctly before calling convert_move.

2003-03-17  Dave Love  <fx@gnu.org>
	    Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config/alpha/osf.h (TARGET_OS_CPP_BUILTINS): Define __digital__,
	__arch64__ to match Compaq cc.

2003-03-17  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>

	* function.c (thread_prologue_and_epilogue_insns): Set delete_unused
	argument to 0 for redirect_jump.

2003-03-16  Mark Mitchell  <mark@codesourcery.com>

	PR c++/8805
	* except.c (eh_region_u_cleanup): Add prev_try.
	(expand_eh_region_end_cleanup): Set it.
	(reachable_handlers): Use it to skip over cleanup blocks.

2003-03-16  Richard Henderson  <rth@redhat.com>

	PR opt/6798
	* cfgcleanup.c: Include params.h.
	(try_crossjump_bb): Use PARAM_MAX_CROSSJUMP_EDGES.  Fix test for
	too many outgoing edges from a block.
	* Makefile.in (cfgcleanup.o): Depend on PARAMS_H.
	* params.def (max-crossjump-edges): New.
	* doc/invoke.texi: Document it.

2003-03-16  Richard Henderson  <rth@redhat.com>

	* config/i386/i386.md (movstrictqi, movstrictqi_1): Check
	optimize_size as well.

2003-03-16  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.c (print_operand): Handle 'b' modifier
	for D register to specify the low part of it, aka B.
	(m68hc11_gen_movhi): Use REG_WAS_0 note and increment or decrement
	the register if we are loading 1 or -1 to it; avoid using temp
	register when moving X/Y to Y/X.
	(m68hc11_gen_movqi): Likewise.
	(m68hc11_check_z_replacement): Fix last insn setting for compare case.

2003-03-14  Mark Mitchell  <mark@codesourcery.com>

	PR optimization/9016
	* config/i386/i386.c (ix86_expand_move): Force more CONST_DOUBLEs
	into the constant pool.

2003-03-16  Falk Hueffner  <falk.hueffner@student.uni-tuebingen.de>

	PR target/9164
	* tree.c (get_narrower): For extensions with unchanged bit number,
	return the unsignedness of the outer mode.

2003-03-16  Roger Sayle  <roger@eyesopen.com>

	* c-typeck.c (build_component_ref):  Turn "for" into "do .. while"
	to avoid "may be used uninitialized" warning on ia64-hpux.
	* config/ia64/ia64-c.c: Include "tm_p.h" for function prototypes.

2003-03-16  Neil Booth  <neil@daikokuya.co.uk>

	* cppinit.c: Remove support of -A-.
	* doc/cppopts.texi: Remove documentation of -A-.

2003-03-15  Richard Henderson  <rth@redhat.com>

	2003-01-14  Richard Henderson  <rth@redhat.com>
	* config/alpha/alpha.c (alpha_expand_mov): Use correct mode
	for force_const_mem.

2003-03-15  Richard Henderson  <rth@redhat.com>

	PR target/9700
	* config/alpha/alpha.c (alpha_va_start): Account for
	current_function_pretend_args_size in the AP offset.

2003-03-15  Jason Merrill  <jason@redhat.com>

	PR debug/6387
	* dwarf2out.c (dwarf2out_decl): If we're at -g1, just stick nested
	function DIEs at toplevel.
	(decls_for_scope): At -g1, don't descend into subblocks.

2003-03-15  Ulrich Weigand  <uweigand@de.ibm.com>

	* varasm.c (struct rtx_const): Change type of un.addr member
	to struct holding an additional 'symbol' member.
	(decode_rtx_const): Re-enable optimization to count SYMBOL_REFs
	with equal string addresses as equal.
	(simplify_subtraction): Adapt to struct rtx_const change.

2003-03-15  Glen Nakamura  <glen@imodulo.com>

	* reload1.c (choose_reload_regs): Use && instead of ||
	with REG_CANNOT_CHANGE_MODE_P condition.

2003-03-15  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>

	PR optimization/9387
	* function.c (thread_prologue_and_epilogue_insns): Use redirect jump
	for conditional returns.

2003-03-14  Jason Merrill  <jason@redhat.com>

	PR optimization/6871
	* varasm.c (assemble_variable): Leave constant zeroes in .rodata.

2003-03-12  Andrew Lewycky  <andrew@mxc.ca>

	PR c++/7050
	* expr.c (store_expr): Don't attempt to store void-typed trees,
	just evaluate them for side effects.

2003-03-14  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/8396
	* tree-inline.c (initialize_inlined_parameters): Make sure the value
	of read-only constant arguments is passed with the right type.

2003-03-14  Andreas Jaeger  <aj@suse.de>
	    Gwenole Beauchesne  <gbeauchesne@mandrakesoft.com>

	* linux64.h (TARGET_OS_CPP_BUILTINS): Define _LP64 and __LP64__ in
	64-bit mode.

2003-03-13  Mike Stump  <mrs@apple.com>

	* ggc-page.c (struct page_entry): Remove varray.h header.
	Add index_by_depth field.
	Remove save_in_use_p field.
	(struct globals): Add depth_in_use, depth_max, by_depth_in_use,
	by_depth_max, by_depth, and save_in_use fields.
	(INITIAL_PTE_COUNT): Add.
	(save_in_use_p_i): Add.
	(save_in_use_p): Add.
	(adjust_depth): Add.
	(push_depth): Add.
	(push_by_depth): Add.
	(prefetch): Add.
	(free_page): Add support for and use faster data structures.
	(ggc_alloc): Likewise.
	(init_ggc): Likewise.
	(ggc_recalculate_in_use_p): Likewise.
	(ggc_pop_context): Likewise.
	(clear_marks): Likewise.
	* Makefile.in (ggc-page.o): Remove varray.h.

2003-03-12  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.c (pa_init_builtins): Fix warning.

2003-03-12  Richard Henderson  <rth@redhat.com>

	PR opt/8178
	* config/i386/i386.md (ffssi2): Tighten op1 predicate to
	the requirements of the output insns.

2003-03-12  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/ia64.h (ASM_OUTPUT_XDATA_CHAR): Remove.
	(ASM_OUTPUT_XDATA_SHORT): Remove.
	(ASM_OUTPUT_XDATA_INT): Remove.
	(ASM_OUTPUT_XDATA_DOUBLE_INT): Remove.
	(ASM_OUTPUT_ADDR_DIFF_ELT): Handled 32 bit address diffs.
	(ASM_PREFERRED_EH_DATA_FORMAT): Handle 32 bit EH pointers.
	(CASE_VECTOR_MODE): Handle 32 bit pointers in case statement.

2003-03-12  Andrew Lewycky  <andrew@mxc.ca>

	PR c++/7050
	* expr.c (store_expr): Don't attempt to store void-typed trees,
	just evaluate them for side effects.

2003-03-12  Bob Wilson  <bob.wilson@acm.org>

	Backport from mainline:
	2003-03-12  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/xtensa.md (adddi3): Don't clobber source operand used
	to detect carry.
	(subdi3): Reorder emitted instructions.

2003-03-12  Jan Hubicka  <jh@suse.cz>

	* i386.c (ix86_setup_incoming_varargs): Set stack_alignment_needed to 128.

2003-03-12  Daniel Jacobowitz  <drow@mvista.com>

	Fix PR target/9797 and PR c/9853.
	* stmt.c (expand_decl_init): Call push_temp_slots () and
	pop_temp_slots ().

2003-03-12  Hans-Peter Nilsson  <hp@bitrange.com>

	* configure.in (rlim_t): Define to long if no valid definition
	found in sys/resource.h.
	* config.in, configure: Regenerate.

2003-03-12  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/9928
	* c-decl.c (duplicate_decls): Discard the initializer of the new decl
	only if it is a VAR_DECL.

2003-03-12  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/9888
	* config/i386/i386.md (jcc_1): Fix range.
	(jcc_2): Likewise.
	(jump): LIkewise.
	(doloop_end_internal): Likewise.

2003-03-12  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/9888
	* config/i386/i386.md (movsi_1): Remove special alternatives
	for %eax register.
	(movhi_1): Likewise.
	* config/i386/i386.c (memory_address_length): Do not use
	short displacement when there is no base.
	(ix86_attr_length_address_default): Handle LEA instructions.

2003-03-11  Loren James Rittle  <ljrittle@acm.org>

	(per-port preprocessor fix, concurrent to Neil's cppinit.c fix)
	* config/freebsd-spec.h (FBSD_CPP_PREDEFINES): Remove.
	(FBSD_TARGET_OS_CPP_BUILTINS): New port-specific macro.
	(FBSD_TARGET_CPU_CPP_BUILTINS): New port-specific macro.
	* config/freebsd.h (CPP_PREDEFINES): Remove.
	(TARGET_OS_CPP_BUILTINS): New.
	* config/alpha/freebsd.h: Use overridden FBSD_TARGET_CPU_CPP_BUILTINS
	instead of TARGET_OS_CPP_BUILTINS.
	* config/sparc/freebsd.h (CPP_PREDEFINES): Remove.

2003-03-11  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	PR bootstrap/9994
	Backport from mainline:

	2003-02-18  Roger Sayle  <roger@eyesopen.com>

	* sbitmap.c (sbitmap_resize): New function.
	* sbitmap.h (sbitmap_resize): Prototype here.
	* recog.c (split_all_insns): Use sbitmap_resize.

	Mon Feb 17 16:16:54 CET 2003  Jan Hubicka  <jh@suse.cz>

	* recog.c (split_all_insns):  Fix memory overflow.

	2003-02-15  Richard Henderson  <rth@redhat.com>

	* recog.c (split_all_insns): Include new blocks in life update;
	do a global life update.

2003-03-11  Hans-Peter Nilsson  <hp@bitrange.com>

	* config/cris/cris.md: Remove lingering EGCS reference.
	("*extopqihi_side_biap"): For HI operation, match
	cris_additive_operand_extend_operator, not
	cris_operand_extend_operator.  Adjust condition.
	("*extopqihi_side", "*extopqihi"): Ditto.
	("*extopqisi_side_biap"): Correct operand numbers in condition.
	("*extophisi_side_biap", "*extopqisi_swap_side_biap"): Ditto.
	("*extophisi_swap_side_biap", "*extopqisi_swap"): Ditto.
	("*extophisi_swap"): Ditto.
	("*extopqihi_swap_side_biap"): For HI operation, match a simple
	PLUS, not cris_operand_extend_operator.  Adjust condition and
	output template.
	("*extopqihi_swap_side", "*extopqihi_swap"): Ditto.
	* config/cris/cris.h (PREDICATE_CODES): Add
	cris_additive_operand_extend_operator.
	* config/cris/cris.c (cris_additive_operand_extend_operator):
	New predicate.

	* config/cris/aout.h (ENDFILE_SPEC): Undef.
	(CRIS_CPP_SUBTARGET_SPEC): Move -D__AOUT__ to...
	(TARGET_OS_CPP_BUILTINS): New macro.
	(HAVE_GAS_HIDDEN): Undef.
	* config/cris/cris.h: Remove EGCS references.
	(CPP_SPEC): Remove "-$".
	(INIT_CUMULATIVE_ARGS): Correct comment.
	* config/cris/cris.h (CRIS_CPP_SUBTARGET_SPEC): Move -D__ELF__ to...
	(TARGET_OS_CPP_BUILTINS): New macro.
	(CPP_PREDEFINES): Don't define.  Move old definitions and...
	(CPP_SPEC): ...move -D__CRIS_ABI_version=2 to...
	(TARGET_CPU_CPP_BUILTINS): New macro.
	* config/cris/linux.h (CRIS_CPP_SUBTARGET_SPEC): Move constant
	definitions and the optional __PIC__, __pic__ and
	__NO_UNDERSCORES__ definitions to...
	(TARGET_OS_CPP_BUILTINS): New macro.

2003-03-10  Devang Patel  <dpatel@apple.com>

	PR c++/9394
	* gcc.c (DEFAULT_SWITCH_TAKES_ARG): Remove.
	(DEFAULT_WORD_SWITCH_TAKES_ARG): Remove.
	* gcc.h (DEFAULT_SWITCH_TAKES_ARG): Add.
	(DEFAULT_WORD_SWITCH_TAKES_ARG): Add.
	* cppspec.c (DEFAULT_SWTICH_TAKES_ARG): Remove.
	(DEFAULT_WORD_SWITCH_TAKES_ARG): Remove.

2003-03-10  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.h (HARD_REGNO_RENAME_OK): Define.
	* config/m68hc11/m68hc11-protos.h (m68hc11_hard_regno_rename_ok):
	Declare.
	* config/m68hc11/m68hc11.c (m68hc11_hard_regno_rename_ok): New function
	for reg rename optimization to avoid using Z and Y registers.

2003-03-10  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("*addhi3_68hc12"): Accept any constant
	when adding to X and Y since leax/leay are fast.
	("*addhi3"): Accept 'I' constraint when adding to address register.
	("rotlhi3"): Operand 1 must be a register_operand.
	(peephole2): New peephole to optimize some adds.
	* config/m68hc11/m68hc11.h (CONST_OK_FOR_LETTER_P): Use 'I' constraint
	to represent -2 .. 2 small integer range.

2003-03-10  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.c (m68hc11_gen_rotate): Set carry before
	each 16-bit rotation.

2003-03-10  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/spe.h: Merge from mainline.

2003-03-10  Jan Hubicka  <jh@suse.cz>

	* toplev.c (rest_of_compilation):  Revert the previous patch.

2003-03-09  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	PR middle-end/9986
	* c-common.c (c_common_nodes_and_builtins): Initialize target builtins
	after the common builtins.
	* pa-hpux.h (DONT_HAVE_FPUTC_UNLOCKED): Define.
	* pa.c (TARGET_INIT_BUILTINS): Define.
	(pa_init_builtins): New function.

	* pa.md (call, call_value, sibcall, sibcall_value): When sufficient
	space has been allocated for the outgoing arguments, set the arg
	pointer for a call emitted after virtuals have been instantiated
	using the stack pointer offset, otherwise abort.

2003-03-06  Jan Hubicka  <jh@suse.cz>

	* toplev.c (rest_of_compilation):  Defer RTL compilation only when
	RTL inlining is done.

	* i386.c (ix86_expand_vector_move): Do not crash when offloading
	to memory in PIC mode.

2003-03-08  Neil Booth  <neil@daikokuya.co.uk>

	* cppinit.c (cpp_finish_options): Set first_unused_line to -1.

2003-03-08  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR middle-end/7796
	* unroll.c (calculate_giv_inc): Handle constants being
	loaded with LSHIFTRT.

2003-03-07  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/8726
	Backport patch from mainline:

	2003-01-08  Dale Johannesen  <dalej@apple.com>

	* function.c (assign_parms):  Don't set pretend_args_size if
	REG_PARM_STACK_SPACE.

2003-03-06  Kurt Garloff  <garloff@suse.de>
	    Geoffrey Keating  <geoffk@apple.com>
	    Dale Johannesen  <dalej@apple.com>
	* params.def: Introduce parameter max-inline-insns-rtl for
	a separate limit for the RTL inliner.
	* params.h: Likewise.
	* integrate.c (function_cannot_inline_p): Use it.
	* toplev.c (decode_f_option): Set multiple parameters
	controlling inlining with -finline-limit.
	* params.def: Fix orthographic and typographic errors.
	* doc/invoke.texi: Document parameters controlling inlining
	and the way -finline-limit sets multiple of them.
	* tree.h (struct tree_decl): Introduce inlined_function_flag,
	recording whether the function became eligible for inlining
	by a compiler flag rather than the declaration.
	Provide DID_INLINE_FUNC macro to access it.
	* c-decl.c (grokdeclarator): Set DID_INLINE_FUNC.
	* cp/decl.c (grokfndecl): Likewise.
	* toplev.c (rest_of_compilation): Likewise.
	* cp/optimize (maybe_clone_body): Copy DID_INLINE_FUNC.
	* print-tree.c (print_node): Report it.
	* params.def: Introduce new max-inline-insns-auto limit.
	* params.h: Likewise.
	* tree-inline.c (inlinable_function_p): Apply it to functions
	with DID_INLINE_FUNC set.
	* toplev.c (decode_f_option): Initialize it from -finline-limit
	value.
	* doc/invoke.texi: Document new parameter.

2003-03-06  Michael Matz  <matz@suse.de>

	* i386/i386.c (ix86_save_reg): Also test
	current_function_uses_const_pool.

2003-03-05  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.md (return_external_pic): Add !TARGET_PA_20 to constraint.
	(epilogue): Don't generate return_external_pic when emitting PA 2.0
	code.

2003-03-05  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.h (PAD_VARARGS_DOWN): Define and return
	according to va_arg type.
	(EXPAND_BUILTIN_VA_ARG): Remove.
	* config/m68hc11/m68hc11.c (m68hc11_va_arg): Remove.
	* config/m68hc11/m68hc11-protos.h (m68hc11_va_arg): Remove.

2003-03-05  Jan Hubicka  <jh@suse.cz>

	* toplev.c (rest_of_compilation):  Do duplicate loop headers when
	optimizing for size.

2003-03-05  Michael Matz  <matz@suse.de>

	* unwind.h: Add the GPL exception.
	* Makefile.in (USER_H): Add unwind.h.

2003-03-05  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/9799
	* c-typeck.c (push_init_level): Add sanity check.

2003-03-04  Steve Ellcey  <sje@cup.hp.com>

	* expr.c (convert_modes): Check for legal hard register.

2003-03-04  Andreas Schwab  <schwab@suse.de>

	* config/m68k/m68k.c (m68k_output_function_prologue): Fix CFA
	offset without frame pointer.

2003-03-04  Steve Ellcey  <sje@cup.hp.com>

	* expr.c (expand_expr): Call promote_mode to set unsignedp.

2003-03-04  Roger Sayle  <roger@eyesopen.com>

	PR c++/9367
	* builtin-types.def (DEF_FUNCTION_TYPE_VAR_3): New macro.
	(BT_FN_INT_CONST_STRING_VALIST_ARG,
	BT_FN_INT_STRING_CONST_STRING_VALIST_ARG,
	BT_FN_INT_CONST_STRING_CONST_STRING_VALIST_ARG,
	BT_FN_INT_STRING_SIZE_CONST_STRING_VALIST_ARG,
	BT_FN_INT_STRING_CONST_STRING_VAR,
	BT_FN_INT_CONST_STRING_CONST_STRING_VAR,
	BT_FN_INT_STRING_SIZE_CONST_STRING_VAR): New built-in types.
	* builtin-attrs.def (ATTR_NONNULL_1, ATTR_NONNULL_2,
	ATTR_NONNULL_3): Also include the nothrow attribute.
	(sprintf, scanf, sscanf, vprintf, vsprintf, snprintf,
	vsnprintf, vscanf, vsscanf): Don't define attributes here.
	* builtins.def (putchar, puts): Make full C89 built-ins.
	(snprintf, sprintf, scanf, sscanf, vprintf, vscanf,
	vsscanf, vsnprintf, vsprintf): New built-ins.
	* c-common.c (c_common_nodes_and_builtins): Handle new macro
	DEF_FUNCTION_TYPE_VAR_3.

	* doc/extend.texi: Document these new built-in functions.

2003-03-04  Jan Hubicka  <jh@suse.cz>

	* calls.c (rtx_for_function_call): Take the address as an argument
	(expand_call): Do not modify the expression.

2003-03-04  Kevin Buettner  <kevinb@redhat.com>

	* dwarf2out.c (rtl_for_decl_location): Don't return NULL_RTX for
	global register variables.

2003-03-03  Richard Henderson  <rth@redhat.com>

	* configure.in (HAVE_AS_LTOFFX_LDXMOV_RELOCS): New ia64 test.
	* config.in, configure: Rebuild.
	* config/ia64/ia64.c (ia64_ld_address_bypass_p): Accept lo_sum.
	* config/ia64/ia64.md (load_symptr): Use high/lo_sum for the
	paired ldtoffx and ldxmov annotations.
	(load_symptr_internal1): Remove.
	(load_symptr_high, load_symptr_low): New.
	* config/ia64/ia64.h (HAVE_AS_LTOFFX_LDXMOV_RELOCS): Default to 0.

2003-03-03  Jason Merrill  <jason@redhat.com>

	* calls.c (compute_argument_addresses): Give the new MEMs a
	minimum alignment of PARM_BOUNDARY.

2003-03-03  Geoffrey Keating  <geoffk@apple.com>

	* doc/install.texi (Specific): Update entry for powerpc-darwin.

2003-03-03  Jan Hubicka  <jh@suse.cz>
	* toplev.c (rest_of_compilation):  Avoid cfg_cleanup calls when not
	optimizing.

2003-02-28  Jan Hubicka  <jh@suse.cz>

	* combine.c (gen_lowpart_for_combine): Update handling of subregs_of_mode
	* flow.c (life_analysis, mark_used_regs): Likewise.
	* regclass.c (subregs_of_mode): Turn into single bitmap.
	(cannot_change-mode_set_regs, invalid_mode_change_p): Update
	dealing with subregs_of_mode
	* regs.h (subregs_of_mode): Update prototype.

2003-02-28  Jan Hubicka  <jh@suse.cz>

	* toplev.c (rest_of_compilation): Rearrange insn splitting
	* reg-stack.c (reg_to_stack): Do not split insns.

2003-03-02  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* ggc-common.c (ggc_rlimit_bound): Cast RLIM_INFINITY to avoid
	warnings.

2003-03-02  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.c (m68hc11_override_options): Don't enable
	min/max instructions by default as may result in reload errors.

2003-03-02  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("mulqi3"): Allow address register to
	avoid reload problems; define split for it.

2003-03-02  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.c (m68hc11_shift_operator): New function.
	* config/m68hc11/m68hc11-protos.h (m68hc11_shift_operator): Declare.
	* config/m68hc11/m68hc11.h (PREDICATE_CODES): Register.
	* config/m68hc11/m68hc11.md ("rotrhi3", "rotlhi3"): New patterns for
	rotatert and rotate.
	("rotrhi3_const", "rotlhi3_const"): Rename of old 'rotrhi3' insns.
	("*rotrhi3", "*rotlhi3"): New insn pattern for non-const rotatert.
	("*rotrhi3_addr"): New split for shift insns on address register.
	("*lshrhi3", "*ashrhi3", "*ashlhi3_2"): Use new split.
	* config/m68hc11/larith.asm (___rotlhi3): New asm function.
	(___rotrhi3): Likewise.
	* config/m68hc11/t-m68hc11-gas (LIB1ASMFUNCS): Build them.

2003-03-02  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* fp-bit.h (float_to_usi): Fix condition wrapping prototype.

2003-03-02  Ashif Harji  <asharji@uwaterloo.ca>

	* gcc.c (default_compilers): Add -no-integrated-cpp flag to invoke
	  an external cpp during compilation.
	(option_map): Likewise.
	* objc/lang-specs.h (default_compilers): Similarly.
	* doc/invoke.texi: Document -no-integrated-cpp flag.

2003-03-01  Jason Thorpe  <thorpej@wasabisystems.com>

	* config.gcc (*-*-netbsd[2-9]*, *-*-netbsdelf[2-9]*): Enable
	POSIX thread support by default.

2003-03-01  Roger Sayle  <roger@eyesopen.com>

	PR bootstrap/7389.
	* basic-block.h (flow_bb_inside_loop_p): Correct prototype.

2003-02-28  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/netbsd.h: Update copyright years.
	(NETBSD_CPP_SPEC): Define _REENTRANT and _PTHREADS if
	-pthread is specified on the command line.

2003-02-28  Bob Wilson  <bob.wilson@acm.org>

	Backport following patch:

	2003-02-28  Bob Wilson  <bob.wilson@acm.org>
	* config.gcc (xtensa-*-linux*): Add t-slibgcc-elf-ver to tmake_file.

2003-02-27  Joel Sherrill <joel@OARcorp.com>

	PR 9638/other
	* config/i386/i386.c (DEFAULT_PCC_STRUCT_RETURN): Ensure the
	this constant defaults to 1.

2003-02-28  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.md: Disable the movstrsi define_split.

2003-02-28  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.h (CRT_CALL_STATIC_FUNCTION): Wrap in
	#ifndef __mips16.

2003-02-27   Geert Bosch <bosch@gnat.com>

	* toplev.c (print_version): Add indentation for GGC heuristics and
	output after printing version information.

2003-02-27  James E Wilson  <wilson@tuliptree.org>

	PR bootstrap/9255
	* combine.c (simplify_comparison): Require integral mode when
	permuting SUBREG with AND.

2003-02-27  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux.h (STARTFILE_PREFIX_SPEC): Remove.

2003-02-27  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.md: Add TI constant splitter.

2003-02-26  Jan Hubicka  <jh@suse.cz>

	* expr.c (emit_group_store):  Fix crash when converting single
	register into complex register.

2003-02-26  Michael Matz  <matz@suse.de>

	* ra-colorize.c (merge_moves): Fix list handling.

2003-02-26  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.c (compute_frame_size): Don't assume PREFERRED_STACK_BOUNDARY
	is 8 * STACK_BOUNDARY.
	* pa.h (PREFERRED_STACK_BOUNDARY): Change to 128 on 64-bit port.

2003-02-26  Alan Modra  <amodra@bigpond.net.au>

	PR target/9681
	* tlink.c (scan_linker_output): Drop leading '.' from symbol names.

2003-02-25  Richard Henderson  <rth@redhat.com>

	* config/i386/i386.c (function_arg): Pass variable sized
	structures correctly on the stack.

2003-02-25  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	PR target/9732
	* config/rs6000/rs6000.c (first_reg_to_save): Handle
	PIC_OFFSET_TABLE_REGNUM for -fPIC too.
	(rs6000_emit_prologue): Likewise.
	(rs6000_emit_epilogue): Likewise.
	* config/rs6000/rs6000.h (CONDITIONAL_REGISTER_USAGE): Make
	PIC_OFFSET_TABLE_REGNUM a fixed register for -fPIC.

2003-02-25  Richard Henderson  <rth@redhat.com>

	* real.c (real_to_integer2): Force overflow result only for
	unsigned overflow.

2003-02-25  Jan Hubicka  <jh@suse.cz>

	PR target/8343
	* m68k.md (umulsidi, mulsidi expanders): Use register operand.

2003-02-24  Svein E. Seldal  <Svein.Seldal@solidas.com>

	* config/c4x/c4x.h (ASM_FILE_START): Added support for the c33
	processor.

2003-02-24  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config/mips/iris6.h (TARGET_OS_CPP_BUILTINS): Define __c99 for
	ISO C99 and C++.

	* fixinc/inclhack.def (irix___restrict): Don't change __restrict
	for C++ on IRIX 6.5.1[89].
	* fixinc/tests/base/internal/sgimacros.h: New file.

	* fixinc/inclhack.def (irix_wcsftime): Use XPG5 variant for C99.
	* fixinc/tests/base/internal/wchar_core.h: New file.

	* fixinc/inclhack.def (irix_socklen_t): Fix broken IRIX 6.5.1[78]
	socklen_t definition.
	* fixinc/fixincl.x: Regenerate.
	* fixinc/tests/base/sys/socket.h: New file.
	Fixes PR libgcj/9652.

2003-02-24  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config/alpha/osf.h (TARGET_OS_CPP_BUILTINS): Rename
	__EXTERN_PREFIX to __PRAGMA_EXTERN_PREFIX.
	* doc/extend.texi (Tru64 Pragmas): Reflect this.

	* fixinc/inclhack.def (alpha___extern_prefix): Indicate #pragma
	extern_prefix support for Tru64 UNIX V5 <sys/stat.h>.
	* fixinc/fixincl.x: Regenerate.
	* fixinc/tests/base/sys/stat.h [ALPHA___EXTERN_PREFIX_CHECK]: New
	testcase.
	Fixes PR c/5059, c/6126, other/9671.

2003-02-24  Alan Modra  <amodra@bigpond.net.au>

	PR 9297, PR 9722
	* calls.c (store_one_arg): Revert 1999-02-16 change.  Revert
	2000-12-17 change.  Pass EXPAND_STACK_PARM to expand_expr.
	* expr.h (enum expand_modifier): Define EXPAND_STACK_PARM.
	(enum block_op_methods): Reorder for better store_expr optimization.
	* expr.c (store_expr): Test bit 1 of "want_value" for call param
	stores, test bit 0 for original want_value meaning.  Pass
	BLOCK_OP_CALL_PARM to emit_block_move when bit 1 set.  Adjust
	recursive calls, and calls to expand_param.
	(expand_expr): Handle EXPAND_STACK_PARM modifier.  When cse
	expected, set target to 0 rather than to subtarget.  Formatting.

2003-02-23  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* doc/invoke.texi (ggc-min-expand, ggc-min-heapsize): Document
	new default behavior.
	* ggc-common.c: Include sys/resource.h.
	(ggc_rlimit_bound): New function.
	(ggc_min_expand_heuristic, ggc_min_heapsize_heuristic): Update
	defaults to account for rlimits.

2003-02-22  Jan Hubicka  <jh@suse.cz>

	* config/linux.h (TARGET_HAS_F_SETLKW): Define.
	* config/alpha/linux.h (TARGET_HAS_F_SETLKW): Likewise

2003-02-22  Hans-Peter Nilsson  <hp@axis.com>

	* regmove.c (optimize_reg_copy_1): Do not replace a hard register
	in an asm.

2003-02-22  Jan Hubicka  <jh@suse.cz>

	* i386.c (builtin_description): Add __builtin_ia32_paddq and
	__builtin_ia32_psubq. Fix __builtin_ia32_paddq128
	 and __builtin_ia32_psubq128.
	* i386.h (IX86_BUILTIN_PADDQ, IX86_BUILTIN_PSUBQ): New.
	* i386.md (addv*, mmx_ior*, mmx_xoe*, mmx_and*): Add missing '%'.
	(mmx_adddi3, mmx_subdi3): New.
	* mmintrin.h (_mm_add_si64, _mm_sub_si64): New.
	* xmmintrin.h (_mm_movepi64_pi64): New.
	(_mm_add_epi64, _mm_sub_epi64): fix.
	(_mm_mul_pu16): Rename to...
	(_mm_mul_su32): ... this one.

	* i386.c (def_builtin):  Special case 64bit builtins.
	(MASK_SSE164, MASK_SSE264): New constants.
	(builtin_description): Add 64bit builtins.
	(ix86_init_mmx_sse_builtins): Likewise.
	* i386.h (enum ix86_builtins): Likewise.
	* i386.md (cvtss2siq, cvttss2siq, cvtsd2siq, cvttsd2siq, cvtsi2sdq,
	sse2_movq2dq_rex64, sse2_movsq2q_rex64): New.
	(sse2_movq2dq, sse2_movsq2q): Disable for 64bit.
	* mmintrin.h (_mm_cvtsi64x_si64, _mm_set_pi64x, _mm_cvtsi64_si64x): New.
	* xmmintrin.h (_mm_cvtss_si64x, _mm_cvttss_si64x, _mm_cvtsi64x_ss,
	_mm_set_epi64x, _mm_set1_epi64x, _mm_cvtsd_si64x, _mm_cvttsd_si64x,
	_mm_cvtsi64x_sd, _mm_cvtsi64x_si128, _mm_cvtsi128_si64x): New.

	* builtins.c (expand_builtin_expect):  Do not predict
	flag_guess_branch_prob is not set.
	* c-semantics.c (expand_stmt): Likewise.
	* predict.c (predict_insn): Likewise.
	* stmt.c (expand_continue_loop): Likewise.
	* toplev.c (rest_of_compilation): Do not call
	note_prediction_to_br_prob and note_prediction_to_br_prob
	when not optimizing.

	* basic-block.h (tidy_fallthru_edges): Kill.
	* cfgrtl.c (tidy_fallthru_edges): Kill.
	* cfgbuild.c (find_basic_blocks): Do not call tidy_fallthru_edges.
	* cfgcleanup.c (delete_unreachable_blocks): Likewise.

2003-02-22  Steven Bosscher  <s.bosscher@student.tudelft.nl>

	PR other/3782
	* toplev.c (process_options): If flag_detailed_statistics is set,
	then set time_report as well.

	PR c/8828
	* jump.c (never_reached_warning): Don't fall through BARRRIER
	insns.  Update comments to reflect what the function really does.

2003-02-21  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* doc/invoke.texi (ggc-min-expand, ggc-min-heapsize): Update
	documentation.
	* ggc-common.c: Include params.h
	(ggc_min_expand_heuristic, ggc_min_heapsize_heuristic,
	init_ggc_heuristics): New functions.
	* ggc.h (ggc_min_expand_heuristic, ggc_min_heapsize_heuristic,
	init_ggc_heuristics): Prototype.
	* toplev.c (print_version):  Output GGC heuristics.
	(parse_options_and_default_flags): Call init_ggc_heuristics.

2003-02-21  Jan Hubicka  <jh@suse.cz>

	* cfgrtl.c (commit_edge_insertions):  Call
	find_many_sub_basic_block only when some code has been emitted.
	(commit_edge_insertions_watch_calls): Bring into sync with
	commit_edge_insertions

2003-02-21  Zack Weinberg  <zack@codesourcery.com>

	* cpphash.h (struct lexer_state): Add directive_wants_padding.
	* cpplib.c (_cpp_handle_directive): Set directive_wants_padding
	for directives of type INCL.
	(glue_header_name, parse_include): Use get_token_no_padding.
	* cppmacro.c (replace_args): If directive_wants_padding,
	provide padding tokens.

2003-02-21  Jan Hubicka  <jh@suse.cz>

	* cfgrtl.c (commit_one_edge_insertion): Only mark BB for splitting.
	(commit_edge_insertions): Call find_many_sub_basic_blocks

	* reg-stack.c (convert_regs): Cleax aux for blocks.

2003-02-21  Glen Nakamura  <glen@imodulo.com>

	PR optimization/8613
	* builtins.c (expand_builtin): Emit postincrements before expanding
	builtin functions.

2003-02-21  Toon Moene  <toon@moene.indiv.nluug.nl>

	PR fortran/9038
	* c-opts.c (sanitize_cpp_opts): Add Fortran front end
	options to be ignored.
	(c_common_decode_option): Ignore them when preprocessing.

2003-02-21  Ben Elliston  <bje@redhat.com>

	PR other/5634
	* doc/install.texi (Configuration): Explain using $HOME instead of
	the ~ metacharacter when referring to home directories.

2003-02-20  Richard Earnshaw  <rearnsha@arm.com>

	* arm.c (arm_reload_in_hi): Ensure that the scratch register does
	not overlap the final result register.

2003-02-20  Josef Zlomek  <zlomekj@suse.cz>

	* combine.c (distribute_notes): Kill REG_EXEC_COUNT.
	* rtl.c (reg_note_name): Likewise.
	* rtl.h (enum reg_note): Likewise.
	* doc/invoke.texi: Likewise.
	* doc/rtl.texi: Likewise.

2003-01-30  Richard Henderson  <rth@redhat.com>

	* tree-inline.c (walk_tree): Streamline duplicate hash table lookup.

2003-02-19  Daniel Jacobowitz  <drow@mvista.com>

	* expr.c (expand_expr): Use gen_int_mode for the argument
	to gen_rtx_MULT.

2003-02-19  Jan Hubicka  <jh@suse.cz>

	* i386.md (cosxf2):  Fix conditional.

2003-02-18  Matt Austern <austern@apple.com>
	* toplev.c, langhooks.c, langhooks-def.h: Move
	write_global_declarations from toplev.c to langhooks.c.

2003-02-18  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (general_operand_src): Always check
	MODE.
	(general_operand_dst): Likewise.

2003-02-18  Richard Henderson  <rth@redhat.com>

	* c-common.c (handle_used_attribute): Accept static data too.

2003-02-18  Jim Wilson  <wilson@redhat.com>

	* config/ia64/ia64.md (floatdidf2, floatdisf2): Add %, before second
	instruction in output template.
	(bsp_value): Change output template from string to C code, add %,
	before actual instruction.
	(flushrs): Mark as not predicable.

2003-02-18  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (*zero_extendhisi2_h8300): Fix the
	insn length.
	(extendqisi2): Likewise.
	(*extendhisi2_h8300): Likewise.

2003-02-18  Matt Austern <austern@apple.com>

	* langhooks.h, langhooks-def.h: introduce new langhook,
	final_write_globals, with write_global_declarations as default.
	* toplev.c: Move invocation of wrapup_global_declarations from
	compile_file to new function, write_global_declarations.  Change
	compile_file to use final_write_globals hook.  Change
	wrapup_global_declarations so writing to DECL_DEFER_OUTPUT is
	conditional.

2003-02-18  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.md: Correct and enhance comment.

2003-02-16  Kai Henningsen  <kaih@khms.westfalen.de>
	    Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Specific): Fix link for m68k-att-sysv.
	(Binaries): Ditto for Sinix/Reliant Unix.

2003-02-16  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>

	* config/i386/i386-protos.h (function_arg_pass_by_reference): Declare.
	* config/i386/i386.h (FUNCTION_ARG_PASS_BY_REFERENCE): Use it.
	* config/i386/i386.c (function_arg_pass_by_reference): New.
	(ix86_va_arg): Support arguments passed by reference.

2003-02-16 Arend Bayer <arend.bayer@web.de>
	   Richard Henderson  <rth@redhat.com>

	PR c/8068
	* fold-const.c (extract_muldiv_1): Rename from extract_muldiv;
	rearrange mult arguments for less recursion.
	(extract_muldiv): New.  Prevent runaway recursion.

2003-02-16  Danny Smith  <dannysmith@users.sourceforge.net>

	* config/i386/cygwin.h (TARGET_SUBTARGET_DEFAULT): Set
	MASK_ALIGN_DOUBLE.

2003-02-15  Adam Nemet  <anemet@lnxw.com>

	PR opt/2391
	* combine.c: Fix spelling in comment.
	(cached_nonzero_bits): New function.
	(cached_num_sign_bit_copies): New function.
	(nonzero_bits_with_known): New macro.
	(num_sign_bit_copies_with_known): New macro.
	(nonzero_bits1): Rename from nonzero_bits.  Add three new
	arguments.  Change calls from nonzero_bits to
	nonzero_bits_with_known.
	(num_sign_bit_copies1): Rename from num_sign_bit_copies.  Add
	three new arguments.  Change calls from num_sign_bit_copies to
	num_sign_bit_copies_with_known.
	(nonzero_bits): New macro.
	(num_sign_bit_copies): New macro.
	(update_table_tick): Don't traverse identical subexpression more
	than once.
	(get_last_value_validate): Likewise.

2003-02-15  Falk Hueffner  <falk.hueffner@student.uni-tuebingen.de>

	PR optimization/7702
	* reload1.c (reload_cse_simplify_set): Honor
	CANNOT_CHANGE_MODE_CLASS.

2003-02-15  Jan Hubicka  <jh@suse.cz>

	PR optimization/9258, PR fortran/7681
	* global.c (struct allocno): Add no_stack_reg.
	(global_conflicts): Set it.
	(find_reg): Use it.

2003-02-14  Alexandre Oliva  <aoliva@redhat.com>

	* config/mn10300/mn10300.c (mn10300_wide_const_load_uses_clr): New
	function.
	* config/mn10300/mn10300-protos.h: Declare it.
	* config/mn10300/mn10300.md (movdi, movdf): Use it to compute
	attribute cc of instructions that may use clr.

2003-02-13  John David Anglin  <dave.anglin@nrc-crnc.gc.ca>

	* inclhack.def (hpux_long_double): Tighten select and add bypass
	regexp.
	* fixincl.x: Rebuilt.

2003-01-30  Richard Henderson  <rth@redhat.com>

	* ggc-page.c (G.context_depth_allocations): New.
	(G.context_depth_collections): New.
	(alloc_page): Set G.context_depth_allocations.
	(ggc_collect): Set G.context_depth_collections.
	(ggc_push_context): Limit to HOST_BITS_PER_LONG contexts.
	(ggc_pop_context): Early exit for no allocations or collections.

2003-01-25  Segher Boessenkool  <segher@koffie.nl>

	* bitmap.h (BITMAP_WORD): New typedef: fundamental storage
	type for bitmaps.  Use unsigned long.
	(nBITMAP_WORD_BITS): New macro.
	(BITMAP_WORD_BITS): New macro.
	(rest of file): Use it.
	* bitmap.c: Use it.

2003-02-13  Josef Zlomek  <zlomekj@suse.cz>

	* cfgcleanup.c (outgoing_edges_match): When there is single outgoing
	edge and block ends with a jump insn it must be simple jump.

2003-02-13  Robert Lipe <robertlipe@usa.net>
	    Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Specific): Update three SCO-related URLs.

2003-02-12  Ranjit Mathew  <rmathew@hotmail.com>

	* doc/tm.texi (MODIFY_JNI_METHOD_CALL): Document.
	* config/i386/cygwin.h (MODIFY_JNI_METHOD_CALL): New macro.

2003-02-11  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Specific): Update AVR- and Darwin-related URLs.

2003-02-11  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/9100
	Backport patch from mainline:

	2003-01-12  Mark Mitchell  <mark@codesourcery.com>

	PR c++/9264
	* c-lex.c (c_lex): Set the token value to error_mark_node for
	invalid numeric constants.

2003-02-11  Jan Hubicka  <jh@suse.cz>

	* i386.md (ahi?v*3): Set third operand type to TImode.
	* i386.c (ix86_expand_binop_builtin): Extend operand when needed.

	* i386.c (contains_128bit_aligned_vector_p): New function
	(ix86_function_arg_boundary): Properly align vector modes.

2003-02-11  Bob Wilson  <bob.wilson@acm.org>

	Backport following patch:

	2003-02-11  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/xtensa.md (set_frame_ptr): Change rtl to set reg a7.
	* config/xtensa/xtensa.c (xtensa_reorg): Search for UNSPECV_SET_FP
	as a SET pattern.

2003-02-11  Jan Hubicka  <jh@suse.cz>

	* simplify-rtx.c (simplify_subreg): Fix conversion from vector into
	integer mode.

	* rtl.def (VEC_MERGE, VEC_SELECT, VEC_CONCAT, VEC_DUPLICATE):
	Change code so they are arithmetic expressions now.
	* simplify-rtx.c (simplify_unary_operation, simplify_binary_operation,
	simplify_ternary_operation): Deal with VEC_* expressions.

2003-02-11  Richard Henderson  <rth@redhat.com>

	2003-01-15  Richard Henderson  <rth@redhat.com>
	* config/alpha/alpha.c (find_lo_sum_using_gp): Rename from find_lo_sum;
	also check that GP is being used.
	(alpha_find_lo_sum_using_gp): New.
	(alpha_does_function_need_gp): Use get_attr_usegp.
	* config/alpha/alpha-protos.h: Update.
	* config/alpha/alpha.md (attr usegp): New.  Annotate patterns
	as needed.

2003-02-11  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* inclhack.def (hpux_long_double, hpux10_ctype_declarations1,
	hpux10_ctype_declarations2, hpux_ctype_macros): New hacks.
	* fixincl.x: Rebuilt.
	* tests/base/stdlib.h: Update.
	* tests/base/ctype.h: New file.

2003-02-11  Janis Johnson  <janis187@us.ibm.com>

	* config/rs6000/ppc64-fp.c: New file.
	* config/rs6000/t-linux64 (LIB2FUNCS_EXTRA): Add ppc64-fp.c.

2003-02-11  Falk Hueffner  <falk.hueffner@student.uni-tuebingen.de>

	PR optimization/9651
	* rtlanal.c (may_trap_p): Handle FIX.

2003-02-11  Jan Hubicka  <jh@suse.cz>

	* predict.c (choose_function_section): Choose sections correctly.

2003-02-10  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* reload1.c (first_label_num): New.
	(reload): Index offsets_known_at and offsets_at using difference of
	label number and first label number.  Don't use offset pointers.
	(set_label_offsets, set_initial_label_offsets): Likewise.

2003-02-10  Eric Botcazou  <ebotcazou@libertysurf.fr>
	    Christian Ehrhardt  <ehrhardt@mathematik.uni-ulm.de>

	PR c/7741
	* c-decl.c (duplicate_decls): Discard the initializer of the
	new decl when the types are conflicting.

2003-02-09  Wolfgang Bangerth  <bangerth@ticam.utexas.edu>

	* doc/install.texi: Squeeze and streamline section on
	testing and regression checking.

2003-02-07  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/t-netbsd (USER_H): Revert previous change.

2003-02-07  Richard Henderson  <rth@redhat.com>

	PR 9226
	* gcse.c (local_cprop_find_used_regs): New.
	(local_cprop_pass): Use it.

2003-02-07  Jan Hubicka  <jh@suse.cz>

	* i386.md (sse2_nandv2di3):  Fix.

	* i386.md (movdi_rex64_1): Fix mmx<->int move opcode.

2003-02-07  Andrey Petrov <petrov@netbsd.org>

	* optabs.c (expand_float): Search wider integer modes first.

2003-02-06  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* config.gcc (hppa*-*-linux*): Set MASK_NO_SPACE_REGS in
	target_cpu_default.
	* pa.c (attr_length_call): Add 8 to call length (long indirect PA 1.X)
	if not MASK_NO_SPACE_REGS.
	(output_call): Adjust return pointer, don't load new space register
	into %sr0, and use %sr4 for call if TARGET_NO_SPACE_REGS is true.
	(pa_asm_output_mi_thunk): Don't load new space register into %sr0 if
	TARGET_NO_SPACE_REGS is true.
	* pa.md (return_external_pic): Add TARGET_NO_SPACE_REGS to insn
	conditions.
	(epilogue): Always use return_internal if TARGET_NO_SPACE_REGS is true.
	(interspace_jump): Add new pattern for when TARGET_NO_SPACE_REGS is
	true.  Use bve when TARGET_64BIT is true.

2003-02-06  Eric Botcazou <ebotcazou@libertysurf.fr>
	    Richard Henderson <rth@redhat.com>

	PR c/9530
	* config/i386/i386.h (FUNCTION_OK_FOR_SIBCALL): Forbid sibcalls
	from functions that return a float to functions that don't.

2003-02-04  Ulrich Weigand  <uweigand@de.ibm.com>

	* reload.c (find_reloads): Do not use the mode specified in the insn
	pattern as reload mode for address operands.  Do not generate optional
	reloads for operands where a mandatory reload was already pushed.

2003-02-04  Jan Hubicka  <jh@suse.cz>

	* i386.md (movti_rex64):  Fix constraint.

2003-02-04  Rodney Brown  <rbrown64@csc.com.au>

	* config/i386/i386.c (x86_function_profiler): Fix typo in format.

2003-01-23  Mike Stump  <mrs@apple.com>

	* regclass.c (init_reg_autoinc): New function.
	(regclass): Move initialization of forbidden_inc_dec_class from
	here...
	(init_regs): to here.  Avoids reinitialization for each function,
	saving compilation time.

2003-02-04  Phil Edwards  <pme@gcc.gnu.org>

	* doc/install.texi (*-*-linux-gnu):  Mention glibc requirements
	for recent libstdc++.  Remove formatting cruft.

2003-02-04  Joseph S. Myers  <jsm@polyomino.org.uk>

	* doc/gcc.texi, doc/gccint.texi, doc/gcov.texi,
	doc/include/fdl.texi, doc/invoke.texi: Update to GFDL 1.2.
	* doc/install.texi: Update copyright dates.  Update to GFDL 1.2.

2003-02-03  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/xtensa.c (order_regs_for_local_alloc): Order the
	coprocessor registers before floating-point registers.
	* config/xtensa/xtensa.h (REG_ALLOC_ORDER): Adjust register numbers
	to account for a previously removed register.
	(SPEC_REG_FIRST, SPEC_REG_LAST, SPEC_REG_NUM, COUNT_REGISTER_REGNUM):
	Delete unused macros.

2003-02-03  Jan Hubicka  <jh@suse.cz>

	* i386.c (ix86_expand_store_builtin):  Always force op1 to register.
	(mov*_internal): Fix predicates; require one of operands to not be memory.
	(SSE?MMX move expanders):  Fix predicates; force one of operands to register.
	(SSE/MMX push patterns): Reorganize; fix x86-64 code generation.
	(movups/movupd/movdqu patterns): Force one of operands to not be memory.

2003-02-03  Jan Hubicka  <jh@suse.cz>

	* regclass.c (cannot_change_mode_set_regs): Correct argument order.

2003-02-02  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* mips/_tilib.c: Don't include tsystem.h.  Don't define
	LIBGCC2_WORDS_BIG_ENDIAN.

2003-02-02  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* doc/install.texi (hppa*-hp-hpux11*): Update installation notes.

2003-02-02  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa-protos.h (attr_length_millicode_call): Remove second argument.
	(attr_length_indirect_call, attr_length_indirect_call,
	attr_length_save_restore_dltp): New prototypes.
	* pa.c (attr_length_millicode_call): Remove second argument.  Check
	INSN_ADDRESSES_SET_P in distance calculation.
	(output_millicode_call): Check INSN_ADDRESSES_SET_P before using
	INSN_ADDRESSES.
	(attr_length_call): Check INSN_ADDRESSES_SET_P in distance calculation.
	(output_call): Check INSN_ADDRESSES_SET_P before using INSN_ADDRESSES.
	Call attr_length_call directly.
	(attr_length_indirect_call, output_indirect_call,
	attr_length_save_restore_dltp): New functions.
	* pa.md (attr_length_millicode_call): Drop second argument from all
	patterns.
	(return_internal_pic): Delete.
	(return_external_pic): Remove use of PIC register and pic operand and
	flag checks.
	(epilogue): Use return_internal for both normal and pic code.
	(call, call_value): Emit new 32-bit pic patterns for symref and
	indirect calls.  Remove uses for arg pointer and pic register.
	(call_symref_pic, call_symref_pic_post_reload, call_reg_pic,
	call_reg_pic_post_reload, call_val_symref_pic,
	call_val_symref_pic_post_reload, call_val_reg_pic,
	call_val_reg_pic_post_reload): New pre and post reload insn patterns.
	Implement define_split and define_peephole2 patterns for pre reload
	patterns.
	(call_symref_64bit, call_internal_reg_64bit, call_value_symref_64bit,
	call_value_internal_reg_64bit): Shorten names.
	(all call patterns): Explicitly indicate registers used and clobbered.
	Use attr_length_indirect_call and attr_length_save_restore_dltp for
	attribute length calculation.  Move code generation for indirect calls
	to output_indirect_call.
	(sibcall, sibcall_value): Don't restore PIC register.
	(exception_receiver, builtin_setjmp_receiver): Add blockage after PIC
	register retore.

2003-02-02  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Testing): Simplify and compress instructions
	concerning Dejagnu.

2003-02-01  Daniel Jacobowitz  <drow@mvista.com>

	* dwarf2out.c (gen_type_die): Check for typedefs before calling
	for TYPE_MAIN_VARIANT.

2003-02-01  Ulrich Weigand  <uweigand@de.ibm.com>

	* reload.c: Revert 2003-01-31 change.

2003-02-01  Jan Hubicka  <jh@suse.cz>

	PR c/9506
	* i386.c (override_options): Use DEFAULT_PCC_STRUCT_RETURN.

2003-01-31  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa.c (pa_output_function_prologue, pa_output_function_epilogue): Move
	updating of total_code_bytes from prologue to epilogue.

2003-01-31  Ulrich Weigand  <uweigand@de.ibm.com>

	* regclass.c (record_reg_classes): Fix incorrect argument
	to EXTRA_ADDRESS_CONSTRAINT macro.

2003-01-31  Ulrich Weigand  <uweigand@de.ibm.com>

	* reload.c (find_reloads): Do not use the mode specified in the insn
	pattern as reload mode for address operands.  Do not generate optional
	reloads for operands where a mandatory reload was already pushed.
	Generate optional reloads only in the final pass though find_reloads.
	(have_replacement_p): New function.

2003-01-31  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Testing): Remove a reference to our obsolete
	/testresults web pages and strip redundant information concerning
	test results.
	(Binaries): Refer to Microsoft Windows instead of listing all
	possible variants.

2003-02-01  Jan Hubicka  <jh@suse.cz>

	* loop.c (emit_prefetch_instructions):  Do conversion at right place in
	RTL chain.

	* combine.c (simplify_set): Reverse order of ragumetns to
	REG_CANNOT_CHANGE_MODE_P
	* df.c (df_def_record_1): Likewise.
	* recog.c (register_operand): Likewise.
	* simplify-rtx.c (simplify_subreg): Likewise.
	* hard-reg-set.h (REG_CANNOT_CHANGE_MODE_P): Update use of
	CANNOT_CHANGE_MODE_CLASS.
	* regclass.c (cannot_change_mode_set_regs, invalid_mode_change_p):
	Likewise.
	* reload.c (push_reload): Likewise.
	* alpha.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* ia64.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* mips.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* mips-protos.h (mips_cannot_change_mode_class): Update prototype.
	* mips.c (mips_cannot_change_mode_class): Update.
	* pa64-regs.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* rs6000.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* s390.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* sh.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* sh-protos.h (sh_cannot_change_mode_class): Update prototype.
	* sh.c (sh_cannot_change_mode_class): Update.
	* i386.h (CANNOT_CHANGE_MODE_CLASS): New.
	* tm.texi (CANNOT_CHANGE_MODE_CLASS): Update documentation.

2003-01-31  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* pa32-regs.h (REGNO_REG_CLASS, REG_CLASS_FROM_LETTER): Delete
	duplicated code.

2003-01-30  Richard Earnshaw  <rearnsha@arm.com>

	* arm.c (arm_compute_initial_elimination_offset): If optimizing for
	size, the link register is always saved if any other register is
	saved.

2003-01-30  Jerry Quinn  <jlquinn@optonline.net>

	* gcc/doc/invoke.texi (Optimization Options): Group together
	optional and experimental flags.  Move trapv and bounds-check
	out of this section.  Group floating point flags together.
	(Code Gen Options): Move trapv and bounds-check to here.

2003-01-30  Jerry Quinn  <jlquinn@optonline.net>

	* gcc/doc/invoke.texi (Optimization Options): List -O levels
	for each optimization flag.

2003-01-30  Ralf Corsepius  <corsepiu@faw.uni-ulm.de>

	PR target/9316
	* config/rs6000/rtems.h: Add CPP_OS_DEFAULT_SPEC.
	* config/rs6000/sysv4.h: Add CPP_OS_RTEMS_SPEC.
	* config/rs6000/t-rtems: New file. multilib variants to match OS.
	* config.gcc (powerpc-*-rtems*): Use rs6000/t-rtems instead of
	rs6000/t-ppcgas so we get the desired multilibs.

2003-01-30  Alexandre Oliva  <aoliva@redhat.com>

	* config/fp-bit.h (__make_dp): Declare if TMODES.

2003-01-29	Steve Ellcey <sje@cup.hp.com>

	* config/ia64/ia64.c (ia64_rwreloc_section_type_flags): New.
	* config/ia64/hpux.h (TARGET_SECTION_TYPE_FLAGS): New.

2003-01-29	Steve Ellcey <sje@cup.hp.com>

	* config/ia64/ia64.c (ia64_rwreloc_select_rtx_section): Rename
	from ia64_aix_select_rtx_section.
	(ia64_rwreloc_select_section): Simlarly; use default*_1 function
	instead of saving and restoring flag_pic.
	(ia64_rwreloc_unique_section): Similarly.
	* config/ia64/aix.h (TARGET_ASM_SELECT_SECTION,
	TARGET_ASM_UNIQUE_SECTION, TARGET_ASM_SELECT_RTX_SECTION): Update.
	* config/ia64/hpux.h (TARGET_ASM_SELECT_SECTION,
	TARGET_ASM_UNIQUE_SECTION, TARGET_ASM_SELECT_RTX_SECTION): New.

2003-01-29  Joel Sherrill  <joel@OARcorp.com>

	PR bootstrap/9296
	* gthr-rtems.h: Define __GTHREAD_MUTEX_INIT.  Apparently no code
	depended on it being defined until now.

2003-01-29  Joel Sherrill  <joel@OARcorp.com>

	PR target/9295
	* config/mips/rtems.h: Predefine __USE_INIT_FINI__ so generic
	RTEMS code knows which C++ initialization style the toolset
	configuration is using.

2003-01-29  Joel Sherrill  <joel@OARcorp.com>

	PR bootstrap/9293
	* config/m68k/t-crtstuff: Replace spaces with tabs, add
	 $(MULTILIB_CFLAGS) as compiler option and multilib crtbegin/end.o.

2003-01-29  Joel Sherrill  <joel@OARcorp.com>

	PR bootstrap/9292
	* config.gcc (hppa1.1-rtems):  Did not include t-rtems nor enable
	RTEMS threads.
	* config/pa/rtems.h (LIB_SPEC): Use -N when linking.

2003-01-25  Andrew Haley  <aph@redhat.com>

	* tree-inline.c (walk_tree): Add CHAR_TYPE.

2003-01-28  Christian Cornelssen  <ccorn@cs.tu-berlin.de>

	* doc/install.texi: Add documentation for installation into
	tooldirs and with DESTDIR.

2003-01-28  Andreas Schwab  <schwab@suse.de>

	* config/m68k/m68k.md (tablejump+2): Don't sign extend an address
	register.
	* config/m68k/apollo68.h (ASM_RETURN_CASE_JUMP): Likewise.
	* config/m68k/coff.h (ASM_RETURN_CASE_JUMP): Likewise.
	* config/m68k/linux.h (ASM_RETURN_CASE_JUMP): Likewise.
	* config/m68k/m68kelf.h (ASM_RETURN_CASE_JUMP): Likewise.
	* config/m68k/mot3300.h (ASM_RETURN_CASE_JUMP): Likewise.
	* config/m68k/netbsd-elf.h (ASM_RETURN_CASE_JUMP): Likewise.
	* config/m68k/pbb.h (ASM_RETURN_CASE_JUMP): Likewise.

2003-01-28  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.md (movti_string): Remove clobber.
	* config/rs6000/rs6000.c (rs6000_emit_move, TImode): Explicitly
	generate PARALLEL with clobber for TARGET_POWER.

2003-01-28  Richard Henderson  <rth@redhat.com>

	* ifcvt.c (noce_process_if_block): Re-add check vs X being changed
	in no-else-block case.  Add commentary.

2003-01-28  Alexandre Oliva  <aoliva@redhat.com>

	* config/mips/mips.h (UNITS_PER_HWFPVALUE): Renamed from...
	(UNITS_PER_FPVALUE): Defined as the width of a long double, or
	zero if no hardware floating point.
	(LONG_DUBLE_TYPE_SIZE): Set to 128 on N32 and N64.
	(MAX_FIXED_MODE_SIZE): Define to LONG_DOUBLE_TYPE_SIZE.
	(LIBGCC2_LONG_DOUBLE_TYPE_SIZE): Define.
	(BIGGEST_ALIGNMENT): Same as LONG_DOUBLE_TYPE_SIZE.
	(FUNCTION_VALUE_REGNO_P): Set for FP_RETURN+2 on N32 and N64.
	* config/mips/iris6.h (MIPS_TFMODE_FORMAT): Define.
	* config/mips/mips.c (override_options): Use it.
	(mips_arg_info): Pass TFmode values in even FP registers on N32
	and N64.
	(mips_setup_incoming_varargs): Use UNITS_PER_HWFPVALUE.
	(mips_va_start): Adjust alignment of ARG_POINTER_REGNUM.
	(mips_va_arg): Use UNITS_PER_HWFPVALUE.  Impose additional
	even-register-like alignment to 128-bit arguments.
	(save_restore_insns): Use UNITS_PER_HWFPVALUE.
	(mips_function_value): Likewise.  Return TFmode in $f0 and $f2
	on N32 or N64.
	* config/mips/_tilib.c (__negti2, __ashlti3, __lshrti3): New.
	* config/mips/t-iris6 (LIB2FUNCS_EXTRA): Add _tilib.c.
	(TPBIT): Set to tp-bit.c.
	(tp-bit.c): Create out of fp-bit.c.

2003-01-27  Gabriel Dos_Reis  <gdosreis@sophia.inria.fr>

	* c-parse.in: Remove '%expect 32' directive when in objc mode.

2003-01-27  Josef Zlomek  <zlomekj@suse.cz>

	* gcse.c (constprop_register): Check NEXT_INSN (insn) != NULL.

2003-01-27  Richard Earnshaw  <rearnsha@arm.com>

	PR optimization/9090
	* function.c (purge_addressof_1): After pushing an addressed register
	onto the stack, simplify the result.

2003-01-27  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>

	* doc/extend.texi: Fix typo.

2003-01-27  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>

	* doc/cppopts.texi: Fix typo.
	* doc/objc.texi: Likewise.
	* doc/passes.texi: Likewise.

2003-01-27  Alexandre Oliva  <aoliva@redhat.com>

	* real.c (ibm_extended_format): Add 53 to minimum exponent.
	(encode_ibm_extended): Adjust.

2003-01-26  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/gccint.texi: Update the copyright.

2003-01-26  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/cpp.texi: Fix typos.
	* doc/extend.texi: Likewise.
	* doc/gty.texi: Likewise.
	* doc/install.texi: Likewise.
	* doc/passes.texi: Likewise.
	* doc/rtl.texi: Likewise.

2003-01-26  Christian Cornelssen  <ccorn@cs.tu-berlin.de>

	* Makefile.in (ORDINARY_FLAGS_TO_PASS): Also pass DESTDIR.
	(install-cpp, installdirs, install-common)
	(install-driver, install-info, install-man)
	(install-headers, install-include-dir, install-headers-tar)
	(install-headers-cpio, install-headers-cp, install-mkheaders)
	(install-collect2, uninstall): Prepend $(DESTDIR) to
	destination paths in all (un)installation commands.
	(install-driver): Rewrite $(LN) commands to support DESTDIR
	with "ln" as well as with "ln -s".
	(installdirs): Simply use mkinstalldirs.
	(install-libgcc, install-multilib): Also pass DESTDIR.
	* mklibgcc.in: Prepend $(DESTDIR) to $(libsubdir) in the
	installation destination variable ldir.
	* config/alpha/t-osf4 (SHLIB_INSTALL): Prepend $$(DESTDIR)
	to $$(slibdir) in the installation commands.
	* config/arm/t-netbsd (SHLIB_INSTALL): Likewise.
	* config/ia64/t-hpux (SHLIB_INSTALL): Likewise.
	* config/mips/t-iris5-6 (SHLIB_INSTALL): Likewise.
	* config/pa/t-hpux-shlib (SHLIB_INSTALL): Likewise.
	* config/rs6000/t-aix43 (SHLIB_INSTALL): Likewise.
	* config/rs6000/t-aix52 (SHLIB_INSTALL): Likewise.
	* config/t-slibgcc-elf-ver (SHLIB_INSTALL): Likewise.
	* config/t-slibgcc-sld (SHLIB_INSTALL): Likewise.
	* config/arc/t-arc (install-multilib-arc): Prepend $(DESTDIR) to
	$(libsubdir) in the installation commands.

2003-01-26  Alexandre Oliva  <aoliva@redhat.com>

	* fp-bit.h: Define macros for TFmode floating-point constants
	in IBM-extended TFmode types.
	(TMODES): Define if __LDBL_MANT_DIG__ has the newly-supported
	widths.
	* config/fp-bit.c (pack_d, unpack_d): Support IBM-extended
	TFmode type.

	* config/fp-bit.h: Define macros for TFmode floating-point
	constants in IEEE quad TFmode type.  Declare functions according
	to L_ macros.
	(TMODES): Define if __LDBL_MANT_DIG__ is 113.
	(TFtype, TItype, UTItype): Define if TMODES is defined.
	(MAX_UDI_INT, MAX_DI_INT, BITS_PER_DI): Likewise.
	(F_T_BITOFF, D_T_BITOFF): Define.
	(IMPLICIT_1, IMPLICIT_2): Cast constants to types that are
	guaranteed to be wide enough.
	* config/fp-bit.c: Check for L_ macros for tf functions.
	(__thenan_tf): New.
	(nan): Adjust.
	(pack_d, unpack_d): Support IEEE 854 quad type.
	(_fpmul_parts): Support TFmode.  Compute exponent adjustment
	from FRAC_NBITS, FRAC_BITS and NGARDS.
	(usi_to_float): Cast constants to be shifted to fractype
	instead of assuming long long is wide enough.
	(sf_to_tf, df_to_tf, __make_tp, tf_to_df, tf_to_sf): New.

	* Makefile.in (FPBIT_FUNCS): Added _sf_to_tf.
	(DBBIT_FUNCS): Added _df_to_tf.
	(TPBIT_FUNCS): New.
	(libgcc.mk): Pass TPBIT and TPBIT_FUNCS down.
	(LIBGCC_DEPS): Added TPBIT.
	* mklibgcc.in: Support TPBIT and TPBIT_FUNCS.

	* optabs.c (expand_binop) <add, sub>: Return xtarget if we haven't
	been able to move the result to target.

	* expr.c (emit_group_store): Initialize dst with CONST0_RTX
	for the appropriate mode.

	* calls.c (emit_library_call_value_1): Handle return values
	in a PARALLEL.

	* rtl.c (get_mode_alignment): Moved to...
	* stor-layout.c: ... here.

	* print-rtl.c (print_rtx): Don't print MEM details in
	GENERATOR_FILEs.

2003-01-26  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>

	* df.c (df_uses_record): Handle CC0.

2003-01-25  Jan Hubicka  <jh@suse.cz>
	    Eric Botcazou <ebotcazou@libertysurf.fr>

	PR opt/8492
	* gcse.c (one_cprop_pass): Delete unreachable blocks.

2003-01-25  Ulrich Weigand  <uweigand@de.ibm.com>

	* reload.c (maybe_memory_address_p): New function.
	(find_reloads_address): Use it instead of memory_address_p.

2003-01-25  Kaz Kojima  <kkojima@gcc.gnu.org>

	* final.c (shorten_branches): Align the address of code label
	when computing initial lengths and addresses.

2003-01-25  Richard Henderson  <rth@redhat.com>

	2002-02-19  Robert Lipe  <robertlipe@usa.net>
	* config/i386/t-sco5gas: (CRTSTUFF_T_CFLAGS_S): Delete -mcoff.

2003-01-23  Andreas Schwab  <schwab@suse.de>

	* config/ia64/crtend.asm [HAVE_INITFINI_ARRAY]: Make
	__do_global_ctors_aux hidden global and don't put it in
	.init_array.
	* config/ia64/crtbegin.asm [HAVE_INITFINI_ARRAY]: Put it here
	instead so that it comes first.

2003-01-25  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>

	* config/c4x/c4x.h (ASM_SPEC): Fix for new gas format.

2003-01-24  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* calls.c (fix_unsafe_tree): Prototype.
	* loop.c (loop_invariant_p): Avoid signed/unsigned warning.

2003-01-24  Richard Henderson  <rth@redhat.com>

	PR optimization/4382
	* tree-inline.c (find_builtin_longjmp_call_1): New.
	(find_builtin_longjmp_call): New.
	(inlinable_function_p): Use it.

2003-01-24  Ulrich Weigand  <uweigand@de.ibm.com>

	* configure.in (HAVE_AS_TLS): Add s390-*-* and s390x-*-* cases.
	* configure: Regenerate.

	* config/s390/s390-protos.h (tls_symbolic_operand): Add prototype.
	(tls_symbolic_reference_mentioned_p): Add prototype.
	(s390_tls_get_offset): Add prototype.
	(emit_pic_move): Remove prototype, replace by ...
	(emit_symbolic_move): .. this new prototype.

	* config/s390/s390.c (TARGET_HAVE_TLS): Conditionally define.
	(tls_model_chars): New global variable.
	(s390_encode_section_info): Encode TLS model.
	Use targetm.binds_local_p to check for local symbols.
	(s390_strip_name_encoding): New function.
	(TARGET_STRIP_NAME_ENCODING): Define.

	(get_thread_pointer): New function.
	(legitimize_tls_address): New function.
	(legitimize_address): Call it.
	(emit_pic_move): Remove, replace by ...
	(emit_symbolic_move): ... this new function.

	(larl_operand): Handle TLS operands.
	(legitimate_constant_p): Likewise.
	(s390_decompose_address): Likewise.
	(s390_cannot_force_const_mem): New function.
	(TARGET_CANNOT_FORCE_CONST_MEM): Define.

	(s390_output_symbolic_const): Handle TLS unspecs.
	(print_operand): New code 'J'.
	(machine_function): Add struct member 'some_ld_name'.
	(get_some_local_dynamic_name, get_some_local_dynamic_name_1): New.

	(enum s390_builtin): New type.
	(code_for_builtin_64, code_for_builtin_31): New global variables.
	(s390_init_builtins, s390_expand_builtin): New functions.
	(TARGET_INIT_BUILTINS, TARGET_EXPAND_BUILTIN): Define.

	* config/s390/s390.h (TLS_SYMBOLIC_CONST): New macro.
	(ASM_OUTPUT_LABELREF): Define.
	(ASM_OUTPUT_SPECIAL_POOL_ENTRY): Handle TLS constants.

	* config/s390/s390.md: Define TLS UNSPEC constants.
	("movdi", "movsi"): Handle TLS operands.
	("get_tp_64", "get_tp_31", "set_tp_64", "set_tp_31"): New insns.
	("*tls_load_64", "*tls_load_31"): New insns.
	("call_value_tls", "call_value_tls_exp"): New expanders.
	("brasl_tls", "bras_tls", "basr_tls_64", "basr_tls_31",
	"bas_tls_64", "bas_tls_31"): New insns.

2003-01-24  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>

	* doc/passes.texi: Fix typo.
2003-02-01  Jan Hubicka  <jh@suse.cz>

	* loop.c (emit_prefetch_instructions):  Do conversion at right place in
	RTL chain.

	* combine.c (simplify_set): Reverse order of ragumetns to
	REG_CANNOT_CHANGE_MODE_P
	* df.c (df_def_record_1): Likewise.
	* recog.c (register_operand): Likewise.
	* simplify-rtx.c (simplify_subreg): Likewise.
	* hard-reg-set.h (REG_CANNOT_CHANGE_MODE_P): Update use of
	CANNOT_CHANGE_MODE_CLASS.
	* regclass.c (cannot_change_mode_set_regs, invalid_mode_change_p):
	Likewise.
	* reload.c (push_reload): Likewise.
	* alpha.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* ia64.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* mips.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* mips-protos.h (mips_cannot_change_mode_class): Update prototype.
	* mips.c (mips_cannot_change_mode_class): Update.
	* pa64-regs.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* rs6000.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* s390.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* sh.h (CANNOT_CHANGE_MODE_CLASS): Update definition.
	* sh-protos.h (sh_cannot_change_mode_class): Update prototype.
	* sh.c (sh_cannot_change_mode_class): Update.
	* i386.h (CANNOT_CHANGE_MODE_CLASS): New.
	* tm.texi (CANNOT_CHANGE_MODE_CLASS): Update documentation.

2003-01-24  Gabriel Dos Reis  <gdr@integrable-solutions.net>

	* timevar.def (TV_NAME_LOOKUP, TV_OVERLOAD,
	TV_TEMPLATE_INSTANTIATION):  New timevar_id eumerations.
	* timevar.h (POP_TIMEVAR_AND_RETURN): New macro.
	* timevar.c (timevar_pop): Be verbose when aborting.  Include
	"toplev.h".

2003-01-24  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>

	* doc/bugreport.texi: Use @command instead of @code for commands.
	* doc/collect2.texi: Likewise.
	* doc/headerdirs.texi: Likewise.
	* doc/invoke.texi: Likewise.
	* doc/standards.texi: Likewise.
	* doc/tm.texi: Likewise.
	* doc/trouble.texi: Likewise.

2003-01-23  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	PR java/6748
	* config/rs6000/linux.h (MD_FALLBACK_FRAME_STATE_FOR): Don't destroy
	regs->nip. Fix rt_sigreturn frame layout. Add support for newer
	kernels.

2003-01-23  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>

	PR other/7341
	* invoke.texi (ftest-coverage): Fix broken cross-reference.
	Change @code to @command for gcov command.

	* gcc.texi: Adjust title of gcov section.
	Adjust copyright.
	* gcov.texi: Likewise.

2003-01-23  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>

	PR other/7448
	* doc/passes.texi (fssa-ccp): Remove misplaced line.

2003-01-22  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.h (HARD_REGNO_MODE_OK): Fix warning regression
	introduced by last change.

2003-01-22  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* configure.in: Make --disable-checking the default.
	* configure: Regenerate.

2003-01-22  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390-protos.h (preferred_la_operand_p):
	Remove second parameter.
	* config/s390/s390.c (preferred_la_operand_p): Likewise.
	* config/s390/s390.h (FRAME_REGNO_P, FRAME_REG_P): New macros.
	(HARD_REGNO_MODE_OK): Use FRAME_REGNO_P.
	* config/s390/s390.md ("*la_cc_64", "*la_cc_31", splitters): Remove.
	Add peepholes to transform ADD to LOAD ADDRESS.

2003-01-20  Jan Hubicka  <jh@suse.cz>

	* i386.md (SSE cmov splitter):  Handle memory operand in operand 5.

2003-01-21  Christian Ehrhardt  <ehrhardt@mathematik.uni-ulm.de>

	PR opt/7507
	* calls.c (fix_unsafe_tree): Split out from ...
	(expand_call): ... here.  Use it on the function address too.

2003-01-20  Richard Henderson  <rth@redhat.com>

	PR opt/7154
	* stmt.c (expand_asm_operands): Validize memory operands.

2003-01-20  Richard Henderson  <rth@redhat.com>

	PR opt/8848
	* ifcvt.c (noce_process_if_block): Correct arguments to
	modified_between_p for no-else-block case.

2003-01-20  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>

	* ifcvt.c (noce_emit_store_flag): Don't emit store flag if mode of x
	is not a scalar int mode.

2003-01-20  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (notice_update_cc): Don't assume that
	recog_data.operands[0] is always associated with cc0.

2003-01-19  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.c (stack_push_word, stack_pop_word,
	z_reg, z_reg_qi): Declare static and GTY().
	(da_reg): Remove.
	(create_regs_rtx): Don't create da_reg.
	("gt-m68hc11.h"): Include for GTY roots.
	(m68hc11_autoinc_compatible_p): Remove.
	(autoinc_mode): Declare prototype.
	(m68hc11_make_autoinc_notes): Likewise.
	* config/m68hc11/m68hc11.h (ix_reg, iy_reg, d_reg): Declare extern
	and GTY() here.
	(m68hc11_compare_op0, m68hc11_compare_op1): Likewise.
	(m68hc11_soft_tmp_reg): Likewise.
	* config/m68hc11/m68hc11-protos.h: Remove above declarations.

2003-01-18  Roger Sayle  <roger@eyesopen.com>

	* config/pa/pa.md (muldi3): Avoid invalid sharing of SUBREG RTXs.

2003-01-10  Geoffrey Keating  <geoffk@apple.com>

	* varasm.c (struct constant_descriptor_rtx): Remove unused
	`label' field.

	* ggc-page.c (ggc_collect): Avoid overflow computing
	min_expand.

2002-12-20  Geoffrey Keating  <geoffk@apple.com>

	* integrate.c (output_inline_function): Don't hold private
	pointers to 'struct function' over GC calls.

2003-01-17  Alexandre Oliva  <aoliva@redhat.com>

	* config/mips/mips.h: Don't use #elif.  Reported by Kaveh
	R. Ghazi.

2003-01-16  Kaz Kojima  <kkojima@gcc.gnu.org>

	* config/sh/sh.c (sh_initialize_trampoline): Emit rotrdi3_mextr
	instead of rotldi3_mextr.

2003-01-16  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.c (m68hc11_check_z_replacement): Fix handling
	68HC12 pre/post inc/dec side effects.

2003-01-16  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.h (MASK_M6812): Define.

2003-01-16  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hs11/m68hc11.c (expand_prologue): Use push/pop to
	allocate 4-bytes of locals on 68HC11.
	(expand_epilogue): Likewise.
	(m68hc11_memory_move_cost): Increase cost of HI/QI soft registers.

2003-01-15  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* som.h (SUPPORTS_WEAK, SUPPORTS_ONE_ONLY, MAKE_DECL_ONE_ONLY,
	ASM_WEAKEN_LABEL, GTHREAD_USE_WEAK): Define.
	* pa.h (TARGET_SOM_SDEF): Define.
	* pa-hpux11.h (TARGET_SOM_SDEF): Define.

2003-01-15  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.h (ASM_SPEC): Handle -m68hcs12; Pass -mshort
	and -mshort-double to the assembler to specify the ABI.
	(LINK_SPEC): Likewise.
	(CPP_SPEC): Pass HCS12 specific define.
	(MASK_M68S12): New define.
	(TARGET_M68S12): Likewise.
	(TARGET_SWITCHES): New options -m68hcs12 and -m68S12.
	(TARGET_VERSION): Update.
	* config/m68hc11/m68hc12.h (CPP_SPEC): Pass HCS12 specific define.
	(LINK_SPEC): Update.
	(ASM_SPEC): Update.
	* config/m68hc11/m68hc11.c (m68hc11_asm_file_start): Update.
	* doc/invoke.texi (M68hc1x Options): Document -m68hcs12.

2003-01-15  John David Anglin  <dave.anglin@nrc.gc.ca>

	* gengtype-lex.l (malloc, realloc): Move defines after include of
	system.h.

2003-01-15  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("return"): Use emit_jump_insn to emit
	the return code.

2003-01-15  Josef Zlomek  <zlomekj@suse.cz>

	* cfganal.c (set_edge_can_fallthru_flag): Clear the EDGE_CAN_FALLTHRU
	flag before setting it.

2003-01-15  Josef Zlomek  <zlomekj@suse.cz>

	Segher Boessenkool  <segher@koffie.nl>

	* predict.c (real_inv_br_prob_base): New variable.
	(propagate_freq): Use multiply by reciprocal instead of
	division.  Don't divide by 1.0 at all.
	(estimate_bb_frequencies): Similar.

2003-01-15  Alexandre Oliva  <aoliva@redhat.com>

	* configure.in (libgcc_visibility): Force disabled on IRIX 6 too.
	* configure: Rebuilt.

	* config/mips/mips.h (CRT_CALL_STATIC_FUNCTION): Define so as
	to set $gp before the call.

2003-01-10  Andrew Haley  <aph@redhat.com>

	* config/i386/linux64.h (MD_FALLBACK_FRAME_STATE_FOR): Rename
	registers to be in correct order.  Add rip.

2003-01-14  Denis Chertykov  <denisc@overta.ru>

	* config/ip2k/ip2k.h (VALID_MACHINE_DECL_ATTRIBUTE): Remove.
	(VALID_MACHINE_TYPE_ATTRIBUTE): Remove.

	* config/ip2k/ip2k.c (ip2k_attribute_table): New table of
	attributes.
	(TARGET_ATTRIBUTE_TABLE): New macro.
	(valid_machine_type_attribute): Remove.
	(valid_machine_decl_attribute): Remove.
	(ip2k_handle_progmem_attribute): New function.
	(ip2k_handle_fndecl_attribute): New function.

2003-01-14  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR target/8870, PR target/9195

	Backport from mainline:

	2003-01-10  Richard Henderson  <rth@redhat.com>

	* combine.c (make_compound_operation): Use SCALAR_INT_MODE_P,
	not INTEGRAL_MODE_P when widening extensions.

2003-01-13  Alexandre Oliva  <aoliva@redhat.com>

	* aclocal.m4 (gcc_AC_PROG_GNAT): Don't try to prepend
	${ac_tool_prefix} to ADAC or CC.  Protect them from word
	splitting.
	* configure: Rebuilt.

2003-01-12  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* unwind-dw2-fde.h (last_fde): Mark parameter with __attribute__
	((__unused__)).

2003-01-12  Alan Modra  <amodra@bigpond.net.au>

	* expr.c (expand_expr <RDIV_EXPR>): Correct recursive call args.

2003-01-11  Jan Hubicka  <jh@suse.cz>

	PR target/9068
	* i386.c (output_fp_compare): Fix typo

2003-01-10  Josef Zlomek  <zlomekj@suse.cz>

	* jump.c (next_nonnote_insn_in_loop): New function.
	(copy_loop_headers): Use next_nonnote_insn_in_loop instead of
	next_nonnote_insn.
	(duplicate_loop_exit_test). Likewise.

2003-01-08  Jan Hubicka  <jh@suse.cz>

	PR target/8213
	* i386.c (ix86_expand_int_movcc): Fix RTL sharing problem.

2003-01-09  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (*extzv_1_r_h8300): Correct the insn
	length.
	(*extzv_1_r_h8300hs): Likewise.
	(*extzv_1_r_inv_h8300): Likewise.
	(*extzv_1_r_inv_h8300hs): Likewise.

2003-01-09  Josef Zlomek  <zlomj9am@artax.karlin.mff.cuni.cz>

	* Makefile.in (optabs.o): Add dependency on basic-block.h.
	* basic-block.h (control_flow_insn_p): Fuction was exported.
	* cfgbuild.c (control_flow_insn_p): Fuction was made non-static.
	* optabs.c (emit_libcall_block): Emit REG_LIBCALL and REG_RETVAL
	notes only when the region is contained in a single basic block.

2003-01-09  Josef Zlomek  <zlomj9am@artax.karlin.mff.cuni.cz>

	* Makefile.in (PARTITION_H): New.
	(BASIC_BLOCK_H): Added hard-reg-set.h and $(PARTITION_H).
	* basic-block.h: Include hard-reg-set.h.

2003-01-09  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR inline-asm/8832
	* tree.h (expand_asm): New prototype.
	* stmt.c (expand_asm): Set the MEM_VOLATILE_P flag if instructed
	to do so.
	* c-semantics (genrtl_asm_stmt): Pass the RID_VOLATILE qualifier
	down to expand_asm.
	* c-typeck.c (simple_asm_stmt): Set the RID_VOLATILE qualifier.
	* rtlanal.c (volatile_insn_p) [ASM_INPUT]: Test the MEM_VOLATILE_P flag.
	(volatile_refs_p) [ASM_INPUT]: Likewise.
	(side_effects_p) [ASM_INPUT]: Likewise.

2003-01-09  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/8032
	* c-typeck.c (process_init_element) [RECORD_TYPE]: For
	an empty element, do not advance the pointer to unfilled
	fields if there are pending initializers.

2003-01-09  Kaz Kojima  <kkojima@gcc.gnu.org>

	* config/sh/sh.h (CASE_VECTOR_MODE): Use SImode for a
	non-optimizing compile.
	(ASM_OUTPUT_ADDR_VEC_ELT): Use .long for a non-optimizing
	compile.

2003-01-09  Andreas Jaeger  <aj@suse.de>

	* unwind-dw2-fde.h (last_fde): Revert last patch.

2003-01-08  Danny Smith  <dannysmith@users.sourceforge.net>

	PR optimization/8750
	* config/i386/i386.c (ix86_expand_prologue): Don't allow
	scheduling pass to move insns across __alloca call.

2003-01-08  Jeff Sturm  <jsturm@one-point.com>

	PR target/9210
	* config/rs6000/rs6000.c (rs6000_elf_encode_section_info):
	Set SYMBOL_REF_FLAG on local data sym_ref.

2003-01-08  Jan Hubicka  <jh@suse.cz>

	PR target/8322
	* i386.c (ix86_init_mmx_sse_builtins): Constify arguments of loads.
	* xmmintrin.h (_mm_load*_si128. _mm_store*_si128): Add casts.

	PR target/7782
	* reload1.c (delete_output_reload): Avoid repeated attempts
	to delete insn.

	* cselib.c (cselib_current_insn_in_libcall): New static variable.
	(new_elt_loc_list, cselib_process_insn, cselib_init): Keep track on whether
	we are inside libcall.
	* cselib.h (elt_loc_list): Add in_libcall.
	* gcse.c (do_local_cprop): Do not copy propagate using insns
	in libcalls.

2003-01-07  Janis Johnson  <janis187@us.ibm.com>

	PR other/8947
	* doc/invoke.texi (-malign-double): Explain that the option breaks
	binary compatibility.

2003-01-07  Richard Henderson  <rth@redhat.com>

	* alias.c (find_base_value): Only use new_reg_base_value shortcut
	if the register is set once.

2003-01-07  Sylvain Pion <Sylvain.Pion@mpi-sb.mpg.de>

	* config/i386/i386.c (ix86_init_mmx_sse_builtins):
	__builtin_ia32_ldmxcsr and __builtin_ia32_stmxcsr are SSE, not MXX.
	* config/i386/i386.md (ldmxcsr, stmxcsr): SSE, not MMX.

2003-01-07  Benjamin Kosnik  <bkoz@redhat.com>
	    Sunil Davasam  <sunil.k.davasam@intel.com>

	PR libstdc++/9076
	* unwind-dw2.c (execute_cfa_program): DW_CFA_undefined,
	DW_CFA_same_value, read next and ignore.

2003-01-07  Richard Henderson  <rth@redhat.com>

	* cfganal.c (flow_call_edges_add): Don't crash on noreturn call.

2003-01-06  Aldy Hernandez  <aldyh@redhat.com>

	Segher Boessenkool  <segher@koffie.nl>

	* config/rs6000/rs6000.c (rs6000_reg_names): Add missing registers.
	(alt_reg_names): Ditto, fix formatting.
	* config/rs6000/rs6000.h (DEBUG_REGISTER_NAMES): Fix formatting.

2003-01-06  Bruce Korb  <bkorb@gnu.org>

	* fixinc/fixfixes.c(wrap_fix): the wrapper guard must be a function
	of *both* the file name and the fix name.

2003-01-06  Richard Henderson  <rth@redhat.com>

	* config/alpha/alpha.c (alpha_encode_section_info): Adjust symbol_str
	properly when changing "local-ness".
	* config/alpha/alpha.md (movdi_er_high_g): Allow all symbols.

2003-01-05  Andreas Jaeger  <aj@suse.de>

	* unwind-dw2-fde.h (last_fde): Add unused attribute for obj.

2003-01-05  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa64-hpux.h (JCR_SECTION_NAME): Define.
	(PA_INIT_FRAME_DUMMY_ASM_OP): Check EH_FRAME_SECTION_NAME instead of
	USE_EH_FRAME_REGISTRY when defining.

2003-01-04  John David Anglin  <dave.anglin@nrc.ca>

	* config.gcc (hppa*64*-*-hpux11*): Define extra_parts.  Don't use
	collect2.
	* pa-hpux11.h (LDD_SUFFIX, PARSE_LDD_OUTPUT): Undefine.
	(HAS_INIT_SECTION, LD_INIT_SWITCH, LD_FINI_SWITCH): Define.
	* pa64-hpux.h (HP_INIT_ARRAY_SECTION_ASM_OP,
	GNU_INIT_ARRAY_SECTION_ASM_OP, HP_FINI_ARRAY_SECTION_ASM_OP,
	GNU_FINI_ARRAY_SECTION_ASM_OP): Define.
	(CTORS_SECTION_ASM_OP, DTORS_SECTION_ASM_OP): Define when not using
	elfos.h.
	(EH_FRAME_IN_DATA_SECTION): Delete define.
	(HAS_INIT_SECTION, LD_INIT_SWITCH, LD_FINI_SWITCH): Undefine.
	(STARTFILE_SPEC): Use crtbegin.o.
	(ENDFILE_SPEC): Use crtend.o.
	(INIT_SECTION_ASM_OP, FINI_SECTION_ASM_OP, CRT_CALL_STATIC_FUNCTION,
	SUPPORTS_INIT_PRIORITY, PA_CXA_FINALIZE_STUB, PA_INIT_FINI_HACK,
	PA_INIT_FRAME_DUMMY_ASM_OP, PA_JV_REGISTERCLASSES_STUB,
	DTOR_LIST_BEGIN): Define.
	* pa.c (TARGET_ASM_CONSTRUCTOR): Define.
	(pa_asm_out_constructor, pa_asm_out_destructor): New functions.
	* som.h (SUPPORTS_INIT_PRIORITY): Delete define.

2003-01-02  Eric Christopher  <echristo@redhat.com>

	* config/mips/mips.md (movdf_internal2): Fix constraints.

2003-01-03  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Configuration): Fix markup for reference to
	gcc/config.gcc.

2003-01-02  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (stack_pointer_operand): New.
	(const_int_gt_2_operand): Likewise.
	(const_int_ge_8_operand): Likewise.
	* config/h8300/h8300.md (a splitter): Likewise.
	(a peephole2): Likewise.
	* config/h8300/h8300-protos.h: Add prototypes for the new
	functions above.

2003-01-02  Neil Booth  <neil@daikokuya.co.uk>

	* gccbug.in: Update for new categories.

2002-12-31  Tom Tromey  <tromey@redhat.com>

	* doc/install.texi (Testing): Fixed typo.

2002-12-31  Jerry Quinn  <jlquinn@optonline.net>

	* gcc/doc/invoke.texi (Optimization Options): Clean up -O flag
	descriptions.

2002-12-31  Jerry Quinn  <jlquinn@optonline.net>

	* gcc/doc/invoke.texi (Optimization Options): List the options
	enabled by each -O flag.

2002-12-31  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.h (WIDEST_HARDWARE_FP_SIZE): Define.

2002-12-31  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Configuration): Explicitly refer
	gcc/config.gcc for a list of cpu models.

2002-12-30  Joseph S. Myers  <jsm@polyomino.org.uk>

	* doc/gcc.texi, doc/gccint.texi: Update last modification dates.

2002-12-30  Tom Tromey  <tromey@redhat.com>

	* doc/install.texi (Testing): Mention Jacks.

2002-12-30  Joseph S. Myers  <jsm@polyomino.org.uk>

	* doc/service.texi: Uncomment and update FAQ link.

2002-12-28  Joseph S. Myers  <jsm@polyomino.org.uk>

	* doc/cpp.texi, doc/gcc.texi, doc/gccint.texi, doc/install.texi:
	Use @copying.

2002-12-28  Joseph S. Myers  <jsm@polyomino.org.uk>

	* configure.in: Increase makeinfo version requirement to 4.[2-9].
	* configure: Regenerate.
	* doc/install.texi: Update Texinfo version requirement.

2002-12-27  Joseph S. Myers  <jsm@polyomino.org.uk>

	* doc/include/texinfo.tex: Update to version 2002-12-26.16.

2002-12-26  Joseph S. Myers  <jsm@polyomino.org.uk>

	* doc/standards.texi, doc/invoke.texi: Point to 3.3 version of
	c99status.html.

2002-12-26  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (IDENT_ASM_OP): End with a tab.

2002-12-23  Larin Hennessy  <larin@science.oregonstate.edu>

	* doc/install.texi: Remove i386-*-isc, i860-*-bsd,
	m68k-altos-sysv, m68k-isi-bsd, m68k-sony-bsd entries.
	* doc/invoke.texi: Remove AMD 29K, ARM RISC/iX, Clipper, Convex,
	DG/UX entries.
	* doc/md.texi: Remove AMD 29K entries.
	* doc/trouble.texi: Remove Alliant, DG/UX, Iris 4.0.5F, GAS
	1.38.1, NewsOS, RT PC, WE32K entries.

2002-12-23  Aldy Hernandez  <aldyh@redhat.com>

	PR/8763
	* config/rs6000/altivec.md (mulv4sf3): Rewrite to add -0.0 vector.
	(altivec_vspltisw_v4sf): Name pattern.
	(altivec_vslw_v4sf): New pattern.

2002-12-23  Joseph S. Myers  <jsm@polyomino.org.uk>

	* doc/include/gcc-common.texi: Clear DEVELOPMENT.

2002-12-23  David Edelsohn  <edelsohn@gnu.org>

	PR middle-end/8784
	* expr.c (expand_assignment): Apply special treatment to
	ARRAY_TYPE.

2002-12-21  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (zero_extendqisi2): Correct the
	length.

2002-12-19  Devang Patel <dpatel@apple.com>

	* config/darwin.h (TARGET_OPTION_TRANSLATE_TABLE): Add support for -dynamic.
	(CPP_SPEC): Define __STATIC__ and __DYNAMIC__ depending on -dynamic.
	(LINK_SPEC): Pass -dynamic to linker.
	* config/rs6000/darwin.h: Reject conflicting -static and -dynamic.

2002-12-19  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (pushqi_h8300): Don't push the stack
	pointer.
	(pushqi_h8300hs): Likewise.
	(pushhi_h8300): Likewise.
	(pushhi_h8300hs): Likewise.

2002-12-19  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/8988
	* loop.c (maybe_eliminate_biv): Kill REG_EQUAL notes mentioning
	the biv when eliminating.

2002-12-19  Aldy Hernandez  <aldyh@redhat.com>

	PR 8553
	* config/rs6000/altivec.md ("absv8hi2"): Add & to clobbered
	registers.
	("absv16qi2"): Same.
	("absv4si2"): Same.
	("absv4sf2"): Same.
	("altivec_abss_v16qi"): Same.
	("altivec_abss_v8hi"): Same.
	("altivec_abss_v4si"): Same.

2002-12-19  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("*tsthiCCT", "*tsthiCCT_cconly",
	"*tstqiCCT", "*tstqiCCT_cconly"): New insns.

2002-12-18  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/altivec.h (vec_cmplt macro): Reverse arguments in
	macro.
	(vec_cmplt C++ functions): Reverse arguments.

2002-12-17  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/c-tree.texi: Restore deliberate spelling mistakes.

2002-12-17  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/c-tree.texi: Fix typos and follow spelling conventions.
	* doc/cpp.texi: Likewise.
	* doc/extend.texi: Likewise.
	* doc/gty.texi: Likewise.
	* doc/install.texi: Likewise.
	* doc/invoke.texi: Likewise.
	* doc/md.texi: Likewise.
	* doc/passes.texi: Likewise.
	* doc/rtl.texi: Likewise.
	* doc/sourcebuild.texi: Likewise.
	* doc/tm.texi: Likewise.

2002-12-17  Jerry Quinn  <jlquinn@optonline.net>

	* doc/invoke.texi: Minor spelling and grammar fixes.

2002-12-16  Mark Mitchell  <mark@codesourcery.com>

	* version.c (version_string): Mark as prerelease.

2002-12-13  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.c (output_millicode_call): Correct typo.
	(output_call): Likewise.

2002-12-13  Alexandre Oliva  <aoliva@redhat.com>

	* config/mn10300/mn10300.c (print_operand) <case N>: Check
	operand's range.  Print value directly, without aid from
	output_address.
	<case U>: New.
	<case S>: Make sure argument to fprintf has the right type.
	* config/mn10300/mn10300.h (OK_FOR_T): New macro.
	(EXTRA_CONSTRAINT): Adjust.
	* config/mn10300/mn10300.md: Add new all-QImode pattern for
	bclr.  Use %U for immediate operands of bset and bclr.
	(iorqi3): New expand, with insns for AM33 and mn10300.

2002-12-13  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (sh_register_operand): New function.
	(prepare_move_operands): Use it.
	* sh.h (PREDICATE_CODES): Add entry for sh_register_operand.
	* sh.md (movsi_media, movsi_media_nofpu): Allow stores of 0.
	(movqi_media, movhi_media, movdi_media, movdi_media_nofpu): Likewise.
	(movdf_media, movdf_media_nofpu, movv4sf_i, movsf_media): Likewise.
	(movsf_media_nofpu, movv2hi_i, movv4hi_i, movv8qi_i): Likewise.
	(movv2si_i): Likewise.

2002-12-13  Jim Wilson  <wilson@redhat.com>

	* doc/extend.texi (Complex Numbers): Update info on debug info.

2002-12-13  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (addhi3_h8300): Remove the last
	alternative.

2002-12-12  Devang Patel  <dpatel@apple.com>

	* doc/invoke.texi: Document Darwin linker options, -bundle
	-bind_at_load, -all_load and -arch_errors_fatal

2002-12-12  Jim Wilson  <wilson@redhat.com>

	* dbxout.c (dbxout_fptype_value): New.
	(dbxout_type, case COMPLEX_TYPE): Call it.  Use 'R' instead of 'r'.

2002-12-12  Kazu Hirata  <kazu@cs.umass.edu>

	* c-decl.c: Fix a comment typo.
	* cfg.c: Likewise.
	* cfgcleanup.c: Likewise.
	* cfglayout.c: Likewise.
	* cfgrtl.c: Likewise.
	* c-typeck.c: Likewise.
	* dominance.c: Likewise.
	* dwarf2asm.c: Likewise.
	* dwarfout.c: Likewise.
	* expmed.c: Likewise.
	* expr.c: Likewise.
	* final.c: Likewise.
	* flow.c: Likewise.
	* function.c: Likewise.
	* gcc.c: Likewise.
	* genautomata.c: Likewise.
	* integrate.c: Likewise.
	* loop.c: Likewise.
	* loop.h: Likewise.
	* output.h: Likewise.
	* profile.c: Likewise.
	* ra.h: Likewise.
	* reload1.c: Likewise.
	* reload.c: Likewise.
	* sched-rgn.c: Likewise.
	* stmt.c: Likewise.
	* tree.h: Likewise.
	* vmsdbgout.c: Likewise.

2002-12-12  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md: Add a new peephole2.

2002-12-12  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (a peephole2): Accept a constant
	that's accepted by CONST_OK_FOR_J.

2002-12-12  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (CONST_OK_FOR_J): New.
	(CONST_OK_FOR_LETTER_P): Use CONST_OK_FOR_J.
	* config/h8300/h8300.md (*addhi_h8300): Add a new alternative.
	(*addhi_h8300hs): Likewise.

2002-12-12  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (reg_class_from_letter): No longer const.  Add 'e' entry.
	(sh_register_move_cost): Add clause for SImode fp-fp moves.
	Increase cost for moves involving multiple general purpose registers.
	* sh.h (OVERRIDE_OPTIONS): Set reg_class_from_letter['e'] according to
	TARGET_FMOVD.
	(HARD_REGNO_MODE_OK): Allow V2SFmode and V4SFmode in general purpose
	registers, and SImode in fp registers, for ! TARGET_SHMEDIA.
	(enum reg_class reg_class_from_letter): No longer const.
	(SECONDARY_OUTPUT_RELOAD_CLASS): Use REGCLASS_HAS_FP_REG /
	REGCLASS_HAS_GENERAL_REG.
	Handle SImode moves from/to fp registers.
	! TARGET_SHMEDIA && TARGET_FMOVD.
	(SECONDARY_INPUT_RELOAD_CLASS): Use REGCLASS_HAS_FP_REG.
	* sh.md (movsi_ie): Add alternatives to move from / to fp regisyters.

2002-12-12  Andreas Schwab  <schwab@suse.de>

	* config/ia64/ia64.c (ia64_hpux_asm_file_end): Fix typo in last
	change and some warnings.

2002-12-12  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/md.texi (pushm): Fix a typo.

2002-12-12  Alexandre Oliva  <aoliva@redhat.com>

	* config/mips/mips.c (mips_output_conditional_branch): Support
	PIC-safe out-of-range branch and branch-likely.
	* config/mips/mips.md (attr length): PIC-safe out-of-range
	branches are longer.
	("jump"): Support PIC-safe out-of-range-for-branch jumps.  Remove
	unused code to support indirect jumps.

2002-12-11  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.h (BIGGEST_ALIGNMENT): Change 32-bit value to 64 bits.
	(MAX_PARM_BOUNDARY, STACK_BOUNDARY): Express in terms of
	BIGGEST_ALIGNMENT.
	(PREFERRED_STACK_BOUNDARY): Express in terms of STACK_BOUNDARY.
	(FUNCTION_BOUNDARY): Express in terms of BITS_PER_WORD.

2002-12-11  Kazu Hirata  <kazu@cs.umass.edu>

	* doc/invoke.texi: Correct dump file names.

2002-12-09  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/ia64.c (ia64_hpux_asm_file_end): Don't send stripped
	name to globalize_label or assemble_name.

2002-12-11  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (REG_CLASS_HAS_GENERAL_REG): Only true for SIBCALL_REGS
	if not TARGET_SHMEDIA.

2002-12-11  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (REG_CLASS_HAS_FP_REG): New.
	(REGISTER_MOVE_COST) Use it.  Put body into a function and
	move it into:
	* sh.c (sh_register_move_cost).
	* sh-protos.h (sh_register_move_cost): Declare.

	* sh.c (sh_expand_builtin): Abort for unexpected nop values.
	(sh_adjust_cost): Always return a value.

2002-12-11  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (REG_CLASS_HAS_GENERAL_REG): New.
	(REGISTER_MOVE_COST): Use it.

2002-12-11  Richard Henderson  <rth@redhat.com>

	* tree.h (MODULE_LOCAL_P): Kill.
	* varasm.c (default_binds_local_p_1): Use decl_visibility instead.

2002-12-11  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (two define_peephole2): New.

2002-12-11  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (CONST_OK_FOR_J): Remove.
	(CONST_OK_FOR_K): Likewise.
	(CONST_OK_FOR_M): Likewise.
	(CONST_OK_FOR_LETTER_P): Do not use the above macros.

2002-12-11  Neil Booth  <neil@daikokuya.co.uk>

	* c-common.c (builtin_define_type_max): Handle unsigned
	types too.

2002-12-10  Janis Johnson  <janis187@us.ibm.com>

	PR other/8882
	* doc/tm.texi (PUSH_ARGS): Remove misplaced line.

2002-12-10  Devang Patel  <dpatel@appple.com>

	* config/darwin.h(LINK_SPEC): Add darwin specific linker options.
	* doc/invoke.texi: Add new "Darwin Options" section.

2002-12-10  Jim Wilson  <wilson@redhat.com>

	* rs6000.h (RETURN_IN_MEMORY): If ABI_V4, then TFmode is returned in
	memory.

2002-12-10  Andrew Haley  <aph@redhat.com>

	* cse.c (cse_insn): Don't cse past a basic block boundary.

2002-12-10  Jakub Jelinek  <jakub@redhat.com>

	* config/linux.h (LIB_SPEC): If -pthread, add -lpthread even if
	-shared.
	* config/alpha/linux-elf.h (LIB_SPEC): Likewise.
	* config/alpha/linux.h (LIB_SPEC): Likewise.
	* config/arm/linux-elf.h (LIB_SPEC): Likewise.
	* config/pa/pa-linux.h (LIB_SPEC): Likewise.
	* config/sparc/linux.h (LIB_SPEC): Likewise.
	* config/sparc/linux64.h (LIB_SPEC): Likewise.

2002-12-09  Larin Hennessy  <larin@science.oregonstate.edu>

	* doc/invoke.texi: Document UltraSparc III option.

2002-12-09  Richard Henderson  <rth@redhat.com>

	* config/i386/i386.h (TARGET_CPU_CPP_BUILTINS): Define
	__tune_pentium2__ and __tune_pentium3__ as necessary.

2002-12-09  Richard Henderson  <rth@redhat.com>

	* target.h (gcc_target): Add cannot_force_const_mem.
	* target-def.h (TARGET_CANNOT_FORCE_CONST_MEM): New.
	(TARGET_INITIALIZER): Add it.
	* varasm.c (force_const_mem): Fail if cannot_force_const_mem.
	* expr.c (emit_move_insn): Be prepared for force_const_mem to fail.
	* reload1.c (reload): Likewise.
	* hooks.c (hook_bool_rtx_false): New.
	* hooks.h: Declare it.

	* config/i386/i386.c (ix86_cannot_force_const_mem): New.
	(TARGET_CANNOT_FORCE_CONST_MEM): New.
	(ix86_expand_move): Remove de-const-pooling hack.

2002-12-09  Jan Hubicka  <jh@suse.cz>

	* toplev.c (dump_file): Fix order to match reality.

2002-12-08  Geoffrey Keating  <geoffk@apple.com>

	* config/rs6000/rs6000.md (load_multiple): Use adjust_address_nv.
	(store_multiple): Likewise.

2002-12-09  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa/fptr.c (__canonicalize_funcptr_for_compare): Don't canonicalize
	function pointers in page 0.

2002-12-09  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux.h (TARGET_STRUCT_ARG_REG_LITTLE_ENDIAN): Remove
	definition
	(MEMBER_TYPE_FORCES_BLK): Move.
	* config/ia64/ia64.c (ia64_function_arg): Use PARALLEL to pass
	aggregate arguments.
	(ia64_function_value): Use PARALLEL to return aggregate values.

2002-12-09  Steve Ellcey  <sje@cup.hp.com>

	* doc/tm.texi (FUNCTION_ARG_REG_LITTLE_ENDIAN): Remove definition.
	* defaults.h (FUNCTION_ARG_REG_LITTLE_ENDIAN): Remove definition.
	* calls.c (store_unaligned_arguments_into_pseudos) Remove
	FUNCTION_ARG_REG_LITTLE_ENDIAN.
	* stmt.c (expand_return): Ditto.
	* expr.c (move_block_from_reg): Ditto.
	(copy_blkmode_from_reg): Ditto.
	* expmed.c (store_bit_field): Ditto.

2002-12-09  Svein E. Seldal  <Svein.Seldal@solidas.com>

	* config.gcc: Added tic4x-* target as an alias to c4x-*

2002-12-08  Jan Hubicka  <jh@suse.cz>

	* i386.c (ix86_expand_int_movcc): Use force_operand instead of
	constructing insn directly.

2002-12-07  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (*iorhi_shift_8): New.

2002-12-06  Bernd Schmidt  <bernds@redhat.com>

	* doc/invoke.texi: Document FRV port options.
	* doc/md.texi: Document FRV register classes.

2002-12-07  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/install.texi (Configuration): Improve description of cases
	where `make distclean` may fail; clarify --with-gnu-as; fix grammar.

2002-12-06 Dhananjay Deshpande <dhananjayd@kpit.com>

	* gcc/config/sh/sh.c (calc_live_regs): Save fpscr only if target has
	FPU.
	(push): Generate push_fpscr.
	(pop): Generate pop_fpscr.
	* gcc/config/sh/sh.md : Add define_expand "push_fpscr", "pop_fpscr".
	(fpu_switch): Add alternative to push fpscr.  Enable for TARGET_SH3E.

2002-12-06  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (dump_table): DImode pool constants need only 32 bit alignment.
	DFmode alignment depends on TARGET_FMOVD && TARGET_ALIGN_DOUBLE.

2002-12-06  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.md (movdi_i): Name.  Remove inappropriate comment.

2002-12-06  J"orn Rennecke <joern.rennecke@superh.com>
	Merged from basic improvements branch (excerpt):

	2002-11-19  Kaz Kojima  <kkojima@gcc.gnu.org>
	* config/sh/sh.h (SH_DBX_REGISTER_NUMBER): Handle PR_MEDIA_REG.

2002-12-06  Jakub Jelinek  <jakub@redhat.com>

	* expr.c (expand_expr) <case COND_EXPR>: Never modify exp in place.

2002-12-05  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa32-linux.h (CANONICALIZE_FUNCPTR_FOR_COMPARE_LIBCALL): Move define.
	* pa.h (CANONICALIZE_FUNCPTR_FOR_COMPARE_LIBCALL): To here.

2002-12-05  Dale Johannesen  <dalej@apple.com>

	* tree.c (unsafe_for_reeval):  Consider callee child of CALL_EXPR.

2002-12-05  Danny Smith  <dannysmith@users.sourceforge.net>

	* config/i386/cygwin.h (SUBTARGET_PROLOGUE): Replace with
	PROFILE_HOOK.
	* config/i386/mingw32.h (SUBTARGET_PROLOGUE): Don't undef.

2002-12-05  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/spe.h (__ev_mwlufi): Remove.
	(__ev_mwlufia): Remove.
	(__ev_mwlumfaaw): Remove.
	(__ev_mwlusfaaw): Remove.
	(__ev_mwlumfanw): Remove.
	(__ev_mwlusfanw): Remove.

2002-12-05  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (*andorsi3_shift_8): New.

2002-12-05  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (shift_alg_si): Optimize ashift:HI and
	lshiftrt:SI by 28, 29, and 30 bits when !TARGET_H8300.
	(get_shift_alg): Return optimal assembly instructions for the
	shifts mentioned above.

2002-12-04  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_init_once): Do not use loop to
	implement ashiftrt:HI by 13 bits on H8S.

2002-12-04  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa/fptr.c (__canonicalize_funcptr_for_compare): New file and function.
	* pa.md (canonicalize_funcptr_for_compare): Output library call to
	canonicalize_funcptr_for_compare_libfunc on TARGET_ELF32.
	* pa32-linux.h (CANONICALIZE_FUNCPTR_FOR_COMPARE_LIBCALL,
	CTOR_LIST_BEGIN): New defines.
	* pa/t-linux (LIB2FUNCS_EXTRA): New define.
	(fptr.c): Add make rules.

2002-12-04  Geoffrey Keating  <geoffk@apple.com>

	* combine.c (combine_simplify_rtx): Add new canonicalizations.
	* doc/md.texi (Insn Canonicalizations): Document new
	canonicalizations for multiply/add combinations.
	* config/rs6000/rs6000.md: Add and modify floating add/multiply
	patterns to ensure they're used whenever they can be.

2002-12-04  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c: Update the comments related to shifts.

2002-12-04  Chris Demetriou  <cgd@broadcom.com>

	* config/mips/mips.md (get_fnaddr): Correct length attribute.

2002-12-04  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (*extzv_8_8): New.
	(*extzv_8_16): Likewise.

2002-12-04  Jason Merrill  <jason@redhat.com>

	PR c++/8461, c++/8625
	* integrate.c (copy_decl_for_inlining): Handle explicit invisible
	references.
	* tree-inline.c (initialize_inlined_parameters): Likewise.

	* tree.c (variably_modified_type_p): Just return an error_mark_node.

2002-12-04  Chris Demetriou  <cgd@broadcom.com>

	* config/mips/mips.md (get_fnaddr): Avoid placing an "la"
	macro instruction in a branch delay slot, to avoid assembler
	warnings.

2002-12-04  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/7622
	* c-semantics (genrtl_scope_stmt): Do not output inlined
	nested functions that contain no code.

2002-12-04  Jan Hubicka  <jh@suse.cz>

	* cfgrtl.c (force_nonfallthru_and_redirect):  Allow abnormal edge
	to be forced into nonfallthru.

2002-12-03  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/t-netbsd (USER_H): Set to $(EXTRA_HEADERS).

2002-12-03  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/spe.md (*movv1di_const0): New pattern.

2002-12-03  Richard Henderson  <rth@redhat.com>

	* libgcc-std.ver: Inherit GCC_3.3 from GCC_3.0.

2002-12-03  Hans-Peter Nilsson  <hp@bitrange.com>

	* bitmap.c (bitmap_ior_and_compl, bitmap_union_of_diff):
	Initialize tmp.using_obstack to 0.

2002-12-03  Andreas Schwab  <schwab@suse.de>

	* config/m68k/m68k.h (EH_RETURN_DATA_REGNO): Define.
	(EH_RETURN_STACKADJ_RTX): Define.
	(EH_RETURN_HANDLER_RTX): Define.
	(ASM_PREFERRED_EH_DATA_FORMAT): Define.
	* config/m68k/m68k.c (m68k_save_reg): New function.  Handle eh
	registers and don't save fixed registers.
	(m68k_output_function_prologue): Use it.
	(use_return_insn): Likewise.
	(m68k_output_function_epilogue): Likewise.

2002-12-03  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (single_one_operand): Fix a warning.
	(single_zero_operand): Likewise.

2002-12-02  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (dosize): Replace argument op with
	sign.
	(h8300_output_function_prologue): Update the call to dosize.
	(h8300_output_function_epilogue): Likewise.

2002-12-02  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/xtensa.h: Delete ifndefs with nothing inside them.

2002-12-02  Craig Rodrigues  <rodrigc@gcc.gnu.org>

	* configure.in: Use "missing" script to generate warning if
	flex or bison programs not found, instead of invoking "false".
	* configure: Rebuilt.

2002-12-02  Jan Hubicka  <jh@suse.cz>

	* unroll.c (copy_loop_body): Copy CONST_OR_PURE_CALL_P.

2002-12-02  Jan Hubicka  <jh@suse.cz>

	* i386.c (ix86_expand_int_movcc):  Avoid overflow.

2002-12-02  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (dosize): Output r7/er7 instead of sp.
	(push): Likewise.
	(pop): Likewise.
	(h8300_output_function_prologue): Likewise.
	(h8300_output_function_epilogue): Likewise.

2002-12-02  J"orn Rennecke <joern.rennecke@superh.com>

	* expmed.c (store_bit_field): Use int_mode_for_mode to find
	corresponding mode of non-integer mode, unless it is VOIDmode.

2002-12-02  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (stm_h8300s_2): New.
	(stm_h8300s_3): Likewise.
	(stm_h8300s_4): Likewise.
	(five define_peephole2): Likewise.

2002-12-02  Kazu Hirata  <kazu@cs.umass.edu>

	* ra-build.c: Fix a comment typo.

2002-12-01  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_output_function_prologue):
	Remove variable idx.
	(h8300_output_function_epilogue): Likewise.

2002-12-01  Zack Weinberg  <zack@codesourcery.com>

	* config/frv/xm-frv.h: Delete, unnecessary.

2002-12-01  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md: Add comments for define_peephole2.

2002-12-01  Mark Mitchell  <mark@codesourcery.com>

	* builtin-types.def (BT_SIZE): Use size_type_node.
	* builtins.c (fold_builtin): Make the builtin strlen returns a
	size_t, not a sizetype.
	* c-common.c (c_sizeof_or_alignof_type): Use size_type_node, not
	c_size_type_node.
	(c_alignof_expr): Likewise.
	(c_common_nodes_and_builtins): Likewise.
	* c-common.h (CTI_C_SIZE_TYPE): Remove.
	(c_size_type_node): Likewise.
	* c-format.c (T_ST): Use size_type_node, not c_size_type_node.
	* tree.h (TI_SIZE_TYPE): New enumeral.
	(size_type_node): Likewise.

2002-11-30  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* cfg.c (dump_flow_info): Use max_reg_num () to determine the largest
	pseudo register number plus 1.

2002-11-29  Hans-Peter Nilsson  <hp@bitrange.com>

	* cpplib.c (_cpp_test_assertion): Default *value to 0.

	* cppexp.c (num_part_mul): Initialize result.unsignedp, to 1.

2002-11-29  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/t-crtstuff: New target makefile fragment.
	* config.gcc [s390-*-linux, s390x-*-linux]: Use it.

2002-11-29  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (movsi_h8300hs): Change the order of
	alternatives to correct the length when the memory operand is
	either pre_dec or post_inc.

2002-11-29  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (an anonymous pattern): Give an
	internal name *tst_extzv_bitqi_1_n.
	Accept bit_operand instead of bit_memory_operand.
	Do not accept bit tests with the MSB.
	(*tst_extzv_memqi_1_n): New.

2002-11-28  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_eightbit_constant_address_p):
	Fix a comment typo.
	(h8300_tiny_constant_address_p): Likewise.

2002-11-28  Michael Matz  <matz@suse.de>

	* doc/passes.texi: Mention the other register allocator.

2002-11-28  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (6 new peephole2 patterns): New.

2002-11-28  Jakub Jelinek  <jakub@redhat.com>

	* config.gcc (x86_64-*-linux*) [tmake_file]: Remove i386/t-crtstuff.
	* config/t-linux (CRTSTUFF_T_CFLAGS_S): Add $(CRTSTUFF_T_CFLAGS).
	* config/i386/t-linux64 (CRTSTUFF_T_CFLAGS): Define.

2002-11-28  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_and_costs): New.
	* config/h8300/h8300.h (RTX_COSTS): Use h8300_and_costs.
	* config/h8300/h8300-protos.h: Add a prototype for
	h8300_and_costs.

2002-11-27  Zack Weinberg  <zack@codesourcery.com>

	* config/rs6000/rs6000.c (altivec_init_builtins): Make the
	pointer argument in the prototypes of the following builtins
	be (const TYPE *) rather than (TYPE *):
	 + __builtin_altivec_ld_internal_4sf
	 + __builtin_altivec_ld_internal_4si
	 + __builtin_altivec_ld_internal_8hi
	 + __builtin_altivec_ld_internal_16qi
	 + __builtin_altivec_lvsl
	 + __builtin_altivec_lvsr
	 + __builtin_altivec_lvebx
	 + __builtin_altivec_lvehx
	 + __builtin_altivec_lvewx
	 + __builtin_altivec_lvxl
	 + __builtin_altivec_lvx
	 + __builtin_altivec_dst
	 + __builtin_altivec_dstt
	 + __builtin_altivec_dstst
	 + __builtin_altivec_dststt

2002-11-27  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* except.c (default_exception_section): Move variable into the
	scope where it is used.

2002-11-27  Krister Walfridsson  <cato@df.lth.se>

	* config.gcc (*-*-netbsd[2-9]*, *-*-netbsdelf[2-9]*): Test for
	correct version.

2002-11-27  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (OK_FOR_U): Remove extra parentheses.

2002-11-27  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_shift_costs): New.
	* config/h8300/h8300.h (RTX_COSTS): Use h8300_shift_costs.
	* config/h8300/h8300-protos.h: Add a prototype for
	h8300_shift_costs.

2002-11-27  Jim Wilson  <wilson@redhat.com>

	* config/rs6000/spe.md (spu_evsplatfi, spu_evsplati): Swap operands
	in output template.

2002-11-27  Casper S. Hornstrup  <chorns@users.sourceforge.net>

	* config/i386/i386.h (DLL_IMPORT_EXPORT_PREFIX): Define.
	* config/i386/winnt.c (i386_pe_dllexport_name_p): Use
	DLL_IMPORT_EXPORT_PREFIX, not '@'.
	(i386_pe_dllimport_name_p): Likewise.
	(i386_pe_mark_dllexport): Likewise.
	(i386_pe_mark_dllimport): Likewise.
	(i386_pe_encode_section_info): Likewise.
	(i386_pe_strip_name_encoding): Likewise.

2002-11-27  Richard Henderson  <rth@redhat.com>

	* mkmap-symver.awk (BEGIN): Set sawsymbol false.
	(nm && NF == 3): Set sawsymbol true.
	(END): Exit if no symbols seen.
	(output): Fix map syntax error if no globals for the version.

2002-11-27  Jan Hubicka  <jh@suse.cz>

	* builtins.def (DEF_C99_BUILTIN): Fix.

2002-11-26  Andrew Haley  <aph@redhat.com>

	* unwind-sjlj.c (_Unwind_FindEnclosingFunction): Rename
	from_Unwind_Find_Enclosing_Function.
	* unwind-dw2.c (_Unwind_FindEnclosingFunction): Likewise.
	* config/ia64/unwind-ia64.c (_Unwind_FindEnclosingFunction): Likewise.
	* libgcc-std.ver (_Unwind_FindEnclosingFunction): Rename from
	_Unwind_Find_Enclosing_Function, export @@GCC_3.3.
	* unwind.h (_Unwind_FindEnclosingFunction): Add.

2002-11-26  Hartmut Penner  <hpenner@de.ibm.com>

	* config/s390/s390.c (390_output_constant_pool): Set alignment
	before label in 64 bit mode, behind otherwise.

2002-11-26  Richard Henderson  <rth@redhat.com>

	* c-common.c (handle_visibility_attribute): Accept "default".
	* tree.h (enum symbol_visibility): New.
	(decl_visibility): Declare.
	* target.h (gcc_target.visibility): Take visibility arg as integer.
	* varasm.c (default_assemble_visibility): Likewise.
	(decl_visibility): New.
	(maybe_assemble_visibility): Use it.
	* output.h (default_assemble_visibility): Update prototype.
	* config/rs6000/rs6000.c (rs6000_assemble_visibility): Take
	visibility arg as integer.
	* doc/extend.texi: Document default visibility.

2002-11-26  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c: Adjust spacing.
	* config/h8300/h8300.h: Likewise.

2002-11-26  Richard Henderson  <rth@redhat.com>

	* hooks.c (hook_bool_void_false, hook_void_tree_int,
	hook_void_FILEptr_constcharptr): Rename so that the return
	type is first.
	(hook_int_tree_tree_1, hook_void_tree, hook_void_tree_treeptr,
	hook_bool_tree_false): New.
	* hooks.h: Update.
	* langhooks-def.h: Update for renames.
	* target-def.h: Likewise.
	* tree.c (default_comp_type_attributes,
	default_set_default_type_attributes, default_insert_attributes,
	default_function_attribute_inlinable_p,
	default_ms_bitfield_layout_p): Remove.
	* tree.h: Update.

2002-11-26  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa-protos.h (function_value): New prototype.
	* pa.c (function_value): Use a PARALLEL to return small aggregates on
	TARGET_64BIT.
	* pa.h (FUNCTION_VALUE): Use function_value.
	* pa.md (call_value_internal_symref, call_value_internal_reg_64bit,
	call_value_internal_reg, sibcall_value_internal_symref,
	sibcall_value_internal_symref_64bit): Remove =rf constraint on return
	value.

2002-11-26  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* expr.c (gen_group_rtx, emit_group_move): New functions.
	* expr.h (gen_group_rtx, emit_group_move): Prototype.
	* function.c (expand_function_start): Use gen_group_rtx to create a
	PARALLEL rtx to hold the return value when the real return rtx is a
	PARALLEL.
	(expand_function_end): Use emit_group_move to move the return value
	from a PARALLEL to the real return registers.
	* rtl.h (REG_FUNCTION_VALUE_P): Allow function values to be returned
	in PARALLELs.

2002-11-26  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/t-libc-ok: Fix typo.

2002-11-26  Jakub Jelinek  <jakub@redhat.com>

	* configure.in: Move AC_CANONICAL_SYSTEM and AC_ARG_PROGRAM back
	before AC_PROG_CC.
	* configure: Rebuilt.

2002-11-26  Nathan Sidwell  <nathan@codesourcery.com>

	* c-decl.c: (start_struct): Commonize flag setting.

2002-11-26  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/rs6000/rs6000.h (RS6000_CPU_CPP_ENDIAN_BUILTINS): New.
	* config/rs6000/rs6000-c.c (rs6000_cpu_cpp_builtins): Use
	RS6000_CPU_CPP_ENDIAN_BUILTINS.
	* config/rs6000/netbsd.h (RS6000_CPU_CPP_ENDIAN_BUILTINS): Redefine.

2002-11-26  Hartmut Penner  <hpenner@de.ibm.com>

	* config/s390/s390.md (literal_pool_64, literal_pool_31 ): New
	insns.
	* config/s390/s390.c (struct machine_function): Introduction of
	struct machine_function.
	(s390_output_symbolic_const): Use of cfun.
	(s390_optimize_prolog): Likewise.
	(s390_fixup_clobbered_return_reg): Likewise.
	(s390_frame_info): Likewise.
	(s390_emit_prologue, s390_emit_epilogue): Likewise.
	(s390_init_machine_status): New function.
	(override_options): call s390_init_machine_status.
	* config/s390/s390-protos.h (s390_output_constant_pool): Changed
	prototype.

2002-11-26  Jakub Jelinek  <jakub@redhat.com>

	* varasm.c (output_constant_pool): For pool constants in mergeable
	section ensure each constant is padded to multiple of entity size.

2002-11-26  Jakub Jelinek  <jakub@redhat.com>

	* varasm.c (default_exception_section): Move to...
	* except.c (default_exception_section): ... here. Make
	.gcc_except_table read-only if it is not expected to have any
	dynamic relocations and linker handles it.
	* dwarf2out.c (default_eh_frame_section): Make .eh_frame read-only
	if it is not expected to have any dynamic relocations and linker
	handles it.
	* configure.in (HAVE_LD_RO_RW_SECTION_MIXING): Check what ld does
	when linking read-only and read-write sections together.
	* configure, config.in: Rebuilt.
	* crtstuff.c (EH_FRAME_SECTION_CONST): Define.
	(__EH_FRAME_BEGIN__, __FRAME_END__): Add it.

2002-11-25  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/spe.h (__ev_create_sfix32_fs): Change macro into
	new function.
	(__ev_create_ufix32_fs): Same.
	(__ev_get_sfix32_fs_internal): New.
	(__ev_get_sfix32_fs): Define to use function.
	(__ev_get_ufix32_fs_internal): New.
	(__ev_get_ufix32_fs): Define to use function.
	(__ev_get_upper_ufix32_fs): Call __ev_get_ufix32_fs.
	(__ev_get_lower_ufix32_fs): Same.
	(__ev_get_upper_sfix32_fs): Call __ev_get_sfix32_fs.
	(__ev_get_lower_sfix32_fs): Same.
	(__ev_set_sfix32_fs_internal): New.
	(__ev_set_ufix32_fs_internal): New.
	(__ev_set_sfix32_fs): Call __ev_set_sfix32_fs_internal.
	(__ev_set_ufix32_fs): Call __ev_set_ufix32_fs_internal.
	(__ev_set_upper_sfix32_fs): Call function.
	(__ev_set_lower_sfix32_fs): Same.
	(__ev_set_upper_ufix32_fs): Same.
	(__ev_set_lower_ufix32_fs): Same.

2002-11-25  Douglas B Rupp  <rupp@gnat.com>

	* gcc.c (do_spec_1): Reset delete_this_arg to zero.

2002-11-25  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/elfos.h (HANDLE_SYSV_PRAGMA): Define as 1.
	* config/interix.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/linux-aout.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/lynx-ng.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/lynx.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/netbsd.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/openbsd.h (HANDLE_SYSV_PRAGMA: Likewise.
	* config/alpha/elf.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/arm/netbsd.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/cris/aout.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/d30v/d30v.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/frv/frv.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/i386/djgpp.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/i386/i386-interix.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/i386/vxi386.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/ia64/ia64.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/m88k/m88k.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/mmix/mmix.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/rs6000/aix.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/rs6000/darwin.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/sparc/linux-aout.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/sparc/vxsparc64.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/stormy16/stormy16.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/alpha/osf.h (HANDLE_SYSV_PRAGMA): Don't undef before
	defining.
	* config/i386/sco5.h (HANDLE_SYSV_PRAGMA): Likewise.
	* config/mips/iris5.h (HANDLE_SYSV_PRAGMA): Likewise.

2002-11-25  Dave Pitts  <dpitts@cozx.com>

	* gcc/fixinc/mkfixinc.sh: add i370-*-openedition to bypass fixinc list

2002-11-25  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (an anonymous pattern): New.

2002-11-25  Richard Henderson  <rth@redhat.com>

	* alias.c (find_base_value): Use new_reg_base_value if it's live.
	(copying_arguments): Make boolean.

2002-11-25  Jason Thorpe  <thorpej@wasabisystems.com>

	* gcc.c (static_spec_functions): Add if-exists-else spec
	function.
	(if_exists_else_spec_function): New function.
	* doc/invoke.texi: Document the if-exists-else spec function.

	* config/netbsd-elf.h (NETBSD_STARTFILE_SPEC): For -static, use
	"%:if-exists-else(crtbeginT%O%s crtbegin%O%s)".

2002-11-25  Jason Thorpe  <thorpej@wasabisystems.com>

	* config.gcc (powerpc-*-netbsd*): Replace "svr4.h" with
	"netbsd.h netbsd-elf.h" in tm_file.  Set tmake_file to
	"${tmake_file} rs6000/t-netbsd".
	* config/rs6000/netbsd.h: Rewrite.
	* config/rs6000/t-netbsd: New file.

2002-11-25  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (an anonymous pattern): Relax the
	condition for the pattern.

2002-11-25  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/rs6000.h (enum rs6000_builtins): Remove evmwlssf,
	evmwlsmf, evmwlssfa, evmwlsmfa, evmwlssfaaw, evmwlsmfaaw,
	evmwlssfanw, evmwlsmfanw.

	* config/rs6000/rs6000.c (bdesc_2arg): Same.

	* config/rs6000/spe.md: Same for patterns.

2002-11-25  Christian Ehrhardt  <ehrhardt@mathematik.uni-ulm.de>

	PR c/8639
	* fold-const.c (extract_muldiv): Don't propagate division unless
	both arguments are multiples of C.

2002-11-25  Andrew Haley  <aph@redhat.com>

	* libgcc-std.ver (_Unwind_Find_Enclosing_Function): Add.
	* config/ia64/unwind-ia64.c (_Unwind_Find_Enclosing_Function): New.
	* unwind-sjlj.c (_Unwind_Find_Enclosing_Function): Likewise.
	* unwind-dw2.c (_Unwind_Find_Enclosing_Function): Likewise.

2002-11-24  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_init_once): Fix a typo in the
	target help message.

2002-11-24  Jason Thorpe  <thorpej@wasabisystems.com>

	* config.gcc (*-*-netbsd*1.[7-9]*, *-*-netbsd*[2-9]*): Set
	extra_parts to "crtbegin.o crtend.o crtbeginS.o crtendS.o
	crtbeginT.o".
	(arm*-*-netbsd*, i[34567]86-*-netbsd*, m68k*-*-netbsd*)
	(ns32k-*-netbsd*, sparc-*-netbsd*, vax-*-netbsd*): Set extra_parts
	to "" for a.out configurations.
	* config/t-netbsd (CRTSTUFF_T_CFLAGS): Set to "-fPIC".

2002-11-24  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/alpha/netbsd.h (CPP_SUBTARGET_SPEC): Just use
	NETBSD_CPP_SPEC directly.
	(SUBTARGET_EXTRA_SPECS): Remove netbsd_cpp_spec.  Add
	netbsd_endfile_spec.
	(ENDFILE_SPEC): Use %(netbsd_endfile_spec).

2002-11-24  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/netbsd-elf.h (STARTFILE_SPEC): Rename to
	NETBSD_STARTFILE_SPEC.
	(STARTFILE_SPEC): Redefine in terms of NETBSD_STARTFILE_SPEC.
	(ENDFILE_SPEC): Likewise.
	* config/netbsd.h (LIB_SPEC, LIBGCC_SPEC): Likewise.

2002-11-24  Andreas Schwab  <schwab@suse.de>

	* Makefile.in (install-driver): Remove versioned link before
	trying to create it.

	* config/m68k/m68k.c: Fix typo in last change defining
	TARGET_ASM_CAN_OUTPUT_MI_THUNK.

2002-11-23  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (print_operand): Update the use of
	h8300_tiny_constant_address_p.
	(h8300_adjust_insn_length): Likewise.
	(h8300_tiny_constant_address_p): Check if the given rtx is a
	variable declared with __attribute__ ((tiny_data)).

2002-11-22  Dale Johannesen  <dalej@apple.com>

	* toplev.c (rest_of_compilation):  Fix comments.

2002-11-22  Geoffrey Keating  <geoffk@apple.com>

	* aclocal.m4 (ac_cv_func_mmap_dev_zero): Darwin does not
	allow mmap from /dev/zero.  Don't make decisions for the host
	based on presence or absence of /dev/zero on the build machine.
	(ac_cv_func_mmap_anon): Darwin does have working MMAP_ANON.
	(AC_FUNC_MMAP_FILE): Darwin does have mmap of a file.
	* configure: Regenerate.

2002-11-22  Daniel Jacobowitz  <drow@mvista.com>

	* gcc.c (make_relative_prefix, split_directories)
	(free_split_directories): Removed.

2002-11-22  Daniel Jacobowitz  <drow@mvista.com>

	* configure.in: Set insn=nop for DWARF-2 tests on ARM.
	* configure: Regenerated.

2002-11-22  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (compute_a_shift_length): Fix the insn
	length computation when xor.l is output.

2002-11-21  Jim Wilson  <wilson@redhat.com>

	* config/rs6000/rs6000.c (function_arg): Set inner mode of SPE
	vectors to SI.

2002-11-21  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/xtensa-protos.h (xtensa_copy_incoming_a7): Declare.
	* config/xtensa/xtensa.c (struct machine_function): Add
	incoming_a7_copied flag.
	(xtensa_copy_incoming_a7): Define.
	(xtensa_emit_move_sequence): Use xtensa_copy_incoming_a7.
	* config/xtensa/xtensa.md (movdi, movsf, movdf): Ditto.

2002-11-21  Jan Hubicka  <jH@suse.cz>

	* i386-protos.h (x86_64_sign_extended_value): Fix prototype.
	* i386.c (x86_64_general_operand, x86_64_szext_general_operand,
	x86_64_nonmemory_operand, x86_64_movabs_operand,
	x86_64_szext_nonmemory_operand, x86_64_immediate_operand,
	ix86_expand_int_movcc): Update call of x86_64_sign_extended_value.
	(local_symbolic_operand): Do not care the 64bit limits.
	(x86_64_sign_extended_value): Remove allow_rip support.
	(legitimate_pic_address_disp_p): Handle all cases allowed
	with RIP addressing.
	(legitimate_address_p): Use legitimate_pic_address_disp_p for PIC.
	(legitimize_pic_address): Reorganize.
	* i386.h (EXTRA_CONSTRAINT): Update call of x86_64_sign_extended_value.

2002-11-21  Jason Thorpe  <thorpej@wasabisystems.com>

	* config.gcc (arm*-*-netbsdelf*): Enable configuration.
	* config/arm/netbsd-elf.h: New file.

2002-11-21  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/arm/elf.h (SUBTARGET_EXTRA_SPECS): Add
	subtarget_asm_float_spec.
	(SUBTARGET_ASM_FLOAT_SPEC): Define, moving the
	defaults from...
	(ASM_SPEC): ...here.  Use subtarget_asm_float_spec.

2002-11-21  Nick Clifton  <nickc@redhat.com>

	* config/fr30/fr30.md (movsf_constant_store): Move code to
	detect 0.0 into fr30.c.
	* config/fr30/fr30-protos.h (fr30_const_double_is_zero):
	Prototype.
	* config/fr30/fr30.c (fr30_const_double_is_zero): New
	function.  Return true if the rtx is 0.0.

2002-11-21  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/arm/elf.h (ASM_SPEC, LINK_SPEC): Pass -EL
	if -mlittle-endian is specified.

2002-11-21  Richard Earnshaw  <rearnsha@arm.com>

	PR optimization/2903
	* arm.md (anddi_notzesidi_di): Operand 2 is inverted not operand 1.
	(anddi_notsesidi_di): Likewise.

2002-11-21  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (print_operand): Use
	h8300_eightbit_constant_address_p and
	h8300_tiny_constant_address_p.
	(h8300_adjust_insn_length): Likewise.
	* config/h8300/h8300.h (EIGHTBIT_CONSTANT_ADDRESS_P): Remove.
	(TINY_CONSTANT_ADDRESS_P): Likewise.
	(OK_FOR_U): Use eightbit_constant_address_p.

2002-11-21  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/libgcc-libc.ver: Add multilib support.
	* config/s390/linux.h (MULTILIB_DEFAULT): Define.
	* config/s390/t-linux64 (MULTILIB_OPTIONS, MULTILIB_DIRNAMES,
	MULTILIB_OSDIRNAMES, LIBGCC, INSTALL_LIBGCC,
	EXTRA_MULTILIB_PARTS): Define.

2002-11-21  Richard Earnshaw  <rearnsha@arm.com>

	* arm.c (arm_get_frame_size): A leaf function does not need its
	stack padding to an aligned boundary if it has no frame.
	(thumb_get_frame_size): Likewise.

2002-11-20  Steve Ellcey  <sje@cup.hp.com>

	* emit-rtl.c (gen_reg_rtx): Simplify mapping of Complex type
	to component type using GET_MODE_INNER.
	* expr.c (emit_move_insn_1): Ditto.
	* optabs.c (expand_binop): Ditto.
	(expand_unop): Ditto.
	(expand_complex_abs): Ditto.

2002-11-20  Douglas B Rupp  <rupp@gnat.com>

	* hwint.h (HAVE___INT64): Fix typo (was HAVE__INT64).

2002-11-20  DJ Delorie  <dj@redhat.com>

	* config/stormy16/stormy16.c (s16builtins,
	xstormy16_init_builtins, xstormy16_expand_builtin): New.
	* config/stormy16/stormy16.md (divmodhi4, sdivlh, udivlh): New.

2002-11-20  Hans-Peter Nilsson  <hp@bitrange.com>

	* Makefile.in (RUN_GEN, VALGRIND_DRIVER_DEFINES): New variables.
	(DRIVER_DEFINES): Add $(VALGRIND_DRIVER_DEFINES).
	(executing gencheck, genconfigs, genconditions, genflags,
	gencodes, genconstants, genemit, genrecog, genopinit, genextract,
	genpeep, genattr, genattrtab, genoutput, gengenrtl, genpreds,
	gengtype, genprotos): Prepend $(RUN_GEN).
	* configure.in: Move host compiler tests before --enable-checking
	tests.
	(--enable-checking=valgrind): New.
	* config.in, configure: Regenerate.
	* cppfiles.c [!ENABLE_VALGRIND_CHECKING] (VALGRIND_DISCARD):
	Define as empty.
	(read_include_file): When doing the mmap+1 trick,
	valgrind-annotate the byte after the mmap:ed area as readable.
	(purge_cache): Remove above annotation.
	* gcc.c (execute) [ENABLE_VALGRIND_CHECKING]: Arrange to prepend
	VALGRIND_PATH -q to each command.

	* ggc-common.c [!ENABLE_VALGRIND_CHECKING] (VALGRIND_DISCARD):
	Define as empty.
	(ggc_realloc): Update valgrind annotations.
	* ggc-page.c [!ENABLE_VALGRIND_CHECKING] (VALGRIND_DISCARD):
	Define as empty.
	(alloc_anon, free_page, ggc_alloc, poison_pages): Add machinery to
	valgrind-annotate memory.

2002-11-20  Ulrich Weigand  <uweigand@de.ibm.com>

	* recog.c (constrain_operands): Prefer exact match over reloadable
	EXTRA_MEMORY_CONSTRAINT or EXTRA_ADDRESS_CONSTRAINT.

	* reload.c (find_reloads): Always reload EXTRA_ADDRESS_CONSTRAINT
	operands in Pmode.

2002-11-20  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/8518
	* c-decl.c (duplicate_decls): Outline the second definition
	of an extern inline function in all cases.

2002-11-20  Richard Sandiford  <rsandifo@redhat.com>

	* stor-layout.c (place_field): Update rli->offset as well as
	rli->bitpos.

2002-11-20  Richard Sandiford  <rsandifo@redhat.com>

	* sched-deps.c (sched_analyze): Check HARD_REGNO_CALL_PART_CLOBBERED.

2002-11-20  Richard Sandiford  <rsandifo@redhat.com>

	* config/sh/sh.md (udivsi3): Don't put udivsi3_i4_media instructions
	into a libcall block.
	(divsi3): Likewise divsi3_i4_media.

2002-11-20  Richard Sandiford  <rsandifo@redhat.com>

	* global.c (find_reg): Check HARD_REGNO_NREGS before kicking
	out another register.

2002-11-20  Jakub Jelinek  <jakub@redhat.com>

	* combine.c (force_to_mode): Only replace with (not Y) if all bits in fuller_mask
	(not just mask) are set in C.

2002-11-19  Andreas Jaeger  <aj@suse.de>

	* loop.c (record_giv): Initialize not_replaceable.
	(check_final_value): Likewise.

2002-11-19  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_init_once): Replace 1 with
	MASK_H8300S.

2002-11-19  Vijay L. Khuspe  <vijayk1@kpit.com>

	* config/h8300/h8300.c (h8300_init_once): Allow -mn switch
	only if -mh or -ms present.
	(h8300_eightbit_constant_address_p): Support the normal mode.
	(h8300_tiny_constant_address_p): Likewise.
	* config/h8300/h8300.h (TARGET_NORMAL_MODE): New.
	(POINTER_SIZE): Add 16 bit pointer for the normal mode.
	(Pmode): Evaluate to HImode for the normal mode.
	(SIZE_TYPE): Evaluate to unsigned int for normal mode.
	(PTRDIFF_TYPE): Evaluate to int for the normal mode.
	(ASM_WORD_OP): Evaluate to word for the normal mode.
	* config/h8300/h8300.md (tablejump_normal_mode): New.
	(indirect_jump_normal_mode): New.
	* config/h8300/t-h8300 (MULTILIB_OPTIONS): Pass -mn option to
	directory.
	(MULTILIB_DIRNAMES): Create target dependent directory
	'normal'.
	(MULTILIB_EXCEPTIONS): Don't turn on -mn on H8/300.
	* doc/invoke.texi (gccoptlist): Describe the new switch -mn.

2002-11-19  Jan Hubicka  <jh@suse.cz>

	* i386.md (length_immediate): Do not refer to insn address.
	(jcc*, jmp patterns):  Compute length explicitly.

2002-11-19 Eric Botcazou <ebotcazou@libertysurf.fr>

	PR c/8588
	* optabs.c (expand_binop): Convert CONST_INTs in shift
	operations too.

2002-11-19  Roger Sayle  <roger@eyesopen.com>

	* gcse.c (gcse_emit_move_after): Correct typo in REG_EQUAL note.

2002-11-19  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (an anonymous pattern): Relax the
	condition to accept the same operands and/or subregs.

2002-11-19  Daniel Jacobowitz  <drow@mvista.com>

	* config/sh/sh.c (gen_shl_and): Revert previous patch.
	* config/sh/sh.md (ashrdi3+1, ashrdi3+2): Predicate on
	reload_completed.

2002-11-19  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (print_operand): Update the use of
	EIGHTBIT_CONSTANT_ADDRESS_P.
	(h8300_adjust_insn_length): Likewise.
	(h8300_eightbit_constant_address_p): Check if the given rtx is
	a variable with __attribute__((eightbit_data)).
	* config/h8300/h8300.h (OK_FOR_U): Update the use of
	EIGHTBIT_CONSTANT_ADDRESS_P.

2002-11-19  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Add self as second contact in
	addition to Jeff Law.

2002-11-19  Andreas Jaeger  <aj@suse.de>

	* tree-inline.c: Move prototpyes of find_alloca_call_1 and
	find_alloca_call to right place.

2002-11-19  Kazu Hirata  <kazu@cs.umass.edu>

	* cppfiles.c: Fix formatting.

2002-11-19  Jason Thorpe  <thorpej@wasabisystems.com>

	* gcc.c (The Specs Language): Document spec functions.
	(static_spec_functions, lookup_spec_function)
	(eval_spec_function, handle_spec_function)
	(if_exists_spec_function, alloc_args): New.
	(execute): Abort if processing_spec_function is true.
	(do_spec_1): Hand off spec to handle_spec_function if %:
	is encountered.  If processing_spec_function is true,
	end any pending argument when the end of the string is reached.
	(main): Use alloc_args to allocate the initial argument vector.
	* gcc.h (struct spec_function): New.
	(lang_specific_spec_functions): New extern.

	* config/netbsd-elf.h (STARTFILE_SPEC): Add if-exists(crti%O%s).
	(ENDFILE_SPEC): Add if-exists(crtn%O%s).
	* config/alpha/netbsd.h (ENDFILE_SPEC): Likewise.

	* doc/invoke.texi: Document spec functions.

	* cppspec.c (lang_specific_spec_functions): New.
	* gccspec.c: Likewise.

2002-11-18  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux_longdouble.h (FIXUNS_TRUNCTFSI2_LIBCALL): New.
	(FIXUNS_TRUNCTFDI2_LIBCALL): New.
	(fixunstfsi_libfunc): Change.
	(fixunstfdi_libfunc): Change.
	(sdiv_optab): Don't zero out SImode handler.
	(udiv_optab): Don't zero out SImode handler.
	(smod_optab): Don't zero out SImode handler.
	(umod_optab): Don't zero out SImode handler.

2002-11-18  Neil Booth  <neil@daikokuya.co.uk>

	PR preprocessor/8524
	* cpplib.c (run_directive): Remove previous kludge to _Pragma.
	Add a new one in its place, which hopefully works.
	(skip_rest_of_line): Change test for bottom-of-context-stack.

2002-11-18  Jan Hubicka  <jh@suse.cz>

	* i386.md (addqi_1_slp): Fix output template.
	(subqi_1_slp): Fix type.

2002-11-17  Jan Hubicka  <jh@suse.cz>

	* calls.c (alloca_call_p): New global function.
	* tree.h (alloca_call_p): New.
	* tree-inline.c (inlinable_function_p):  Do not inline when
	function calls alloca.
	(find_alloca_call, find_alloca_call_1): New functions.

2002-11-18  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (*andorqi3): Use bor between bld and
	bst.  Update the insn length.
	(*andorhi3): Likewise.
	(*andorsi3): Likewise.

2002-11-18  Richard Sandiford  <rsandifo@redhat.com>

	* config/sh/sh-protos.h (sh_mark_label): Declare.
	* config/sh/sh.c (sh_mark_label): New function, taken from
	movdi_const, but fixing the case when the address has an addend.
	* config/sh/sh.md (movdi_const, movdi_const_32bit): Use it.

2002-11-18  Richard Sandiford  <rsandifo@redhat.com>

	* config/sh/sh.c (pool_node): New field: part_of_sequence_p.
	(add_constant): Set it.
	(dump_table): Don't reorder a constant if part_of_sequence_p.
	(machine_dependent_reorg): Assume that float constants will
	stay in their original order if used as a sequence.

2002-11-18  Richard Sandiford  <rsandifo@redhat.com>

	* config/sh/sh.c (calc_live_regs): Update check for PIC liveness
	in compact code.

2002-11-18  Richard Sandiford  <rsandifo@redhat.com>

	* config/sh/sh.md (initialize_trampoline): Do not force the
	trampoline address into R0_REGS here.

2002-11-17  Kazu Hirata  <kazu@cs.umass.edu>

	* df.c: Fix formatting.

2002-11-17  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (two anonymous patterns): Fix insn
	lengths.

2002-11-17  Daniel Jacobowitz  <drow@mvista.com>

	* sh.c (gen_shl_and): Don't create a zero_extend if the operand
	is not an arith_reg_operand.

2002-11-17  Graham Stott  <graham.stott@btinternet.com>

	* real.c (real_to_decimal): Fix buffer overrun when buffer size
	is smaller than representation.

2002-11-17  Kazu Hirata  <kazu@cs.umass.edu>

	* builtins.c: Fix formatting.

2002-11-16  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (two anonymous patterns): Fix typos.

2002-11-16  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md: Fix formatting.

2002-11-16  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md: Replace spaces with tabs.
	* config/h8300/t-h8300: Remove a trailing empty line.

2002-11-16  Kazu Hirata  <kazu@cs.umass.edu>

	* tlink.c: Fix formatting.

2002-11-16  David Edelsohn  <edelsohn@gnu.org>

	PR 8362
	* config/rs6000/rs6000.c (rs6000_outout_load_multiple): New function.
	* config/rs6000/rs6000.md (movti_string): Remove output modifier
	when scratch register never needed.
	(ldmsi[3-8]): New patterns.

2002-11-16  Kazu Hirata  <kazu@cs.umass.edu>

	* hard-reg-set.h: Follow spelling conventions.
	* real.c: Likewise.
	* target.h: Likewise.

2002-11-16  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/x86-64.h (MCOUNT_NAME): Change into string literal.

2002-11-16  Kazu Hirata  <kazu@cs.umass.edu>

	* optabs.c: Fix formatting.

2002-11-16  Jan Hubicka  <jh@suse.cz>

	* athlon.md, k6.md, pentium.md, ppro.md: Handle shift1, rotate1
	* i386.md (attribute type): Add type shift1 and rotate1.
	(*_slp): Rewrite to have just two operands to avoid reload problems.

2002-11-15  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (4 anonymous patterns): New.

2002-11-15  Geoffrey Keating  <geoffk@apple.com>

	* params.def (GGC_MIN_HEAPSIZE): Fix GGC_ALWAYS_COLLECT problem.
	* doc/invoke.texi: Correct description of what needs to be done to
	force collection at every ggc_collect call.

2002-11-15  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (optimization_options): Set
	flag_asynchronous_unwind_tables to 1 by default.

2002-11-15  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.h (ASM_PREFERRED_EH_DATA_FORMAT): Define.

2002-11-15  Jan Hubicka  <jh@suse.cz>

	* i386-protos.h (x86_function_profiler): New function
	* i386.h (MCOUNT_NAME): New.
	(PROFILE_COUNT_REGISTER): New.
	(FUNCTION_PROFILER): Move offline to ...
	* i386.c (x86_function_profiler) ... here; fix 64bit support
	* beos-elf.h (FUNCTION_PROFILER): Kill.
	(MCOUNT_NAME): New.
	* freebsd-aout.h (FUNCTION_PROFILER): Kill.
	(MCOUNT_NAME): New.
	(PROFILE_COUNT_REGISTER): New.
	* linux.h (FUNCTION_PROFILER): Kill.
	(MCOUNT_NAME): New.
	* x86-64.h (FUNCTION_PROFILER): Kill.
	(MCOUNT_NAME): New.
	* freebsd.h (FUNCTION_PROFILER): Kill.
	(MCOUNT_NAME): New.

2002-11-14  Jeroen Dobbelaere  <jeroen.dobbelaere@acunia.com>

	* config/arm/arm.h (EXPAND_BUILTIN_VA_ARG,
	FUNCTION_ARG_PASS_BY_REFERENCE): Define.
	* config/arm/arm.c (arm_va_arg,
	arm_function_arg_pass_by_reference): New.
	* config/arm/arm-protos.h: Add prototypes.

2002-11-14  Kazu Hirata  <kazu@cs.umass.edu>

	* gthr-single.h: Fix formatting.

2002-11-14  Zack Weinberg  <zack@codesourcery.com>

	* tree.c (tree_vec_elt_check_failed): New function.
	* tree.h (TREE_VEC_ELT_CHECK): New checking macro.
	(TREE_VEC_ELT): Use it.

	* tree-inline.c (optimize_inline_calls): Don't copy a
	zero-length vector.

2002-11-14  Gabriel Dos Reis  <gdr@integrable-solutions.net>

	* diagnostic.c (sorry): Don't repeat "sorry, unimplemented" text.

2002-11-14  Jakub Jelinek  <jakub@redhat.com>

	* varasm.c (output_addressed_constants) [MINUS_EXPR]: Clear reloc if
	both operands contain local relocations.
	(categorize_decl_for_section): Don't use mergeable sections if
	initializer has any relocations.

2002-11-14  Kazu Hirata  <kazu@cs.umass.edu>

	* gthr-vxworks.h: Fix formatting.

2002-11-13  Janis Johnson  <janis187@us.ibm.com>

	* doc/install.texi (Testing): Document extra Java testing.
	* doc/sourcebuild.texi (Test Suites): Document libgcj testing.

2002-11-13  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa64-hpux.h (LINK_SPEC): Move "+Accept TypeMismatch" switch to the
	beginning of the spec.
	(LDD_SUFFIX, PARSE_LDD_OUTPUT): Delete.
	(LD_INIT_SWITCH, LD_FINI_SWITCH): Define but don't enable.  Add comment
	regarding problems with global constructors when using GNU ld.

2002-11-13  Kazu Hirata  <kazu@cs.umass.edu>

	* gthr-solaris.h: Fix formatting.

2002-11-13  Kazu Hirata  <kazu@cs.umass.edu>

	* gthr-posix.h: Fix formatting.

2002-11-12  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (*andorsi3): New.

2002-11-12  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	* doc/install.texi (powerpc-*-linux-gnu*): Update binutils requirement.

2002-11-12  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (tiny_constant_address_p): Parenthesize
	expressions appropriately.

2002-11-12  Kazu Hirata  <kazu@cs.umass.edu>

	* gthr-win32.h: Fix formatting.

2002-11-12  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (single_one_operand): Correctly compute
	mask when mode is SImode.
	(single_zero_operand): Likewise.
	* config/h8300/h8300.md (two new anonymous insns): New.

2002-11-12  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/contrib.texi (Contributors): Use GCJ instead of gcj to refer
	to that entire project.

2002-11-12  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config/mips/t-iris6 (MULTILIB_OSDIRNAMES): Restore old
	directories.

2002-11-11  Zack Weinberg  <zack@codesourcery.com>

	* params.def (ggc-min-expand, ggc-min-heapsize): New parameters.
	* doc/invoke.texi: Document them.

	* ggc-page.c: Include params.h.  Remove definitions of
	GGC_MIN_EXPAND_FOR_GC, GGC_MIN_LAST_ALLOCATED.  Replace
	GGC_POISON with ENABLE_GC_CHECKING in ifdefs, delete #define.
	(init_gcc): Don't set G.allocated_last_gc here.
	(ggc_collect): Use PARAM_VALUE (GGC_MIN_HEAPSIZE) and
	PARAM_VALUE (GGC_MIN_EXPAND) to decide whether or not to
	perform collection.
	* ggc-simple.c: Similarly.
	* Makefile.in (ggc-common.o, ggc-simple.o): Add $(PARAMS_H) to
	dependencies.

2002-11-11  Kazu Hirata  <kazu@cs.umass.edu>

	* gthr-dce.h: Fix formatting.

2002-11-11  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	PR c/8467
	* stmt.c (tail_recursion_args): Handle DECL_MODE differing from the
	mode of DECL_RTL case.

2002-11-11  Janis Johnson  <janis187@us.ibm.com>

	* doc/contrib.texi: Merge in the list from the libstdc++ web pages.

2002-11-11  Jan Hubicka  <jh@suse.cz>

	* i386.c (construct_container): Fix handling of SSE_CLASS.

2002-11-10  Joel Sherrill <joel@gcc.gnu.org>

	* config/m68k/t-crtstuff (crti.o): Use this...
	($(T)crti.o): ... instead.
	(crtn.o): Use this...
	($(T)crtn.o): ... instead.

2002-11-10  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR c/8439
	* recog.c (validate_replace_rtx_1) [PLUS]: Simplify only
	if there is something new to be simplified.

2002-11-10  H.J. Lu <hjl@gnu.org>

	* calls.c (PUSH_ARGS_REVERSED): Define only if not defined.
	* expr.c (PUSH_ARGS_REVERSED): Likewise.

	* config/i386/i386.h (PUSH_ARGS_REVERSED): Set to 1.

2002-11-10  Zack Weinberg  <zack@codesourcery.com>

	* config/rs6000/sysv4.h: Define NO_IMPLICIT_EXTERN_C here...
	* config/rs6000/linux.h, config/rs6000/linux64.h,
	config/rs6000/windiss.h: ... not here.

2002-11-10  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/mips/netbsd.h (TARGET_OS_CPP_BUILTINS): Define
	__ABICALLS__ if TARGET_ABICALLS.

2002-11-10  Jan Hubicka  <jh@suse.cz>

	* i386.h (MIN_UNITS_PER_WORD): Define to 8 for x86-64 libgcc.

2002-11-10  Joseph S. Myers  <jsm@polyomino.org.uk>

	* c-decl.c (grokdeclarator): Make error for duplicate type
	qualifiers into a pedwarn, disabled for C99.

2002-11-10  Hans-Peter Nilsson  <hp@bitrange.com>

	* config/mmix/mmix.h (FUNCTION_ARG_CALLEE_COPIES): Define the same
	as FUNCTION_ARG_PASS_BY_REFERENCE.

2002-11-09  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.h (STARTING_FRAME_OFFSET): Change offset for TARGET_64BIT to 16.

	* config.gcc (hppa*64*-*-linux*): Shorten lines in tm_file define.
	(hppa*64*-*-hpux11*): Likewise.  Use elfos.h with gas.
	* pa.c (output_millicode_call): Use symbol difference rather than
	$PIC_pcrel$0 when using HP assembler.
	* pa64-hpux.h (TARGET_GAS): Define to 1 or 0 depending on whether or
	not elfos.h (i.e., gas) is being used.
	(ASM_FILE_START, STRING_ASM_OP, TEXT_SECTION_ASM_OP,
	DATA_SECTION_ASM_OP, BSS_SECTION_ASM_OP, ASM_OUTPUT_ALIGNED_COMMON,
	ASM_OUTPUT_ALIGNED_LOCAL, GLOBAL_ASM_OP, ASM_DECLARE_FUNCTION_NAME,
	ASM_OUTPUT_EXTERNAL, ASM_OUTPUT_EXTERNAL_LIBCALL,
	ASM_OUTPUT_INTERNAL_LABEL, ASM_GENERATE_INTERNAL_LABEL): Define when
	using elfos.h.
	(TARGET_ASM_GLOBALIZE_LABEL): Undefine when using elfos.h.
	(DWARF2_ASM_LINE_DEBUG_INFO): Delete.
	(ASM_FILE_START): Add standard .SPACE and .SUBSPA defines when not
	using elfos.h.
	(TEXT_SECTION_ASM_OP, READONLY_DATA_SECTION_ASM_OP, DATA_SECTION_ASM_OP,
	BSS_SECTION_ASM_OP): New HP style defines when not using elfos.h.
	(TARGET_ASM_NAMED_SECTION, MAKE_DECL_ONE_ONLY, ASM_WEAKEN_LABEL):
	Don't define when not using elfos.h.
	(ASM_DECLARE_RESULT): Don't define.
	* doc/install.texi (hppa*-hp-hpux*): Remove statement that HP assembler
	doesn't work on hppa64-hp-hpux11.
	(hppa*-hp-hpux11): Update.

2002-11-09  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/mips/netbsd.h (SUBTARGET_ASM_SPEC): Don't pass -KPIC
	to the assembler if -mno-abicalls was specified.

2002-11-09  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa-linux.h (PREFERRED_DEBUGGING_TYPE, DWARF2_ASM_LINE_DEBUG_INFO,
	ASM_OUTPUT_DEF): Delete.

2002-11-09  Neil Booth  <neil@daikokuya.co.uk>

	* c-opts.c (COMMAND_LINE_OPTIONS): Fix -Wimplicit.

2002-11-08  Dale Johannesen  <dalej@apple.com>

	* dbxout.c (dbxout_type):  Fix stabs info for vector types.

2002-11-08  Neil Booth  <neil@daikokuya.co.uk>

	PR preprocessor/8497
	PR preprocessor/8501
	* cpptrad.c (scan_out_logical_line): A '#' from a macro doesn't
	start a directive.  In assembler, #NUM is not a line directive.

2002-11-08  Neil Booth  <neil@daikokuya.co.uk>

	* cppmain.c (cpp_preprocess_file): Loop to pop any -included
	buffers.

2002-11-08  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (two anonymous test insns): New.

2002-11-08  Jan Hubicka  <jh@suse.cz>

	* jump.c (mark_jump_label): Handle subregs of label_refs.

2002-11-07  David Mosberger  <davidm@hpl.hp.com>

	* config/ia64/crtend.asm: Include "auto-host.h".
	[HAVE_INITFINI_ARRAY]: Invoke __do_global_ctors_aux via .init_array.
	* config/ia64/crtbegin.asm: Similarly.
	* config/ia64/t-ia64 (crtbegin.o): Include from current directory.
	(crtend.o, crtbeginS.o, crtendS.o): Likewise.

	* aclocal.m4 (gcc_AC_INITFINI_ARRAY): New.
	* configure.in: Use it if --enable-initfini-array not specified.
	* doc/install.texi (Configuration): Document --enable-initfini-array.
	* configure, config.in: Rebuild.

2002-11-07  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/arm/arm-protos.h (arm_get_frame_size)
	(thumb_get_frame_size): New prototypes.
	* config/arm/arm.c (arm_get_frame_size)
	(thumb_get_frame_size): New functions.
	(use_return_insn, arm_output_epilogue, arm_output_function_epilogue)
	(arm_compute_initial_elimination_offset, arm_expand_prologue): Use
	arm_get_frame_size.
	(thumb_expand_prologue, thumb_expand_epilogue): Use
	thumb_get_frame_size.
	* config/arm/arm.h (PREFERRED_STACK_BOUNDARY): Define.
	(machine_function): Add frame_size member.
	(THUMB_INITIAL_ELIMINATION_OFFSET): Use thumb_get_frame_size.

2002-11-07  Richard Earnshaw  <rearnsha@arm.com>

	* arm.c (bit_count): Make argument unsigned long.  Return unsigned.
	Adjust code to use portable unsigned bit manipulation.
	(insn_flags, tune_flags): Change type to unsigned.
	(struct processors): Make flags unsigned long.
	(arm_override_options): Change type of count and current_bit_count
	to unsigned.

2002-11-07  Richard Earnshaw  <rearnsha@arm.com>

	* arm/elf.h (TYPE_OPERAND_FMT): Prefix type with %.

2002-11-07  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (DWARF_FRAME_RETURN_COLUMN): Use DWARF_FRAME_REGNUM.

2002-11-07  Jan Hubicka  <jh@suse.cz>

	* reg-stack.c (compensate_edge): Fix sanity check.

2002-11-05  Geoffrey Keating  <geoffk@apple.com>

	* config.gcc: Don't create crtbegin, crtend on Darwin; do create
	crt2.o.  Rearrange t-darwin makefiles.
	* crtstuff.c [OBJECT_FORMAT_MACHO]: Delete.
	* unwind-dw2-fde-darwin.c: New.
	* unwind-dw2-fde-glibc.c: Correct comment.
	* unwind-dw2-fde.c (__register_frame_info_bases)
	[DWARF2_OBJECT_END_PTR_EXTENSION]: Clear fde_end.
	(classify_object_over_fdes): Use last_fde.
	(add_fdes): Likewise.
	(linear_search_fdes): Likewise.
	* unwind-dw2-fde.h (struct object)
	[DWARF2_OBJECT_END_PTR_EXTENSION]: Add fde_end field.
	(last_fde): New.
	* config/darwin.h (STARTFILE_SPEC): Include crt2.o not crtbegin.o.
	(ENDFILE_SPEC): No crtend.o.
	* config/t-darwin: New.
	* config/i386/t-darwin: Delete.
	* config/darwin-crt2.c: New.
	* config/rs6000/t-darwin: Delete contents duplicated in t-rs6000
	or config/t-darwin.

2002-11-06  David Edelsohn  <edelsohn@gnu.org>

	PR target/8480
	* config/rs6000/rs6000.md (movdi_internal64): Discourage
	FPR to FPR moves.

2002-11-06  Janis Johnson  <janis187@us.ibm.com>

	* doc/contrib.texi: Merge in the list from the Java web pages.

2002-11-06  David O'Brien  <obrien@FreeBSD.org>

	* config/sparc/freebsd: Fix typo.

2002-11-06  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa64-hpux.h (LDD_SUFFIX, PARSE_LDD_OUTPUT): Define.

2002-11-06  Alexandre Oliva  <aoliva@redhat.com>

	* config/mips/mips.md (call_value_multiple_internal2): Use dla for
	non-SImode addresses.

2002-11-05  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/elf.h (LIB_SPEC): Add "-lhal".

2002-11-05  John David Anglin  <dave2hiauly1.hia.nrc.ca>

	* pa64-hpux.h (LIB_SPEC): Fix p and pg options.
	(STARTFILE_SPEC): Remove p and pg options.

2002-11-05  Andrew Haley  <aph@redhat.com>

	* fold-const.c (fold): Don't transform (a0 op compound(a1,a2))
	to (compound(a1,a0 op a2)) if a0 or a1 have side effects.

2002-11-05  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.h (CANNOT_CHANGE_MODE_CLASS): Move comment to...
	* config/mips/mips.c (mips_cannot_change_mode_class): ...here.

2002-11-04  Dale Johannesen  <dalej@apple.com>

	* doloop.c (doloop_modify_runtime):  Fix loop count computation
	for unrolled loops.
	* loop.c (loop_invariant_p):  Support calling from unroller.

2002-11-04  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_decompose_address): Use arg_pointer_rtx
	for comparison.

2002-11-04  Aldy Hernandez  <aldyh@redhat.com>

	* hard-reg-set.h (REG_CANNOT_CHANGE_MODE_P): New.

	* config/rs6000/rs6000.h (CLASS_CANNOT_CHANGE_MODE_P): Remove.
	(CLASS_CANNOT_CHANGE_MODE): Remove.
	(CANNOT_CHANGE_MODE_CLASS): New.

	* config/alpha/alpha.h: Same.

	* config/ia64/ia64.h: Same.

	* config/mips/mips.h: Same.

	* config/s390/s390.h: Same.

	* config/sh/sh.h: Same.

	* config/pa/pa64-regs.h: Same.

	* config/sh/sh-protos.h (sh_cannot_change_mode_class): Add prototype.

	* config/sh/sh.c (sh_cannot_change_mode_class): New.

	* config/mips/mips-protos.h (mips_cannot_change_mode_class): Add
	prototype.

	* config/mips/mips.c (mips_cannot_change_mode_class): New.

	* doc/tm.texi (Register Classes): Remove
	CLASS_CANNOT_CHANGE_MODE and CLASS_CANNOT_CHANGE_MODE_P.
	Document CANNOT_CHANGE_MODE_CLASS.

	* reload.c (push_reload): Use CANNOT_CHANGE_MODE_CLASS.
	(push_reload): Same.

	* simplify-rtx.c (simplify_subreg): Same.

	* reload1.c (choose_reload_regs): Same.

	* recog.c (register_operand): Same.

	* regrename.c (mode_change_ok): Change to use new
	CANNOT_CHANGE_MODE_CLASS infrastructure.

	* regclass.c (cannot_change_mode_set_regs): New.
	Declare subregs_of_mode.
	(regclass): Use subregs_of_mode.
	Remove references to reg_changes_mode.
	(init_reg_sets_1): Remove class_can_change_mode and
	reg_changes_mode code.
	(invalid_mode_change_p): New.
	(dump_regclass): Use invalid_mode_change_p instead of
	class_can_change_mode.
	(regclass): Same.
	(record_operand_costs): Do not set reg_changes_mode.

	* local-alloc.c (struct qty): Remove changes_mode field.
	(alloc_qty): Remove changes_mode initialization.
	(update_qty_class): Remove set of changes_mode.
	(find_free_reg): Use subregs_of_mode.

	* global.c (find_reg): Use subregs_of_mode info.

	* rtl.h (cannot_change_mode_set_regs): New prototype.
	(invalid_mode_change_p): Same.
	(REG_CANNOT_CHANGE_MODE_P): New macro.

	* flow.c (mark_used_regs): Calculate subregs_of_mode.  Remove
	REG_CHANGES_MODE.
	(life_analysis): Clear subregs_of_mode.

	* combine.c (subst): Pass class to CLASS_CANNOT_CHANGE_MODE_P.
	Remove use of CLASS_CANNOT_CHANGE_MODE.
	(simplify_set): Same.
	(gen_lowpart_for_combine): Calculate subregs_of_mode.  Remove
	REG_CHANGES_MODE.

	* regs.h: Add extern for subregs_of_mode;
	Include hard-reg-set and basic-block.
	(REG_CHANGES_MODE): Delete.

2002-11-03  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* jump.c (never_reached_warning): Don't set contains_insn until the
	first line note is seen.

2002-11-03  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.md (movti_string): Use string instructions.

2002-11-03  Roger Sayle  <roger@eyesopen.com>

	PR c/7128
	* c-typeck.c (c_expand_asm_operands): Defend against
	error_mark_nodes in the output argument to avoid ICE.

2002-11-03  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR middle-end/8408
	* genrecog.c (preds): Handle ADDRESSOF.
	(validate_pattern): Mark it as an lvalue.

2002-11-02  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.c (rs6000_override_options): Use string
	instructions when optimizing for size.

2002-11-02  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h: Fix comment typos.
	* config/h8300/h8300.md: Likewise.
	* config/h8300/lib1funcs.asm: Likewise.

2002-11-02  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	Revert this change:

	*doc/install.texi (Installing GCC: Configuration): Clarify
	the only supported ways to configure gcc.

2002-11-01  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (anonymous and:QI pattern): Use 'n'
	instead of 'O' for the constraint for the second operand.

2002-11-01  Mark Mitchell  <mark@codesourcery.com>

	PR c++/8391
	* toplev.c (rest_of_compilation): Do not refuse to output code for
	an inline function in a local class.

2002-11-01  David O'Brien  <obrien@FreeBSD.org>

	* config/sparc/freebsd.h (CPP_CPU64_DEFAULT_SPEC): Define __arch64__.
	(TRANSFER_FROM_TRAMPOLINE): Reformat.
	Add comment.

2002-11-01  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (CAN_ELIMINATE): Simplify.

2002-11-01  Toshiyasu Morita  <toshiyasu.morita@hsa.hitachi.com>

	* config/h8300/h8300.h (OPTIMIZATION_OPTIONS): New.

2002-11-01  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/ia64.h (MASK_INLINE_DIV_LAT): Remove.
	(MASK_INLINE_DIV_THR): Remove.
	(TARGET_INLINE_DIV_LAT): Remove.
	(TARGET_INLINE_DIV_THR): Remove.
	(TARGET_INLINE_DIV): Remove.
	(MASK_INLINE_FLOAT_DIV_LAT): New macro.
	(MASK_INLINE_FLOAT_DIV_THR): New macro.
	(MASK_INLINE_INT_DIV_LAT): New macro.
	(MASK_INLINE_INT_DIV_THR): New macro.
	(TARGET_INLINE_FLOAT_DIV_LAT): New macro.
	(TARGET_INLINE_FLOAT_DIV_THR): New macro.
	(TARGET_INLINE_INT_DIV_LAT): New macro.
	(TARGET_INLINE_INT_DIV_THR): New macro.
	(TARGET_INLINE_FLOAT_DIV): New macro.
	(TARGET_INLINE_INT_DIV): New macro.
	* config/ia64/ia64.md (divsi3): Change to use new macros.
	(modsi3): Ditto.
	(udivsi3): Ditto.
	(umodsi3): Ditto.
	(divsi3_internal): Ditto.
	(divdi3): Ditto.
	(moddi3): Ditto.
	(udivdi3): Ditto.
	(umoddi3): Ditto.
	(divdi3_internal_lat): Ditto.
	(divdi3_internal_thr): Ditto.
	(divsf3): Ditto.
	(divsf3_internal_lat): Ditto.
	(divsf3_internal_thr): Ditto.
	(divdf3): Ditto.
	(divdf3_internal_lat): Ditto.
	(divdf3_internal_thr): Ditto.
	(divtf3): Ditto.
	(divtf3_internal_lat): Ditto.
	(divtf3_internal_thr): Ditto.
	* config/ia64/ia64.c (ia64_override_options): Change
	to check new macros for conflicts in settings.
	* doc/invoke.texi (-minline-divide-min-latency): Remove.
	(-minline-divide-max-throughput): Remove.
	(-minline-float-divide-min-latency): New.
	(-minline-float-divide-max-throughput): New.
	(-minline-int-divide-min-latency): New.
	(-minline-int-divide-max-throughput): New.

2002-11-01  Richard Earnshaw  (rearnsha@arm.com)

	PR target/7856
	* arm.c (use_return_insn): Don't use a return insn if there are
	saved integer regs, but LR is not one of them.

2002-11-01  Jan Hubicka  <jh@suse.cz>

	* expr.c (emit_move_insn):  Use SCALAR_FLOAT_MODE_P
	* machmode.h (SCALAR_FLOAT_MODE_P): New macro.

2002-10-31  Nathanael Nerode  <neroden@gcc.gnu.org>

	PR optimization/6162
	* doc/md.texi: Document restriction on commutative operand
	specification.

2002-10-31  Eric Christopher  <echristo@redhat.com>

	* explow.c (convert_memory_address): Use shallow_copy_rtx.

2002-10-31  Steve Ellcey  <sje@cup.hp.com>

	* expmed.c (store_bit_field): Check FUNCTION_ARG_REG_LITTLE_ENDIAN.

2002-10-31  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux.h (MEMBER_TYPE_FORCES_BLK): Set for non-floats.

Thu Oct 31  Dale Johannesen  <dalej@apple.com>

	* config/rs6000/darwin.h:  Correct formatting in previous.

Thu Oct 31  Dale Johannesen  <dalej@apple.com>

	* config/rs6000/darwin.h:  Enable -falign-xxx options.

2002-10-31  Jan Hubicka  <jh@suse.cz>

	* i386.c (override_options): Set defaults for flag_omit_frame_pointer,
	flag_asynchronous_unwind_tables, flag_pcc_struct_return.
	* i386.c (optimization_options): Set flag_omit_frame_pointer,
	flag_asynchronous_unwind_tables, flag_pcc_struct_return to 2.
	Do not clear -momit-leaf-frame-pointer when profiling.
	(ix86_frame_pointer_required): Frame pointer is always required when
	profiling.

2002-10-31  Jan Hubicka  <jh@suse.cz>

	* i386.md (negdf2_ifs_rex64): Don't allow GPR operand.

2002-10-31  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (binary_logical_operator): Declare.
	* sh.c (binary_logical_operator): New function.
	* sh.md (xordi3+1): New combiner splitter pattern.

2002-10-31  David O'Brien  <obrien@FreeBSD.org>

	* config/sparc/freebsd.h (TRANSFER_FROM_TRAMPOLINE): Define
	__enable_execute_stack function.

2002-10-30  Aldy Hernandez  <aldyh@redhat.com>

	* c-common.c: Add GTY to vector_type_node_list.

2002-10-30  John David Anglin  <dave@hiauly.hia.nrc.ca>

	* pa-linux.h (ASM_OUTPUT_EXTERNAL_LIBCALL): Define.
	* pa-protos.h (attr_length_millicode_call, attr_length_call,
	pa_init_machine_status): Declare new global functions.
	* pa.c (void copy_fp_args, length_fp_args, get_plabel): Declare and
	implement new functions.
	(attr_length_millicode_call, attr_length_call): Implement.
	(total_code_bytes): Change type to long.
	(pa_output_function_prologue): Compute total_code_bytes on TARGET_64BIT.
	Reset counter if flag_function_sections.
	(output_deferred_plabels): Set output alignment to 3 for TARGET_64BIT.
	(output_cbranch): Move call to gen_label_rtx.
	(output_millicode_call): Rewrite adding long TARGET_64BIT call, expose
	delay slot in all variants, shorten pc-relative calls.
	(output_call): Rewrite adding long TARGET_64BIT call, improved delay
	slot usage and exposure, various new call variants, and shortened
	sequences for some variants on TARGET_PA_20.
	Miscellaneous format changes.
	* pa.h (total_code_bytes): Change type to long.
	(MASK_LONG_CALLS, TARGET_LONG_CALLS, TARGET_LONG_ABS_CALL,
	TARGET_LONG_PIC_SDIFF_CALL, TARGET_LONG_PIC_PCREL_CALL): Define.
	(TARGET_SWITCHES): Add "-mlong-calls" and "-mno-long-calls" options.
	(EXTRA_CONSTRAINT, GO_IF_LEGITIMATE_ADDRESS,
	LEGITIMIZE_RELOAD_ADDRESS): Don't use long floating point loads and
	stores on TARGET_ELF32.
	*pa.md (define_delay): Allow insns in delay on TARGET_PORTABLE_RUNTIME.
	(unnamed patterns for mulsi3, divsi3, udivsi3, modsi3, umodsi3 and
	canonicalize_funcptr_for_compare expanders): Calculate attribute length
	attr_length_millicode_call().
	(call_internal_symref, call_value_internal_symref): Clobber register 1.
	Calculate attribute length using attr_length_call().
	(call_internal_reg_64bit, call_value_internal_reg_64bit): Move gp load
	to delay slot.
	(sibcall, sibcall_value): Rewrite.
	(sibcall_internal_symref, sibcall_value_internal_symref): Clobber
	register 1.  Use attr_length_call().
	(sibcall_internal_symref_64bit, sibcall_value_internal_symref_64bit):
	New patterns.
	(unamed pattern for canonicalize_funcptr_for_compare): Rewrite.
	* som.h (MEMBER_TYPE_FORCES_BLK): Define.
	* t-pa64 (TARGET_LIBGCC2_CFLAGS): Add "-mlong-calls".
	* doc/invoke.texi (mlong-calls): Document.

2002-10-30  Roger Sayle  <roger@eyesopen.com>

	* fold-const.c (fold_binary_op_with_conditional_arg):  Improve
	handling of cases where one or both branches of the conditional
	have void type, i.e. throw an exception or don't return.
	(fold): Only apply (and undo) type conversion to the non-void
	branches of a COND_EXPR.

2002-10-30  Mark Mitchell  <mark@codesourcery.com>

	PR c++/8333
	* varasm.c (asm_output_aligned_bss): Do not call
	ASM_GLOBALIZE_LABEL.

2002-10-30  David Edelsohn  <edelsohn@gnu.org>
	    Torbjorn Granlund  <tege@swox.com>

	* config/rs6000/rs6000.md (load_toc_v4_PIC_1): Use preferred form
	for addressibility.
	(load_toc_v4_PIC_1b): Same.

2002-10-30  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_eightbit_constant_address_p):
	Truncate the addresses for H8/300 using HImode.

2002-10-29  Hans-Peter Nilsson  <hp@bitrange.com>

	* toplev.c (rest_of_type_compilation): Return early in case of
	errors.
	(check_global_declarations): Don't call debug_hooks->global_decl
	in case of errors.

2002-10-28  Andreas Bauer  <baueran@in.tum.de>

	* doc/c-tree.texi (Tree overview): Fix typos.

2002-10-29  Phil Edwards  <pme@gcc.gnu.org>

	* Makefile.in (gnucompare*):  Only record bad comparisons
	if there really was a bad comparison.

2002-10-29  Jan Hubicka  <jh@suse.cz>

	* i386.h (CONST_DOUBLE_OK_FOR_LETTER_P): Remove 'H'
	* i386.md (movsf*, movdf*): Use 'C' instead of 'H'
	* md.texi (machine dependent constraints): Document 'C'

	* simplify-rtx.c (simplify_subreg): Fix const_int->vector subregging.

	* i386.c (ix86_expand_vector_move): Fix.

	* i386.c (ix86_expand_builtin): Use sse2_maskmovdqu_rex64.
	* i386.md (sse2_maskmovdqu_rex64): New pattern

	PR target/8322
	* xmmintrin.h (_mm_stream_pi, _mm_stream_pd): Fix cast.
	(ix86_init_mmx_sse_builtins): Fix type.

2002-10-29  Jason Thorpe  <thorpej@wasabisystems.com>

	* gthr-posix.h: Include <unistd.h> for feature tests.
	(sched_get_priority_max, sched_get_priority_min)
	(pthread_getschedparam, pthread_setschedparam): Only use
	if _POSIX_THREAD_PRIORITY_SCHEDULING is defined.
	(__gthread_objc_thread_set_priority): Don't treat all non-zero
	returns from sched_get_priority_max and sched_get_priority_min
	as an error.

2002-10-29  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (TARGET_DEFAULT): Make it
	MASK_QUICKCALL.

2002-10-29  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_eightbit_constant_address_p): New.
	(h8300_tiny_constant_address_p): Likewise.
	* config/h8300/h8300.h (EIGHTBIT_CONSTANT_ADDRESS_P): Use
	h8300_eightbit_constant_address_p.
	(TINY_CONSTANT_ADDRESS_P): Use h8300_tiny_constant_address_p.
	* config/h8300/h8300-protos.h: Add the prototypes for the two
	new functions.

2002-10-29  Kazu Hirata  <kazu@cs.umass.edu>

	* reload1.c (update_eliminables): Unconditionally check if
	frame_pointer_needed has changed.

2002-10-29  Jan Hubicka  <jh@suse.cz>

	* toplev.c (rest_of_compilation): Reorganize way reg_scan is called
	before final pass.

2002-10-29  Eric Botcazou  <ebotcazou@libertysurf.fr>

	PR optimization/8334
	* expr.c (expand_expr) [PLUS]: Don't use simplify_binary_operation;
	check for zero operands explicitly.

2002-10-29  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.md (extv, extzv, insv): Set size of referenced
	memory after adjusting to BLKmode.

2002-10-29  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (MASK_*): New.
	(TARGET_*): Use MASK_*.

2002-10-28  Jason Thorpe  <thorpej@wasabisystems.com>

	* config.gcc (*-*-netbsd*): Add NETBSD_ENABLE_PTHREADS to
	tm_defines if pthreads are enabled.
	* config/netbsd.h (LIB_SPEC): Only support the -pthread option
	if NETBSD_ENABLE_PTHREADS is defined.

2002-10-28  Kazu Hirata  <kazu@cs.umass.edu>

	* ChangeLog.1: Fix typos.
	* cse.c: Fix a comment typo.
	* reload1.c: Likewise.

2002-10-27  Hans-Peter Nilsson  <hp@bitrange.com>

	* fixinc/inclhack.def (libc1_G_va_list): Correct test_text.
	* fixinc/tests/base/_G_config.h: New file.

2002-10-27  Kazu Hirata  <kazu@cs.umass.edu>

	* combine.c: Fix comment formatting.
	* loop.c: Likewise.
	* real.c: Likewise.
	* regclass.c: Likewise.
	* regmove.c: Likewise.
	* regrename.c: Likewise.
	* reg-stack.c: Likewise.
	* reload1.c: Likewise.
	* reload.c: Likewise.
	* reload.h: Likewise.
	* unroll.c: Likewise.

2002-10-27  Kazu Hirata  <kazu@cs.umass.edu>

	* reload1.c (reload): Fix a comment typo.

2002-10-27  Jan Hubicka  <jh@suse.cz>

	* linux64.h (DEFAULT_PCC_STRUCT_RETURN):  Define.

2002-10-27  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>

	* Makefile.in (dwarf2out.o): Add dependendcy on hashtab.h.
	* dwarf2out.c: Include hashtab.h.
	(is_main_source): New static variable.
	(attr_checksum, die_checksum): Modified to handle die references.
	(same_loc_p, same_dw_val_p, same_attr_p, same_die_p, same_die_p_wrap,
	unmark_all_dies, htab_cu_hash, htab_cu_eq, htab_cu_del, check_duplicate_cu,
	record_comdat_symbol_number): New static functions.
	(output_comp_unit, compute_section_prefix, is_type_die, break_out_includes,
	mark_dies, unmark_dies, dwarf2out_start_source_file): Modified.
	* toplev.c (rest_of_decl_compilation): Call of dwarf2out_decl for type
	declarations added.

2002-10-26  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (initial_offset): Change to
	h8300_initial_elimination_offset.
	* config/h8300/h8300.h (INITIAL_ELIMINATION_OFFSET): Use
	h8300_initial_elimination_offset.
	* config/h8300/h8300-protos.h: Update the prototype.

2002-10-26  Hans-Peter Nilsson  <hp@bitrange.com>

	* config/mmix/mmix.h (LIBCALL_VALUE): Use
	MMIX_RETURN_VALUE_REGNUM, not MMIX_OUTGOING_RETURN_VALUE_REGNUM.
	(FUNCTION_VALUE_REGNO_P): Similar, but move code to...
	* config/mmix/mmix.c (mmix_function_value_regno_p): New.
	* config/mmix/mmix-protos.h: Remove needless ifdefs on TREE_CODE
	and RTX_CODE.
	(mmix_function_value_regno_p): Declare.

	* config/mmix/mmix.md ("fixuns_truncdfdi2"): Replace unsigned_fix,
	invalid for floating point mode result, with fix.

2002-10-25  Mike Stump  <mrs@apple.com>

	Fixes gcc.dg/warn-1.c.
	* c-typeck.c (warn_for_assignment): Don't print argument number, if zero.

2002-10-26  Jan Hubicka  <jh@suse.cz>

	* toplev.c (dump_file_index): Add DFI_ce3.
	(dump_file_info): Likewise.
	(rest_of_compilation): Run first ifcvt pass before tracer.

2002-10-25  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux.h (BITS_BIG_ENDIAN): Remove.

2002-10-25  Richard Henderson  <rth@redhat.com>

	* real.c (real_to_decimal): If the >1 tens reduction loop results
	in a negative exponent, fall into the <1 pten computation.

2002-10-25  Zack Weinberg  <zack@codesourcery.com>

	PR middle-end/6994
	* c-objc-common.c (inline_forbidden_p): Can not inline
	functions containing structures or unions containing VLAs.
	* tree-inline.c (walk_tree): For all class 't' nodes, walk
	TYPE_SIZE and TYPE_SIZE_UNIT.
	(copy_tree_r): Copy types if they are variably modified.

2002-10-25  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md: Remove old-style peepholes.

2002-10-25  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_decompose_address): Do not range check the
	displacement if base or index is the argument pointer register.

2002-10-24  Hans-Peter Nilsson  <hp@bitrange.com>

	PR other/3337
	PR bootstrap/6763
	PR bootstrap/8122
	* fixinc/inclhack.def (libc1_G_va_list): New fix.
	* fixinc/fixincl.x: Regenerate.
	* config/i386/linux.h: Move MD_FALLBACK_FRAME_STATE_FOR inside
	ifndef IN_LIBGCC2.  Wrap it together with signal.h and
	sys/ucontext.h inclusion in ifndef USE_GNULIBC_1.
	* configure.in (gcc_AC_CHECK_DECLS): Check vasprintf too.
	* config.in, configure: Regenerate.

2002-10-24  Igor Shevlyakov <igor@microunity.com>

	* varasm.c (struct rtx_const): Array size 16 for V16QImode.

2002-10-24  Richard Henderson  <rth@redhat.com>

	* config/i386/i386.c (x86_output_mi_thunk): Fix x86_64 pic jump.

2002-10-24  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (initial_offset): Simplify by using
	round_frame_size.

2002-10-24  Marek Michalkiewicz  <marekm@amelek.gda.pl>

	* doc/install.texi (avr): Update required binutils version.

2002-10-24  Theodore A. Roth  <troth@openavr.org>

	* doc/install.texi: Point avr users at more up-to-date information.

2002-10-24  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md (movdi, movsi, movhi, movqi): Add peepholes2
	to pull operands out of the literal pool where possible.

2002-10-24  Denis Chertykov  <denisc@overta.ru>

	* config/avr/avr.c (init_cumulative_args): Test fntype for zero.

2002-10-24  Steve Ellcey  <sje@cup.hp.com>

	* expr.c (convert_move): If unsignedp is less then zero there
	is no equivalent code.

2002-10-24  Zack Weinberg  <zack@codesourcery.com>

	* tree.def: Delete mention of nonexistent ARRAY_TYPE fields.

2002-10-24  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.h: Rework comments; re-sort target macro definitions
	according to the sequence they are defined in the manual.
	(POINTER_BOUNDARY): Remove.

2002-10-24  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (round_frame_size): Replace 8 with
	BITS_PER_UNIT.

2002-10-24  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (EIGHTBIT_CONSTANT_ADDRESS_P): Make it
	64-bit safe.
	(TINY_CONSTANT_ADDRESS_P): Likewise.

2002-10-24  Richard Henderson  <rth@redhat.com>

	* config/ia64/ia64.c (TARGET_ASM_CAN_OUTPUT_MI_THUNK): True.
	(ia64_output_mi_thunk): Rewrite to use rtl, and to handle the
	vcall offset.

2002-10-24  Richard Henderson  <rth@redhat.com>

	PR opt/7944
	* reload.c (find_reloads_toplev): Mode of X is not important
	when simplifying subregs of constants.

2002-10-24  Richard Sandiford  <rsandifo@redhat.com>

	* config.gcc (mips64vr-*-elf*, mips64vrel-*-elf*): Add
	MIPS_MARCH_CONTROLS_SOFT_FLOAT=1 to $tm_defines.
	* config/mips/mips.c (MIPS_MARCH_CONTROLS_SOFT_FLOAT): Default to 0.
	(override_options): Base default setting of MASK_SOFT_FLOAT on -march
	if MIPS_MARCH_CONTROLS_SOFT_FLOAT.

2002-10-24  Richard Sandiford  <rsandifo@redhat.com>

	* optabs.c (expand_binop): Don't reuse the shift target in the
	middle of shift sequences.

2002-10-23  Ziemowit Laski <zlaski@apple.com>

	* objc/objc-act.c (get_static_reference): Remove unneeded
	TYPE_BINFO initialization.
	(get_object-reference): Likewise.
	(build_constructor): Tighten precondition check.
	(finish_message_expr): Likewise.

2002-10-23  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/i386.c (local_symbolic_operand): Move LABEL_REF test
	after CONST test.

2002-10-23  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/ia64.c (hfa_element_mode): Don't allow 128 bit floats
	in HFAs.

2002-10-23  Richard Henderson  <rth@redhat.com>

	* config/alpha/alpha.c (TARGET_ASM_CAN_OUTPUT_MI_THUNK): True.
	(alpha_output_mi_thunk_osf): Handle vcall_offset.

2002-10-23  Zack Weinberg  <zack@codesourcery.com>

	* langhooks.h (struct lang_hooks_for_tree_inlining): Add
	var_mod_type_p.
	* langhooks-def.h: Default for tree_inlining.var_mod_type_p is
	hook_tree_bool_false.

	* tree.c (variably_modified_type_p): Moved here from
	cp/tree.c.  Use lang_hooks.tree_inlining.var_mod_type_p for
	language-specific cases.  Due to this, must weaken some 'if
	and only if' checks to merely 'if'.
	* tree.h: Prototype variably_modified_type_p.

	* tree-inline.c (walk_tree): #undef WALK_SUBTREE_TAIL at end.

2002-10-23  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/linux.h (CC1_SPEC, CC1PLUS_SPEC): Remove.
	* config/s390/s390.c (optimization_options): Disable -fcaller-saves.

	* config/s390/s390-protos.h (fp_operand): Remove.
	* config/s390/s390.c (fp_operand): Remove.
	* config/s390/s390.md ("movdi"): Replace fp_operand by FP_REG_P.
	("*movdi_lhi", "*movdi_lli", "*movdi_larl"): Likewise.
	("movsi", "*movsi_lhi", "*movsi_lli"): Likewise.
	(movdi_31, movdf_31 splitters): Likewise.

	* config/s390/s390.h (IEEE_FLOAT): Remove.
	(TARGET_FLOAT_FORMAT): Define in terms of TARGET_IEEE_FLOAT.
	(INT_REGNO_P): Rename to ...
	(GENERAL_REGNO_P): ... this.
	(FLOAT_REGNO_P): Rename to ...
	(FP_REGNO_P): ... this.
	(ADDR_REGNO_P): New macro.
	(GENERAL_REG_P, ADDR_REG_P, FP_REG_P, CC_REG_P): New macros.
	(REGNO_OK_FOR_DATA_P, REGNO_OK_FOR_FP_P): Remove.
	(DATA_REG_P, FP_REG_P, ADDRESS_REG_P): Likewise.
	(HARD_REGNO_NREGS): Adapt to macro renaming.
	(HARD_REGNO_MODE_OK): Likewise.

2002-10-23  David Edelsohn  <edelsohn@gnu.org>
	    Geoff Keating  <geoffk@apple.com>

	* config/rs6000/rs6000.c (rs6000_register_move_cost): New function.
	(rs6000_memory_move_cost): New function.
	* config/rs6000/rs6000-protos.h: Declare them.
	* config/rs6000/rs6000.h: Use them.

2002-10-23  Ulrich Weigand  <uweigand@de.ibm.com>

	* libgcc2.c (__udiv_w_sdiv): Use attribute ((always_inline)) when
	inlining it into other libgcc2 routines.
	(__udivmoddi4): Likewise.

2002-10-22  Nathanael Nerode  <neroden@gcc.gnu.org>

	* doc/sourcebuild.texi (Test Suites): Improve.

2002-10-22  Stan Shebs  <shebs@apple.com>

	* config/rs6000/rs6000.c (rs6000_output_mi_thunk): Add missing
	case for Darwin.

2002-10-22  Jim Wilson  <wilson@redhat.com>

	* config/i386/i386.md (subdi3_1): Add call to ix86_binary_operator_ok.

2002-10-23  Jan Hubicka  <jh@suse.cz>

	PR other/8289
	* xmmintrin.h: Add const to the argument of loads.

	* i386.md (pushv2di): New pattern.
	PR target/6890
	* xmmintrin.h (_MM_TRANSPOSE4_PS): New.

2002-10-22  Richard Henderson  <rth@redhat.com>

	* target.h (gcc_target.asm_out): Merge output_mi_thunk and
	output_mi_vcall_thunk into a single hook.  Add can_output_mi_thunk.
	* target-def.h (TARGET_ASM_OUTPUT_MI_THUNK): Don't conditionalize.
	(TARGET_ASM_OUTPUT_MI_VCALL_THUNK): Remove.
	(TARGET_ASM_CAN_OUTPUT_MI_THUNK): New.
	(TARGET_ASM_OUT): Update.
	* hooks.c (hook_bool_tree_hwi_hwi_tree_false): New.
	(hook_bool_tree_hwi_hwi_tree_true): New.
	(default_can_output_mi_thunk_no_vcall): New.
	* hooks.h: Declare them.
	* system.h (ASM_OUTPUT_MI_THUNK): Poison.

	* config/alpha/alpha.c (TARGET_ASM_CAN_OUTPUT_MI_THUNK): New.
	(alpha_output_mi_thunk_osf): Add VCALL_OFFSET parameter.
	* config/arm/arm.c, config/cris/cris.c, config/frv/frv.c,
	config/i960/i960.c, config/ia64/ia64.c, config/m68k/m68k.c,
	config/mmix/mmix.c, config/pa/pa.c, config/sparc/sparc.c,
	config/stormy16/stormy16.c: Similarly.

	* config/i386/i386.c (x86_output_mi_thunk): Merge vcall_offset code.
	Handle 64-bit properly.  Streamline.
	(x86_output_mi_vcall_thunk): Remove.
	(x86_this_parameter): Rename from ia32_this_parameter; handle 64-bit.
	(x86_can_output_mi_thunk): New.
	(TARGET_ASM_OUTPUT_MI_VCALL_THUNK): Remove.
	(TARGET_ASM_CAN_OUTPUT_MI_THUNK): New.
	(override_options): Don't zap targetm.asm_out.output_mi_vcall_thunk.

	* config/rs6000/rs6000.c (rs6000_output_mi_thunk): Rename from
	output_mi_thunk; make static; always use function_section.
	(TARGET_ASM_OUTPUT_MI_THUNK): New.
	(TARGET_ASM_CAN_OUTPUT_MI_THUNK): New.
	(rs6000_ra_ever_killed): Test no_new_pseudos not
	targetm.asm_out.output_mi_thunk in conjunction with thunks.
	* config/rs6000/rs6000-protos.h: Update.
	* config/rs6000/sysv4.h (TARGET_ASM_OUTPUT_MI_THUNK): Remove.
	* config/rs6000/xcoff.h (ASM_DECLARE_FUNCTION_NAME): Don't call
	xcoffout_declare_function when using rs6000_output_mi_thunk.

	* config/s390/s390.c (s390_output_mi_thunk): Rename from
	s390_output_mi_vcall_thunk.
	(TARGET_ASM_OUTPUT_MI_THUNK): Remove.
	(TARGET_ASM_CAN_OUTPUT_MI_THUNK): New.

	* config/vax/vax.c (vax_output_mi_thunk): Static; add vcall_offset.
	(TARGET_ASM_OUTPUT_MI_THUNK, TARGET_ASM_CAN_OUTPUT_MI_THUNK): New.
	* config/vax/vax-protos.h: Update.
	* config/vax/vax.h (ASM_OUTPUT_MI_THUNK): Remove.

2002-10-23  Jan Hubicka  <jh@suse,cz>

	* i386.c (standard_sse_constant_p): Accept vector and integer zeros too.
	* i386.h (EXTRA_CONSTRAINT): Recognize 'C'
	* i386.md (movti_internal): Use 'C'

	* xmmintrin.h (_mm_cmplt_epi*): New.

2002-10-22  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("*movdi_64"): Fix op_type attribute.
	("*movdf_64"): Likewise.
	("*lshrdi3_64"): Likewise.
	("blockage"): Add length attribute.
	("lit"): Likewise.

2002-10-22  Jan Hubicka  <jh@suse.cz>

	* i386.md: FIx typo.
	(sse2_cvtsi2sd, sse2_pslrdq): Fix template.
	(sse2_umulv2siv2di3): Fix predicate.
	(sse2_psadbw, ashrv8hi3, ashrv4si3, lshrv8hi3 lshrv4si3,
	lshrv2di3, ashlv8hi3, ashlv4si3, ashlv2di3): Likewise.
	* xmmintrin.h (_mm_mul_epu16): Rename to...
	(_mm_mul_epu32): This one.
	(_mm_cvtsi32_si128, _mm_cvtsi128_si32): New.

	(contains_128bit_aligned_vector_p): Undo accidental checkin.

2002-10-22  Eric Christopher  <echristo@redhat.com>

	* config/sparc/sparc.h: Add #error.

2002-10-22  Ulrich Weigand  <uweigand@de.ibm.com>

	* config.gcc [s390-*-linux]: Remove s390/t-linux from tmake_file.
	[s390x-*-linux*]: Likewise.
	* config/s390/t-linux: Remove.
	* config/s390/s390.h: Include fixdfdi.h when building libgcc2.

2002-10-22  Jan Hubicka  <jh@suse.cz>

	* i386.c (builtin_description): Add IX86_BUILTIN_PUNPCKHQDQ128.
	(ix86_expand_builtin): Fix MASKMOVDQU expasion.
	* i386.h (ix86_builtins): Add IX86_BUILTIN_PUNPCKHQDQ128.
	* i386.md (mmx_punpck?dq): Simplify.
	(sse2_pubpcklqdq): Fix.
	(sse2_pubpckhqdq): New.
	* xmmintrin.h (_mm_unpackhi_epi32): New.

	* xmmintrin.h (_mm_cvt*, _mm_stream_pd): Fix prototypes.
	(_mm_shufflehi_epi16, _mm_shufflelo_epi16): Fix typo.

2002-10-22  Nathan Sidwell  <nathan@codesourcery.com>

	PR c++/7209
	* fold_const.c (fold_binary_op_with_conditional_arg): Always
	build compound_expr if we used save_expr.

2002-10-22  Alan Modra  <amodra@bigpond.net.au>

	* output.h (SECTION_NOTYPE): Define.
	* varasm.c (default_section_type_flags_1): Set SECTION_NOTYPE for
	init array sections.
	(default_elf_asm_named_section): Mind SECTION_NOTYPE.
	* config/arm/arm.c (arm_elf_asm_named_section): Likewise.  Also
	merge TLS support.

2002-10-21  Richard Henderson  <rth@redhat.com>

	* real.c (sticky_rshift_significand): Return inexact, don't
	or it in immediately.
	(sub_significands): Accept incomming carry.
	(div_significands, rtd_divmod): Update for sub_significands change.
	(round_for_format): Update for sticky_rshift_significand change.
	(do_add): Don't involve the inexact bit in addition, do give the
	inexact bit as the subtraction carry-in.
	(encode_internal, decode_internal, real_internal_format): New.
	* real.h (real_internal_format): Declare.

2002-10-21  Ulrich Weigand  <uweigand@de.ibm.com>

	* libgcc2.c: Fix __udiv_w_sdiv breakage on platforms that
	don't define sdiv_qrnnd.

2002-10-21  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (EIGHTBIT_CONSTANT_ADDRESS_P): Simplify
	using IN_RANGE.
	(TINY_CONSTANT_ADDRESS_P): Likewise.

2002-10-22  Jan Hubicka  <jh@suse.cz>

	* i386.c (builtin_description): Add punpcklqdq and movdq2q
	(ix86_init_mmx_sse_builtins): Add v2di_ftype_void, di_ftype_v2di,
	v16qi_ftype_pchar, void_ftype_pchar_v16qi, v4si_ftype_pchar,
	void_ftype_pchar_v4si; Initialize __builtin_ia32_movdq2q,
	__builtin_ia32_loaddqa, __builtin_ia32_loaddqu, __builtin_ia32_loadd
	__builtin_ia32_storedqa, __builtin_ia32_storedqu, __builtin_ia32_stored
	__builtin_ia32_setzero128.
	(ix86_expand_builtin): Handle IX86_BUILTIN_CLRTI, IX86_BUILTIN_LOADDQA,
	IX86_BUILTIN_LOADDQU, IX86_BUILTIN_LOADD, IX86_BUILTIN_STOREDQA,
	IX86_BUILTIN_STOREDQU, IX86_BUILTIN_STORED, Ix86_BUILTIN_MOVQ.
	* i386.h (ix86_builtins): Add IX86_BUILTIN_LOADDQA, IX86_BUILTIN_LOADDQU,
	IX86_BUILTIN_STOREDQA, IX86_BUILTIN_STOREDQU, IX86_BUILTIN_LOADD,
	IX86_BUILTIN_STORED, IX86_BUILTIN_CLRTI, IX86_BUILTIN_MOVDQ2Q,
	IX86_BUILTIN_PUNPCKLQDQ128, Ix86_BUILTIN_MOVQ.
	* i386.md (sse2_punpcklqdq, sse2_movqsse2_loadd, sse2_stored,
	sse2_movq): New patterns.
	(sse2_movdqa, sse2_movdqu, sse2_movdq2q): Fix.
	* xmmintrin.h (_mm_load_si128, _mm_loadu_si128, _mm_loadl_epi64,
	_mm_store_si128, _mm_storeu_si128, _mm_storel_epi64,
	_mm_setzero_si128, _mm_set_epi64, _mm_set_epi32, _mm_set_epi16,
	_mm_set_epi8, _mm_set1_epi64, _mm_set1_epi32, _mm_set1_epi16,
	_mm_set1_epi8, _mm_setr_epi64, _mm_setr_epi32, _mm_setr_epi16,
	_mm_setr_epi8, _mm_unpacklo_epi64,_mm_set_moveq): New functions.
	(_mm_insert_epi16): Fix.

2002-10-21  Dale Johannesen  <dalej@apple.com>

	* config/rs6000/rs6000.c (rs6000_reverse_condition): Handle
	    unsafe math reversals correctly for RTL generation.
	  (output_cbranch):  Replace rs6000_reverse_condition call
	    by its former definition.

2002-10-21  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/i386.c (x86_64_sign_extended_value): Add allow_rip
	argument.  In CM_SMALL_PIC model consider SYMBOL_REFs binding locally or
	from constant pool or LABEL_REFs as sign extended if allow_rip.
	Change all +-1GB limits to +-16MB.
	(x86_64_general_operand, x86_64_szext_general_operand,
	x86_64_nonmemory_operand, x86_64_movabs_operand,
	x86_64_szext_nonmemory_operand, x86_64_immediate_operand,
	legitimate_address_p, ix86_expand_int_movcc): Update callers.
	(local_symbolic_operand): Don't allow offsets bigger than +-16MB
	in CM_SMALL_PIC model.
	(legitimate_pic_address_disp_p): Don't check offsets before
	calling local_symbolic_operand.
	(legitimize_pic_address): Force offsets bigger than +-16MB into
	register.
	* config/i386/i386.h (EXTRA_CONSTRAINT, CONST_COSTS): Likewise.
	* config/i386/i386-protos.h (x86_64_sign_extended_value): Update
	prototype.

	* configure.in: Test for @GOTNTPOFF and @INDNTPOFF on IA-32 too.
	Add x86-64 test.  Set tls_first_minor to 14 on IA-32 and x86-64.
	* configure: Rebuilt.
	* config/i386/i386.c (x86_64_sign_extended_value): Don't allow TLS
	SYMBOL_REFs unless enclosed in UNSPEC.  Handle UNSPEC_DTPOFF,
	UNSPEC_GOTNTPOFF and UNSPEC_NTPOFF.
	(legitimate_address_p): Allow foo@dtpoff(base) even on TARGET_64BIT
	-fpic.
	(ix86_encode_section_info): Don't ever generate TLSGD or TLSLD for
	non-pic code if TARGET_64BIT.
	(legitimize_address): Generate 64-bit TLS sequences.
	(output_pic_addr_const): Support x86-64 TLS operators.
	(i386_output_dwarf_dtprel): Output 64-bit DTPOFF as .long f@DTPOFF, 0.
	(print_operand_address): Use %fs instead of %gs on TARGET_64BIT.
	Don't append (%rip) in 64-bit TLSGD and TLSLD sequences.
	(output_addr_const_extra): Support x86-64 TLS operators.
	(maybe_get_pool_constant): Handle TARGET_64BIT -fpic.
	(ix86_tls_get_addr): Use __tls_get_addr on TARGET_64BIT
	unconditionally.
	* config/i386/i386.md (*tls_global_dynamic_gnu): Renamed to...
	(*tls_global_dynamic_32_gnu): ..., add !TARGET_64BIT.
	(*tls_global_dynamic_sun): Renamed to...
	(*tls_global_dynamic_32_sun): ..., add !TARGET_64BIT.
	(tls_global_dynamic): Renamed to...
	(tls_global_dynamic_32): ... this.
	(tls_global_dynamic_64, *tls_global_dynamic_64): New.
	(*tls_local_dynamic_base_dynamic_gnu): Renamed to...
	(*tls_local_dynamic_base_dynamic_32_gnu): ..., add !TARGET_64BIT.
	(*tls_local_dynamic_base_dynamic_sun): Renamed to...
	(*tls_local_dynamic_base_dynamic_32_sun): ..., add !TARGET_64BIT.
	(tls_local_dynamic_base_dynamic): Renamed to...
	(tls_local_dynamic_base_dynamic_32): ... this.
	(tls_local_dynamic_base_dynamic_64,
	*tls_local_dynamic_base_dynamic_64): New.
	(*tls_local_dynamic_once): Renamed to...
	(*tls_local_dynamic_32_once): ... this.

2002-10-21  Ulrich Weigand  <uweigand@de.ibm.com>

	* libgcc2.c: Inline __udiv_w_sdiv when compiling __udivdi3,
	__divdi3, __umoddi3, or __moddi3.

2002-10-21  Ulrich Weigand  <uweigand@de.ibm.com>

	* c-opts.c (missing_arg): Use cl_options[opt_index].opt_code
	instead of just opt_index as switch expression.

	* calls.c (store_one_arg): Change type of 'excess_align'
	to unsigned int.

	* profile.c (output_gcov_string): Change type of 'temp'
	to size_t.

2002-10-21  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/fixdfdi.h (__fixunsdfdi, __fixdfdi): Add prototypes.
	(__fixunssfdi, __fixsfdi): Likewise.
	* config/s390/s390.c (s390_single_hi): Initialize 'value'.
	(s390_single_qi): Likewise.
	(s390_emit_epilogue): Initialize 'offset'.  Remove signed vs.
	unsigned comparison warning.
	(s390_return_addr_rtx): New function.
	* config/s390/s390-protos.h (s390_return_addr_rtx): Declare it.
	* config/s390/s390.h (RETURN_ADDR_RTX): Use it.
	(HARD_REGNO_MODE_OK): Rewrite condition to silence warnings.

2002-10-21  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_output_mi_vcall_thunk): New function.
	(TARGET_ASM_OUTPUT_MI_VCALL_THUNK): Define target hook.
	(s390_output_mi_thunk): Remove.
	(TARGET_ASM_OUTPUT_MI_THUNK): Remove.

2002-10-21  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.h (N_REG_CLASSES): Parenthesize.

2002-10-20  Richard Henderson  <rth@redhat.com>

	* target.h (struct gcc_target): Line wrap.

	* config/alpha/alpha.c (alpha_output_mi_thunk_osf): Static.
	(TARGET_ASM_OUTPUT_MI_THUNK): Define here...
	* config/alpha/alpha.h: ... not here.
	* config/alpha/alpha-protos.h: Update.

	* config/arm/arm.c, config/arm/arm.h, config/arm/arm-protos.h
	config/cris/cris-protos.h, config/cris/cris.c, config/cris/cris.h,
	config/frv/frv-protos.h, config/frv/frv.c, config/frv/frv.h,
	config/i386/i386-protos.h, config/i386/i386.c, config/i386/openbsd.h,
	config/i386/unix.h, config/i960/i960-protos.h, config/i960/i960.c,
	config/i960/i960.h, config/ia64/ia64-protos.h, config/ia64/ia64.c,
	config/ia64/ia64.h, config/m68k/linux.h, config/m68k/m68k-protos.h,
	config/m68k/m68k.c, config/m68k/netbsd-elf.h, config/m68k/openbsd.h,
	config/mmix/mmix-protos.h, config/mmix/mmix.c, config/mmix/mmix.h,
	config/pa/pa-protos.h, config/pa/pa.c, config/pa/pa.h,
	config/s390/s390-protos.h, config/s390/s390.c, config/s390/s390.h,
	config/sparc/openbsd.h, config/sparc/sparc-protos.h,
	config/sparc/sparc.c, config/sparc/sparc.h,
	config/stormy16/stormy16-protos.h, config/stormy16/stormy16.c,
	config/stormy16/stormy16.h: Similarly.

	* config/m68k/m68k.c (m68k_output_mi_thunk): Replicate mnemonic
	selection logic from call patterns.

2002-10-20  Mark Mitchell  <mark@codesourcery.com>

	* config/m68k/m68k.c (m68k_output_mi_thunk): Fix typo.

2002-10-20  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>

	PR other/8202
	* i386.c (ix86_init_mmx_sse_builtins, ix86_expand_builtin): Define and
	expand __builtin_ia32_pslldqi128 and __builtin_ia32_psrldqi128.
	* i386.h (IX86_BUILTIN_PSLLDQI128, IX86_BUILTIN_PSRLDQI128): New.
	* xmmintrin.h (_mm_srli_si128, _mm_slli_si128): New.

2002-10-20  Roger Sayle  <roger@eyesopen.com>

	PR c/761
	* toplev.c (flag_unsafe_profile_arcs): Remove.
	(flag_bounded_pointers): Remove.
	(flag_bounds_check): Correct comments.
	(lang_independent_options): Remove -funsafe-profile-arcs and
	-fbounded-pointers.  Correct -fbounds-check comments.

	* flags.h: Correct flag_schedule_interblock comments.
	(flag_bounded_pointers): Remove prototype.
	(flag_bounds_check): Correct comments.

	* c-opts.c (c_common_init_options): No need to mark
	flag_bounds_check as unspecified.
	(c_common_post_options): And no need to set it from
	flag_bounded_pointers if its still unspecified.

	* doc/invoke.texi: Fix some overfull hboxes in "make dvi".
	Document --version, -feliminate-dwarf-2-dups, -fno-sched-interblock,
	-fno-sched-spec, -fsched-spec-load, -fsched-spec-load-dangerous,
	-fsched-verbose=n, -fno-branch-count-reg and -fbounds-check.

2002-10-19  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>
	    Mark Mitchell  <mark@codesourcery.com>

	* alpha-protos.h (alpha_output_mi_thunk_osf): Update signature to
	match target.h.
	* arm-protos.h, arm.c (arm_output_mi_thunk): Likewise.
	* cris-protos.h, cris.c (cris_asm_output_mi_thunk): Likewise.
	* frv-protos.h, frv.c (frv_asm_output_mi_thunk): Likewise.
	* i386-protos.h, i386.c (x86_output_mi_vcall_thunk,
	x86_output_mi_thunk): Likewise.
	* i960-protos.h, i960.c (i960_output_mi_thunk): Likewise.
	* ia64-protos.h, ia64.c (ia64_output_mi_thunk): Likewise.
	* m68k-protos.h, m68k.c (m68k_output_mi_thunk): Likewise.
	* mmix-protos.h, mmix.c (mmix_asm_output_mi_thunk): Likewise.
	* rs6000-protos.h, rs6000.c (output_mi_thunk): Likewise.
	* s390-protos.h, s390.c (s390_output_mi_thunk): Likewise.
	* stormy16-protos.h, stormy16.c (xstormy16_asm_output_mi_thunk):
	Likewise.
	* vax-protos.h, vax.c (vax_output_mi_thunk): Likewise.

	* target.h (gcc_target): Update output_mi_thunk and
	output_mi_vcall_thunk to take a HOST_WIDE_INT delta and
	vcall_index.

	* config/alpha/alpha.c: Replace ASM_OUTPUT_MI_THUNK with
	TARGET_ASM_OUTPUT_MI_THUNK in comments.
	* config/alpha/vms.h (ASM_OUTPUT_MI_THUNK): Don't #undef it.
	(TARGET_ASM_OUTPUT_MI_THUNK): #undef it.
	* config/frv/frv.h (DEFAULT_VTABLE_THUNKS): Remove definition.
	* config/i386/i386-protos.h (x86_output_mi_vcall_thunk): Update
	signature.
	* config/i386/i386.c (x86_output_mi_vcall_thunk): Likewise.
	* config/i386/openbsd.h: Replace ASM_OUTPUT_MI_THUNK with
	TARGET_ASM_OUTPUT_MI_THUNK in comments.
	* config/i960/i960.h (ASM_OUTPUT_MI_THUNK): Don't define.
	(TARGET_ASM_OUTPUT_MI_THUNK): Do define.
	* config/m68k/openbsd.h: Replace ASM_OUTPUT_MI_THUNK with
	TARGET_ASM_OUTPUT_MI_THUNK in comments.
	* config/rs6000/rs6000.c (rs6000_ra_ever_killed): Remove #ifdef
	ASM_OUTPUT_MI_THUNK and replace with check of targetm.

	* doc/tm.texi (TARGET_ASM_OUTPUT_MI_THUNK): Update signature.
	(TARGET_ASM_OUTPU_MI_VCALL_THUNK): Likewise.

2002-10-19  Brad Lucier  <lucier@math.purdue.edu>

	* real.c (do_add): Fix 0+0 sign corner case.
	(do_divide): Fix Inf/0 corner case.

2002-10-20  Jan Hubicka  <jh@suse.cz>

	* i386.c (classify_argument): Pass MMX arguments in memory
	(ix86_expand_builtin): Expand proper address mode for cflush.
	* i386.md (movdqa): Fix typo.
	(sse2_cflush): Accept DImode addresses.

	* xmmintrin.h (_mm_sqrt_sd): Accept two arguments.
	(_mm_max_sd): Fix pasto.
	(_mm_storeh_pd, _mm_storel_pd): Fix.

	* i386.c (bdesc_comi): Fix to match specification.
	(ix86_expand_sse_comi): Emit the comparison properly.
	* i386.md (sse_comi, sse2_comi, sse_ucomi, sse2_ucomi):
	Do not use comparison operator.
	(vnmaskcmp): Fix template.

	* xmmintrin.h (_mm_cvtps_pi16): Fix.

2002-10-19  Sebastian Pop  <s.pop@laposte.net>

	* dependence.c : Removed.
	* Makefile.in : Remove dependence.o.

2002-10-19  Jan Hubicka  <jh@suse.cz>

	* mmintrin.h (__m64): typedef it to v2si.
	(_mm_cvtsi32_si64, _mm_cvtsi32_si64_mm_sll_pi16,
	_mm_sll_pi32, _mm_sll_pi64, _mm_slli_pi64, _mm_sra_pi16,
	_mm_sra_pi32, _mm_srl_pi16, _mm_srl_pi32, _mm_srl_pi64,
	_mm_srli_pi64, _mm_and_si64, _mm_andnot_si64,
	_mm_or_si64, _mm_xor_si64): Add neccesary casts.
	* xmmintrin.h (_mm_setzero_si64): Likewise.

	* i386.h (ALIGN_MODE_128): Update comment; add missing modes
	(SSE_REG_MODE_P, MMX_REG_MODE_P): New macros.

	PR target/7693
	Patch by Shawn Wagner
	* mmintrin.h: Replace pi64 by si64.

2002-10-18  David Edelsohn  <edelsohn@gnu.org>

	* rs6000.md (movdf_hardfloat32): Order alternatives consistently.
	Use length of 4 not *.
	(movdf_hardfloat64): Same.  Support DFmode moves to/from CTR/LR.
	(movdf_softfloat64): Likewise.
	(movdi_internal32): Use length of 4 not *.
	(movti_power): Same.
	(ctrsi, ctrdi): Same.

2002-10-18  Zack Weinberg  <zack@codesourcery.com>

	* c-decl.c (start_decl): Point users of the old initialized-
	typedef extension at __typeof__.

2002-10-18  Richard Henderson  <rth@redhat.com>

	* real.c (cmp_significand_0, rtd_divmod, ten_to_mptwo): New.
	(real_to_decimal): Re-implement using the logic from the
	gcc 3.2 etoasc.  Comment heavily.
	(div_significands): Simplify loop startup and comparison logic.

2002-10-18  Mark Mitchell  <mark@codesourcery.com>

	* target-def.h (TARGET_ASM_OUTPUT_MI_THUNK): Default to NULL.
	(TARGET_ASM_OUTPUT_MI_VCALL_THUNK): Likewise.
	(TARGET_ASM_OUT): Add them.
	* target.h (asm_out): Add output_mi_thunk and
	output_mi_vcall_thunk.
	* config/alpha/alpha.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/arm/arm-protos.h (arm_output_mi_thunk): Declare.
	* config/arm/arm.c (arm_output_mi_thunk): Define.
	* config/arm/arm.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/cris/cris.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/frv/frv.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/i386/i386-protos.h (x86_output_mi_thunk): Adjust
	prototype.
	(x86_output_mi_vcall_thunk): Declare.
	* config/i386/i386.c (override_options): Clear
	output_mi_vcall_thunk in 64-bit mode.
	(ix86_fntype_regparm): New function.
	(ix86_return_pops_args): Use it.
	(ia32_this_parameter): New function.
	(x86_output_mi_vcall_thunk): New function.
	(x86_output_mi_thunk): Use it
	* config/i386/unix.h (TARGET_ASM_OUTPUT_MI_THUNK): Adjust.
	(TARGET_ASM_OUTPUT_MI_VCALL_THUNK): Define.
	* config/i960/i960-protos.h (i960_output_mi_thunk): Declare.
	* config/i960/i960.c (i960_output_mi_thunk): New function.
	* config/i960/i960.h (ASM_OUTPUT_MI_THUNK): Adjust.
	* config/ia64/ia64-protos.h (ia64_output_mi_thunk): Declare.
	* config/ia64/ia64.c (ia64_output_mi_thunk): Define.
	* config/ia64/ia64.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/m68k/m68k-protos.h (m68k_output_mi_thunk): New function.
	* config/m68k/linux.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/m68k/netbsd-elf.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/mmix/mmix.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/pa/pa.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/rs6000/sysv4.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/s390/s390-protos.h (s390_output_mi_thunk): Declare.
	* config/s390/s390.c (s390_output_mi_thunk): Define.
	* config/s390/s390.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/sparc/sparc.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/stormy16/stormy16.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* config/vax/vax-protos.h (vax_output_mi_thunk): Declare.
	* config/vax/vax.c (vax_output_mi_thunk): Define.
	* config/vax/vax.h (ASM_OUTPUT_MI_THUNK): Rename to ...
	(TARGET_ASM_OUTPUT_MI_THUNK): ... this.
	* doc/tm.texi: Adjust documentation.

2002-10-18  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/netbsd.h (NETBSD_ENABLE_EXECUTE_STACK): Define
	__enable_execute_stack function.
	* config/alpha/netbsd.h (TRANSFER_FROM_TRAMPOLINE): Define
	as NETBSD_ENABLE_EXECUTE_STACK.
	* config/i386/netbsd-elf.h (TRANSFER_FROM_TRAMPOLINE): Ditto.
	* config/i386/netbsd.h (TRANSFER_FROM_TRAMPOLINE): Ditto.
	* config/i386/netbsd64.h (TRANSFER_FROM_TRAMPOLINE): Ditto.
	* config/sparc/netbsd-elf.h (TRANSFER_FROM_TRAMPOLINE): Ditto.
	* config/sparc/netbsd.h (TRANSFER_FROM_TRAMPOLINE): Ditto.

2002-10-18  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/i386/i386.c (x86_initialize_trampoline): Emit a call
	to __enable_execute_stack with the address of the trampoline
	if TRANSFER_FROM_TRAMPOLINE is defined.
	* config/i386/i386.h (TARGET_64BIT): Expand to a compile-time
	constant if building libgcc2.

2002-10-17  Roger Sayle  <roger@eyesopen.com>

	* doc/c-tree.texi: Update description of COND_EXPR tree nodes.

2002-10-17  Geoffrey Keating  <geoffk@apple.com>

	* config/rs6000/rs6000.h (HARD_REGNO_MODE_OK): Allow arbitrary modes
	in CTR/LR/MQ.
	* config/rs6000/rs6000.md (movcc_internal1): Support CCmode moves
	to/from CTR/LR/MQ.
	(movsf_hardfloat): Support SFmode moves to/from CTR/LR/MQ.
	(movsf_softfloat): Likewise.

2002-10-17  Janis Johnson  <janis187@us.ibm.com>

	* Makefile.in (site.exp): Add ALT_CXX_UNDER_TEST and COMPAT_OPTIONS.

2002-10-17  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/alpha/alpha.c (alpha_initialize_trampoline): Use
	tramp, not addr, to pass the trampoline address to
	__enable_execute_stack.

2002-10-17  Jan Hubicka  <jh@suse.cz>

	* mmintrin.h: Guard by __MMX__
	* xmmintrin.h: Guard by __SSE__

	PR other/8062
	* xmmintrin.h (_MM_SHUFFLE2): New macro.
	(_mm_load*_?d): New functions.
	(_mm_set*_?d): New functions.
	(_mm_store*_?d): New functions.

2002-10-16  Jan Hubicka  <jh@suse.cz>

	Really commit patch announced at Oct 14
	PR c/7344
	* predict.c (can_predict_insn_p): New function.
	(estimate_probability): Avoid unnecesary work.
	(process_note_prediction): Likewise.
	* toplev.c (rest_of_compilation): Account early branch prediction pass
	as TV_BRANCH_PROB.

	PR other/8048
	Found by Ian Ollmann
	* xmmintrin.h (_mm_shuffle_pd): Fix typo.
	(_mm_load?_pd): Likewise.
	(_mm_store?_pd): Likewise.

	PR target/7386
	* i386.c (builtin_description):Drop cmpg[te]s[sd].
	* xmmintrin.h (__mm_cmpg[te]_s[sd]): Rewrite using
	swapped alternative.

	PR opt/7630
	* reload1.c (reload_inner_reg_of_subreg): New argument output;
	(push_reload): Update call.

2002-10-17  Richard Sandiford  <rsandifo@redhat.com>

	* config.gcc (mips*-*-*): Add OBJECT_FORMAT_ELF to $tm_defines
	if using mips/elf.h or mips/elf64.h.
	* config/mips/elf.h (OBJECT_FORMAT_ELF): Remove.
	* config/mips/elf64.h (OBJECT_FORMAT_ELF): Remove.

2002-10-16  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/rs6000.c (function_arg): Set inner mode of V1DI to
	SI.

2002-10-16  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/linux.h (ASM_DOUBLE, _ASM_OUTPUT_LONG): Remove.
	(LPREFIX): Likewise.
	(ASM_COMMENT_START, LOCAL_LABEL_PREFIX, ASM_FORMAT_PRIVATE_NAME,
	ASM_OUTPUT_ADDR_VEC_ELT, ASM_OUTPUT_ADDR_DIFF_ELT,
	ASM_OUTPUT_ALIGN, ASM_OUTPUT_SKIP, ASM_OUTPUT_ALIGNED_BSS,
	TEXT_SECTION_ASM_OP, DATA_SECTION_ASM_OP, BSS_SECTION_ASM_OP,
	GLOBAL_ASM_OP, ASM_OUTPUT_MI_THUNK): Move to s390.h.

	* config/s390/s390.h (ASM_COMMENT_START, LOCAL_LABEL_PREFIX,
	ASM_FORMAT_PRIVATE_NAME, ASM_OUTPUT_ALIGN, ASM_OUTPUT_SKIP,
	ASM_OUTPUT_ALIGNED_BSS, TEXT_SECTION_ASM_OP, DATA_SECTION_ASM_OP,
	BSS_SECTION_ASM_OP): Move from linux.h.
	(ASM_OUTPUT_ADDR_VEC_ELT, ASM_OUTPUT_ADDR_DIFF_ELT): Likewise.
	Also, use ASM_GENERATE_INTERNAL_LABEL instead of LPREFIX.

	* config/s390/s390.c (s390_function_profiler): Use
	ASM_GENERATE_INTERNAL_LABEL instead of LPREFIX.

2002-10-15  Richard Henderson  <rth@redhat.com>

	* real.c (real_to_decimal): Accept BUF_SIZE and CROP_TRAILING_ZEROS
	as arguments.  Bound DIGITS by the available buffer size.
	(real_to_hexadecimal): Likewise.
	* real.h (real_to_decimal, real_to_hexadecimal): Update prototypes.
	(REAL_VALUE_TO_DECIMAL): Remove.
	* c-common.c, c-pretty-print.c, print-rtl.c, print-tree.c,
	sched-vis.c, config/arc/arc.c, config/c4x/c4x.c, config/fr30/fr30.c,
	config/i370/i370.h, config/i386/i386.c, config/i960/i960.c,
	config/ip2k/ip2k.c, config/m32r/m32r.c, config/m68hc11/m68hc11.c,
	config/m68k/hp320.h, config/m68k/m68k.h, config/m68k/sun2o4.h,
	config/m68k/sun3.h, config/mips/mips.c, config/ns32k/ns32k.c,
	config/pdp11/pdp11.h, config/vax/vax.h: Update all callers to
	use real_to_decimal directly, and with the proper arguments.
	* doc/tm.texi (REAL_VALUE_TO_DECIMAL): Remove.

2002-10-15  Jim Wilson  <wilson@redhat.com>

	* reload1.c (merge_assigned_reloads): After converting overlapping
	reloads to RELOAD_OTHER, abort if there are now conflicting reloads.

	* config/i386/i386.md (adddi3_1): Add call to ix86_binary_operator_ok.

2002-10-15  Jan Hubicka  <jh@suse.cz>

	* expr.c (do_tablejump): Fix typo in my previous commit.

2002-10-15  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/vr.h (DRIVER_SELF_SPECS): Change %<mgp32 to %{<mgp32}.

2002-10-15  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_split_branches): Add return
	value.  Add parameters TEMP_REG and TEMP_USED.  Use unspec 104.

	(find_base_register_in_addr): New function.
	(find_base_register_ref): New function.
	(replace_base_register_ref): New function.

	(struct constant_pool): Add members pool_insn, insns, and anchor.
	Remove member last_insn.
	(s390_start_pool): Initialize them.
	(s390_end_pool): Emit pool placeholder insn.
	(s390_add_pool_insn): New function.
	(s390_find_pool): Use insns bitmap instead of addresses.
	(s390_dump_pool): Replace placeholder insn.  Emit anchor.
	Replace unspec 104 by local-pool-relative references.
	(s390_output_constant_pool): Output anchor label if required.
	(s390_output_symbolic_const): Handle unspec 104 and 105.
	(s390_add_pool): Remove, replace by ...
	(s390_add_constant, s390_find_constant): ... these new functions.
	(s390_add_anchor): New function.

	(s390_chunkify_pool): Delete, replace by ...
	(s390_chunkify_start, s390_chunkify_finish,
	s390_chunkify_cancel): ... these new functions.
	(s390_optimize_prolog): Add parameter TEMP_REGNO.
	Recompute register live data for special registers.
	(s390_fixup_clobbered_return_reg): New function.
	(s390_machine_dependent_reorg): Rewrite to use new
	s390_chunkify_... routines.

	config/s390/s390.md ("reload_base"): Rename to ...
	("reload_base_31"): ... this.
	("reload_base_64"): New insn.
	("reload_base2"): Remove.
	("reload_anchor"): New insn.
	("pool"): New insn.

	s390.c (s390_pool_overflow): Remove.
	s390.h (s390_pool_overflow): Likewise.
	s390.md ("cjump", "icjump", "doloop_si"): Remove s390_pool_overflow.

2002-10-15  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.md (movv8qi_i+2): Don't split if source is -1.

2002-10-15  Janis Johnson  <janis187@us.ibm.com>

	* doc/install.texi: Formatting changes for conformance to HTML 4.01.

2002-10-15  Ulrich Weigand  <uweigand@de.ibm.com>

	PR opt/7409
	* loop.c (loop_regs_scan): Mark registers used for function
	argument passing as MAY_NOT_OPTIMIZE.

2002-10-14  Jan Hubicka  <jh@suse.cz>

	* i386.md (movv2di_internal): New pattern.
	(movv2df_internal, movv8hi_internal, movv16qi_internal): Fix predicate.
	(movv2di): New expander.
	* i386.c (ix86_preferred_reload_class): Return NO_REGS for vector operands.

	* i386.c (ix86_expand_timode_binop_builtin): Delete.
	(builtin_description): Add SSE1 logicals; rename SSE2 logicals.
	(ix86_init_mmx_sse_builtins): Kill SSE1 logicals.
	(ix86_expand_builtin): Likewise.
	* i386.h (sse_andti4_df_1, sse_andti3_df_2, sse_andti3_sf_1, sse_andti3_sf_2,
	sse_andti3,
	sse_andnti4_df_1, sse_andti3_df_2, sse_andti3_sf_1, sse_andti3_sf_2,
	sse_andnti3,
	sse_orti4_df_1, sse_orti3_df_2, sse_orti3_sf_1, sse_orti3_sf_2,
	sse_orti3,
	sse_xorti4_df_1, sse_xorti3_df_2, sse_xorti3_sf_1, sse_xorti3_sf_2,
	sse_xorti3): Kill.
	(sse_andv4sf3, sse_andnv4sf3, sse_orv2df3, sse_xorv2df3, sse_andv2df3,
	 sse_andnv2df3, sse_orv2df3, sse_xorv2df3): New expanders.
	(*sse_andv4sf3, *sse_andnv2df3, *sse_orv4sf3, *sse_xorv4sf3, *sse_andv2df3,
	 *sse_andnv2df3, *sse_orv2df3, *sse_xorv2df3): New patterns.
	(*sse_andsf3, *sse_andndf3, *sse_ordf3, *sse_xordf3, *sse_anddf3,
	 *sse_andndf3, *sse_orv2df3, *sse_xorv2df3): New patterns.

	* xmmintrin.h (__m128i): Define as __v2di.

	PR c++/6419
	(expand_expr): Use DECL_RTL_SET_P.

2002-10-14  Roger Sayle  <roger@eyesopen.com>

	* combine.c (simplify_set):  Treat MODE_CC registers like cc0.

2002-10-14  Roger Sayle  <roger@eyesopen.com>
	    Zack Weinberg <zack@codesourcery.com>

	* config/i386/i386.c (k6_cost): Correct typo.

2002-10-14  Mark Mitchell  <mark@codesourcery.com>

	PR optimization/6631
	* alias.c (objects_must_conflict_p): Check honor_readonly when
	examining TYPE_READONLY.
	* function.c (assign_stack_temp_for_type): Likewise.

2002-10-14  Falk Hueffner  <falk.hueffner@student.uni-tuebingen.de>

	* config/alpha/alpha.md (extendsidi2_nofix, extendsidi2_fix):
	Swap zero extension arguments.
	(umaxhi3): Fix instruction class.
	PR target/7211
	(prefetch): Fix prefetch instructions.
	PR target/7238
	(pkwb): Fix output constraint.

2002-10-14  Alexandre Oliva  <aoliva@redhat.com>

	* config/mips/mips.c (print_operand): Increase buffer size for
	real numbers.

2002-10-14  Richard Henderson  <rth@redhat.com>

	PR opt/8165
	* gcse.c (adjust_libcall_notes): Revert last change.
	* simplify-rtx.c (simplify_replace_rtx): Handle LO_SUM.

2002-10-14  Andrew Haley  <aph@redhat.com>

	* tree-inline.c (remap_block): All local class initialization
	flags go in the outermost scope.
	(expand_call_inline): Call java_inlining_map_static_initializers.
	(expand_call_inline): Call java_inlining_merge_static_initializers.
	* java/lang.c (merge_init_test_initialization): New.
	(java_inlining_merge_static_initializers): New.
	(inline_init_test_initialization): New.
	(java_inlining_map_static_initializers): New.

	* tree-inline.c (expand_call_inline): Convert retvar to expected
	type.

2002-10-14  Graham Stott  <graham.stott@btinternet.com>

	* stmt.c (decl_conflicts_with_clobbers_p): Add REG_P check.

2002-10-14  Aldy Hernandez  <aldyh@redhat.com>

	* stmt.c: Fix typo in comment.

2002-10-14  J"orn Rennecke <joern.rennecke@superh.com>

	* c-common.c (c_common_type_for_mode): Add V2HImode case.
	* tree.c (build_common_tree_nodes_2): Initialize
	unsigned_V2HI_type_node and V2HI_type_node.
	* tree.h (enum tree_index): Add TI_UV2HI_TYPE and TI_V2HI_TYPE.
	(unsigned_V2HI_type_node, V2HI_type_node): Define.

2002-10-14  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/i386.h (ASM_OUTPUT_REG_PUSH, ASM_OUTPUT_REG_POP):
	Handle TARGET_64BIT.

2002-10-14  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/vr.h (DRIVER_SELF_SPECS): Define.
	* config/mips/t-vr (MULTILIB_OPTIONS): Remove mlong32.
	(MULTILIB_DIRNAMES): Remove long32.
	(MULTILIB_EXCEPTIONS): Don't build -mabi=32 -mgp32 multilibs.
	(MULTILIB_REDUNDANT_DIRS): Remove.

2002-10-14  Richard Sandiford  <rsandifo@redhat.com>

	* doc/tm.texi (DRIVER_SELF_SPECS): Document.
	* gcc.c (driver_self_specs): New variable.
	(do_self_spec): New function.
	(main): Use it to process driver_self_specs.

2002-10-13  Richard Henderson  <rth@redhat.com>

	* rtl.c (shallow_copy_rtx): Use memcpy for the entire node.

2002-10-12  Neil Booth  <neil@daikokuya.co.uk>

	PR preprocessor/7862
	PR preprocessor/8190
	* gcc.c (cpp_unique_options): Don't delete .d files.
	Remove stray whitespace.

2002-10-12  Naohiko Shimizu  <pshimizu@fa2.so-net.ne.jp>

	* pdp11.h (ASM_OUTPUT_SKIP): Add preceding 0 for octal constant.
	(ASM_OUTPUT_COMMON, ASM_OUTPUT_LOCAL): Likewise.
	* pdp11.c (pdp11_output_function_prologue): 0%o -> %#o.
	(pdp11_output_function_epilogue, output_ascii): Likewise.
	(output_addr_const_pdp11): Likewise.
	* pdp11.md (movdi): Use offsetable memory for floating store.
	(lshrsi3, negsi2): Delete irrelevant comment.

2002-10-11  Geoffrey Keating  <geoffk@apple.com>

	* cse.c (mention_regs): Set SUBREG_TICKED to the register number,
	not the address of the REG.
	(struct cse_reg_info): Make subreg_ticked unsigned.

2002-10-11  Janis Johnson  <janis187@us.ibm.com>

	* doc/compat.texi: Add info about C++ libraries.

2002-10-11  Richard Henderson  <rth@redhat.com>

	PR opt/8165
	* gcse.c (adjust_libcall_notes): Also adjust notes for INSN.

2002-10-11  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* cfganal.c (dfs_enumerate_from): Use PARAMS.
	* genautomata.c (output_insn_code_cases): Likewise.
	* real.c (real_format): Likewise.
	* tree.c (tree_size): Revise expressions using TREE_CODE_LENGTH to
	ensure value is promoted before doing subtraction.

2002-10-11  Jan Hubicka  <jh@suse.cz>

	* calls.c (expand_call): Simplify noreturn call.

	PR c/7344
	* cfgbuild.c (make_edges): Create edge cache when we do have
	large jumptable.
	* expr.c (do_tablejump): Note size of maximal jumptable.
	* function.c (prepare_function_start): Zero out size.
	* function.h (function): Add max_jumptable_ents.

	* cfgcleanup.c (insn_match_p): Verify sibcall flag for calls to.

2002-10-11  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.md (movv8qi_i+2): For V8QI destinations, generate V4HI
	register for mperm_w operation.

2002-10-11  J"orn Rennecke <joern.rennecke@superh.com>

	* emit-rtl.c (gen_lowpart_common): When asked to make a vector from
	an integer, use simplify_gen_subreg.

2002-10-10  Aldy Hernandez  <aldyh@redhat.com>

	* extend.texi (Vector Extensions): Remove comment about single
	element vectors.

2002-10-10  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* fold-const.c (size_htab_hash): Use htab_hash_pointer.
	* function.c (insns_for_mem_hash): Likewise.
	* varasm.c (STRHASH): Likewise.

2002-10-10  Stuart Hastings  <stuart@apple.com>

	* cse.c (struct cse_reg_info): Add subreg_ticked.
	(SUBREG_TICKED): New.
	(get_cse_reg_info): Initialize SUBREG_TICKED.
	(mention_regs): Use it.
	(invalidate): Set SUBREG_TICKED.
	(invalidate_for_call): Likewise.
	(addr_affects_sp_p): Likewise.

2002-10-10  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/i386.md (tls_local_dynamic_base): Put pic reg
	into proper operand.

2002-10-10  Denis Chertykov  <denisc@overta.ru>

	* config/ip2k/ip2k.c (function_epilogue): Optimize stack
	deallocation.
	* config/ip2k/libgcc.S: Combine routines used by function
	epilogue.

2002-10-10  Jim Wilson  <wilson@redhat.com>

	* cse.c (fold_rtx): Don't perform associative optimization for DIV and
	UDIV.

2002-10-10  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/aix52.h: New file.
	* config/rs6000/t-aix52: New File.
	* config.gcc (rs6000-ibm-aix5.1.*): New entry.
	(rs6000-ibm-aix[56789].*): Default to AIX 5.2.

2002-10-10  Jan Hubicka  <jh@suse.cz>

	PR target/5610
	* invoke.texi (-msse-math): Kill
	(-msse): Add note to mfpmath=sse.

2002-10-10  Jan Hubicka  <jh@suse.cz>

	PR target/7723
	* i386.c (ix86_expand_vector_move): Do not generate const0->mem moves.

2002-10-10  Neil Booth  <neil@daikokuya.co.uk>

	PR preprocessor/8179
	* gcc.c (cpp_options): Add {ansi}, move %{m*} to same location
	as cc1_options.
	(default_compilers): Pass debug options when preprocessing
	stdin.

2002-10-06  Richard Henderson  <rth@redhat.com>

	* toplev.c (rest_of_compilation): Revert opt/2960 change.

2002-10-09  Zack Weinberg  <zack@codesourcery.com>

	PR c/7353
	* c-decl.c (start_decl): Unconditionally issue error for
	'typedef foo = bar'.
	(finish_decl): Remove special case for TYPE_DECL with initializer.

	* doc/extend.texi: Delete "Naming Types" section.  Change all
	cross-references to that section to refer to "Typeof" instead.
	Add the useful safe-max()-macro example from "Naming Types" to
	"Typeof", rewritten using that extension.  Add some compatibility
	notes to "Typeof."

2002-10-09  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* loop.c: Revert 2002-08-15 change.
	(LOOP_REGNO_NREGS): Ensure type is int.

2002-10-09  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.md (extenddftf2): Change to define_insn
	which copies first FPR and clears second.
	(extendsftf2): Same.
	(floatditf2): Fix typo.
	(floatsitf2): Same.
	(fix_trunctfdi2): Same.
	(fix_trunctfsi2): Same.

2002-10-09  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* conflict.c (arc_hash): Change return type to hashval_t.
	* cselib.c (get_value_hash): Likewise.
	* genautomata.c (automaton_decl_hash, insn_decl_hash, decl_hash,
	state_hash, automata_list_hash): Likewise.
	* read-rtl.c (def_hash): Likewise.
	* tree.c (type_hash_hash): Likewise.

2002-10-08  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/rs6000.c (rs6000_ra_ever_killed): Call
	prologue_epilogue_contains instead of using REG_MAYBE_DEAD notes.

2002-10-09  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.md (ffssi2): Fix emitted code.

2002-10-09  Ulrich Weigand  <uweigand@de.ibm.com>

	* cse.c (insn_live_p): Pass insn pattern, not full insn
	to may_trap_p.

2002-10-09  Neil Booth  <neil@daikokuya.co.uk>

	* cppmacro.c (paste_tokens): Only allow / to paste with =.

2002-10-09  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.md (movdf splitter): Use gen_int_mode on
	64-bit hosts.
	(movtf_internal): Reference correct displacement for second value
	in memory.
	(movtf splitter): Correct generation of constants in 64-bit mode.

2002-10-09  Alan Modra  <amodra@bigpond.net.au>

	* libgcc2.c (__floatdisf): Properly cure double rounding.

2002-10-09  Gabriel Dos Reis  <gdr@integrable-solutions.net>

	* c-common.c (cb_register_builtins): Define __WCHAR_MAX__.
	* doc/cpp.texi (Common Predefined Macros): Document.

2002-10-09  Gabriel Dos Reis  <gdr@integrable-solutions.net>

	PR doc/7484
	* doc/invoke.texi (Option Summary): List
	-Wmissing-declarations as a C only option.

2002-10-08  Jakub Jelinek  <jakub@redhat.com>

	* config/sparc/t-linux64 (MULTILIB_OPTIONS): Remove
	mno-app-regs|mcmodel=medany.
	(MULTILIB_DIRNAMES, MULTILIB_OSDIRNAMES): Remove alt.
	(MULTILIB_EXCEPTIONS, MULTILIB_EXCLUSIONS, MULTILIB_MATCHES): Remove.
	(CRTSTUFF_T_CFLAGS): Define.

2002-10-08  Roger Sayle  <roger@eyesopen.com>

	PR target/8087
	* simplify-rtx.c (avoid_constant_pool_reference):  Allow constant
	pool references that are constructed using LO_SUM.

2002-10-08  Nathan Sidwell  <nathan@codesourcery.com>

	* c-opts.c (c_common_decode_option): Add warn_strict_aliasing to
	-Wall.
	* c-typeck.c (build_c_cast): Use warn_strict_aliasing, tweak
	message.
	* flags.h (warn_strict_aliasing): Declare.
	* toplev.c (warn_strict_aliasing): Define.
	(lang_independent_options): Add it.
	* doc/invoke.texi (-Wstrict-aliasing): Document it.

2002-10-08  Zack Weinberg  <zack@codesourcery.com>

	* system.h (GCCBUGURL): Delete.
	* version.c (bug_report_url): New.  Add commentary about
	modifying both these strings in modified distributions.
	* version.h: Declare bug_report_url.

	* diagnostic.c, gcc.c, gcov.c: Globally replace GCCBUGURL with
	bug_report_url.

2002-10-08  Nick Clifton  <nickc@redhat.com>

	* config/rs6000/spe.h (__ev_set_acc_u64): Use __ev_create_u64 to
	convert uint64_t into __ev64_opaque__.
	(__ev_set_acc_s64): Likewise, but using signed types.

2002-10-08  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("*doloop_si_long"): Add missing operand.
	("*doloop_di_long"): Likewise.

2002-10-08  Jan Hubicka  <jh@suse.cz>

	* print-rtl.c (print_rtx): Increase buffer size for real numbers.

2002-10-08  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.md (define_attr cpu): Add r4111.

2002-10-08  Anthony Green  <green@redhat.com>

	* bitmap.c (bitmap_equal_p): Clear all bitmap_head fields.

2002-10-08  Michael Hayes  <m.hayes@elec.canterbury.ac.nz>

	* config/c4x/c4x.c (c4x_print_operand): Enlarge buffer
	for REAL_VALUE_TO_DECIMAL output.

2002-10-07  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.c (rs6000_override_options): Set
	real_format_for_mode for IBM extended format, if enabled.
	(easy_fp_constant): Add TFmode.
	(rs6000_legitimize_address): Add TFmode.
	(rs6000_legitimate_address): Same.
	(function_arg_advance): TFmode uses two FPRs.
	(rs6000_emit_prologue): Fix warning.
	(rs6000_output_function_epilogue): Add TFmode.
	(output_toc): Add TFmode.
	* rs6000.h (SLOW_UNALIGNED_ACCESS): Add TFmode.
	(LEGITIMATE_OFFSET_ADDRESS_P): Add TFmode.
	* rs6000.md (movtf splitter): Load TFmode constant.

2002-10-07  Dale Johannesen  <dalej@apple.com>

	* rtl.h:  Add NOTE_PRECONDITIONED.
	* unroll.c:  Set it.
	* loop.c:  Set loop_info->preconditioned from it.
	* doloop.c:  Permit doloop treatment when loop_info->preconditoned.

2002-10-07  Richard Henderson  <rth@redhat.com>

	* config/i960/i960.c (i960_setup_incoming_varargs): Create a
	new rtx for comparing the argument pointer against zero.
	(i960_va_start): Similarly.

2002-10-07  Richard Henderson  <rth@redhat.com>

	* config/i960/i960.md (*): Use TFmode, not XFmode.
	* config/i960/i960.c (*): Likewise.
	(i960_arg_size_and_align): Remove XFmode alignment hack.
	(i960_round_align): Merge code from ROUND_TYPE_ALIGN.
	* config/i960/i960.h (LONG_DOUBLE_TYPE_SIZE): Use 128, not 96.
	(MAX_LONG_DOUBLE_TYPE_SIZE): Likewise.
	(DATA_ALIGNMENT, ROUND_TYPE_SIZE): Remove.

2002-10-07  Richard Henderson  <rth@redhat.com>

	* config/fp-bit.c (EXTENDED_FLOAT_STUBS): Flush out all XF/TFmode
	entry points; use void return value and argument list.

2002-10-05  Naohiko Shimizu <nshimizu@keyaki.cc.u-tokai.ac.jp>

	* t-pdp11: Add MULTILIB support for msoft-float.
	* pdp11.h (LEGITIMATE_CONSTANT_P): Fix soft-float case.

	* t-pdp11: Add LIB2FUNCS_EXTRA.
	* pdp11.c (pdp11_output_function_prologue): Restrict offset to 16bit,
	add preceding 0 to the octal constant, rename 'fp' to 'r5', rename
	'fldd' to 'ldd', rename 'fstd' to 'std'.
	(pdp11_output_function_epilogue): Likewise.
	(output_move_quad): Make the comment gas compatible.
	(output_ascii): Add preceding 0 to the octal constant.
	(print_operand_address): Add pre_modify, post_modify.
	(output_addr_const_pdp11): Add preceding 0 to the octal constant.
	* pdp11.h (GO_IF_LEGITIMATE_ADDRESS) : Add 'movb' pre_modify case
	with the indication of Paul Koning.
	(PRINT_OPERAND): Fix floating constant.
	* pdp11.md (movdi): Restrict matching pattern.
	(movqi): Generalize the matching pattern.
	(movdf): Restrict matching pattern.
	(zero_extendqihi2): Change constant representation.
	(floatsidf2): Fix wrong operands.
	(addqi3): Fix wrong instruction name.
	(subqi3): Fix wrong instruction name.
	(andsi3, andhi3, andqi3): Simplify and fix to use 'bic'.
	(xorsi3): Fix wrong insn.
	(one_cmplqi2): Add two operand pattern.
	(lsrsi3): New.
	(negsi2): New.
	(call): Add register indirect case.
	(mod): Fix wrong subreg.

2002-10-06  Eric Botcazou  <ebotcazou@libertysurf.fr>
	    Volker Reichelt <reichelt@igpm.rwth-aachen.de>

	PR c/7411
	* expr.c (expand_expr) [PLUS]: Simplify after the operands
	have been expanded in EXPAND_NORMAL mode.

2002-10-06  Richard Henderson  <rth@redhat.com>

	* config/rs6000/rs6000.md (load_toc_v4_PIC_2): Fix base constraint.

2002-10-06  Richard Henderson  <rth@redhat.com>

	PR optimization/2960
	* toplev.c (rest_of_compilation): Don't copy_loop_headers if
	optimize_size.

2002-10-06  Alexandre Oliva  <aoliva@redhat.com>

	* config/mips/mips.h (SIZE_TYPE, PTRDIFF_TYPE): Override
	previously definitions.

2002-10-06  Frank Ch. Eigler  <fche@redhat.com>

	* cppinit.c (init_standard_includes, parse_option): Use strncmp.
	* c-opts.c (find_opt): Similarly.

2002-10-05  Jakub Jelinek  <jakub@redhat.com>

	* gcc.c (set_multilib_dir): Don't access *end.
	Use memcpy instead of strncpy.  Don't write beyond malloced buffer.
	(print_multilib_info): Don't show paths starting with ".:".
	* genmultilib: Add new option, "yes" if multilibs are enabled.
	Update comments.  If multilibs not enabled, print .:${osdirout}
	for each directory.  If multilibs are enabled, always print
	${dirout}:${osdirout}, even if the two are the same.
	* Makefile.in (s-mlib): Pass @enable_multilib@ to genmultilib.
	Pass all MULTILIB_* variables to genmultilib even if
	--disable-multilib but MULTILIB_OSDIRNAMES is not empty.

2002-10-04  Bruce Korb  <bkorb@gnu.org>

	* fixinc/inclhack.def(hpux11_abs):  use format fix
	* fixinc/fixincl.x: regenerate
	* fixinc/tests/base/stdlib.h: accommodate new fix test

2002-10-05  Jan Hubicka  <jh@suse.cz>

	* c-common.c (cb_register_builtins):  Use really_no_inline.

2002-10-04  David Edelsohn  <edelsohn@gnu.org>

	* unroll.c (copy_loop_body): Remove REG_EQUAL note attached to
	copied instruction if the note is not loop invariant.

2002-10-04  Loren J. Rittle  <ljrittle@acm.org>

	* gcc/ginclude/stddef.h: Support the FreeBSD 5 typedef system.

2002-10-04  Steve Ellcey  <sje@cup.hp.com>

	* doc/invoke.texi (HPPA):  Add -mlinker-opt, -mgnu-ld,
	and -mhp-ld options to list of options.  Add -mgnu-ld
	and -mhp-ld option descriptions.

2002-10-04  Steve Ellcey  <sje@cup.hp.com>

	* fixinc/inclhack.def (hpux11_abs):  New.
	(stdio_va_list): change __va_list__ to __gnuc_va_list.
	* fixinc/fixincl.x: Rebuild.

2002-10-04  Roger Sayle  <roger@eyesopen.com>

	* config/i386/i386.h (processor_costs): Add new fields fadd,
	fmul, fdiv, fabs, fchs and fsqrt to costs structure.
	(RTX_COSTS): Use these fields to determine the RTX costs
	of floating point addition/subtraction, multiplication,
	division, fabs, negation and square root respectively.
	* config/i386/i386.c (size_cost): Provide instruction sizes
	for these new fields.
	(i386_cost, i486_cost, pentium_cost, pentiumpro_cost,
	k6_cost, athlon_cost, pentium4_cost): Provide typical cycle
	counts for these new fields for all x86 processor variants.

2002-10-04  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* mips.c (mips_const_double_ok): Delete unused variable.

	* gengtype.c (rtx_next): Change type to int.

2002-10-04  Andreas Jaeger  <aj@suse.de>

	* config/i386/t-linux64 (MULTILIB_OSDIRNAMES): Fix value.

2002-10-04  Richard Henderson  <rth@redhat.com>

	* real.h (SIGNIFICAND_BITS): Add one more word.
	(CONST_DOUBLE_FORMAT): Accomodate 6 words.
	* real.c (times_pten): New.
	(real_to_decimal, real_from_string): Use it.
	(sticky_rshift_significand): Use & to find modulus.
	(rshift_significand, lshift_significand): Likewise.
	(do_divide): Apply sticky bit after normalization.
	(real_to_decimal, real_to_hexadecimal): Fix sign of Inf and NaN.

2002-10-03  Andreas Jaeger  <aj@suse.de>

	* gengtype.c (adjust_field_rtx_def): Cast variables of type size_t
	to unsigned long, adjust printf format string.
	(output_mangled_typename): Likewise.

2002-10-03  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/vax/vax.c (vax_output_function_prologue): Use asm_fprintf.
	* config/vax/vax.h (VAX_FUNCTION_PROFILER_NAME): New.
	(FUNCTION_PROFILER): Rewrite to use ASM_GENERATE_INTERNAL_LABEL,
	assemble_name, asm_fprintf, and VAX_FUNCTION_PROFILER_NAME.
	(ASM_OUTPUT_MI_THUNK): Use asm_fprintf instead of REGISTER_PREFIX.
	(PRINT_OPERAND_PUNCT_VALID_P): Fix comment.
	* config/vax/elf.h (FUNCTION_PROFILER): Remove.
	(VAX_FUNCTION_PROFILER_NAME): Redefine as "__mcount".

2002-10-03  Mark Mitchell  <mark@codesourcery.com>

	* doc/invoke.texi (-Wabi): Document mangling bug.

2002-10-04  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.c (rs6000_output_function_epilogue): Use a
	name for the tbtab label that depends on the function asm name.
	Don't output tbtab label unless optional_tbtab.
	(output_mi_thunk): Formatting.

2002-10-03  Richard Henderson  <rth@redhat.com>

	* config/m68k/m68k.h (OVERRIDE_OPTIONS): Move additional code ...
	* config/m68k/m68k.c (override_options): ... here.
	* config/m68k/m68kelf.h (OVERRIDE_OPTIONS): Remove.
	* config/m68k/m68kv4.h (OVERRIDE_OPTIONS): Remove.
	* config/m68k/linux.h (SUBTARGET_OVERRIDE_OPTIONS): Remove.
	* config/m68k/netbsd-elf.h (SUBTARGET_OVERRIDE_OPTIONS): Remove.

2002-10-03  Richard Henderson  <rth@redhat.com>

	* real.h (struct real_value): Use ENUM_BITFIELD.

2002-10-03  Richard Henderson  <rth@redhat.com>

	* config/i960/i960.md (call, call_value): Use emit_call_insn.

2002-10-03  Steve Ellcey  <sje@cup.hp.com>

	* config/pa/pa64-hpux.h (INIT_ENVIRONMENT): New.

2002-10-03  Steve Ellcey  <sje@cup.hp.com>

	* config.gcc (hppa*64*-*-hpux11*): Check gnu_ld.
	* config/pa/pa.h (MASK_GNU_LD): New.
	(TARGET_GNU_LD): New.
	* config/pa/pa64-hpux.h (LINK_SPEC): Set based
	on gnu-ld and MASK_GNU_LD.
	(SUBTARGET_SWITCHES): New gnu-ld & hp-ld flags.

2002-10-03  Jan Hubicka  <jh@suse.cz>

	* i386.c (athlon_cost): Fix the move costs.

2002-10-03  Jan Hubicka  <jh@suse.cz>

	* final.c (final): Use symbol name as function name for profiling.
	* profile.c (get_exec_counts): Likewise.
	(branch_prob): Likewise.

2002-10-03  Jakub Jelinek  <jakub@redhat.com>

	* longlong.h (__udiv_qrnnd): Remove PARAMS from prototype.

2002-10-03  Jakub Jelinek  <jakub@redhat.com>

	* gcc.c (print_multi_os_directory): New variable.
	(option_map): Support --print-multi-os-directory.
	(struct prefix_list): Add os_multilib field.
	(multilib_os_dir): New variable.
	(static_specs): Add multilib_options.
	(find_a_file): Add multilib argument.  Search in GCC or OS multilib
	subdirs if non-zero.
	(read_specs, execute): Update callers.
	(find_file): Likewise.  Don't prefix name with multilib_dir, instead
	pass 1 as multilib option.
	(display_help): Include --print-multi-os-directory.
	(add_prefix): Add os_multilib argument.  Initialize pl->os_multilib.
	(process_command): Update callers.  Handle --print-multi-os-directory.
	(do_spec_1) ['D']: Use multilib_os_directory if pl->os_multilib is
	set.
	(main): Update find_a_file and add_prefix callers.
	Handle print_multi_os_directory.
	(struct mdswitchstr): New.
	(mdswitches, n_mdswitches): New variables.
	(used_arg): Add MULTILIB_DEFAULT switches too if they are not
	present on the command line nor their mutually incompatible
	switches.
	(default_arg): Optimize.
	(set_multilib_dir): Compute multilib_os_dir.  Initialize mdswitches
	array.
	(print_multilib_info): Only print GCC multilib dir name, not OS
	multilib dirname.
	* genmultilib: Add osdirnames parameter.  Output multilib_options
	variable.  If osdirnames is specified, output dirnames as
	dirname:osdirname.
	* mklibgcc.in: Use MULTILIB_OSDIRNAMES, --print-multi-directory
	and --print-multi-os-directory instead of SHLIB_SLIBDIR_SUFFIXES
	to compute libgcc_s soname and install path.
	* Makefile.in (libgcc.mk): Pass MULTILIB_OSDIRNAMES instead of
	SHLIB_SLIBDIR_SUFFIXES to mklibgcc.
	(s_mlib): Pass MULTILIB_OSDIRNAMES or nothing as last genmultilib
	argument.

	* config/sparc/t-linux64 (MULTILIB_OSDIRNAMES): Set.
	(SHLIB_SLIBDIR_SUFFIXES): Remove.
	* config/sparc/linux64.h (STARTFILE_SPEC32, STARTFILE_SPEC64,
	ENDFILE_SPEC32, ENDFILE_SPEC64, ENDFILE_COMMON): Remove.
	(STARTFILE_SPEC, ENDFILE_SPEC): Don't distinguish between -m32
	and -m64.
	* config/sparc/t-sol2-64 (MULTILIB_OSDIRNAMES): Set.
	(SHLIB_SLIBDIR_SUFFIXES): Remove.
	* config/sparc/sol2-bi.h (STARTFILE_ARCH64_SPEC): Remove.
	(STARTFILE_ARCH_SPEC): Remove.
	* config/i386/t-linux64 (MULTILIB_OSDIRNAMES): Set.
	(SHLIB_SLIBDIR_SUFFIXES): Remove.
	* config/i386/linux64.h (STARTFILE_PREFIX_SPEC): Remove.
	* config/mips/t-iris6 (MULTILIB_OSDIRNAMES): Set.
	(SHLIB_SLIBDIR_SUFFIXES): Remove.

2002-10-03  Jan Hubicka  <jh@suse.cz>

	* predict.c (choose_function_section): Avoid choice for linkonce functions.

2002-10-03  Jan Hubicka  <jh@suse.cz>

	* i386.md (lea to mul peep2): Fix condition.

2002-10-02  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa-linux.h (FUNCTION_OK_FOR_SIBCALL): Delete macro.
	* pa32-linux.h (FUNCTION_OK_FOR_SIBCALL): Define.

2002-10-02  Richard Henderson  <rth@redhat.com>

	PR opt/7124
	* config/i386/i386.c (ix86_register_move_cost): Increase cost
	for secondary_memory_needed pairs.

2002-10-02  Nathanael Nerode  <neroden@gcc.gnu.org>

	* doc/vms.texi: Blow away false include file section.

2002-10-02  Roger Sayle  <roger@eyesopen.com>

	PR optimization/6627
	* toplev.c (force_align_functions_log): New global variable.
	* flags.h (force_align_functions_log): Add extern prototype.
	* varasm.c (assemble_start_function): Use it to force minimum
	function alignment.
	* config/i386/i386.h (FUNCTION_BOUNDARY): Set the correct
	minimum function alignment to one byte.
	(TARGET_PTRMEMFUNC_VBIT_LOCATION): Store the virtual bit in
	the least significant bit of vtable member function pointers.
	* tree.h (enum ptrmemfunc_vbit_where_t): Move definition to
	here from cp/cp-tree.h.

2002-10-02  Jan Hubicka  <jh@suse.cz>

	* i386.c (print_operand_address): Use RIP addressing for offsetted
	label refs too.

2002-09-30  David S. Miller  <davem@redhat.com>

	PR middle-end/7151
	* config/sparc/sparc.md (movdi_insn_sp32_v9): Accept 'e' regs.
	(movdi reg/reg split): Match only on sparc32, and v9 when int regs.

2002-10-01  Roger Sayle  <roger@eyesopen.com>

	* unroll.c (loop_iterations): Revert 2002-09-08 change.

2002-10-01  Richard Henderson  <rth@redhat.com>

	* real.c (real_to_decimal): Crop trailing zeros for DIGITS < 0.
	(real_to_hexadecimal): Likewise.
	* print-rtl.c (print_rtx): If we are linked with real.c, don't
	dump the XWINT fields of a floating point CONST_DOUBLE.

2002-10-01  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/vax/elf.h (FUNCTION_PROFILER): Fix __mcount call.

2002-10-01  Richard Henderson  <rth@redhat.com>

	* calls.c (precompute_register_parameters): Force non-legitimate
	constants into pseudos.

2002-10-01  Nick Clifton  <nickc@redhat.com>

	* config/rs6000/spe.md (spe_evrlwi): Add missing third operand
	to assembler template.

2002-10-01  Richard Henderson  <rth@redhat.com>

	* dwarf2out.c (loc_descriptor_from_tree): Relax requirement
	for TLS debug info to !DECL_EXTERNAL.

2002-10-01  Matt Thomas  <matt@3am-software.com>
	    Jason Thorpe  <thorpej@wasabisystems.com>

	* config.gcc (vax-*-netbsdelf*): Enable configuration.
	* config/elfos.h (PCC_BITFIELD_TYPE_MATTERS): Define only
	if not already defined.
	* config/vax/elf.h: New file.
	* config/vax/netbsd-elf.h: New file.
	* config/vax/vax.c: Include "debug.h".
	(vax_output_function_prologue): Add dwarf2 support.  Use
	MAIN_NAME_P when checking for VMS_TARGET stack adjust.
	* config/vax/vax.h (CONST_OK_FOR_LETTER_P): Add cases for
	'J' [0..63], 'K' [-128..127], 'L' [-32768..32767],
	'M' [0..255], 'N' [0..65535], and, 'O' [-63..-1].
	(VAX_ISTREAM_SYNC): Remove.
	(INITIALIZE_TRAMPOLINE): Use gen_sync_istream.
	(JUMP_TABLES_IN_TEXT_SECTION): Define.
	(ASM_OUTPUT_REG_POP): Use reg_names for the stack pointer.
	(ASM_OUTPUT_ADDR_VEC_ELT): Use ASM_GENERATE_INTERNAL_LABEL
	and assemble_name.
	(ASM_OUTPUT_ADDR_DIFF_ELT): Likewise.
	(PRINT_OPERAND_PUNCT_VALID_P): Accept '|'.
	(PRINT_OPERAND): Output REGISTER_PREFIX for '|'.
	(INCOMING_RETURN_ADDR_RTX): Define.
	* config/vax/vax.md (VUNSPEC_BLOCKAGE)
	(VUNSPEC_SYNC_ISTREAM): Define.
	(blockage): Use VUNSPEC_BLOCKAGE.
	(sync_istream): New insn.

2002-10-01  Richard Henderson  <rth@redhat.com>

	* config/vax/vax.md (call_pop, *call_pop, call_value_pop)
	(*call_value_pop, call, call_value): Add dwarf2 EH support.
	(*call): New insn.

2002-10-01  Nathan Sidwell  <nathan@codesourcery.com>

	PR c/8083
	* c-typeck.c (build_c_cast): Warn about type punning which breaks
	type based aliasing.

2002-10-01  Mark Mitchell  <mark@codesourcery.com>

	* stor-layout.c (update_alignment_for_field): New function.
	(place_union_field): Use it.
	(place_field): Likewise.

2002-10-01  Nathan Sidwell  <nathan@codesourcery.com>

	PR other/8077
	* gcc.c (cc1_options): Add space on -auxbase-strip.

2002-10-01  Jim Wilson  <wilson@redhat.com>

	* config/v850/v850.h (EPILOGUE_USES): Define.

2002-09-30  Andrew Haley  <aph@redhat.com>

	* flow.c (insn_dead_p): When using non-call-exceptions, don't
	eliminate insns that may trap.
	* cse.c (insn_live_p): Likewise.

2002-10-01  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.h (PROCESSOR_R4121): Rename to PROCESSOR_R4120.
	(TARGET_MIPS4121): Rename to TARGET_MIPS4120.
	* config/mips/mips.c (mips_cpu_info): Rename vr4121 to vr4120.
	* config/mips/mips.md: Apply same renaming here.

2002-10-01  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.c (PROCESSOR_R4320, TARGET_MIPS4320): Remove.
	(GENERATE_MULT3_SI): Remove use of TARGET_MIPS4320.
	* config/mips/mips.c (mips_cpu_info): Remove vr4320 entry.
	* config/mips/mips.md (define_attr cpu): Remove r4320.
	Remove vr4320 scheduler and uses of TARGET_MIPS4320.

2002-10-01  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.c (mips16_strings): New variable.
	(mips_output_function_epilogue): Clear the SYMBOL_REF_FLAG of every
	symbol in mips16_strings.  Free the list.
	(mips_encode_section_info): Keep track of local strings.

2002-10-01  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.md (bunge, bltgt, bungt): New define_expands.
	(sordered_df, sordered_sf): Remove.
	* config/mips/mips.c (get_float_compare_codes): New fn.
	(gen_int_relational, gen_conditional_move): Use it.

2002-10-01  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips-protos.h (mips_emit_fcc_reload): Declare.
	* config/mips/mips.h (PREDICATE_CODES): Add fcc_register_operand.
	* config/mips/mips.c (fcc_register_operand): New function.
	(mips_emit_fcc_reload): New function, extracted from reload_incc.
	(override_options): Allow TFmode values in float registers
	if ISA_HAS_8CC.
	* cnfig/mips/mips.md (reload_incc): Change destination prediate
	to fcc_register_operand.  Remove misleading source constraint.
	Use mips_emit_fcc_reload.
	(reload_outcc): Duplicate reload_incc.

2002-09-30  Ulrich Weigand  <uweigand@de.ibm.com>

	* longlong.h: Partially synchronize with GMP-4.1 version:
	Use i370 definitions also for s390.
	Add generic definition of umul_ppmm in terms of smul_ppmm.
	[s390] (umul_ppmm): Remove.
	[s390] (smul_ppmm): Fix incorrect assembler constraints.
	[s390] (smul_ppmm, sdiv_qrnnd): Rename __xx to __x.

2002-09-30  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/xtensa.h (REG_CLASS_NAMES, REG_CLASS_CONTENTS):
	Add new RL_REGS register class.
	(PREFERRED_RELOAD_CLASS, PREFERRED_OUTPUT_RELOAD_CLASS):
	Call xtensa_preferred_reload_class for both input and output reloads.
	* config/xtensa/xtensa.c (xtensa_regno_to_class): Use new RL_REGS class.
	(xtensa_preferred_reload_class): Handle output reloads; use RL_REGS
	instead of either AR_REGS or GR_REGS classes.
	(xtensa_secondary_reload_class): Use new RL_REGS class.
	* config/xtensa/xtensa-protos.h (xtensa_preferred_reload_class): Update.

2002-09-30  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.c (hppa_encode_label): Don't drop '*' from function labels.
	(pa_strip_name_encoding): Strip '@' and '*', in that order.
	* pa.h (ASM_OUTPUT_LABELREF): Output user_label_prefix except when
	there is a '*' prefix in NAME.

2002-09-30  Jan Hubicka  <jh@suse.cz>

	* reload.c (push_reload): Handle subregs and secondary memory.
	* reload1.c (gen_reload): Likewise.

	* jump.c (reg_or_subregno): New function.
	* rtl.h (reg_or_subregno): Declare
	* unroll.c (find_splittable_givs): Handle subregs.

2002-09-30  Mark Mitchell  <mark@codesourcery.com>

	* store-layout.c (finish_record_layout): Add free_p parameter.
	(layout_type): Pass it.
	* tree.h (finish_record_layout): Update prototype.

2002-09-30  Jan Hubicka  <jh@suse.cz>

	* i386.h (TARGET_CPP_CPU_BUILTINS): Define __SSE_MATH__.

	* gcse.c (cprop_jump): Check that the register has not
	been modified
	(cprop_jump): Likewise.

2002-09-30  Richard Earnshaw  <rearnsha@arm.com>

	* arm.h (BASE_REG_CLASS): Always return LO_REGS for Thumb.
	(MODE_BASE_REG_CLASS, case Thumb): Only return BASE_REGS if we know
	that we have a SImode access, and only then if reload hasn't completed;
	for all other cases, use LO_REGS.

2002-09-29  Richard Henderson  <rth@redhat.com>

	* real.c (real_from_string): Apply sign last.  Tidy exponent handling.

2002-09-29  Richard Henderson  <rth@redhat.com>

	PR c/8002
	* combine.c (force_to_mode): Handle FLOAT_MODE destinations
	for CONST_INT.

2002-09-29  David Edelsohn  <edelsohn@gnu.org>

	* real.h (ibm_extended_format): Declare.
	* real.c (encode_ibm_extended, decode_ibm_extended): New
	functions.

2002-09-29  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* darwin-protos.h (darwin_asm_output_dwarf_delta): Prototype.

	* ia64.c (ia64_hpux_asm_file_end): Const-ify.

2002-09-29  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* expmed.c (extract_bit_field): Fix bit-field extraction from SUBREGs.

2002-09-29  Kazu Hirata  <kazu@cs.umass.edu>

	* builtins.def: Fix comment formatting.
	* c-common.def: Likewise.
	* cfgcleanup.c: Likewise.
	* combine.c: Likewise.
	* gengtype.c: Likewise.
	* params.def: Likewise.
	* predict.def: Likewise.
	* rtl.def: Likewise.
	* stab.def: Likewise.
	* stor-layout.c: Likewise.
	* tree.def: Likewise.
	* config/darwin.c: Likewise.
	* config/darwin.h: Likewise.
	* config/dbxcoff.h: Likewise.
	* config/elfos.h: Likewise.
	* config/fp-bit.c: Likewise.
	* config/freebsd-spec.h: Likewise.
	* config/interix.h: Likewise.
	* config/libgloss.h: Likewise.
	* config/linux-aout.h: Likewise.
	* config/linux.h: Likewise.
	* config/lynx-ng.h: Likewise.
	* config/lynx.h: Likewise.
	* config/netbsd-aout.h: Likewise.
	* config/netbsd.h: Likewise.
	* config/netware.h: Likewise.
	* config/psos.h: Likewise.
	* config/ptx4.h: Likewise.

2002-09-28  Kazu Hirata  <kazu@cs.umass.edu>

	* ChangeLog.4: Fix typos.
	* ChangeLog.6: Likewise.
	* FSFChangeLog.10: Likewise.
	* genattrtab.c: Fix comment typos.
	* haifa-sched.c: Likewise.
	* real.c: Likewise.
	* tree.h: Likewise.
	* config/arm/arm.c: Likewise.
	* config/arm/crti.asm: Likewise.
	* config/arm/crtn.asm: Likewise.
	* config/frv/frv.c: Likewise.
	* config/frv/frv.md: Likewise.
	* config/h8300/h8300.md: Likewise.
	* config/i386/rtemself.h: Likewise.
	* config/ia64/unwind-ia64.c: Likewise.
	* config/ip2k/ip2k.h: Likewise.
	* config/m88k/m88k.c: Likewise.
	* config/m88k/m88k.md: Likewise.
	* config/mips/sr71k.md: Likewise.
	* config/mmix/mmix.c: Likewise.
	* config/rs6000/rs6000.c: Likewise.
	* config/sh/sh.md: Likewise.

2002-09-26  Theodore A. Roth  <troth@verinet.com>

	* config/avr/avr.c: Eliminate use of _PC_ in pc relative insns.
	* config/avr/avr.md: Ditto.

2002-09-27  Alexander N. Kabaev <ak03@gte.com>

	PR preprocessor/8055
	* cppmacro.c (stringify_arg): Do not overflow the buffer
	with the terminating NUL when the argument to be stringified
	has no tokens.

2002-09-27  Richard Henderson  <rth@redhat.com>

	* unroll.c (simplify_cmp_and_jump_insns): New.
	(unroll_loop): Use it.  Use simplify_gen_foo+force_operand
	instead of expand_simple_foo.

2002-09-27  Richard Henderson  <rth@redhat.com>

	PR optimization/7520
	* cfganal.c (flow_active_insn_p): New.
	(forwarder_block_p): Use it.

2002-09-27  Richard Henderson  <rth@redhat.com>

	* emit-rtl.c (active_insn_p): Revert last change.

2002-09-27  Jakub Jelinek  <jakub@redhat.com>

	* doc/extend.texi (tls_model): Document.
	* varasm.c (decl_tls_model): New.
	* c-common.c (handle_tls_model_attribute): New.
	(c_common_attribute_table): Add tls_model.
	* config/alpha/alpha.c (alpha_encode_section_info): Use
	decl_tls_model.
	* flags.h (enum tls_model, flag_tls_default): Move...
	* tree.h (enum tls_model, flag_tls_default): ...here.
	(decl_tls_model): New prototype.
	* config/ia64/ia64.c (ia64_encode_section_info): Likewise.
	* config/i386/i386.c (ix86_encode_section_info): Likewise.
	* config/i386/i386.md (tls_global_dynamic, tls_local_dynamic_base):
	Allow !flag_pic.

2002-09-27  Kazu Hirata  <kazu@cs.umass.edu>

	* LANGUAGES: Follow spelling conventions.
	* rtl.def: Likewise.
	* sbitmap.c: Likewise.
	* sched-int.h: Likewise.
	* sched-rgn.c: Likewise.
	* sibcall.c: Likewise.
	* simplify-rtx.c: Likewise.
	* ssa.c: Likewise.
	* stab.def: Likewise.
	* stmt.c: Likewise.
	* stor-layout.c: Likewise.
	* target.h: Likewise.
	* timevar.c: Likewise.
	* toplev.c: Likewise.
	* tree-dump.c: Likewise.
	* tree-inline.c: Likewise.
	* tree.c: Likewise.
	* tree.def: Likewise.
	* tree.h: Likewise.
	* unroll.c: Likewise.
	* varasm.c: Likewise.
	* vmsdbgout.c: Likewise.
	* treelang/treelang.texi: Likewise.
	* treelang/treetree.c: Likewise.

2002-09-27  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (compute_saved_regs): Use a macro
	instead of a hard register number.
	(get_shift_alg): Use an enumerated type instead of numbers.
	(h8300_shift_needs_scratch_p): Likewise.

2002-09-26  David S. Miller  <davem@redhat.com>

	PR optimization/7335
	* calls.c (emit_library_call_value_1): Passing args by reference
	converts a CONST function into a PURE one.

2002-09-26  David Edelsohn  <edelsohn@gnu.org>

	* dbxout.c (FORCE_TEXT): Switch to current_function_decl, not
	text_section.
	* xcoffout.h (DBX_STATIC_BLOCK_START): Remove explicit change to
	text section.
	* config/rs6000/rs6000.c (rs6000_override_options): Allow
	function-sections and data-sections functionality on AIX.

2002-09-26  David Edelsohn  <edelsohn@gnu.org>
	    Dale Johannesen  <dalej@apple.com>

	* config/rs6000/rs6000.c (rs6000_emit_move): Insert zero-extend
	in RTL for sub-word loads from memory.

2002-09-26  Richard Henderson  <rth@redhat.com>

	PR c/7160
	* sched-deps.c (sched_analyze_insn): Make clobber insns depend
	on call insns.

2002-09-26  Richard Henderson  <rth@redhat.com>

	* emit-rtl.c (const_double_htab_eq): Remove unused variable.

2002-09-26  Chris Lattner  <sabre@nondot.org>

	* ssa.c (rename_insn_1): Handle RENAME_NO_RTX correctly when
	handling undefined values.

2002-09-26  Richard Henderson  <rth@redhat.com>

	PR opt/7520
	* emit-rtl.c (active_insn_p): Consider a clobber of the
	function return value to be active even after reload.

2002-09-27  Alan Modra  <amodra@bigpond.net.au>

	* doloop.c (doloop_modify_runtime <biv skips initial incr>): Adjust
	by absolute loop increment, not loop increment.

2002-09-26  Kazu Hirata  <kazu@cs.umass.edu>

	* c-common.h: Follow spelling conventions.
	* cpplex.c: Likewise.
	* cpplib.h: Likewise.
	* gthr-dce.h: Likewise.
	* gthr-posix.h: Likewise.
	* optabs.c: Likewise.
	* output.h: Likewise.
	* profile.c: Likewise.
	* protoize.c: Likewise.
	* ra-rewrite.c: Likewise.
	* real.c: Likewise.
	* recog.c: Likewise.
	* reg-stack.c: Likewise.
	* regclass.c: Likewise.
	* regmove.c: Likewise.
	* reload.c: Likewise.
	* reload.h: Likewise.
	* reload1.c: Likewise.
	* reorg.c: Likewise.
	* resource.c: Likewise.
	* rtl.h: Likewise.
	* rtlanal.c: Likewise.

2002-09-26  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/ia64.c (ia64_expand_load_address): Ensure correct mode
	for symbol address.

2002-09-24  Eric Christopher  <echristo@redhat.com>

	* config/mips/elf.h: Add HANDLE_SYSV_PRAGMA.
	* config/mips/elf64.h: Ditto.

2002-09-24  Eric Christopher  <echristo@redhat.com>

	* except.c (expand_builtin_extract_return_address): Handle case
	where Pmode != ptr_mode.

2002-09-26  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux.h (ASM_OUTPUT_EXTERNAL_LIBCALL): New

2002-09-26  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux.h (TARGET_DEFAULT): Include TARGET_ILP32.

2002-09-26  Igor Shevlyakov <igor@microunity.com>

	* combine.c (simplify_set): Don't call to force_to_mode if size
	of integer type is larger than HOST_BITS_PER_WIDE_INT.

2002-09-26  Janis Johnson  <janis187@us.ibm.com>

	* Makefile.in (qmtest-g++): Fix file path.

2002-09-26  Ulrich Weigand  <uweigand@de.ibm.com>

	* expr.c (expand_expr) [MINUS_EXPR]: Convert A - const to
	A + (-const) on RTX level, even for unsigned types.

2002-09-26  Ulrich Weigand  <uweigand@de.ibm.com>

	* reload.c (dup_replacements): New function.
	(find_reloads): Use it to duplicate replacements at the top level
	of match_dup operands.

2002-09-26  Miles Bader  <miles@gnu.org>

	* v850.md ("length"): Change default value to 4.

2002-09-26  Kazu Hirata  <kazu@cs.umass.edu>

	* ChangeLog.1: Follow spelling conventions.
	* ChangeLog.4: Likewise.
	* ChangeLog.6: Likewise.
	* FSFChangeLog.11: Likewise.
	* doc/cpp.texi: Likewise.
	* doc/invoke.texi: Likewise.
	* doc/tm.texi: Likewise.

2002-09-26  Nick Clifton  <nickc@redhat.com>

	* config.gcc: Add x prefix to v850e case for handling
	--with-cpu=v850e.

2002-09-25  David S. Miller  <davem@redhat.com>

	PR target/7842
	* config/sparc/sparc.c (set_extends): SImode ASHIFT does not
	extend.

2002-09-25  Richard Henderson  <rth@redhat.com>

	* emit-rtl.c (const_double_htab_eq): Distinguish integer and
	fp CONST_DOUBLE; use real_identical.

2002-09-25  Mark Mitchell  <mark@codesourcery.com>

	* doc/invoke.texi: Add more -Wabi examples.

2002-09-25  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.h (TARGET_MIPS4100): Add missing bracket.

2002-09-24  Denis Chertykov  <denisc@overta.ru>

	* config/ip2k/ip2k.c (function_epilogue): Fix wrong numbers in
	cases of optimizing "add sp,w" to "inc sp".

2002-09-24  Adam Nemet  <anemet@lnxw.com>

	* config/arm/arm.c (thumb_unexpanded_epilogue): Don't generate
	epilogue for naked functions.

2002-09-24  Adam Nemet  <anemet@lnxw.com>
	    Nick Clifton  <nickc@redhat.com>

	* config/arm/arm.h (THUMB_FUNCTION_PROFILER): Remove.
	(FUNCTION_PROFILER): Only invoke THUMB_FUNCTION_PROFILER if it
	is defined.

2002-09-24  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (preferred_la_operand_p): New function.
	* config/s390/s390-protos.h (preferred_la_operand_p): Declare it.
	* config/s390/s390.md ("addaddr_esame", "*la_ccclobber"): Replace by ...
	("*la_64_cc", "*la_31_cc", splitters): ... these.
	("*la_31"): Deactivate for TARGET_64BIT.
	("*la_31_and", "*la_31_and_cc"): New.

2002-09-24  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* real.h (real_value): Make `exp' explicitly signed.

2002-09-24  Kazu Hirata  <kazu@cs.umass.edu>

	* config/elfos.h: Follow spelling conventions.
	* config/alpha/alpha.h: Likewise.
	* config/arc/arc.h: Likewise.
	* config/arm/arm.md: Likewise.
	* config/avr/avr.h: Likewise.
	* config/cris/cris.md: Likewise.
	* config/d30v/d30v.h: Likewise.
	* config/frv/frv.c: Likewise.
	* config/frv/frv.h: Likewise.
	* config/h8300/h8300.c: Likewise.
	* config/h8300/h8300.h: Likewise.
	* config/h8300/h8300.md: Likewise.
	* config/i386/cygwin.h: Likewise.
	* config/i386/i386.h: Likewise.
	* config/i386/sysv3.h: Likewise.
	* config/i960/i960.h: Likewise.
	* config/ia64/ia64.h: Likewise.
	* config/ia64/ia64.md: Likewise.
	* config/ip2k/ip2k.h: Likewise.
	* config/m32r/m32r.h: Likewise.
	* config/m68k/m68k.h: Likewise.
	* config/m88k/m88k.h: Likewise.
	* config/mcore/mcore.c: Likewise.
	* config/mcore/mcore.h: Likewise.
	* config/mcore/mcore.md: Likewise.
	* config/mips/mips.h: Likewise.
	* config/mmix/mmix.h: Likewise.
	* config/mmix/mmix.md: Likewise.
	* config/ns32k/netbsd.h: Likewise.
	* config/ns32k/ns32k.h: Likewise.
	* config/ns32k/ns32k.md: Likewise.
	* config/pa/pa.h: Likewise.
	* config/romp/romp.h: Likewise.
	* config/rs6000/rs6000.h: Likewise.
	* config/rs6000/rs6000.md: Likewise.
	* config/sparc/sparc.h: Likewise.
	* config/stormy16/stormy-abi: Likewise.
	* config/stormy16/stormy16.h: Likewise.
	* config/vax/vax.h: Likewise.

2002-09-23  Zack Weinberg  <zack@codesourcery.com>

	* version.c (version_string): Now const char[].
	* version.h: Update to match.

2002-09-23  Richard Henderson  <rth@redhat.com>

	* config/i386/i386.h (MASK_ACCUMULATE_OUTGOING_ARGS_SET, MASK_MMX_SET,
	MASK_SSE_SET, MASK_SSE2_SET, MASK_3DNOW_SET, MASK_3DNOW_A_SET): Kill.
	(TARGET_SWITCHES): Don't reference them.
	* config/i386/i386.c (override_options): Use target_flags_explicit
	to examine bits set by the user.

2002-09-23  Dale Johannesen  <dalej@apple.com>

	* dbxout.c (dbxout_parms):  Set current_sym_code for params
	passed on stack by invisible reference.

2002-09-23  Richard Earnshaw  <rearnsha@arm.com>

	* arm/unknown-elf.h (ASM_OUTPUT_ALIGNED_DECL_LOCAL): Always allocate
	at least one byte of space.

2002-09-23  Mark Mitchell  <mark@codesourcery.com>

	* c-common.h (flag_abi_version): Fix typo in comment.
	* doc/invoke.texi (flag_abi_version): Document default value.

2002-09-23  Hans-Peter Nilsson  <hp@axis.com>

	* doc/extend.texi (Extended Asm): Clarify that overlap between
	asm-declared register variables used in an asm and the asm clobber
	list is not allowed.
	* stmt.c (decl_conflicts_with_clobbers_p): New function.
	(expand_asm_operands): Keep track of clobbered registers.  Call
	decl_conflicts_with_clobbers_p for each input and output operand.
	If no conflicts found before, also do conflict sanity check when
	emitting clobbers.

2002-09-23  Richard Henderson  <rth@redhat.com>

	* c-common.c (cpp_define_data_format): Remove.
	(cb_register_builtins): Don't define __WCHAR_BIT__, __SHRT_BIT__,
	__INT_BIT__, __LONG_BIT__, __LONG_LONG_BIT__, __FLOAT_BIT__,
	__DOUBLE_BIT__, __LONG_DOUBLE_BIT__.
	* doc/cpp.texi: Don't document them either.
	(__SCHAR_MAX__, __SHRT_MAX__, __INT_MAX__, __LONG_MAX__,
	__LONG_LONG_MAX__): Document.
	(__TARGET_FLOAT_FORMAT__): Remove.

2002-09-23  Richard Henderson  <rth@redhat.com>

	* real.c (do_multiply): Normalize U before addition.

2002-09-23  Mark Mitchell  <mark@codesourcery.com>

	* c-common.c (flag_abi_version): New variable.
	* c-common.h (flag_abi_version): Declare it.
	* c-opts.c (missing_arg): Add -fabi-version.
	(c_common_decode_option): Process -fabi-version.
	* doc/invoke.texi (-fabi-version): Document it.
	(-Wabi): Add information about bit-fields in unions.

2002-09-22  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/mips/netbsd.h (SUBTARGET_ASM_SPEC): Always pass -KPIC
	unless -fno-pic or -fno-PIC is specified.

2002-09-22  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* c-common.c (preprocessing_trad_p): Define.
	* pa-hiux.h, pa-hpux.h, pa-hpux7.h (CPP_PREDEFINES): Delete.
	(TARGET_OS_CPP_BUILTINS, SUBTARGET_SWITCHES): Define.
	* pa-hpux10.h (TARGET_OS_CPP_BUILTINS, CPP_SPEC): Define.
	* pa-hpux11.h (TARGET_OS_CPP_BUILTINS): Define.
	* pa-linux.h (CPP_PREDEFINES): Delete.
	(TARGET_OS_CPP_BUILTINS, CPP_SPEC): Define.
	* pa32-linux.h, pa64-linux.h (CPP_SPEC): Delete.
	* pa-osf.h, pa-pro-end.h, rtems.h (CPP_PREDEFINES): Delete.
	(TARGET_OS_CPP_BUILTINS): Define.
	* pa.h (MASK_SIO, TARGET_SIO, TARGET_PA_10): Define.
	(TARGET_SWITCHES): Reformat.  Use N_() macro.  Add SUBTARGET_SWITCHES.
	(SUBTARGET_SWITCHES): Provide default definition.
	(TARGET_OPTIONS): Reformat.  Use N_() macro.
	(CPP_PA10_SPEC, CPP_PA11_SPEC, CPP_PA20_SPEC, CPP_64BIT_SPEC,
	CPP_CPU_DEFAULT_SPEC, CPP_64BIT_DEFAULT_SPEC, SUBTARGET_EXTRA_SPECS,
	EXTRA_SPECS, CPP_SPEC, CPLUSPLUS_CPP_SPEC, CPP_PREDEFINES): Delete.
	(TARGET_CPU_CPP_BUILTINS): Define.
	(TARGET_OS_CPP_BUILTINS): Define for BSD-like systems.
	* doc/invoke.texi (msio, mwsio): Document new hppa options.
	* doc/tm.texi (TARGET_CPU_CPP_BUILTINS): Document macro
	preprocessing_trad_p().

2002-09-22  Jason Thorpe  <thorpej@wasabisystems.com>

	* doc/install.texi: Document behavior of --with-headers and
	--with-libs when arguments are omitted.

2002-09-22  Kazu Hirata  <kazu@cs.umass.edu>

	* dbxout.c: Follow spelling conventions.
	* defaults.h: Likewise.
	* df.c: Likewise.
	* diagnostic.h: Likewise.
	* doloop.c: Likewise.
	* dwarf2out.c: Likewise.
	* dwarfout.c: Likewise.
	* emit-rtl.c: Likewise.
	* except.c: Likewise.
	* explow.c: Likewise.
	* expmed.c: Likewise.
	* expr.c: Likewise.
	* expr.h: Likewise.
	* flags.h: Likewise.
	* flow.c: Likewise.
	* fold-const.c: Likewise.
	* function.c: Likewise.
	* function.h: Likewise.
	* gcc.c: Likewise.
	* gcov-io.h: Likewise.
	* gcov.c: Likewise.
	* gcse.c: Likewise.
	* genattrtab.c: Likewise.
	* genconfig.c: Likewise.
	* genrecog.c: Likewise.
	* ggc-page.c: Likewise.
	* ggc.h: Likewise.
	* global.c: Likewise.
	* gthr-win32.h: Likewise.
	* integrate.c: Likewise.
	* jump.c: Likewise.
	* langhooks.c: Likewise.
	* langhooks.h: Likewise.
	* line-map.h: Likewise.
	* local-alloc.c: Likewise.
	* longlong.h: Likewise.
	* loop.c: Likewise.
	* loop.h: Likewise.

2002-08-27  Jan Hubicka  <jh@suse.cz>

	* i386.h (BIGGEST_FIELD_ALIGNMENT): Set proper default for x86_64.

2002-08-27  Jan Hubicka  <jh@suse.cz>

	* i386.c (overwrite_options): Set -mpreferred-stack-boundary to 128
	for -Os/TARGET_64BIT too.

2002-09-21  Kazu Hirata  <kazu@cs.umass.edu>

	* ChangeLog: Follow spelling conventions.
	* ChangeLog.0: Likewise.
	* ChangeLog.1: Likewise.
	* ChangeLog.2: Likewise.
	* ChangeLog.3: Likewise.
	* ChangeLog.4: Likewise.
	* ChangeLog.5: Likewise.
	* ChangeLog.6: Likewise.
	* FSFChangeLog.10: Likewise.
	* FSFChangeLog.11: Likewise.
	* alias.c: Likewise.
	* basic-block.h: Likewise.
	* c-aux-info.c: Likewise.
	* c-common.c: Likewise.
	* c-common.h: Likewise.
	* c-decl.c: Likewise.
	* c-format.c: Likewise.
	* c-semantics.c: Likewise.
	* c-typeck.c: Likewise.
	* calls.c: Likewise.
	* cfganal.c: Likewise.
	* cfgloop.c: Likewise.
	* collect2.c: Likewise.
	* combine.c: Likewise.
	* conflict.c: Likewise.
	* cppexp.c: Likewise.
	* cppfiles.c: Likewise.
	* cpphash.h: Likewise.
	* cppinit.c: Likewise.
	* cpplex.c: Likewise.
	* cpplib.c: Likewise.
	* cpplib.h: Likewise.
	* cppmacro.c: Likewise.
	* cse.c: Likewise.

2002-09-21  Richard Earnshaw  <rearnsha@arm.com>

	* netbsd-aout.h (NETBSD_LINK_SPEC_AOUT): New, takes old definition of
	LINK_SPEC.
	(LINK_SPEC): Define to NETBSD_LINK_SPEC_AOUT.
	* arm/netbsd.h (SUBTARGET_EXTRA_SEPCS): Add NETBSD_LINK_SPEC_AOUT.
	(LINK_SPEC): Rework to use NETBSD_LINK_SPEC_AOUT).

2002-09-21  Richard Earnshaw  <rearnsha@arm.com>

	PR opt/7930
	* cse.c (fold_rtx): Calculate old_cost before we fold each
	operand.

2002-09-21  Richard Henderson  <rth@redhat.com>

	* c-common.c (cpp_define_data_format): Remove __GCC_LITTLE_ENDIAN__,
	__GCC_BIG_ENDIAN__, __TARGET_BITS_ORDER__, __TARGET_BYTES_ORDER__,
	__TARGET_INT_WORDS_ORDER__, __TARGET_FLOAT_WORDS_ORDER__,
	__TARGET_USES_VAX_F_FLOAT__, __TARGET_USES_VAX_D_FLOAT__,
	__TARGET_USES_VAX_G_FLOAT__, __TARGET_USES_VAX_H_FLOAT__.
	* doc/cpp.texi: Don't document them.

2002-09-21  Richard Henderson  <rth@redhat.com>

	* c-common.c (builtin_define_float_constants): Use real_format
	to get the floating-point parameters.

2002-09-21  Richard Henderson  <rth@redhat.com>

	* real.c (struct real_format): Move to real.h.
	(real_format_for_mode): Rename from fmt_for_mode; update all users;
	initialize with ieee defaults.
	(real_to_target_fmt, real_from_target_fmt): New.
	(ieee_single_format, ieee_double_format, ieee_extended_motorola_format,
	ieee_extended_intel_96_format, ieee_extended_intel_128_format,
	ieee_quad_format, i370_single_format, i370_double_format,
	c4x_single_format, c4x_extended_format): Rename from s/_format//.
	(ieee_quad_format): Fix emin.
	(format_for_size, init_real_once): Remove.
	* real.h (struct real_format): Move from real.c.
	(real_format_for_mode): Declare.
	(real_to_target_fmt, real_from_target_fmt): Declare.
	(ieee_single_format, ieee_double_format, ieee_extended_motorola_format,
	ieee_extended_intel_96_format, ieee_extended_intel_128_format,
	ieee_quad_format, vax_f_format, vax_d_format, vax_g_format,
	i370_single_format, i370_double_format, c4x_single_format,
	c4x_extended_format): Declare.
	* toplev.c (do_compile): Don't call init_real_once.

	* defaults.h (INTEL_EXTENDED_IEEE_FORMAT): Remove.
	* doc/tm.texi (INTEL_EXTENDED_IEEE_FORMAT): Remove.

	* config/alpha/alpha.h (TARGET_FLOAT_FORMAT): Define.
	* config/alpha/osf5.h (LONG_DOUBLE_TYPE_SIZE): 64, if vax mode.
	* config/alpha/alpha.c (override_options): Set real_format_for_mode
	for VAX, if enabled.

	* config/c4x/c4x.c (c4x_override_options): Set real_format_for_mode
	for C4X.

	* config/i370/i370.h (OVERRIDE_OPTIONS): New.
	* config/i370/i370.c (override_options): New.
	* config/i370/i370-protos.h: Update.

	* config/i386/i386.c (override_options): Set real_format_for_mode
	for Intel 80-bit extended.
	* config/i386/i386.h (INTEL_EXTENDED_IEEE_FORMAT): Remove.

	* config/i960/i960.h (LONG_DOUBLE_TYPE_SIZE): Mind -mlong-double-64.
	(OVERRIDE_OPTIONS): Move code...
	* config/i960/i960.c (i960_initialize): ... here.  Set
	real_format_for_mode for Intel 80-bit extended.

	* config/ia64/ia64.c (ia64_override_options): Set real_format_for_mode
	for Intel 80-bit extended, if enabled.

	* config/m68k/m68k.c (override_options): Set real_format_for_mode
	for Motorola 96-bit extended.

	* config/vax/vax.h (OVERRIDE_OPTIONS): New.
	* config/vax/vax.c (override_options): New.
	* config/vax/vax-protos.h: Update.

2002-09-21  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.md (builtin_setjmp_receiver): Add
	#if TARGET_MACHO.

	* config/rs6000/rs6000.md (floatdisf2_internal2): Combine
	insns.  Supply missing clobber of scratch reg.

2002-09-20  Kazu Hirata  <kazu@cs.umass.edu>

	* config/m32r/m32r.c: Follow spelling conventions.
	* config/m32r/m32r.h: Likewise.
	* config/m32r/m32r.md: Likewise.
	* config/m68k/m68k.c: Likewise.
	* config/m88k/m88k.c: Likewise.
	* config/mcore/mcore.c: Likewise.
	* config/mips/mips.c: Likewise.
	* config/mips/mips.h: Likewise.
	* config/mmix/mmix.c: Likewise.
	* config/mn10200/mn10200.c: Likewise.
	* config/ns32k/ns32k.h: Likewise.
	* config/pa/pa.c: Likewise.
	* config/pa/pa64-linux.h: Likewise.
	* config/pdp11/pdp11.h: Likewise.
	* config/romp/romp.c: Likewise.
	* config/romp/romp.h: Likewise.
	* config/rs6000/eabi.asm: Likewise.
	* config/rs6000/linux64.h: Likewise.
	* config/rs6000/rs6000.c: Likewise.
	* config/rs6000/rs6000.h: Likewise.
	* config/rs6000/rs6000.md: Likewise.
	* config/rs6000/sysv4.h: Likewise.
	* config/rs6000/xcoff.h: Likewise.

2002-09-20  Jim Wilson  <wilson@redhat.com>

	* config/v850/v850/lib1funcs.asm (__muldi3): Change r5 to r28.

2002-09-20  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/i386.md (UNSPEC_GOTNTPOFF, UNSPEC_INDNTPOFF): New.
	* config/i386/i386.c (legitimate_pic_address_disp_p): Handle
	UNSPEC_GOTNTPOFF and UNSPEC_INDNTPOFF like UNSPEC_GOTTPOFF.
	(legitimate_address_p): Likewise.
	(legitimize_address): Use @gotntpoff and @indntpoff.
	(output_pic_addr_const): Handle UNSPEC_GOTNTPOFF and UNSPEC_INDNTPOFF.
	(output_addr_const_extra): Likewise.

2002-09-20  Jim Wilson  <wilson@redhat.com>

	* combine.c (try_combine): When split an instruction pair, where the
	first has a sign_extend src, verify that the src and dest modes match.

2002-09-20  Richard Henderson  <rth@redhat.com>

	* config/mips/mips.c (dfhigh, dflow, sfhigh, sflow): Remove.
	(override_options): Do not initialize them.
	(mips_const_double_ok): Allow no fp constants except zero,
	and not even that for mips16.
	(const_float_1_operand): Use dconst1.
	* config/mips/mips.md (movsf, movsf_internal1, movsf_internal2,
	movdf, movdf_internal1, movdf_internal1a, movdf_internal2):
	Don't allow arbitrary constants; fix predicates and C constraint.

2002-09-20  Neil Booth  <neil@daikokuya.co.uk>

	* cppmacro.c: Don't warn about function-like macros without
	'(' during pre-expansion.

2002-09-20  Jim Wilson  <wilson@redhat.com>

	* config/v850/v850.c (current_function_anonymous_args): Delete.
	(expand_prologue): Use current_function_args_info.anonymous_args.
	(expand_epilogue): Delete use of current_function_anonymous_args.
	* config/v850/v850.h (struct cum_arg): Add anonymous_args field.
	(INIT_CUMULATIVE_ARGS): Clear anonymous_args field.
	(current_function_anonymous_args): Delete extern declaration.
	(SETUP_INCOMING_VARARGS): Set anonymous_args field.

2002-09-20  Geoffrey Keating  <geoffk@apple.com>

	* config/rs6000/rs6000.c (rs6000_emit_prologue): Update for change
	to load_macho_picbase.
	* config/rs6000/rs6000.md: Document Darwin-specific unspec IDs.
	(load_macho_picbase): Take the symbol to use as a parameter.
	(macho_correct_pic): New insn.
	(builtin_setjmp_reciever): On Darwin, restore the PIC register.

	* config/rs6000/rs6000.h (ELIMINABLE_REGS): Use
	RS6000_PIC_OFFSET_TABLE_REGNUM rather than hardcoding 30.
	(CAN_ELIMINATE): Likewise.
	(INITIAL_ELIMINATION_OFFSET): Likewise.
	(TOC_REGISTER): Likewise.

2002-09-20  Richard Henderson  <rth@redhat.com>

	* real.c (real_hash): New.
	* real.h: Declare it.
	* cse.c (canon_hash): Use it.
	* cselib.c (hash_rtx): Likewise.
	* emit-rtl.c (const_double_htab_hash): Likewise.
	* rtl.h (CONST_DOUBLE_REAL_VALUE): New.
	* varasm.c (struct rtx_const): Reduce vector size; separate
	integer and fp vectors.
	(HASHBITS): Remove.
	(const_hash_1): Rename from const_hash.  Use real_hash.  Do not
	take modulus MAX_HASH_TABLE.
	(const_hash): New.  Do take modulus MAX_HASH_TABLE.
	(output_constant_def): Do not take modulus MAX_HASH_TABLE.
	(SYMHASH): Don't use HASHBITS.
	(decode_rtx_const): Copy only active bits from REAL_VALUE_TYPE.
	Fix CONST_VECTOR thinko wrt fp vectors.  Fix kind comparison.
	(simplify_subtraction): Fix kind comparison.
	(const_hash_rtx): Return unsigned int.  Don't use HASHBITS.
	Use a union to pun integer array.
	* config/rs6000/rs6000.c (rs6000_hash_constant): Use real_hash;
	only hash two words of integral CONST_DOUBLE.

2002-09-20  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux.h (STARTFILE_SPEC): Modify.
	(STARTFILE_PREFIX_SPEC): New.
	(LINK_SPEC): Modify.
	(LIB_SPEC): Modify.
	(LIBGCC_SPEC): New.

2002-09-20  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/i386.c (legitimate_pic_address_disp_p): Allow
	UNSPEC_NTPOFF and UNSPEC_DTPOFF to be offsetted by constant.

2002-09-20  Jeroen Dobbelaere  <jeroen.dobbelaere@acunia.com>

	* config/arm/arm.md (sign_extract_onebit, not_signextract_onebit):
	Add clobber of the condition code register.

2002-09-20  Richard Henderson  <rth@redhat.com>

	* real.c (do_fix_trunc): Static.
	(encode_ieee_single, encode_ieee_double, encode_ieee_extended,
	encode_ieee_quad, encode_vax_f, encode_vax_d, encode_vax_g,
	encode_i370_single, encode_i370_double, encode_c4x_single,
	encode_c4x_extended): Add default abort case.

2002-09-20  Richard Henderson  <rth@redhat.com>

	* real.h (enum real_value_class, SIGNIFICAND_BITS, EXP_BITS,
	MAX_EXP, SIGSZ, SIG_MSB, struct real_value): Move from real.c.
	(struct realvaluetype): Remove.
	(REAL_VALUE_TYPE): Use struct real_value.
	(REAL_VALUE_TYPE_SIZE): Use SIGNIFICAND_BITS.
	(test_real_width): New.
	* real.c: Global replace struct real_value with REAL_VALUE_TYPE.
	(real_arithmetic): Avoid hoops for REAL_VALUE_TYPE parameters.
	(real_compare, real_exponent, real_ldexp, real_isinf, real_isnan,
	real_isneg, real_isnegzero, real_identical, exact_real_inverse,
	real_to_integer, real_to_integer2, real_to_decimal,
	real_to_hexadecimal, real_from_string, real_from_integer,
	real_inf, real_nan, real_2expN, real_convert, real_to_target,
	real_from_target): Likewise.
	* tree.h (struct tree_real_cst): Use real_value not realvaluetype.
	* gengtype-yacc.y (bitfieldopt): Accept an ID as well.

2002-09-20  Richard Henderson  <rth@redhat.com>

	* real.h (UNKNOWN_FLOAT_FORMAT, IEEE_FLOAT_FORMAT, VAX_FLOAT_FORMAT,
	IBM_FLOAT_FORMAT, C4X_FLOAT_FORMAT, TARGET_FLOAT_FORMAT): Move ...
	* defaults.h: ... here.
	* config/arm/arm.h, config/avr/avr.h, config/d30v/d30v.h,
	config/fr30/fr30.h, config/frv/frv.h, config/ia64/ia64.h,
	config/ip2k/ip2k.h, config/mips/mips.h, config/stormy16/stormy16.h,
	config/xtensa/xtensa.h (TARGET_FLOAT_FORMAT): Remove.

2002-09-20  Hans-Peter Nilsson  <hp@bitrange.com>

	* config/mmix/mmix.md ("negdf2"): Rewrite.
	("*expanded_negdf2"): New.

2002-09-19  Jim Wilson  <wilson@redhat.com>

	* combine.c (simplify_set): When optimizing a subreg src with a
	cc0 dest, use GET_MODE (src) for mask instead of inner_mode.

2002-09-19  Dale Johannesen <dalej@apple.com>
	* combine.c (make_extraction): Don't create
	invalid subreg.

2002-09-19  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (addr_generation_dependency_p): Handle SUBREG
	and STRICT_LOW_PART within SET_DEST.
	* config/s390/s390.md ("*extractqi", "*extracthi"): New insns with
	splitters, replacing pre-reload splitters.
	("*zero_extendhisi2_31", "*zero_extendqisi2_31",
	"*zero_extendqihi2_31"): New insns.
	("*zero_extendqihi2_64"): Do not clobber CC.

2002-09-19  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux.h (CTORS_SECTION_ASM_OP): New.
	(DTORS_SECTION_ASM_OP): Ditto.
	(READONLY_DATA_SECTION_ASM_OP): Moved.
	(DATA_SECTION_ASM_OP): New.
	(SDATA_SECTION_ASM_OP): New.
	(BSS_SECTION_ASM_OP): New.
	(SBSS_SECTION_ASM_OP): New.
	(TEXT_SECTION_ASM_OP): New.

2002-09-19  Kazu Hirata  <kazu@cs.umass.edu>

	* config/fp-bit.c: Follow spelling conventions.
	* config/d30v/d30v.c: Likewise.
	* config/d30v/d30v.h: Likewise.
	* config/fr30/fr30.c: Likewise.
	* config/fr30/fr30.h: Likewise.
	* config/fr30/fr30.md: Likewise.
	* config/frv/frv.c: Likewise.
	* config/frv/frv.h: Likewise.
	* config/h8300/h8300.c: Likewise.
	* config/h8300/lib1funcs.asm: Likewise.
	* config/i370/i370.c: Likewise.
	* config/i386/i386.h: Likewise.
	* config/i386/i386.md: Likewise.
	* config/i386/pentium.md: Likewise.
	* config/i386/winnt.c: Likewise.
	* config/i960/i960.c: Likewise.
	* config/ia64/ia64.h: Likewise.
	* config/ip2k/ip2k.c: Likewise.
	* config/ip2k/ip2k.h: Likewise.
	* config/ip2k/ip2k.md: Likewise.
	* config/ip2k/libgcc.S: Likewise.

2002-09-19  Stephen Clarke <stephen.clarke@superh.com>

	* config/sh/sh.h (UNSPEC_GOTOFF_P): Define.
	(GOTOFF_P): Extend to allow gotoff plus constant.

2002-09-18  Richard Henderson  <rth@redhat.com>

	* ifcvt.c (noce_process_if_block): Correctly detect X modified
	with INSN_B before COND_EARLIEST.  Don't check A and B for
	modification in condition range.  Reorder INSN_B for A==B properly.
	(if_convert): Iterate until no matches for a block.

2002-09-18  Richard Henderson  <rth@redhat.com>

	* calls.c (store_one_arg): Rename default_align to parm_align;
	always adjust parm_align for downward padding.

2002-09-18  Richard Henderson  <rth@redhat.com>

	* toplev.c (backend_init): Move init_real_once invocation ...
	(do_compile): ... here.

2002-09-18  Richard Henderson  <rth@redhat.com>

	* sibcall.c (optimize_sibling_and_tail_recursive_call): Also remove
	RTX_UNCHANGING_P markers for successful tail-recursive replacement.

2002-09-18  Richard Henderson  <rth@redhat.com>

	* real.c (round_for_format): Collect sticky as unsigned long, not bool.

2002-09-19  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.md: (floatdisf2): Rename to
	floatdisf2_internal1.
	(floatdisf2): New define_expand.
	(floatdisf2_internal2): Likewise.

2002-09-18  Richard Henderson  <rth@redhat.com>

	* real.c (sticky_rshift_significand): Collect sticky as
	unsigned long, not bool.

2002-09-18  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_address_cost): New function.
	config/s390/s390-protos.h (s390_address_cost): Add prototype.
	config/s390/s390.h (ADDRESS_COST): Call s390_address_cost.
	(RTX_COST): Use COSTS_N_INSNS.

2002-09-18  Douglas Rupp  <rupp@gnat.com>
	    Donn Terry  <donnte@microsoft.com>

	* stor-layout.c (place_field): Handle alignment of whole
	structures when MSVC compatible bitfields are involved.
	Change method of computing location of MS bitfields to
	be compatible with #pragma pack(n).

	* tree.h (record_layout_info): Add new field
	remaining_in_alignment.

	* doc/tm.texi: (TARGET_MS_BITFIELD_LAYOUT_P): Update.
	(pragma pack): Add paragraph on MSVC bit-field packing.

2002-09-18  Richard Earnshaw  (reanrsha@arm.com)

	PR optimization/7967
	* arm.md (ne_zeroextractsi): Add clobber of the condition code
	register.

2002-09-18  Kazu Hirata  <kazu@cs.umass.edu>

	* config/s390/s390.c: Follow spelling conventions.
	* config/sh/lib1funcs.asm: Likewise.
	* config/sh/sh.c: Likewise.
	* config/sh/sh.h: Likewise.
	* config/sparc/sparc.c: Likewise.
	* config/sparc/sparc.h: Likewise.
	* config/sparc/sparc.md: Likewise.
	* config/stormy16/stormy16.c: Likewise.
	* config/stormy16/stormy16.h: Likewise.
	* config/v850/v850.c: Likewise.
	* config/v850/v850.h: Likewise.
	* config/vax/vax.c: Likewise.
	* config/vax/vax.h: Likewise.

2002-09-18  Nick Clifton  <nickc@redhat.com>

	* config/rs60000/rs6000.c (rs6000_emit_move): Handle V1DImode moves.
	* config/rs60000/rs6000.c (SPE_VECTOR_MODE): Include V1DImode.
	* config/rs6000/spe.md (movv1di, movv1di_internal): New patterns.

2002-09-17  Zack Weinberg  <zack@codesourcery.com>

	* ABOUT-GCC-NLS: Remove reference to enquire, and out-of-date
	statement that the only translation is to en_UK.

2002-09-17  Kazu Hirata  <kazu@cs.umass.edu>

	* config/alpha/alpha.c: Follow spelling conventions.
	* config/alpha/alpha.h: Likewise.
	* config/alpha/alpha.md: Likewise.
	* config/arc/arc.h: Likewise.
	* config/arm/arm.c: Likewise.
	* config/arm/arm.h: Likewise.
	* config/arm/arm.md: Likewise.
	* config/arm/pe.c: Likewise.
	* config/arm/unknown-elf.h: Likewise.
	* config/avr/avr.c: Likewise.
	* config/avr/avr.h: Likewise.
	* config/c4x/c4x.c: Likewise.
	* config/cris/cris.c: Likewise.
	* config/cris/cris.h: Likewise.

2002-09-17  Samuel Figueroa  <figueroa@apple.com>

	* final.c (final_scan_insn): Use new macro ASM_OUTPUT_ALIGN_WITH_NOP.
	* config/sparc/sparc.h (ASM_OUTPUT_ALIGN_WITH_NOP) New macro.
	* doc/tm.texi (ASM_OUTPUT_ALIGN_WITH_NOP) New description.

2002-09-17  Dale Johannesen  <dalej@apple.com>

	* cfgcleanup.c (try_forward_edges):  Do not forward a
	branch to just after a loop exit before loop optimization;
	this interfered with doloop detection.

2002-09-17  Nick Clifton  <nickc@redhat.com>

	* config/arm/arm.c (output_return_instruction): Do not
	writeback the stack pointer when it is being loaded.
	(arm_output_epilogue): Likewise.

2002-09-17  Kazu Hirata  <kazu@cs.umass.edu>

	* optabs.c (prepare_cmp_insn): Let emit_library_call_value
	generate a pseudo reg that receives the result of a libcall.
	(prepare_float_lib_cmp): Likewise.

2002-09-17  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/elf.h: Remove CPP_PREDEFINES.

2002-09-17  Nicola Pero  <n.pero@mi.flashnet.it>

	Fix PR/7014 and related objc bugs:
	* c-typeck.c (comp_target_types): Added a reflexive argument.
	Pass it to ObjC when/if calling objc_comptypes().  Updated all
	callers to provide the appropriate reflexive argument.
	* objc/objc-act.c (objc_comptypes): Carefully checked and fixed
	typechecking for all cases of comparisons and assignments,
	particularly the obscure and less common ones involving protocols.

2002-09-17  Nick Clifton  <nickc@redhat.com>

	* machmode.def (V1DImode): New mode.  A single element vector.
	* tree.h (TI_UV1DI_TYPE, TI_V1DI_TYPE): New tree_index enums.
	(unsigned_V1DI_type_node, V1D1_type_node): New type nodes.
	* tree.c (build_common_tree_nodes_2): Build
	unsigned_V1DI_type_node and V1D1_type_node.
	* c-common.c (c_common_type_for_mode): Return
	unsigned_V1DI_type_node or V1D1_type_node for V1DImode.
	* rtl.c (class_narrowest_): Start integer vector nodes with V1DImode.

2002-09-17  Nicola Pero  <n.pero@mi.flashnet.it>

	* doc/objc.texi (Constant string objects): Extended documentation
	to make clear that the constant string class ivar layout is
	completely fixed.

2002-09-17  Roger Sayle  <roger@eyesopen.com>

	* cfgrtl.c (flow_delete_block_noexpunge): Delete orphaned
	NOTE_INSN_LOOP_CONT notes when deleting basic blocks.

2002-09-16  Richard Henderson  <rth@redhat.com>

	* expr.c (emit_block_move): Set memory block size as appropriate
	for the copy.

2002-09-16  Richard Henderson  <rth@redhat.com>

	PR fortran/3924
	* sdbout.c (sdbout_symbol): Don't handle offsets from a symbol.

2002-09-16  Richard Henderson  <rth@redhat.com>

	* emit-rtl.c (set_mem_attributes_minus_bitpos): Adjust SIZE
	as well as OFFSET for BITPOS.

2002-09-16  Jeff Garzik  <jgarzik@mandrakesoft.com>

	* config.gcc: Treat winchip_c6-*|winchip2-*|c3-* as pentium-mmx.
	* config/i386/i386.c (processor_alias_table): Add winchip-c6,
	winchip2 and c3.
	* doc/invoke.texi: Mention new aliases.

2002-09-16  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* calls.c (store_one_arg): Set default alignment for BLKmode arguments
	to BITS_PER_UNIT when ARGS_GROW_DOWNWARD and the padding direction is
	downward.
	* function.c (pad_below):  Always compile.
	(locate_and_pad_parm): If defined ARGS_GROW_DOWNWARD, pad argument to
	alignment when it is not in a register or REG_PARM_STACK_SPACE is true.
	Pad below when the argument is not in a register and the padding
	direction is downward.

	* pa-64.h (MUST_PASS_IN_STACK): Move define to pa.h.
	(PAD_VARARGS_DOWN): Define.
	* pa.c (function_arg_padding): Revise padding directions to make them
	compatible with the 32 and 64-bit runtime architecture documentation.
	(hppa_va_arg):  Add code to handle variable and size zero arguments
	passed by reference on TARGET_64BIT.  Reformat.
	(function_arg): Use a PARALLEL for BLKmode and aggregates args on
	TARGET_64BIT.  Use a DImode PARALLEL for BLKmode args 5 to 8 bytes
	wide when !TARGET_64BIT.  Move forward check for mode==VOIDmode.
	Add comments.
	* pa.h (MAX_PARM_BOUNDARY): Correct define for TARGET_64BIT.
	(RETURN_IN_MEMORY): Return size zero types in memory.
	(FUNCTION_VALUE): Return TFmode in general registers.
	(MUST_PASS_IN_STACK): Define.
	(FUNCTION_ARG_BOUNDARY): Simplify.
	(FUNCTION_ARG_PASS_BY_REFERENCE): Pass variable and zero sized types
	by reference.
	(FUNCTION_ARG_CALLEE_COPIES): Define to FUNCTION_ARG_PASS_BY_REFERENCE.

2002-09-16  Richard Henderson  <rth@redhat.com>

	* real.c (do_fix_trunc): New.
	(real_arithmetic): Call it.
	* simplify-rtx.c (simplify_unary_operation): Handle FIX
	with a floating-point result mode.

2002-09-16  Richard Henderson  <rth@redhat.com>

	* builtin-types.def (BT_FN_FLOAT_CONST_STRING): New.
	(BT_FN_DOUBLE_CONST_STRING, BT_FN_LONG_DOUBLE_CONST_STRING): New.
	* builtins.def (__builtin_nan, __builtin_nanf, __builtin_nanl): New.
	(__builtin_nans, __builtin_nansf, __builtin_nansl): New.
	* builtins.c (fold_builtin_nan): New.
	(fold_builtin): Call it.
	* real.c (real_nan): Parse a non-empty string.
	(round_for_format): Fix NaN significand truncation.
	* real.h (real_nan): Return bool.
	* doc/extend.texi: Document new builtins.

2002-09-16  Jason Merrill  <jason@redhat.com>
	    Danny Smith  <dannysmith@users.sourceforge.net>

	* config/i386/winnt.c (ix86_handle_dll_attribute): Set
	DECL_EXTERN and TREE_PUBLIC for dllimported variables here...
	(i386_pe_mark_dllimport): Not here.

2002-09-16  Nathan Sidwell  <nathan@codesourcery.com>

	* c-semantics.c (genrtl_do_stmt): Cope with NULL cond.

2002-09-16  Geoffrey Keating  <geoffk@redhat.com>

	* config/rs6000/rs6000.c (build_mask64_2_operands): Suppress
	warnings about unused operands when HOST_BITS_PER_WIDE_INT is
	< 64.
	(rs6000_emit_cmove): Use real_isinf not target_isinf.

2002-09-16  Kazu Hirata  <kazu@cs.umass.edu>

	* calls.c (emit_library_call_value_1): Don't refer to
	hard_libcall_value.
	* optabs.c (prepare_float_lib_cmp): Likewise.

2002-09-16  Geoffrey Keating  <geoffk@apple.com>

	* ggc-common.c (ggc_mark_rtx_children_1): Update for changed name
	mangling.

	The following changes are merged from pch-branch:

	* doc/gty.texi (GTY Options): Document %a.
	* gengtype.c (do_scalar_typedef): New function.
	(process_gc_options): Handle `length' option.
	(set_gc_used_type): A pointer to an array of structures doesn't
	qualify as a pointer to a structure.
	(output_escaped_param): Add `%a' escape.
	(write_gc_structure_fields): Allow 'desc' on array of unions.
	(main): Define `uint8', `jword' and `JCF_u2' as scalars; use
	do_scalar_typedef.

	* gengtype.c (enum rtx_code): Make global.
	(rtx_format): Make global.
	(rtx_next): New.
	(gen_rtx_next): New.
	(write_rtx_next): New.
	(adjust_field_rtx_def): Skip fields marked by chain_next.
	(open_base_files): Delete redundant prototype.
	(write_enum_defn): New.
	(output_mangled_typename): Correct abort call.
	(write_gc_marker_routine_for_structure): Handle chain_next and
	chain_prev options.
	(finish_root_table): Don't output redundant \n.
	(main): Call gen_rtx_next, write_rtx_next, write_enum_defn.
	* c-tree.h (union lang_tree_node): Add chain_next option.

	* gengtype.h (NUM_PARAM): New definition.
	(struct type): For TYPE_PARAM_STRUCT, allow multiple parameters.
	* gengtype.c (find_param_structure): New.
	(adjust_field_type): Handle param<n>_is option.
	(process_gc_options): Detect use_params option.  Update callers.
	(set_gc_used_type): Add 'param' parameter, update callers.  Handle
	'use_params' option.
	(open_base_files): Add splay-tree.h to list of files included.
	(output_mangled_typename): New.
	(write_gc_structure_fields): Update 'param' parameter to support
	multiple parameters.  Change name mangling.  Allow parameterized
	fields to have an apparent scalar type.  Handle param<n>_is options,
	use_param option.
	(write_gc_marker_routine_for_structure): Update for change to name
	mangling.  Better guess the output file for parameterized types.
	(write_gc_types): Update for change to name mangling.
	(write_gc_root): Update for change to name mangling.  Handle (ignore)
	param<n>_is options.
	* doc/gty.texi (GTY Options): Add description of param<n>_is
	options, use_params option.
	* ggc.h (ggc_mark_rtx): Update for changed name mangling.
	* gengtype-lex.l: Produce token for param<n>_is.
	* gengtype-yacc.y: Parse param<n>_is.

	* gengtype.c (adjust_field_tree_exp): Don't name a variable 'rindex'.

	* rtl.c: Update comment describing rtx_format.
	* rtl.h (union rtunion): Separate definition and typedef.
	(struct rtx_def): Use gengtype to mark.
	* Makefile.in (gengtype.o): Also depend on rtl.def.
	* ggc.h (ggc_mark_rtx_children): Delete prototype.
	(ggc_mark_rtx): Change to alias of gengtype-generated routine.
	* ggc-common.c (ggc_mark_rtx_children): Delete.
	(ggc_mark_rtx_children_1): Delete.
	(gt_ggc_m_rtx_def): Delete.
	* gengtype.c (adjust_field_rtx_def): New.
	(adjust_field_type): Call adjust_field_rtx_def.
	(write_gc_structure_fields): Add 'default' case to switch if none
	is specified; remove unused code.

	* tree.h (struct tree_exp): Update for change to meaning
	of special.
	* gengtype.c (adjust_field_tree_exp): New function.
	(adjust_field_type): Handle `tree_exp' special here.
	(write_gc_structure_fields): Don't handle `tree_exp' special here.
	Handle new `dot' option.

	* gengtype.h: Make `info' a pointer-to-const.
	* gengtype-yacc.y (yacc_ids): Use xasprintf.

	* gengtype.c (write_gc_structure_fields): Remove implementation
	of `always' option, add `default' option.
	* doc/gty.texi (GTY Options): Remove documentation of `always',
	add `default'.

2002-09-16  Hans-Peter Nilsson  <hp@bitrange.com>

	* output.h: Remove #ifdef RTX_CODE and #ifdef TREE_CODE.

2002-09-16  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* m68hc11.md (addhi_sp): Fix uninitialized variable bug.

	* c4x-c.c, c4x.c, darwin.c, i370-c.c, m32r.c: Include tm_p.h
	instead of the *-protos.h file directly.
	* t-c4x, t-i370, t-v850: Depend on $(TM_P_H).
	* darwin.c (machopic_output_stub): Move prototype ...
	* darwin-protos.h (machopic_output_stub): ... here.
	* rs6000-protos.h (machopic_output_stub): Don't declare.

2002-09-16  Richard Henderson  <rth@redhat.com>

	* c-common.c (builtin_define_float_constants): Emit __FOO_DENORM_MIN__.

2002-09-16  Richard Henderson  <rth@redhat.com>

	* real.c, real.h: Rewrite from scratch.

	* Makefile.in (simplify-rtx.o): Depend on TREE_H.
	(paranoia): New target.
	* builtins.c (fold_builtin_inf): Use new real.h interface.
	* c-common.c (builtin_define_with_hex_fp_value): Likewise.
	* c-lex.c (interpret_float): Likewise.
	* emit-rtl.c (gen_lowpart_common): Likewise.
	* optabs.c (expand_float): Use real_2expN.
	* config/ia64/ia64.md (divsi3, udivsi3): Likewise.
	* defaults.h (INTEL_EXTENDED_IEEE_FORMAT): New.
	(FLOAT_WORDS_BIG_ENDIAN): New.
	* cse.c (find_comparison_args): Don't pass FLOAT_STORE_FLAG_VALUE
	directly to REAL_VALUE_NEGATIVE.
	* loop.c (canonicalize_condition): Likewise.
	* simplify-rtx.c: Include tree.h.
	(simplify_unary_operation): Don't handle FIX and UNSIGNED_FIX
	with floating-point result modes.
	* toplev.c (backend_init): Call init_real_once.

	* fold-const.c (force_fit_type): Don't call CHECK_FLOAT_VALUE.
	* tree.c (build_real): Likewise.
	* config/alpha/alpha.c, config/vax/vax.c (float_strings,
	float_values, inited_float_values, check_float_value): Remove.
	* config/alpha/alpha.h, config/m68hc11/m68hc11.h,
	config/m88k/m88k.h, config/vax/vax.h (CHECK_FLOAT_VALUE): Remove.
	* doc/tm.texi (CHECK_FLOAT_VALUE): Remove.
	(VAX_HALFWORD_ORDER): Remove.

2002-09-16  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c: (legitimize_la_operand): Remove, replace by ...
	(s390_load_address): ... this new function.
	(s390_decompose_address): Allow the argument pointer and all
	virtual registers as 'pointer' registers.
	(s390_expand_plus_operand): Use s390_load_address.
	config/s390/s390.md (movti, movdi, movdf splitters): Likewise.
	("force_la_31"): New insn pattern.
	config/s390/s390-protos.h (legitimize_la_operand): Remove.
	(s390_load_address): Add prototype.

	* config/s390/s390.c: Include "optabs.h".
	(s390_expand_movstr, s390_expand_clrstr, s390_expand_cmpstr): New.
	config/s390/s390-protos.h (s390_expand_movstr, s390_expand_clrstr,
	s390_expand_cmpstr): Add prototypes.
	config/s390/s390.md ("movstrdi", "movstrsi"): Call s390_expand_movstr.
	("movstrdi_short"): Rename to "movstr_short_64".  Change predicates
	for operands 0 and 1 to "memory_operand".  Add type attribute.
	("movstrsi_short"): Rename to "movstr_short_31".  Change predicates
	for operands 0 and 1 to "memory_operand".  Add type attribute.
	("movstrdi_long", "movstrsi_long"): Remove.
	("movstrdi_64"): Rename to "movstr_long_64". Add type attribute.
	("movstrsi_31"): Rename to "movstr_long_31". Add type attribute.
	("clrstrdi", "clrstrsi"): Call s390_expand_clrstr.
	("clrstrsico"): Remove, replace by ...
	("clrstr_short_64", "clrstr_short_31"): ... these new patterns.
	("clrstrsi_64"): Rename to "clrstr_long_64".
	("clrstrsi_31"): Rename to "clrstr_long_31".
	("cmpstrdi", "cmpstrsi"): Call s390_expand_cmpstr.
	("cmpstr_const"): Remove, replace by ...
	("cmpstr_short_64", "cmpstr_short_31"): ... these new patterns.
	("cmpstr_64"): Rename to "cmpstr_long_64".
	("cmpstr_31"): Rename to "cmpstr_long_31".

2002-09-16  Kazu Hirata  <kazu@cs.umass.edu>

	* ABOUT-NLS: Follow spelling conventions.
	* ChangeLog: Likewise.
	* ChangeLog.1: Likewise.
	* ChangeLog.2: Likewise.
	* ChangeLog.3: Likewise.
	* ChangeLog.4: Likewise.
	* ChangeLog.5: Likewise.
	* ChangeLog.6: Likewise.
	* FSFChangeLog.10: Likewise.
	* FSFChangeLog.11: Likewise.
	* c-common.c: Likewise.
	* c-lex.c: Likewise.
	* c-objc-common.c: Likewise.
	* cppexp.c: Likewise.
	* cppinit.c: Likewise.
	* cpplex.c: Likewise.
	* doloop.c: Likewise.
	* flow.c: Likewise.
	* function.c: Likewise.
	* integrate.c: Likewise.
	* loop.c: Likewise.
	* reg-stack.c: Likewise.
	* reload.h: Likewise.
	* ssa.c: Likewise.

2002-09-15  Kazu Hirata  <kazu@cs.umass.edu>

	* ChangeLog: Follow spelling conventions.
	* ChangeLog.0: Likewise.
	* ChangeLog.1: Likewise.
	* ChangeLog.2: Likewise.
	* ChangeLog.4: Likewise.
	* ChangeLog.6: Likewise.
	* config.gcc: Likewise.
	* dwarfout.c: Likewise.
	* reload1.c: Likewise.
	* simplify-rtx.c: Likewise.
	* unwind-sjlj.c: Likewise.
	* config/avr/avr.h: Likewise.
	* config/d30v/d30v.h: Likewise.
	* config/frv/frv.c: Likewise.
	* config/frv/frv.h: Likewise.
	* config/ip2k/ip2k.h: Likewise.
	* config/m88k/m88k-move.sh: Likewise.
	* config/stormy16/stormy16.c: Likewise.
	* config/stormy16/stormy16.h: Likewise.
	* doc/extend.texi: Likewise.
	* doc/interface.texi: Likewise.
	* doc/invoke.texi: Likewise.
	* doc/md.texi: Likewise.
	* doc/rtl.texi: Likewise.
	* doc/tm.texi: Likewise.
	* doc/trouble.texi: Likewise.
	* ginclude/float.h: Likewise.
	* treelang/treelang.texi: Likewise.

2002-09-15  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* i386-protos.h (i386_pe_dllexport_name_p,
	i386_pe_dllimport_name_p, i386_pe_unique_section,
	i386_pe_declare_function_type, i386_pe_record_external_function,
	i386_pe_record_exported_symbol, i386_pe_asm_file_end): Add
	prototype.
	* i386/t-cygwin (winnt.o): Depend on $(TM_P_H).
	* i386/t-interix (winnt.o): Likewise.

	* v850-protos.h (v850_output_addr_const_extra): Prototype.

2002-09-15  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/mips/netbsd.h (TARGET_OS_CPP_BUILTINS): Add
	MIPS ABI CPP macros.
	(TARGET_CPU_CPP_BUILTINS): Redefine.
	(SUBTARGET_EXTRA_SPECS): Remove subtarget_endian_default.
	(SUBTARGET_ENDIAN_DEFAULT_SPEC): Remove.

2002-09-15  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* ia64/aix.h (TARGET_OS_CPP_BUILTINS): Fix typo.

2002-09-15  Kazu Hirata  <kazu@cs.umass.edu>

	* ChangeLog: Follow spelling conventions.
	* ChangeLog.0: Likewise.
	* ChangeLog.1: Likewise.
	* ChangeLog.2: Likewise.
	* ChangeLog.3: Likewise.
	* ChangeLog.4: Likewise.
	* ChangeLog.5: Likewise.
	* ChangeLog.6: Likewise.
	* FSFChangeLog.10: Likewise.
	* FSFChangeLog.11: Likewise.
	* c-common.c: Likewise.
	* c-common.h: Likewise.
	* c-format.c: Likewise.
	* c-opts.c: Likewise.
	* cpplib.c: Likewise.
	* langhooks.h: Likewise.
	* real.c: Likewise.
	* reg-stack.c: Likewise.
	* toplev.c: Likewise.
	* config/arm/arm.c: Likewise.
	* config/arm/arm.md: Likewise.
	* config/arm/linux-gas.h: Likewise.
	* config/arm/netbsd.h: Likewise.
	* config/c4x/c4x.c: Likewise.
	* config/c4x/c4x.h: Likewise.
	* config/c4x/c4x.md: Likewise.
	* config/c4x/libgcc.S: Likewise.
	* config/fr30/fr30.md: Likewise.
	* config/frv/frv.md: Likewise.
	* config/ia64/ia64.md: Likewise.
	* config/mips/mips.h: Likewise.
	* config/mn10300/mn10300.c: Likewise.
	* config/stormy16/stormy16.c: Likewise.
	* config/v850/v850.md: Likewise.
	* doc/extend.texi: Likewise.
	* doc/invoke.texi: Likewise.
	* doc/md.texi: Likewise.

2002-09-15  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/netbsd.h (LIB_SPEC): Include the appropriate pthread
	library if -pthread is specified.

2002-09-15  Jason Thorpe  <thorpej@wasabisystems.com>

	* config.gcc (*-*-netbsd*): Set thread_file to 'posix'
	for --enable-threads=yes and --enable-threads=posix.

2002-09-15  Kazu Hirata  <kazu@cs.umass.edu>

	* config/sparc/cypress.md: Replace Sparc with SPARC.
	* config/sparc/freebsd.h: Likewise.
	* config/sparc/gmon-sol2.c: Likewise.
	* config/sparc/hypersparc.md: Likewise.
	* config/sparc/lb1spc.asm: Likewise.
	* config/sparc/lb1spl.asm: Likewise.
	* config/sparc/linux.h: Likewise.
	* config/sparc/linux64.h: Likewise.
	* config/sparc/lynx.h: Likewise.
	* config/sparc/sol2.h: Likewise.
	* config/sparc/sparc-modes.def: Likewise.
	* config/sparc/sparc.c: Likewise.
	* config/sparc/sparc.h: Likewise.
	* config/sparc/sparc.md: Likewise.
	* config/sparc/sparclet.md: Likewise.
	* config/sparc/supersparc.md: Likewise.
	* config/sparc/sysv4.h: Likewise.
	* config/sparc/vxsim.h: Likewise.
	* config/sparc/vxsparc64.h: Likewise.

2002-09-14  Marek Michalkiewicz  <marekm@amelek.gda.pl>

	* config/avr/avr.c (output.h): Move after inclusion of tree.h.

2002-09-14  Kazu Hirata  <kazu@cs.umass.edu>

	* ChangeLog: Follow spelling conventions.
	* ChangeLog.0: Likewise.
	* ChangeLog.2: Likewise.
	* ChangeLog.3: Likewise.
	* ChangeLog.4: Likewise.
	* ChangeLog.5: Likewise.
	* ChangeLog.6: Likewise.
	* cppfiles.c: Likewise.
	* cppinit.c: Likewise.
	* cpplib.h: Likewise.
	* cse.c: Likewise.
	* debug.h: Likewise.
	* df.c: Likewise.
	* dominance.c: Likewise.
	* hashtable.c: Likewise.
	* hashtable.h: Likewise.
	* loop.c: Likewise.
	* config/arm/README-interworking: Likewise.
	* config/arm/arm.c: Likewise.
	* config/arm/arm.h: Likewise.
	* config/arm/arm.md: Likewise.
	* config/dsp16xx/dsp16xx.h: Likewise.
	* config/frv/frv.c: Likewise.
	* config/frv/frv.h: Likewise.
	* config/ip2k/ip2k.h: Likewise.
	* config/rs6000/rs6000.c: Likewise.
	* config/stormy16/stormy-abi: Likewise.
	* config/stormy16/stormy16.h: Likewise.
	* config/v850/v850.c: Likewise.

2002-09-14  Kazu Hirata  <kazu@cs.umass.edu>

	* loop.c: Fix a comment typo.

2002-09-14  Kazu Hirata  <kazu@cs.umass.edu>

	* config/fr30/fr30.h: Fix comment typos.
	* config/frv/frv.c: Likewise.
	* config/i386/xmmintrin.h: Likewise.
	* config/mips/mips.c: Likewise.
	* config/sh/sh.c: Likewise.

2002-09-14  Kazu Hirata  <kazu@cs.umass.edu>

	* haifa-sched.c: Follow spelling conventions.
	* regclass.c: Likewise.
	* regrename.c: Likewise.
	* config/fp-bit.c: Likewise.
	* config/frv/frv.h: Likewise.
	* config/m88k/m88k.c: Likewise.
	* config/mcore/mcore.c: Likewise.
	* config/rs6000/darwin.h: Likewise.
	* config/rs6000/gnu.h: Likewise.
	* config/rs6000/linux.h: Likewise.
	* config/rs6000/linux64.h: Likewise.
	* config/rs6000/rs6000.c: Likewise.
	* config/rs6000/rs6000.h: Likewise.
	* config/sh/sh.c: Likewise.
	* config/sparc/sparc.c: Likewise.
	* config/sparc/ultra1_2.md: Likewise.

2002-09-14  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("movdi_internal"): Allow any offsetable
	memory operand when source is 0 (K constraint).
	("movsi_internal"): Likewise.
	("movdf_internal"): Likewise.
	("movsf_internal"): Likewise.

2002-09-14  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.c (rs6000_elf_encode_section_info): Use
	targetm.binds_local_p to set SYMBOL_REF_FLAG.
	(rs6000_xcoff_encode_section_info): Likewise.
	* config/rs6000/xcoff.h (ASM_DECLARE_FUNCTION_NAME): Likewise.

2002-09-10  Theodore A. Roth  <troth@verinet.com>

	* gcc/config/avr/avr.h: Set default options for C++ for avr.

2002-09-13  Richard Henderson  <rth@redhat.com>

	* Makefile.in (toplev.o): Depend on real.h.
	(print-rtl.o, varasm.o, ifcvt.o): Likewise.

2002-09-14  Alan Modra  <amodra@bigpond.net.au>

	* doc/tm.texi (DBX_OUTPUT_NFUN): Describe.
	* dbxout.c (dbxout_function_end): Use DBX_OUTPUT_NFUN.
	* config/rs6000/linux64.h (DBX_OUTPUT_NFUN): Define.

2002-09-13  Nathan Sidwell  <nathan@codesourcery.com>

	* ggc-common.c (ggc_mark_roots): Don't iterate NULL hash tables.

2002-09-13  Steve Ellcey  <sje@cup.hp.com>

	* config.gcc (ia64*-*-aix*, ia64*-*-elf*, ia64*-*-freebsd*,
	ia64*-*-linux*): Set extra_parts.
	* config/ia64/t-aix (EXTRA_PARTS): Remove.
	* config/ia64/t-ia64 (EXTRA_PARTS): Remove.

2002-09-13  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/fixunssfsi.c: Replace H8/S with H8S.
	* config/h8300/h8300.c: Likewise.
	* config/h8300/h8300.h: Likewise.
	* config/h8300/h8300.md: Likewise.
	* doc/invoke.texi: Likewise.

2002-09-13  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (h8300_init_once): Fix formatting.

2002-09-13  Richard Henderson  <rth@redhat.com>

	* config/alpha/alpha.md (attr type): Add callpal.
	(imb, trap, load_tp, set_tp): Use it.
	* config/alpha/ev4.md (ev4_callpal): New.
	* config/alpha/ev5.md (ev5_callpal): New.
	* config/alpha/ev6.md (ev6_ibr): Handle callpal.
	* config/alpha/alpha.c (alphaev4_insn_pipe): Handle TYPE_CALLPAL.
	(alphaev5_insn_pipe): Likewise.

2002-09-13  Andreas Jaeger  <aj@suse.de>

	* Makefile.in (print-rtl.o): Depend on CONFIG_H.

2002-09-13  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/t-hpux (LIBGCC1_TEST, STMP_FIXPROTO,
	LIB2ADDEH): New, set to NULL.
	(SHLIB_EXT, SHLIB_LINK, SHLIB_INSTALL, SHLIB_MKMAP): New.

2002-09-13  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/quadlib.c (_U_Qfcmp): Make extern.
	(_U_Qfcnvfxt_quad_to_sgl): Remove declaration.
	(_U_Qfeq, _U_Qfne, _U_Qfgt, _U_Qfge, U_Qflt, U_Qfle, _U_Qfcomp):
	Add declarations.
	(_U_Qfneg): Remove.

2002-09-13 Dhananjay Deshpande  <dhananjayd@kpit.com>

	* config/h8300/h8300.h (EIGHTBIT_CONSTANT_ADDRESS_P): Add support
	for H8/300, H8S aa:8 mode.
	(TINY_CONSTANT_ADDRESS_P): Add support for H8S aa:16 mode.
	* config/h8300/h8300.c (h8300_adjust_insn_length): Adjust length
	for H8/300 aa:8 mode.

2002-09-13  Hartmut Penner  <hpenner@de.ibm.com>

	* config/s390/s390.md ("trap", "conditional_trap", "*trap"): New
	insns.

2002-09-12  Richard Henderson  <rth@redhat.com>

	* Makefile.in (HOST_PRINT): Use print-rtl1.o
	(print-rtl.o): Don't define GENERATOR_FILE.
	(print-rtl1.o): Rename from $(BUILD_PREFIX_1)print-rtl.o.
	* print-rtl.c (print_rtx): Include CONST_DOUBLE fp decimal output
	unless GENERATOR_FILE.

2002-09-12  Stan Shebs  <shebs@apple.com>

	* config/darwin.h (USER_LABEL_PREFIX): Define here...
	* config/i386/darwin.h: ... instead of here.

	* target.h (struct gcc_target): New field
	terminate_dw2_eh_frame_info.
	* target-def.h (TARGET_TERMINATE_DW2_EH_FRAME_INFO): Define.
	(TARGET_INITIALIZER): Add it.
	* dwarf2out.c (output_call_frame_info): Use target hook.
	* dwarf2asm.c (dw2_asm_output_delta): Use macro
	ASM_OUTPUT_DWARF_DELTA if defined.
	* doc/tm.texi (TARGET_TERMINATE_DW2_EH_FRAME_INFO): Document.
	(ASM_OUTPUT_DWARF_DELTA): Ditto.
	(ASM_OUTPUT_DWARF_OFFSET): Ditto.
	(ASM_OUTPUT_DWARF_PCREL): Ditto.
	* config.gcc (i[34567]86-*-darwin*): Define extra_parts.
	(powerpc-*-darwin*): Ditto.
	* crtstuff.c [OBJECT_FORMAT_MACHO]: Update the Mach-O bits
	to work correctly for Darwin.
	* config/darwin.h (OBJECT_FORMAT_MACHO): Define.
	(STARTFILE_SPEC): Add crtbegin.o.
	(ENDFILE_SPEC): Define.
	(EXTRA_SECTION_FUNCTIONS): Put gcc_except_tab in data segment.
	(ASM_PREFERRED_EH_DATA_FORMAT): Handle more cases.
	(ASM_OUTPUT_DWARF_DELTA): Define.
	(TARGET_TERMINATE_DW2_EH_FRAME_INFO): Define.
	* config/darwin.c (darwin_asm_output_dwarf_delta): New function.

2002-09-13  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.c (rs6000_emit_load_toc_table): Remove "if"
	nesting.  Correct test for non-PowerPC64 ELF ABI_AIX.
	* config/rs6000/rs6000.md (load_toc_v4_PIC*): Disable when ABI_AIX.

2002-09-12  Zack Weinberg  <zack@codesourcery.com>

	* toplev.c: Move default definition of USER_LABEL_PREFIX...
	* defaults.h: ... here.

2002-09-12  Richard Henderson  <rth@redhat.com>

	* vax.c: Include tree.h earlier.

2002-09-12  Stan Shebs  <shebs@apple.com>

	* config/darwin.c (machopic_finish): Remove #if 0 chunks.
	(machopic_operand_p): Ditto.

2002-09-12  Kazu Hirata  <kazu@cs.umass.edu>

	* config/arm/arm.c (arm_compute_initial_elimination_offset):
	Fix a comment typo.

2002-09-12  Kazu Hirata  <kazu@cs.umass.edu>

	* toplev.c (do_abort): Fix a comment typo.

2002-09-12  Kazu Hirata  <kazu@cs.umass.edu>

	* cselib.c: Fix comment formatting.
	* gengtype.c: Likewise.

2002-09-12  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (udivmodqi4): Do not use an expander.
	(udivmodhi4): Likewise.

2002-09-12  Graham Stott  <graham.stott@btinternet.com>
	    Roger Sayle  <roger@eyesopen.com>

	* i386.c (any_fp_register_operand, fp_register_operand,
	register_and_not_any_fp_reg_operand, register_and_not_fp_reg_operand):
	New predicate functions.
	* i386-protos.h:  Add their prototypes.
	* i386.h: Add them to PREDICATE_CODES.
	* i386.md ("*pushsf_rex64"+2, "*pushsf_rex64"+3, "*pushdf_integer"+1,
	"*pushdf_integer"+2, "*pushtf_integer"+1, "*pushtf_integer"+2,
	"*pushtf_integer"+3, "*pushtf_integer"+4, "*dummy_extendsfdf2"+1,
	"*dummy_extendsfdf2"+2, "*dummy_extendsfxf2"+1,
	"*dummy_extendsftf2"+1, "*dummy_extendsftf2"+2,
	"*dummy_extenddfxf2"+1, "*dummy_extenddftf2"+1,
	"*dummy_extenddftf2"+2, "*negsf2_if"+1, "*negsf2_if"+2,
	"*negdf2_if_rex64"+1, "*negdf2_if_rex64"+2, "*negxf2_if"+1,
	"*negxf2_if"+2, "*negtf2_if"+1, "*negtf2_if"+2, "*abssf2_if"+1,
	"*abssf2_if"+2, "*absdf2_if_rex64"+1, "*absdf2_if_rex64"+2,
	"*absxf2_if"+1, "*absxf2_if"+2, "*abstf2_if"+1, "*abstf2_if"+2):
	Use these new predicates to simplify and correct the use of
	FP_REG_P, ANY_FP_REG_P, FP_REGNO_P and any ANY_FP_REGNO_P.

2002-09-12  Jason Merrill  <jason@redhat.com>

	* diagnostic.c (output_add_identifier): New fn.
	* diagnostic.h: Declare it.

	* calls.c (store_one_arg): Use size_in_bytes to determine the
	amount of space to push.

2002-09-12  Jakub Jelinek  <jakub@redhat.com>

	* config/sparc/linux64.h (STARTFILE_SPEC32): Fix a typo.

2002-09-12  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390-modes.def (CCAPmode, CCANmode): New CC modes.
	* config/s390/s390.c (s390_match_ccmode_set): Support new CC modes.
	(s390_select_ccmode): Likewise.
	(s390_branch_condition_mask): Likewise.
	(optimization_options): Do not set flag_branch_on_count.
	(s390_split_branches): Handle doloop branches.
	(s390_chunkify_pool): Likewise.
	* config/s390/s390.md ("*adddi3_imm_cc", "*addsi3_imm_cc"): New insns.
	("doloop_end"): New expander.
	("doolop_si", "*doloop_si_long", "doloop_di", "*doloop_di_long",
	associated splitters): New.

2002-09-11  Hartmut Penner  <hpenner@de.ibm.com>

	* fold-const.c (make_range): Only narrow to signed range if
	the signed range is smaller than the unsigned range.

2002-09-12  Alan Modra  <amodra@bigpond.net.au>

	* emit-rtl.c (set_mem_size): New function.
	* expr.h (set_mem_size): Declare.
	* config/rs6000/rs6000.c (expand_block_move_mem): Exterminate.
	(expand_block_move): Instead, use adjust_address and
	replace_equiv_address to generate proper aliasing info.
	Move common code out of conditionals.  Localize vars.

2002-09-11  Eric Botcazou  <ebotcazou@libertysurf.fr>

	* optabs.c (expand_binop): Minor cleanup.
	(expand_twoval_binop): Convert CONST_INTs like in expand_binop.

2002-09-11  Dan Nicolaescu  <dann@ics.uci.edu>

	* print-tree.c (print_node): Print the restrict qualifier.

2002-09-11  Janis Johnson  <janis187@us.ibm.com>

	* doc/install.texi: Fix typos.

2002-09-11  Zack Weinberg  <zack@codesourcery.com>

	* Makefile.in: Remove all references to s-under and underscore.c.
	* collect2.c, tlink.c: Change all uses of prepends_underscore
	to look directly at USER_LABEL_PREFIX.

2002-09-11  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.c (rs6000_xcoff_asm_named_section): Append
	alignment to csect.
	(rs6000_xcoff_unique_section): Only set section name for public
	data.
	(rs6000_xcoff_section_type_flags): Store log2 alignment in flags.
	* config/rs6000/xcoff.h (TARGET_ASM_SELECT_SECTION): Remove
	duplicate definition.

2002-09-10  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.md (extzv): Check predicates before emitting extzv_32.
	(insv): Likewise.

2002-09-10  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.h (MOVE_MAX): Define to correct value.
	(MAX_MOVE_MAX): Define.
	(MOVE_BY_PIECES_P): Define.
	(CLEAR_BY_PIECES_P): Define.

2002-09-10  Denis Chertykov  <denisc@overta.ru>

	* config/avr/avr.md (movstrhi): Use right operands for conversion.

2002-09-10  Richard Earnshaw  <rearnsha@arm.com>

	PR c/7873
	* arm.md (insv): Use reg_or_int_operand for operand[3].

2002-09-10  David Edelsohn  <edelsohn@gnu.org>

	* rs6000.c (rs6000_assemble_visibility): Protect declaration
	inside macro.  Correct function definition typo.
	(rs6000_xcoff_section_type_flags): New function.
	(TARGET_SECTION_TYPE_FLAGS): Remove definition.
	(rs6000_elf_section_type_flags): Call default_section_type_flags_1
	with appropriate PIC test.
	(rs6000_xcoff_select_section): Use decl_readonly_section_1 to
	determine readonly.
	(rs6000_binds_local_p): Combine PIC flags.
	* sysv4.h (TARGET_SECTION_TYPE_FLAGS): Define.
	* xcoff.h (TARGET_SECTION_TYPE_FLAGS): Define.

2002-09-09  Per Bothner  <per@bothner.com>

	* print-tree.c (print_node):  In a STRING_CST, escape non-ascii
	characters, and only print TREE_STRING_LENGTH chars.

2002-09-09  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/hpux.h (TARGET_HPUX_LD): New, define true.
	(ASM_FILE_END) New.
	* config/ia64/ia64.h (TARGET_HPUX_LD): New, define false.
	* config/ia64/ia64-protos.h (ia64_hpux_asm_file_end): New.
	* config/ia64/ia64.c (ia64_asm_output_external): Create list
	of external functions if TARGET_HPUX_LD is true.
	(ia64_hpux_add_extern_decl): New, routine to put names on
	list of external functions.
	(ia64_hpux_asm_file_end): Put out declarations for external
	functions if and only if they are used.

2002-09-09  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.md (exception_receiver, builtin_setjmp_receiver): Add blockage
	on TARGET_64BIT before pic register restore.

2002-09-09  David Edelsohn  <edelsohn@gnu.org>

	* doc/tm.texi (TARGET_HAVE_SRODATA_SECTION): New description.
	(TARGET_HAVE_TLS): New description.

2002-09-09  Janis Johnson  <janis187@us.ibm.com>

	* doc/extend.texi (Statement Exprs): Fix broken link.

2002-09-09  Denis Chertykov  <denisc@overta.ru>

	* config/avr/avr.md (movstrhi, clrstrhi): Use gen_int_mode for
	right conversion of operands[1].

2002-09-09  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("*tmdi_reg", "*tmsi_reg"): Do not mark as
	commutative.  Use "nonimmediate_operand" instead of "register_operand"
	as predicate for operand 0.  Move to after the "*tmXX_mem" insns.

	("*tmdi_mem", "*tmsi_mem", "*tmhi_mem", "*tmqi_mem"): Do not mark
	as commutative.

	("*anddi3_ni", "*andsi3_ni", "*iordi3_ni", "*iorsi3_ni"): Do not
	mark as commutative.  Use "nonimmediate_operand" instead of
	"register_operand" as predicate for operand 1.

	("movstrictsi"): Fix typo in insn name.

2002-09-09  Jan Hubicka  <jh@suse.cz>

	* i386.c (index_register_operand): New.
	* i386.h (predicate_codes): Add new predicate.
	* i386.md (lea_general_*): Use index_register_operand
	(ashift to lea splitter): Do not produce invalid leas
	(ashift to mov+ashift split): New.

2002-09-09  Nick Clifton  <nickc@redhat.com>

	* config/fr30/fr30.c (output.h): Move after inclusion of tree.h.
	Fix folding marks.

2002-09-09  Toshiyasu Morita  <toshiyasu.morita@hsa.hitachi.com>
	    J"orn Rennecke <joern.rennecke@superh.com>

	* sh/sh.h (OVERRIDE_OPTIONS): align_functions is in bytes, not bits.

2002-09-09  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.c (rs6000_binds_local_p): Return bool.
	(function_ok_for_sibcall): Use binds_local_p.  Respect longcall
	attributes.

2002-09-08  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* fr30.c (fr30_print_operand): Fix bug in output of CONST_DOUBLE.

2002-09-08  Richard Henderson  <rth@redhat.com>

	* dwarf2.h (DW_OP_call_ref): Rename from DW_OP_calli.
	(DW_OP_GNU_push_tls_address): New.
	(DW_OP_lo_user): Fix.
	* dwarf2out.c (INTERNAL_DW_OP_tls_addr): New.
	(dwarf_stack_op_name): Handle it, plus other dwarf3 opcodes.
	(size_of_loc_descr): Likewise.
	(output_loc_operands): Handle INTERNAL_DW_OP_tls_addr.
	(add_AT_location_description): Take a dw_loc_descr_ref not an rtx.
	(loc_descriptor_from_tree): Handle TLS variables.
	(rtl_for_decl_location): Do avoid_constant_pool_reference here ...
	(add_location_or_const_value_attribute): ... not here.  Defer
	to loc_descriptor_from_tree for TLS variables.

	* config/i386/i386.h (ASM_OUTPUT_DWARF_DTPREL): New.
	* config/i386/i386.c (i386_output_dwarf_dtprel): New.
	* config/i386/i386-protos.h: Update.

2002-09-08  Roger Sayle  <roger@eyesopen.com>

	PR optimization/6405
	* unroll.c (loop_iterations): last_loop_insn should be the previous
	non-note instruction before loop->end.
	* loop.c (strength_reduce): The conditional jump is the last
	non-note instruction before loop->end (as above).

2002-09-08  Roger Sayle  <roger@eyesopen.com>

	* combine.c (try_combine): Handle the case that undobuf.other_insn
	has been turned into a return or unconditional jump, by inserting
	a BARRIER if necessary.
	(simplify_set):  Test if a condition code setter has a constant
	comparison at compile time, if so convert this insn to a no-op move
	and update/simplify the condition code user (undobuf.other_insn).

2002-09-08  Krister Walfridsson  <cato@df.lth.se>

	* config/arm/netbsd.h (INITIALIZE_TRAMPOLINE): Redefine.
	(CLEAR_INSN_CACHE): Define.

2002-09-08  Kazu Hirata  <kazu@cs.umass.edu>

	* basic-block.h: Fix comment formatting.
	* c-common.c: Likewise.
	* c-common.h: Likewise.
	* c-lex.c: Likewise.
	* c-pretty-print.c: Likewise.
	* cfglayout.c: Likewise.
	* cfgloop.c: Likewise.
	* defaults.h: Likewise.
	* et-forest.c: Likewise.
	* explow.c: Likewise.
	* function.h: Likewise.
	* gcov.c: Likewise.
	* genattrtab.c: Likewise.
	* gengtype.c: Likewise.
	* ifcvt.c: Likewise.
	* libgcc2.c: Likewise.
	* loop.c: Likewise.
	* profile.c: Likewise.
	* ra-build.c: Likewise.
	* real.c: Likewise.
	* rtl.h: Likewise.
	* tracer.c: Likewise.
	* tree-inline.c: Likewise.
	* varasm.c: Likewise.

2002-09-08  Jan Hubicka  <jh@suse.cz>

	* emit-rtl.c (set_mem_attributes_minus_bitpos): Fix array_ref
	handling.

	* loop.c (loop_givs_reduce):  Emit addition after.

2002-09-08  Alan Modra  <amodra@bigpond.net.au>

	* varasm.c (default_assemble_visibility): Rename from
	assemble_visibility.
	* output.h: Here too.
	* target-def.h (TARGET_ASM_ASSEMBLE_VISIBILITY): And here.
	* config/rs6000/rs6000.c (rs6000_assemble_visibility): And here.

2002-09-08  Alan Modra  <amodra@bigpond.net.au>

	* reload.c (find_reloads <p constraint>): Pass operand_mode to
	find_reloads_address.

2002-09-08  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (udivmodqi4): Enable on H8/300.
	(anonymous pattern): Likewise.

2002-09-07  Scott Snyder  <snyder@fnal.gov>

	PR target/7374
	* config/alpha/alpha.md (abstf2): Fix typo: 'neg' for 'abs'.

2002-09-07  Roger Sayle  <roger@eyesopen.com>

	* basic-block.h (struct loop): Remove unused cont_dominator field.

2002-09-07  Igor Shevlyakov <igor@microunity.com>

	* varasm.c (decode_rtx_const): Don't check undefined field for
	CONST_VECTOR.

2002-09-07  Glen Nakamura  <glen@imodulo.com>

	PR opt/7814
	* sched-deps.c (sched_analyze_insn): Make sure to add insn
	to reg_last->sets after flushing the dependency lists to guarantee
	that subsequent clobbers will be dependent on it.

2002-09-07  Igor Shevlyakov <igor@microunity.com>

	* combine.c (simplify_shift_const): Calculate rotate count
	correctly for vector operands.

2002-09-07  Ansgar Esztermann  <ansgar@thphy.uni-duesseldorf.de>

	* c-typeck.c (c_tree_expr_nonnegative_p): New function.
	(build_binary_op): Call c_tree_expr_nonnegative_p rather than
	tree_expr_nonnegative_p.
	(build_conditional_expr): Likewise.
	* c-tree.h (c_tree_expr_nonnegative_p): Declare.

2002-09-07  Richard Henderson  <rth@redhat.com>

	* builtins.def (inf, inff, infl): Mark const.
	(huge_val, huge_valf, huge_vall): Likewise.
	(BUILT_IN_GETEXP, BUILT_IN_GETMAN): Remove.

	* real.c (ereal_inf): Clear E before use.

2002-09-07  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.md (udivmodqi4): Split the pattern into
	an expander and an anonymous pattern.  Zero out the upper half
	of the dividend in the expander.
	(udivmodqi4): Likewise.

2002-09-07  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c: Fix formatting.
	* config/h8300/h8300.h: Likewise.
	* config/h8300/h8300.md: Likewise.

2002-09-07  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>

	* cfgcleanup.c (try_crossjump_to_edge): Fix updating of liveness
	information.

2002-09-07  Graham Stott  <graham.stott@btinternet.com>

       * rtlanal.c (dead_or_set_regno_p): Fix typo.

2002-09-07  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/linux64.h (ASM_PREFERRED_EH_DATA_FORMAT): Define.

	* doc/tm.texi (TARGET_ASM_ASSEMBLE_VISIBILITY): Describe.
	* target-def.h (TARGET_ASM_ASSEMBLE_VISIBILITY): Define.
	(TARGET_ASM_OUT): Add the above here.
	* target.h (struct gcc_target): Add "visibility" field.
	* varasm.c (maybe_assemble_visibility): Call targetm visibility func.
	* config/rs6000/rs6000.c (rs6000_assemble_visibility): New function.
	(TARGET_ASM_ASSEMBLE_VISIBILITY): Define.
	(rs6000_legitimize_reload_address, first_reg_to_save): Formatting.

2002-09-06  Ziemowit Laski <zlaski@apple.com>

	* c-lang.c (objc_is_id): New stub.
	* c-tree.h (objc_is_id): New forward declaration.
	* c-typeck.c (build_c_cast): Do not strip protocol
	qualifiers from 'id' type.
	* objc/objc-act.c (objc_comptypes): Correct handling
	of protocol qualifiers.
	(objc_is_id): New.

2002-09-06  Jeffrey A Law  (law@redhat.com)

	* pentium.md (pentium-firstvboth): Fix typo.

2002-09-06	Dhananjay Deshpande <dhananjayd@kpit.com>

	* h8300.c (enum shift_alg): Move to earlier in h8300.c.
	(enum shift_type, enum h8_cpu): Likewise.
	(INL, ROT, LOP, SPC macros): Likewise.
	(shift_alg_qi, shift_alg_hi, shift_alg_si): Likewise.  Lose
	const designator.
	(h8300_init_once): Update shift_alg_{qi,hi,si} to use more
	space efficient algorithms when optimize for codesize.

2002-09-06  Nicola Pero  <n.pero@mi.flashnet.it>

	Fix PR/1727 and long-standing failing testcase
	objc/formal-protocol-6.m.
	* objc-act.c (build_protocol_expr): If compiling for the GNU
	runtime, create a list of Protocol statically allocated instances
	if it doesn't exist, then add the Protocol object to this same
	list.
	(get_objc_string_decl): Fixed typo/bug - TREE_VALUE had been used
	instead of TREE_CHAIN.

2002-09-06  Nicola Pero  <n.pero@mi.flashnet.it>

	* objc/objc-act.c (dump_interface): Enlarged the char * buffer to
	10k.  Fixed category dumping - print out category names with the
	proper syntax.  Print '@end\n' and not '\n@end' at the end of the
	interface.
	(finish_objc): Fixed the -gen-decls option.  It was printing out
	only the last class.  Dump an interface declaration of all classes
	being compiled instead.

2002-09-06  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/arm/arm-protos.h (arm_gen_return_addr_mask): New
	prototype.
	* config/arm/arm.c (arm_gen_return_addr_mask): New function.
	* config/arm/arm.h (MASK_RETURN_ADDR): Use arm_gen_return_addr_mask
	if not APCS26 and not Thumb or ARMv4-or-higher.  Use gen_int_mode
	rather than GEN_INT.
	* config/arm/arm.md (UNSPEC_CHECK_ARCH): Define.
	(return_addr_mask, *check_arch2): New.

2002-09-06  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("*adddi3_cc", "*adddi3_cconly",
	"*adddi3_cconly2", "*adddi3_64", "*adddi3_31", "adddi3",
	"*addsi3_carry1_cc", "*addsi3_carry1_cconly",
	"*addsi3_carry2_cc", "*addsi3_carry2_cconly",
	"*addsi3_cc", "*addsi3_cconly", "*addsi3_cconly2", "addsi3",
	"adddf3", "*adddf3", "*adddf3_ibm",
	"addsf3", "*addsf3", "*addsf3_ibm",
	"muldi3", "mulsi3", "mulsidi3",
	"muldf3", "*muldf3", "*muldf3_ibm",
	"mulsf3", "*mulsf3", "*mulsf3_ibm",
	"*anddi3_cc", "*anddi3_cconly", "anddi3",
	"*andsi3_cc", "*andsi3_cconly", "andsi3",
	"*iordi3_cc", "*iordi3_cconly", "iordi3",
	"*iorsi3_cc", "*iorsi3_cconly", "iorsi3",
	"*xordi3_cc", "*xordi3_cconly", "xordi3",
	"*xorsi3_cc", "*xorsi3_cconly", "xorsi3"): Use "nonimmediate_operand"
	instead of "register_operand" as predicate for "%0" operand.

2002-09-06  Jakub Jelinek  <jakub@redhat.com>

	* configure.in (HAVE_AS_OFFSETABLE_LO10): Use -xarch=v9
	unconditionally when gcc_cv_as_flags64 checks are gone.
	* configure: Rebuilt.

2002-09-06  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.md (extzvsi_internal2): Revert most of
	2002-07-26 change.  Comment.

2002-09-05  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* frv.c (frv_unique_section, frv_select_section,
	frv_select_rtx_section): Delete.
	(frv_in_small_data_p): New.
	(TARGET_ASM_UNIQUE_SECTION, TARGET_ASM_SELECT_SECTION,
	TARGET_ASM_SELECT_RTX_SECTION): Delete.
	(TARGET_IN_SMALL_DATA_P): Define.

2002-09-05  Dale Johannesen  <dalej@apple.com>

	* reload1.c (reload):  Retain only those memory clobbers
	added for variable-array handling.

2002-09-05  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/arm/arm.c (arm_return_in_memory): Implement ATPCS
	return-in-memory rules.
	* config/arm/arm.h (ARM_FLAG_ATPCS, TARGET_ATPCS): Define.

2002-09-05  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/xcoff.h (HOT_TEXT_SECTION_NAME): Delete.
	(UNLIKELY_EXECUTED_TEXT_SECTION_NAME): Delete.

2002-09-05  Jason Thorpe  <thorpej@wasabisystems.com>

	* real.c: Avoid parse error if FLOAT_WORDS_BIG_ENDIAN is
	not a compile-time constant for the non-IBM case.
	* config/arm/arm-protos.h (arm_float_words_big_endian): New
	prototype.
	* config/arm/arm.c (arm_float_words_big_endian): New function.
	* config/arm/arm.h (TARGET_CPU_CPP_BUILTINS): Define __VFP_FP__
	if TARGET_VFP  and not TARGET_HARD_FLOAT.
	(ARM_FLAG_VFP, TARGET_VFP): Define.
	(FLOAT_WORDS_BIG_ENDIAN): Use arm_float_words_big_endian.

2002-09-05  David Edelsohn  <edelsohn@gnu.org>

	* doc/install.texi: Correct text of s390-*-linux* and s390x-*-linux*
	URLs.  Fix AIX wording.

2002-09-05  Stan Shebs  <shebs@apple.com>

	* config/rs6000/rs6000.c (rs6000_override_options): Make -fpic and
	-fPIC equivalent on Darwin.

2002-09-05  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (sh_expand_builtin): Return early if encountering an
	error_mark for a type.

2002-09-05  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_expand_plus_operand): Do not require
	double-word scratch register.
	config/s390/s390.md ("reload_indi", "reload_insi"): Adapt.

	("*tmqi_ext", "*tmdi_mem", "*tmsi_mem", "*tmhi_mem", "*tmqi_mem",
	"*cli"): Replace s_operand by memory_operand.
	("cmpstrdi", "cmpstrsi"): Replace s_operand by general_operand.

2002-09-05  Kazu Hirata  <kazu@cs.umass.edu>

	* config/h8300/h8300.c (asm_file_start): Add a missing
	semicolon.

2002-09-04  Krister Walfridsson  <cato@df.lth.se>

	* config/i386/i386.h (GOT_SYMBOL_NAME): Define.
	* config/i386/i386.c (output_set_got): Use GOT_SYMBOL_NAME.
	(ix86_output_addr_diff_elt) Likewise.
	(x86_output_mi_thunk) Likewise.
	* config/i386/netbsd.h (GOT_SYMBOL_NAME): Redefine.

2002-09-04  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* frv.c (frv_encode_section_info): Fix error in last change.

2002-09-04  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.c (rs6000_flag_pic): New variable.
	(rs6000_elf_encode_section_info): ATTRIBUTE_UNUSED.
	(TARGET_BINDS_LOCAL_P): Define.
	(rs6000_override_options): Save original flag_pic value.
	(rs6000_elf_select_section): Call default_elf_select_section_1.
	(rs6000_elf_unique_section): Call default_unique_section_1.
	(rs6000_elf_in_small_data_p): New function.
	(rs6000_xcoff_asm_named_section): Determine storage mapping class.
	(rs6000_xcoff_select_section): Update based on defaults.
	(rs6000_xcoff_unique_section): Set to basic name if not common.
	(rs6000_binds_local_p): New function.
	* config/rs6000/sysv4.h (SUBTARGET_OVERRIDE_OPTIONS): Set
	targetm.have_srodata_section if SDATA_EABI.
	(TARGET_IN_SMALL_DATA_P): Define.

2002-09-04  Dale Johannesen  <dalej@apple.com>

	* varasm.c (struct rtx_const, decode_rtx_const):
	Make veclo and vechi fields not share storage.

2002-09-05  J"orn Rennecke <joern.rennecke@superh.com>

	* loop.c (scan_loop): Don't mark separate insns out of a libcall
	for moving.
	(move_movables): Abort if we see the first insn of a libcall.

2002-09-04  Richard Henderson  <rth@redhat.com>

	* builtin-types.def (BT_FN_FLOAT): New.
	(BT_FN_DOUBLE, BT_FN_LONG_DOUBLE): New.
	* builtins.def (BUILT_IN_INF, BUILT_IN_INFF, BUILT_IN_INFL,
	BUILT_IN_HUGE_VAL, BUILT_IN_HUGE_VALF, BUILT_IN_HUGE_VALL): New.
	* builtins.c (fold_builtin_inf): New.
	(fold_builtin): Call it.
	* real.c (ereal_inf): New.
	* real.h: Declare it.
	* doc/extend.texi: Document new builtins.

2002-09-04  Richard Henderson  <rth@redhat.com>

	* cse.c (cse_insn): Avoid subreg games if the equivalence
	is already in the proper mode.

2002-09-04  Eric Botcazou  <ebotcazou@multimania.com>

	PR c/7102
	* optabs.c (expand_binop): Convert CONST_INTs in all cases.

2002-09-04  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.md (setccfp0, setccfp1): New patterns.

2002-09-04  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* frv-protos.h (frv_init_builtins, frv_expand_builtin,
	frv_select_section, frv_select_rtx_section,
	frv_encode_section_info, frv_unique_section): Delete.
	* frv.c: Update for target hooks.
	* frv.h (STRIP_NAME_ENCODING, SLOW_ZERO_EXTEND, SELECT_SECTION,
	SELECT_RTX_SECTION, ENCODE_SECTION_INFO, UNIQUE_SECTION,
	EASY_DIV_EXPR, MD_INIT_BUILTINS, MD_EXPAND_BUILTIN): Delete.

2002-09-04  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* ip2k-protos.h (function_prologue, function_epilogue,
	encode_section_info): Update to match target hook specification.
	* ip2k.c: Wrap `MDR' code in IP2K_MD_REORG_PASS.
	(function_prologue, function_epilogue, encode_section_info):
	Update to match target hook specification.
	* ip2k.h (SELECT_SECTION, SELECT_RTX_SECTION, ASM_OPEN_PAREN,
	ASM_CLOSE_PAREN, EASY_DIV_EXPR): Delete.
	(NOTICE_UPDATE_CC): Cast to void.
	* ip2k.md: Add defaults in switch statements.

2002-09-04  Janis Johnson  <janis187@us.ibm.com>

	* doc/trouble.texi (Interoperation): Update information about C++ ABI
	issues.

2002-09-04  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/sparc/t-netbsd64: Disable multilib for now.

2002-09-04  David Edelsohn  <edelsohn@gnu.org>

	* target-def.h (TARGET_HAVE_SRODATA_SECTION): New macro.
	* target.h (gcc_target): Add have_srodata_section member.
	* varasm.c (section_category): Add SECCAT_SRODATA.
	(categorize_decl_for_section): Return SECCAT_SRODATA for sdata if
	READONLY_SDATA_SECTION defined.
	(decl_readonly_section_1): True for SECCAT_SRODATA also.
	(default_elf_select_section_1): Map SECCAT_SRODATA to .sdata2.
	(default_unique_section_1): Likewise.

2002-09-04  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* expr.c (emit_group_load): Revise to allow splitting TCmode source
	into DImode pieces.

	* pa-64.h (LONG_DOUBLE_TYPE_SIZE): Define to 128.
	* pa64-regs.h (CLASS_CANNOT_CHANGE_MODE_P): Inhibit changes from SImode
	for floating-point register class.
	* pa.c (function_arg): Fix handling of modes wider than one word for
	TARGET_64BIT.

2002-09-04  J"orn Rennecke <joern.rennecke@superh.com>

	* combine.c (make_compound_operation): Don't generate zero / sign
	extensions in floating point modes.

2002-09-04  Janis Johnson  <janis187@us.ibm.com>

	* doc/c-tree.texi: Fix overfull hboxes.
	* doc/cppopts.texi: Ditto.
	* doc/extend.texi: Ditto.
	* doc/gty.texi: Ditto.
	* doc/invoke.texi: Ditto.
	* doc/makefile.texi: Ditto.
	* doc/rtl.texi: Ditto.
	* doc/standards.texi: Ditto.
	* doc/tm.texi: Ditto.

2002-09-04  Richard Henderson  <rth@redhat.com>

	* c-common.c (builtin_define_with_hex_fp_value): New.
	(builtin_define_float_constants): Use it.  Fix H_FLOAT mant_dig.

2002-09-04  Janis Johnson  <janis187@us.ibm.com>

	* doc/invoke.texi (-fshort-wchar): Move to Code Generation Options.
	(-fpcc-struct-return, -freg-struct-return, -fshort-enums,
	-fshort-double, -fshort-wchar, -fpack-struct, -fleading-underscore):
	Warn that these options can break ABI compatibility.

2002-09-04  Richard Henderson  <rth@redhat.com>

	* real.c (ereal_to_decimal): Add digits parameter.
	* real.h (REAL_VALUE_TO_DECIMAL): Remove format; add digits parameter.
	* c-pretty-print.c (pp_c_real_literal): Update call.
	* print-rtl.c (print_rtx): Likewise.
	* print-tree.c (print_node_brief, print_node): Likewise.
	* sched-vis.c (print_value): Likewise.
	* config/arc/arc.c (arc_print_operand): Likewise.
	* config/c4x/c4x.c (c4x_print_operand): Likewise.
	* config/i370/i370.h (PRINT_OPERAND): Likewise.
	* config/i386/i386.c (print_operand): Likewise.
	* config/i960/i960.c (i960_print_operand): Likewise.
	* config/ip2k/ip2k.c (asm_output_float): Likewise.
	* config/m32r/m32r.c (m32r_print_operand): Likewise.
	* config/m68hc11/m68hc11.c (print_operand): Likewise.
	* config/m68k/hp320.h (PRINT_OPERAND, ASM_OUTPUT_FLOAT_OPERAND,
	ASM_OUTPUT_DOUBLE_OPERAND, ASM_OUTPUT_LONG_DOUBLE_OPERAND): Likewise.
	* config/m68k/m68k.h (ASM_OUTPUT_FLOAT_OPERAND,
	ASM_OUTPUT_DOUBLE_OPERAND, ASM_OUTPUT_LONG_DOUBLE_OPERAND): Likewise.
	* config/m68k/sun2o4.h (ASM_OUTPUT_FLOAT_OPERAND,
	ASM_OUTPUT_DOUBLE_OPERAND): Likewise.
	* config/m68k/sun3.h (ASM_OUTPUT_FLOAT_OPERAND,
	ASM_OUTPUT_DOUBLE_OPERAND): Likewise.
	* config/mips/mips.c (print_operand): Likewise.
	* config/ns32k/ns32k.c (print_operand): Likewise.
	* config/pdp11/pdp11.h (PRINT_OPERAND): Likewise.
	* config/vax/vax.h (PRINT_OPERAND): Likewise.
	* doc/tm.texi (REAL_VALUE_TO_DECIMAL): Update docs.

2002-09-04  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/elf.h (TARGET_SECTION_TYPE_FLAGS): Define to
	xtensa_multibss_section_type_flags.
	* config/xtensa/xtensa.c (xtensa_multibss_section_type_flags): Define.

2002-09-04  Richard Henderson  <rth@redhat.com>

	* doc/install-old.texi: Don't mention enquire.
	* doc/sourcebuild.texi: Update float.h description.

2002-09-04  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.md (mperm_w_little, mperm_w_big): Supply mode for zero_extract.

2002-09-03  David Edelsohn  <edelsohn@gnu.org>

	* varasm.c (default_section_type_flags): Append _1 to name with
	shlib parameter.  Use original name to call new function with
	implicit flag_pic.
	(decl_readonly_section): Likewise.
	(default_elf_select_section): Likewise.
	(default_unique_section): Likewise.
	(default_bind_local_p): Likewise.
	(categorize_decl_for_section): Add shlib parameter to use in place
	of implicit flag_pic.
	* output.h: Declare new functions with _1 and shlib argument.

2002-09-03  Janis Johnson  <janis187@us.ibm.com>

	* doc/install.texi: Fix typos, formatting problems, and obvious
	overfull/underfull boxes.

	* Makefile.in (TEXI_GCC_FILES): Add compat.texi.
	* doc/gcc.texi (Top): Add new chapter, Binary Compatibility, and
	include its file, compat.texi.
	* doc/compat.texi: New file with new chapter, Binary Compatibility.

2002-09-03  Neil Booth  <neil@daikokuya.co.uk>

	Debian BTS Bug #157416
	* cpphash.h (FIRST, LAST, CUR, RLIMIT): Fix definitions.
	* cpplib.c (destringize_and_run): Kludge around getting
	tokens from in-progress macros.
	(_cpp_do__Pragma): Simplify.

2002-09-03  Steve Ellcey  <sje@cup.hp.com>

	* config/ia64/ia64.h (EXTRA_SPECS): Remove cpp_cpu.
	(CPP_CPU_SPEC): Remove.
	(TARGET_CPU_CPP_BUILTINS): New.
	* config/ia64/hpux.h (CPP_PREDEFINES): Remove.
	(CPP_SPEC): Remove.
	(TARGET_OS_CPP_BUILTINS): New.
	* config/ia64/linux.h (CPP_PREDEFINES): Remove.
	(TARGET_OS_CPP_BUILTINS): New.
	* config/ia64/aix.h (CPP_SPEC): Move some stuff to
	TARGET_OS_CPP_BUILTINS.
	(CPP_PREDEFINES): Remove.
	(CPLUSPLUS_CPP_SPEC): Remove.
	(TARGET_OS_CPP_BUILTINS): New.

2002-09-03  Richard Henderson  <rth@redhat.com>

	* Makefile.in (USER_H): Add ginclude/float.h.
	(FLOAT_H): Remove.
	(stmp-int-hdrs, install-mkheaders): Don't handle FLOAT_H.
	(mostlyclean): Don't remove float.h intermediate files.
	(distclean): Don't remove float.h.
	* config.gcc: Remove all float_format references.
	* configure.in (float_format, float_h_file): Remove.

	* c-common.c: Include tree-inline.h.
	(builtin_define_with_int_value): New.
	(builtin_define_type_precision): Use it.
	(builtin_define_float_constants): New.
	(cb_register_builtins): Use it.  Define __FLT_RADIX__ and
	__FLT_EVAL_METHOD__.
	* defaults.h (TARGET_FLT_EVAL_METHOD): New.
	* config/i386/i386.h (TARGET_FLT_EVAL_METHOD): New.
	* config/m68k/m68k.h (TARGET_FLT_EVAL_METHOD): New.
	* doc/tm.texi (INTEL_EXTENDED_IEEE_FORMAT): Mention moto 96-bit format.
	(TARGET_FLT_EVAL_METHOD): New.

	* config/float-c4x.h, config/float-i128.h, config/float-i32.h,
	config/float-i386.h, config/float-i64.h, config/float-m68k.h,
	config/float-sh.h, config/float-sparc.h, config/float-vax.h: Remove.
	* ginclude/float.h: New.

2002-09-03  Stan Shebs  <shebs@apple.com>

	* config/darwin.h (WARN_FOUR_CHAR_CONSTANTS): Remove, never used.
	(DWARF2_DEBUGGING_INFO): Remove until assembler accepts Dwarf-2.
	(PREFERRED_DEBUGGING_TYPE): Ditto.
	(ASM_OUTPUT_IDENT): Remove empty definition.

2002-09-03  Steve Ellcey  <sje@cup.hp.com>

	* config.gcc (ia64*-*-hpux*): Add ia64-c.o to c_target and
	cxx_target.
	* config/ia64/hpux.h (REGISTER_TARGET_PRAGMAS): Register pragma
	handling routine for builtin pragma.
	* config/ia64/ia64-protos.h (ia64_hpux_handle_builtin_pragma):
	Registered pragma handling routine.
	* ia64-c.c (ia64_hpux_handle_builtin_pragma): Ditto.
	(ia64_hpux_add_pragma_builtin) New subroutine used by above.
	If builtin pragma seen for math routine and C89 conformance is
	requested use different math function in order to set errno.
	* t-ia64 (ia64-c.o): Add new rule for new file.

2002-09-03  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.md ("movti"): Add Q->Q alternative.
	("*movdi_64", "*movdi_31", "*movsi", "movhi", "movqi_64",
	"movqi", "*movdf_64", "*movdf_31", "*movsf"): Likewise.

	("*movti_ss", "*movdi_ss", "*movsi_ss", "*movdf_ss",
	"*movsf_ss"): Remove.

2002-09-03  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa32-regs.h (CLASS_CANNOT_CHANGE_MODE, CLASS_CANNOT_CHANGE_MODE_P):
	Delete macros.

2002-09-03   Arati Dikey  <aratid@kpit.com>

	* h8300.c (asm_file_start): Corrected optimization comment.

2002-09-03  Stan Shebs  <shebs@apple.com>

	* c-lang.c (recognize_objc_keyword): Remove, no longer used.
	* c-tree.h (recognize_objc_keyword): Remove decl.
	* c-typeck.c (comp_target_types): Update a comment.

2002-09-03  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (s390_decompose_address): Remove STRICT parameter
	and register validity checks.
	(general_s_operand): Adapt to s390_decompose_address interface change.
	(q_constraint): Likewise.
	(s390_expand_plus_operand): Likewise.
	(legitimiate_address_p): Likewise.
	(legitimate_la_operand_p): Likewise.
	(legitimize_la_operand): Likewise.
	(print_operand_address): Likewise.
	(print_operand): Likewise.

2002-09-03  Nicola Pero  <n.pero@mi.flashnet.it>

	PR objc/5956:
	* objc/objc-act.c (build_typed_selector_reference): Fix typo which
	was causing the new selector never to match the existing ones
	(Patch by Alexander Malmberg <alexander@malmberg.org>).

2002-09-03  Graham Stott  <graham.stott@btinternet.com>

	* config/i386/i386.md ("femms"): Add "memory" attr "none".

2002-09-03  Graham Stott  <graham.stott@btinternet.com>

	* expr.c (expand_expr): Remove extraneous comment and code.

2002-08-31  Richard Henderson  <rth@redhat.com>

	* expr.c (block_move_libcall_safe_for_call_parm): Fix thinko.

2002-08-31  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.c (pa_globalize_label): Add ATTRIBUTE_UNUSED to prototype.

2002-08-30  Richard Henderson  <rth@redhat.com>

	PR opt/7515
	* c-objc-common.c: Include target.h.
	(c_cannot_inline_tree_fn): Don't auto-inline functions that
	don't bind locally.  Factor setting DECL_UNINLINABLE.
	* Makefile.in (c-objc-common.o): Update.

2002-08-30  Janis Johnson  <janis187@us.ibm.com>

	* doc/install.texi (Configuration, Building): Fix a typo and
	some formatting directives.

2002-08-30  Paul Koning <pkoning@equallogic.com>

	* doc/c-tree.texi (RDIV_EXPR): Fix typo.
	* doc/rtl.texi (post_modify): Remove misplaced text, remove "not
	implemented" note.
	* doc/md.texi (IP2K): Move machine-specific constraints before MIPS
	for alphabetic order.
	* doc/tm.texi (TARGET_FLOAT_FORMAT): Update description for
	VAX_FLOAT_FORMAT.  Remove reference to HOST_FLOAT_FORMAT.
	(VAX_HALFWORD_ORDER): Document.
	(LARGEST_EXPONENT_IS_NORMAL): Remove note about being only for
	IEEE float format.
	(TARGET_SCHED_ISSUE_RATE): Reword reference to MAX_DFA_ISSUE_RATE.
	(ASM_OUTPUT_LABEL_REF): Fix font.
	(CASE_VECTOR_SHORTEN_MODE): Ditto.

2002-08-30  Denis Chertykov  <denisc@overta.ru>

	* config/ip2k/ip2k.c (ip2k_set_compare): Remove all const_double
	stuff.
	(ip2k_gen_unsigned_comp_branch): Handle CONST_INT and
	CONST_DOUBLE constants.

2002-08-30  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/alpha/alpha.h (TARGET_CPU_CPP_BUILTINS): Move language-
	related defines to...
	(SUBTARGET_LANGUAGE_CPP_BUILTINS): ...here.
	* config/alpha/netbsd.h (SUBTARGET_LANGUAGE_CPP_BUILTINS): Redefine
	as a no-op.

2002-08-30  Krister Walfridsson  <cato@df.lth.se>

	* config/arm/arm.c (arm_asm_output_labelref): New function.
	* config/arm/arm.h (ASM_OUTPUT_LABELREF): Call arm_asm_output_labelref.
	* config/arm/arm-protos.h: Add prototype for arm_asm_output_labelref.

2002-08-29  Rodney Brown  <rbrown64@csc.com.au>

	* doc/install.texi (Specific, alpha*-dec-osf*): Add "virtual
	memory exhausted" workarounds.

2002-08-30  Gabriel Dos Reis  <gdr@integrable-solutions.net>

	* diagnostic.c (fancy_abort): Don't repeat "internal error".
	* toplev.c (crash_signal): Likewise.

2002-08-30  Nicola Pero  <n.pero@mi.flashnet.it>

	* doc/cpp.texi (__NEXT_RUNTIME__): Extended documentation.
	* doc/invoke.texi (-fnext-runtime, -Wno-protocol, -Wselector):
	Extended, updated documentation.
	(-Wundeclared-selector): Documented.

2002-08-29  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/chorus.h: Consistently define *_DEBUGGING_INFO with
	the value 1.  Do not undef before defining.
	* config/darwin.h: Likewise.
	* config/dbx.h: Likewise.
	* config/dbxcoff.h: Likewise.
	* config/dbxelf.h: Likewise.
	* config/elfos.h: Likewise.
	* config/interix.h: Likewise.
	* config/lynx-ng.h: Likewise.
	* config/lynx.h: Likewise.
	* config/netware.h: Likewise.
	* config/psos.h: Likewise.
	* config/svr3.h: Likewise.
	* config/alpha/alpha.h: Likewise.
	* config/alpha/elf.h: Likewise.
	* config/alpha/vms.h: Likewise.
	* config/arc/arc.h: Likewise.
	* config/arm/aout.h: Likewise.
	* config/arm/coff.h: Likewise.
	* config/c4x/c4x.h: Likewise.
	* config/h8300/h8300.h: Likewise.
	* config/i386/cygwin.h: Likewise.
	* config/i386/djgpp.h: Likewise.
	* config/i386/gas.h: Likewise.
	* config/i386/gstabs.h: Likewise.
	* config/i386/i386-coff.h: Likewise.
	* config/i386/i386-interix.h: Likewise.
	* config/i386/sco5.h: Likewise.
	* config/i386/svr3dbx.h: Likewise.
	* config/i386/sysv3.h: Likewise.
	* config/i386/win32.h: Likewise.
	* config/i386/x86-64.h: Likewise.
	* config/i960/i960.h: Likewise.
	* config/ia64/ia64.h: Likewise.
	* config/ip2k/ip2k.h: Likewise.
	* config/m32r/m32r.h: Likewise.
	* config/m68k/3b1.h: Likewise.
	* config/m68k/3b1g.h: Likewise.
	* config/m68k/ccur-GAS.h: Likewise.
	* config/m68k/coff.h: Likewise.
	* config/m68k/hp2bsd.h: Likewise.
	* config/m68k/hp310g.h: Likewise.
	* config/m68k/hp320g.h: Likewise.
	* config/m68k/hp3bsd.h: Likewise.
	* config/m68k/hp3bsd44.h: Likewise.
	* config/m68k/linux-aout.h: Likewise.
	* config/m68k/m68k-aout.h: Likewise.
	* config/m68k/mot3300.h: Likewise.
	* config/m68k/netbsd.h: Likewise.
	* config/m68k/openbsd.h: Likewise.
	* config/m68k/pbb.h: Likewise.
	* config/m68k/plexus.h: Likewise.
	* config/m68k/sun2.h: Likewise.
	* config/m68k/sun3.h: Likewise.
	* config/m68k/tower-as.h: Likewise.
	* config/m68k/vxm68k.h: Likewise.
	* config/m88k/aout-dbx.h: Likewise.
	* config/m88k/m88k-aout.h: Likewise.
	* config/mcore/mcore-elf.h: Likewise.
	* config/mcore/mcore-pe.h: Likewise.
	* config/mips/elf.h: Likewise.
	* config/mips/elf64.h: Likewise.
	* config/mips/iris5gas.h: Likewise.
	* config/mips/iris6.h: Likewise.
	* config/mips/mips.h: Likewise.
	* config/mips/sni-gas.h: Likewise.
	* config/mmix/mmix.h: Likewise.
	* config/ns32k/netbsd.h: Likewise.
	* config/pa/pa64-hpux.h: Likewise.
	* config/romp/romp.h: Likewise.
	* config/rs6000/sysv4.h: Likewise.
	* config/rs6000/xcoff.h: Likewise.
	* config/sh/coff.h: Likewise.
	* config/sh/elf.h: Likewise.
	* config/sparc/linux64.h: Likewise.
	* config/sparc/liteelf.h: Likewise.
	* config/sparc/netbsd.h: Likewise.
	* config/sparc/openbsd.h: Likewise.
	* config/sparc/pbd.h: Likewise.
	* config/sparc/sp64-elf.h: Likewise.
	* config/sparc/sp86x-elf.h: Likewise.
	* config/sparc/sparc.h: Likewise.
	* config/vax/vax.h: Likewise.
	* config/vax/vaxv.h: Likewise.

2002-08-29  "Dhananjay R. Deshpande" <dhananjayd@kpit.com>

	* h8300.c (shift_alg_hi): Various tweaks to improve performance
	of HImode shifts.
	(get_shift_alg): Corresponding changes.

2002-08-29  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* som.h (ALWAYS_STRIP_DOTDOT): Define to 1.

2002-08-29  Richard Henderson  <rth@redhat.com>

	* expr.h (enum block_op_methods): New.
	(emit_block_move): Update prototype.
	* expr.c (block_move_libcall_safe_for_call_parm): New.
	(emit_block_move_via_loop): New.
	(emit_block_move): Use them.  New argument METHOD.
	(emit_push_insn): Always respect the given alignment.
	(expand_assignment): Update call to emit_block_move.
	(store_expr, store_field, expand_expr): Likewise.
	* builtins.c (expand_builtin_apply): Likewise.
	(expand_builtin_memcpy, expand_builtin_va_copy): Likewise.
	* function.c (expand_function_end): Likewise.
	* config/sh/sh.c (sh_initialize_trampoline): Likewise.
	* config/sparc/sparc.c (sparc_va_arg): Likewise.
	* calls.c (expand_call, emit_library_call_value_1): Likewise.
	(save_fixed_argument_area): Use emit_block_move with
	BLOCK_OP_CALL_PARM instead of move_by_pieces.
	(restore_fixed_argument_area): Likewise.
	(store_one_arg): Fix alignment parameter to emit_push_insn.

2002-08-29  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* install.texi (hppa64-hp-hpux11*): Document installation procedure.

2002-08-29  Catherine Moore  <clm@redhat.com>

	* config/v850/v850.h (MULDI3_LIBCALL, UCMPDI2_LIBCALL, CMPDI2_LIBCALL,
	NEGDI2_LIBCALL, INIT_TARGET_OPTABS, MASK_STRICT_ALIGN): Define.
	(PREDICATE_CODES): Include new predicates.
	(RTX_COSTS): Handle UMOD and UDIV.  Tune MULT for v850e.
	(TARGET_SWITCHES):  Add strict-align.
	(TARGET_STRICT_ALIGN): New.
	(MASK_DEFAULT, STRICT_ALIGNMENT):  Redefine.
	* config/v850/t-v850 (MULTILIB_OPTIONS, MULTILIB_DIRNAMES):
	Define.
	(LIB1ASMFUNCS): Add v850_negdi2, v850_cmpdi2, v850_ucmpdi2,
	v850_muldi3.
	* config/v850/lib1funcs.asm (L_callt_save_r2_r29, L_return_r2_r29,
	L_callt_save_r2_r31, L_return_r2_r31,
	L_save_all_interrupt): Change addi to add.
	(L_save_interrupt, L_return_interrupt): Rework.
	(__return_r31):  Correct .size directive.
	(mulsi3, divsi3, udivsi3, umodsi3, modsi3): Tune for v850e.
	(v850_negdi2, v850_cmpdi2, v850_ucmpdi2, v850_muldi3):
	New routines.
	* config/v850/v850.c (expand_prologue): Call
	gen_callt_save_interrupt, gen_callt_restore_all_interrupt,
	gen_callt_return_interrupt and gen_callt_save_all_interrupt.
	(reg_or_int9_operand): New predicate.
	(reg_or_const_operand): New routine.
	* config/v850/v850.md (return_interrupt): Changed from
	restore_interrupt.
	(callt_save_all_interrupt): Changed from save_all_interrupt_v850e.
	(callt_save_interrupt): Change save sequence.
	(callt_return_interrupt): New.
	(save_interrupt): Don't use runtime function for LONG_CALLS
	and TARGET_PROLOG_FUNCTION.
	(save_all_interrupt): Likewise.
	(mulsi3): Use new predicate.
	(moviscc): Disallow some combination of constants.
	Fix define_split for sasf insns, so that it will not generate bad
	code if operand0 and operand5 are the same.
	* config/v850/v850-protos.h: Prototype new predicates.

2002-08-28  Gabriel Dos Reis  <gdr@integrable-solutions.net>

	* c-common.c (builtin_define_type_precision): New function.
	(cb_register_builtins): Use it.  Define __WCHAR_UNSIGNED__ is
	wchar_t is unsigned in C++.
	* doc/cpp.texi (Common Predefined Macros): Document
	__WCHAR_UNSIGNED__, __CHAR_BIT__, __WCHAR_BIT__, __SHRT_BIT__,
	__INT_BIT__, __LONG_BIT__, __LONG_LONG_BIT__, __FLOAT_BIT__,
	__DOUBLE_BIT__, __LONG_DOUBLE_BIT__.

2002-08-28  Sylvain Pion <pion@cs.nyu.edu>

	* doc/invoke.texi (-Wreorder): Remove remaining pieces from the generic
	section.  Mention that it is enabled by -Wall.
	(-Wall): Mention that there can be language-specific warnings as well.
	(-Wctor-dtor-privacy): Mention that it is enabled by default.
	(-Wnon-virtual-dtor): Mention that it is enabled by -Wall.

2002-08-28  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (calc_live_regs): Save FPSCR_REG in an interrupt handler
	if it is ever live.

	* sh.c (sh_handle_interrupt_handler_attribute): Reject interrupt_handler
	attribute for SHCOMPACT.

	* sh.h (OVERRIDE_OPTIONS): If align_function isn't set, set it
	appropriately.
	(FUNCTION_BOUNDARY): Specify only the minimum alignment required
	by the ABI.

	* sh.h (SH5_WOULD_BE_PARTIAL_NREGS): Also handle TImode case.

2002-08-28  Jason Thorpe  <thorpej@wasabisystems.com>

	* config.gcc (mips*-*-netbsd*): Set target_cpu_default to
	"MASK_GAS|MASK_ABICALLS".
	* config/mips/netbsd.h (TARGET_ENDIAN_DEFAULT)
	(TARGET_DEFAULT): Remove.
	(MACHINE_TYPE): Undefine before defining.
	(DBX_DEBUGGING_INFO, PREFERRED_DEBUGGING_TYPE): Remove.

2002-08-27  Mark Mitchell  <mark@codesourcery.com>

	* c-common.c (warn_abi): New variable.
	* c-common.h (warn_abi): Likewise.
	* c-opts.c (COMMAND_LINE_OPTIONS): Add -Wabi.
	(c_common_decode_option): Handle it.
	* doc/invoke.texi: Document -Wabi.

2002-08-27  Nicola Pero  <n.pero@mi.flashnet.it>

	* c-common.c (warn_undeclared_selector): New variable.
	* c-common.h (warn_undeclared_selector): Idem.
	* c-opts.c (c_common_decode_option): Set warn_undeclared_selector
	to on when -Wundeclared-selector is found.
	(COMMAND_LINE_OPTIONS): Added -Wundeclared-selector.
	* objc/objc-act.c (build_selector_expr): If
	warn_undeclared_selector is set, check that the selector has
	already been defined, and emit a warning if not.

2002-08-27  Nick Clifton  <nickc@redhat.com>
	    Catherine Moore  <clm@redhat.com>
	    Jim Wilson  <wilson@cygnus.com>

	* config.gcc: Add v850e-*-* target.
	Add --with-cpu= support for v850.
	* config/v850/lib1funcs.asm: Add v850e callt functions.
	* config/v850/v850.h: Add support for v850e target.
	* config/v850/v850.c: Add functions to support v850e target.
	* config/v850/v850-protos.h: Add prototypes for new functions in v850.c.
	* config/v850/v850.md: Add patterns for v850e instructions.
	* doc/invoke.texi: Document new v850e command line switches.

2002-08-27  J"orn Rennecke <joern.rennecke@superh.com>
			  Aldy Hernandez <aldyh at redhat dot com>

	* doc/tm.texi: Applied numerous fixes to the automaton based
	scheduler descrition.

2002-08-27  Jan Hubicka  <jh@suse.cz>

	* i386.c (classify_argument): Handle variable sized objects.

2002-08-27  Jan Hubicka  <jh@suse.cz>

	* i386.c (ix86_expand_int_movcc): Fix RTL sharing problem

2002-08-27  Jan Hubicka  <jh@suse.cz>

	* libgcc2.c (__bb_exit_func): Properly write the summarized statistics.

2002-08-27  Jan Hubicka  <jh@suse.cz>

	* i386.c (classify_argument): Properly compute word size of the analyzed object.

2002-08-27  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.md (attribute type): Add types mt_group, fload, pcfload, fpul_gp,
	mac_gp ftrc_s and cwb.  Add / Adjust definitions in individual insn
	accordingly.
	(attribute insn_class): Provide default definitions based on type.
	Remove all insn-specific settings.
	(various function units): Remove old SH4 scheduling.
	(branch_zero, dfp_comp, late_fp_use, any_fp_comp, any_int_load):
	New attributes.  Set them where appropriate.
	(cpu unit FS): Don't define / use.
	(F3, load_store): New cpu units.
	(F01): New reservation.
	(all insn_reservations): Make dependent on sh4 pipeline model.
	Fix latencies.
	(nil, reg_mov, freg_mov, sh4_fpul_gp, sh4_call): New insn_reservations.
	(sh4_mac_gp, fp_arith_ftrc, arith3, arith3b): Likewise.
	(mt insn_reservation): Use type mt_group.
	(insn_reservation load_store): Split into sh4_load, sh4_load_si,
	sh4_fload and sh4_store.
	(insn_reservation branch_zero and branch): Replace with sh4_branch.
	(insn_reservation branch_far): Replace with sh4_return.
	(insn_reservation return_from_exp): Rename to:
	(sh4_return_from_exp).  Change to be just d_lock*5.
	(insn_reservation lds_to_pr): Rename to:
	(sh4_lds_to_pr).  Change to be just d_lock*2.
	(insn_reservation ldsmem_to_pr, sts_from_pr): Change to be just
	d_lock*2.
	(insn_reservation prload_mem): Rename to:
	(sh4_prstore_mem).  Change to d_lock*2,nothing,memory.
	(insn_reservation fpscr_store): Rename to:
	(fpscr_load).  Change to d_lock,nothing,F1*3.
	(insn_reservation fpscr_store_mem): Rename to:
	(fpscr_load_mem).  Change to d_lock,nothing,(F1+memory),F1*2.
	(insn_reservation multi): Change to
	d_lock,(d_lock+f1_1),(f1_1|f1_2)*3,F2.
	(insn_reservation fp_arith): Change to issue,F01,F2.
	(insn_reservation fp_div: Change to issue,F01+F3,F2+F3,F3*7,F1+F3,F2.
	(insn_reservation dp_float): Change to issue,F01,F1+F2,F2.
	(insn_reservation fp_double_arith): Change to issue,F01,F1+F2,fpu*4,F2.
	(insn_reservation fp_double_cmp): Change to
	d_lock,(d_lock+F01),F1+F2,F2.
	(insn_reservation dp_div): Change to
	issue,F01+F3,F1+F2+F3,F2+F3,F3*16,F1+F3,(fpu+F3)*2,F2.
	* sh.c (flow_dependent_p, flow_dependent_p_1): New functions.
	(sh_adjust_cost, SHcompact): Differentiate between different
	kinds of dependencies.  Drop factor of ten for superscalar.
	Use new instruction types.  Add new exception rules.

	* sh.md (mulhisi3, umulhisi3: Add a REG_EQUAL note.

	* sh.md (mperm_w): Add DONE.

2002-08-27  David Edelsohn  <edelsohn@gnu.org>

	* longlong.h: Import current PowerPC defintion from GMP-4.1.

	* config/rs6000/rs6000.h (MIN_UNITS_PER_WORD): Add IN_LIBGCC2 case.

	* config/rs6000/linux64.h (ADJUST_FIELD_ALIGN): Undef before define.

2002-08-27  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (MAX_FIXED_MODE_SIZE): Define.

2002-08-27  Gabriel Dos Reis  <gdr@soliton.integrable-solutions.net>

	* doc/cpp.texi (Common Predefined Macros): Don't mess with table
	delimiter.

2002-08-27  Gabriel Dos Reis  <gdr@integrable-solutions.net>

	* c-common.c (cpp_define_data_format): New function.
	(cb_register_builtins): Call it.

	* doc/cpp.texi (Common Predefined Macros): Document
	__TARGET_BITS_ORDER__, __TARGET_BYTES_ORDER__,
	__TARGET_INT_WORDS_ORDER__, __TARGET_FLOAT_WORDS_ORDER__,
	__TARGET_FLOAT_FORMAT__, __TARGET_USES_VAX_F_FLOAT__,
	__TARGET_USES_VAX_D_FLOAT__, __TARGET_USES_VAX_G_FLOAT__,
	__TARGET_USES_VAX_H_FLOAT__.

2002-08-26  Ziemowit Laski <zlaski@apple.com>

	* objc/objc-act.c (get_super_receiver): If inside a class method
	of a category, cast the receiver to 'id' before accessing the 'isa'
	field so that <objc/objc-class.h> is not needed.  For NeXT runtime.

2002-08-26  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390-protos.h (s390_function_prologue,
	s390_function_epilogue): Remove.
	config/s390/s390.c (s390_function_prologue, s390_function_epilogue,
	TARGET_ASM_FUNCTION_PROLOGUE, TARGET_ASM_FUNCTION_EPILOGUE): Remove.

	config/s390/s390.c (s390_machine_dependent_recorg): New function.
	config/s390/s390-protos.h (s390_machine_dependent_reorg): Declare it.
	config/s390/s390.h (MACHINE_DEPENDENT_REORG): Call it.
	config/s390/s390.c (s390_split_branches, s390_chunkify_pool): Adapt
	to being called from MACHINE_DEPENDENT_REORG.  Update regs_ever_live.

	config/s390/s390.c (s390_frame_info): Inline save_fprs_p.  Always
	assume BASE_REGISTER and RETURN_REGNUM need to be saved.
	(s390_emit_prologue): Assume RETURN_REGNUM to be saved iff
	function is not a leaf function.  Use save_gprs and restore_gprs.
	(s390_emit_epilogue): Likewise.
	(save_gprs, restore_gprs): New functions.
	(struct s390_frame): Remove return_reg_saved_p member.
	(save_fprs_p): Remove.
	(s390_optimize_prolog): New function.
	(s390_legitimate_reload_constant): Remove now unnecessary check.

	(s390_function_count): Remove.
	(s390_output_symbolic_const): Replace s390_function_count by
	current_function_funcdef_no.
	(s390_output_constant_pool): Likewise.

	(legitimize_pic_address): Use regs_ever_live to track PIC register
	instead of current_function_uses_pic_offset_table.
	(s390_emit_prologue): Likewise.
	config/s390/s390.md ("call", "call_value"): Likewise.

2002-08-26  Neil Booth  <neil@daikokuya.co.uk>

	* c-opts.c (find_opt): Don't complain about wrong languages
	here.  Return exact matches even for wrong language.
	(c_common_decode_option): Complain about wrong languages
	here.

2002-08-24  Stuart Hastings  <stuart@apple.com>

	* function.h (struct function): Add flag
	all_throwers_are_sibcalls.
	* except.c (set_nothrow_function_flags): Replaces
	nothrow_function_p. Set new flag.
	* except.h (set_nothrow_function_flags): Replaces
	nothrow_function_p.
	* dwarf2out.c (struct dw_fde_struct): Add flag
	all_throwers_are_sibcalls.
	(output_call_frame_info): Test it.
	(dwarf2out_begin_prologue) Propagate it from cfun to
	dw_fde_struct.
	* toplev.c (rest_of_compilation): Update calls to
	nothrow_function_p.

2002-08-23  Zack Weinberg  <zack@codesourcery.com>

	* ggc-page.c (compute_inverse): Short circuit calculation for
	object sizes larger than half a page.

2002-08-23  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.c (rs6000_elf_select_section): Treat
	DEFAULT_ABI == ABI_AIX like PIC.  Test PIC & reloc for readonly
	default.
	(rs6000_elf_unique_section): Likewise.

2002-08-23  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* ns32k.c (ns32k_globalize_label): Delete.
	* ns32k.h (ASM_OUTPUT_LABEL, TARGET_ASM_GLOBALIZE_LABEL): Delete.

2002-08-23  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.c (output_mi_thunk): Don't determine insns
	for loading delta with num_insns_constant_wide.  Calculate
	delta_low, delta_high without using a conditional.

2002-08-22  Jason Merrill  <jason@redhat.com>

	* c-common.h (RETURN_STMT_EXPR): Rename from RETURN_EXPR.
	* c-common.def: Adjust.
	* c-dump.c (c_dump_tree): Adjust.
	* c-semantics.c (genrtl_return_stmt): Adjust.
	* c-pretty-print.c (pp_c_statement): Adjust.
	* tree-inline.c (copy_body_r): Adjust.

2002-08-22  Zack Weinberg  <zack@codesourcery.com>

	* ggc-page.c: Avoid division in ggc_set_mark.
	(DIV_MULT, DIV_SHIFT, OFFSET_TO_BIT, inverse_table,
	compute_inverse): New.
	(ggc_set_mark, ggc_marked_p): Use OFFSET_TO_BIT.
	(init_ggc): Initialize inverse_table.

2002-08-22  Tom Tromey  <tromey@redhat.com>

	* doc/install.texi (Configuration): Document --datadir.

2002-08-22  Alexandre Oliva  <aoliva@redhat.com>

	* Makefile.in ($(BUILD_PREFIX_1)varray.o): Depend on $(GGC_H).

2002-08-22  Hans-Peter Nilsson  <hp@bitrange.com>

	* gengtype-lex.l (ID): Allow underscore as first character.

2002-08-21  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.c (rs6000_xcoff_asm_globalize_label): New
	function.
	(rs6000_xcoff_asm_named_section): Rename.
	* config/rs6000/xcoff.h (TARGET_ASM_GLOBALIZE_LABEL): Define.

2002-08-21  Tom Tromey  <tromey@redhat.com>

	For PR java/6005 and PR java/7611:
	* fold-const.c (fold_truthop): Use can_use_bit_fields_p.
	(fold): Likewise.
	* langhooks.c (lhd_can_use_bit_fields_p): New function.
	* langhooks-def.h (lhd_can_use_bit_fields_p): Declare.
	(LANG_HOOKS_CAN_USE_BIT_FIELDS_P): New define.
	(LANG_HOOKS_INITIALIZER): Use it.
	* langhooks.h (struct lang_hooks) [can_use_bit_fields_p]: New
	field.

2002-08-21  Stan Shebs  <shebs@apple.com>

	* tree.c (finish_vector_type): Fix a typo in a comment.
	* Makefile.in: Fix "the the" stutters in comments.
	* genautomata.c: Ditto.
	* ifcvt.c: Ditto.
	* regrename.c: Ditto.
	* config/alpha/alpha.c: Ditto.
	* config/alpha/vms-crt0-64.c: Ditto.
	* config/alpha/vms-crt0.c: Ditto.
	* config/alpha/vms-psxcrt0-64.c: Ditto.
	* config/alpha/vms-psxcrt0.c: Ditto.
	* config/d30v/d30v.h: Ditto.
	* config/fr30/fr30.h: Ditto.
	* config/rs6000/rs6000.c: Ditto.
	* config/stormy16/stormy16.h: Ditto.
	* doc/md.texi: Ditto.

2002-08-21  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* cppinit.c (remove_dup_nonsys_dirs): Fix warning and return value.

2002-08-21  Joseph S. Myers  <jsm@polyomino.org.uk>

	* c-decl.c (grokdeclarator): Make invalid combinations with long,
	short, signed or unsigned into hard errors.  Fixes PR c/4319.
	Also make duplicate modifiers such as "short short" into hard
	errors.

2002-08-21  Andrew Pinski <pinskia@physics.uc.edu>
	    Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* doc/tm.texi (TARGET_ASM_GLOBALIZE_LABEL): Move '@end deftypefn'
	to the actual end.  Add '@end table' and '@table @code'.

2002-08-20  Geoffrey Keating  <geoffk@redhat.com>

	* doc/tm.texi (Label Output): Add missing '@end deftypefn'.

	* unroll.c (biv_total_increment): Don't try to compute the total
	increment for FP BIVs.

2002-08-20  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* alpha.c (TARGET_ASM_GLOBALIZE_LABEL): Define for unicosmk.
	* alpha/elf.h (ASM_OUTPUT_EXTERNAL_LIBCALL,
	ASM_OUTPUT_ALIGNED_BSS): Use target hook.
	* alpha/osf.h (ASM_OUTPUT_WEAK_ALIAS): Likewise.
	* alpha/unicosmk.h (ASM_GLOBALIZE_LABEL): Delete.
	* arm/aof.h (ASM_GLOBALIZE_LABEL): Likewise.
	(GLOBAL_ASM_OP): Define.
	* arm.c (aof_globalize_label): New function.
	(TARGET_ASM_GLOBALIZE_LABEL): Define for AOF.
	* arm/unknown-elf.h (ASM_OUTPUT_ALIGNED_BSS): Use target hook.
	* c4x.c (c4x_globalize_label): New function.
	(TARGET_ASM_GLOBALIZE_LABEL): Define for c4x.
	* c4x.h (ASM_GLOBALIZE_LABEL): Delete.
	(GLOBAL_ASM_OP): Define.
	* cris/aout.h (ASM_OUTPUT_EXTERNAL_LIBCALL): Use target hook.
	* darwin-protos.h (darwin_globalize_label): Declare.
	* darwin.c (darwin_globalize_label): New function.
	* darwin.h (ASM_DECLARE_CLASS_REFERENCE): Use target hook.
	(ASM_GLOBALIZE_LABEL): Delete.
	(GLOBAL_ASM_OP, TARGET_ASM_GLOBALIZE_LABEL): Define.
	* dsp16xx.c (asm_output_common): Use target hook.
	* elfos.h (ASM_OUTPUT_EXTERNAL_LIBCALL): Likewise.
	* frv.h (ASM_GLOBALIZE_LABEL): Delete.
	(GLOBAL_ASM_OP): Define.
	* i370.c (i370_globalize_label): New function.
	(TARGET_ASM_GLOBALIZE_LABEL): Define for i370.
	* i370.h (ASM_GLOBALIZE_LABEL): Delete.
	* i386.c (ix86_asm_file_end): Use target hook.
	* i386/sco5.h (ASM_GLOBALIZE_LABEL): Don't undef.
	(ASM_OUTPUT_EXTERNAL_LIBCALL): Use target hook.
	* ia64.c (ia64_asm_output_external): Likewise.
	* ia64/sysv4.h: Update comment.
	* m32r.h (ASM_OUTPUT_ALIGNED_BSS): Use target hook.
	* mips/elf.h (ASM_OUTPUT_ALIGNED_BSS): Likewise.
	* mips/iris5.h (ASM_OUTPUT_WEAK_ALIAS): Use target hook.
	* mips/linux.h (ASM_OUTPUT_ALIGNED_BSS): Likewise.
	* mips.h (ASM_OUTPUT_ALIGNED_DECL_COMMON): Use target hook.
	* mmix-protos.h (mmix_asm_globalize_label): Delete.
	* mmix.c (mmix_asm_globalize_label): Likewise.
	* mmix.h (ASM_GLOBALIZE_LABEL): Likewise.
	(GLOBAL_ASM_OP): Define.
	* ns32k.c (ns32k_globalize_label): New function.
	* ns32k.h (TARGET_ASM_GLOBALIZE_LABEL): Define for ns32k.
	(ASM_GLOBALIZE_LABEL): Delete.
	* pa/pa-linux.h (ASM_GLOBALIZE_LABEL): Don't undef.
	(TARGET_ASM_GLOBALIZE_LABEL): Undefine.
	* pa.c (pa_globalize_label): New function.
	* pa.h (ASM_GLOBALIZE_LABEL): Delete.
	(TARGET_ASM_GLOBALIZE_LABEL): Define for pa.
	* rs6000/darwin.h (ASM_GLOBALIZE_LABEL): Delete.
	(GLOBAL_ASM_OP): Define.
	(TARGET_ASM_GLOBALIZE_LABEL): Undef.
	* rs6000/sysv4.h (ASM_OUTPUT_ALIGNED_BSS): Use target hook.
	* rs6000/xcoff.h (ASM_GLOBALIZE_LABEL): Delete.
	(GLOBAL_ASM_OP): Define.
	* v850.c (v850_output_aligned_bss): Use target hook.
	* vax.c (vms_globalize_label): New function.
	(TARGET_ASM_GLOBALIZE_LABEL): Define for vms.
	* vax/vms.h (ASM_GLOBALIZE_LABEL): Delete.
	(GLOBAL_ASM_OP): Define.
	* defaults.h (ASM_GLOBALIZE_LABEL): Delete.
	* doc/tm.texi: Update docs.
	* dwarf2out.c (default_eh_frame_section, output_die_symbol): Use
	target hook.
	* final.c (output_alternate_entry_point): Likewise.
	* hooks.c (hook_FILEptr_constcharptr_void): New function.
	* hooks.h (hook_FILEptr_constcharptr_void): Declare.
	* output.h (assemble_global): Delete.
	(default_globalize_label): Declare.
	* system.h (ASM_GLOBALIZE_LABEL): Poison.
	* target-def.h (TARGET_ASM_GLOBALIZE_LABEL): Define.
	(TARGET_ASM_OUT): Add TARGET_ASM_GLOBALIZE_LABEL.
	* target.h (gcc_target): Add globalize_label member.
	* varasm.c (asm_output_bss, asm_output_aligned_bss,
	globalize_decl): Use target hook.
	(assemble_global): Delete.
	(default_globalize_label): New function.

2002-08-20  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* dsp16xx.h (dsp16xx_umulhi3_libcall): Delete.

2002-08-20  Devang Patel  <dpatel@apple.com>
	* tree.c (get_qualified_type): Add TYPE_CONTEXT check.

2002-08-20  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* arc.c (output_shift): Use stdio instead of asm_fprintf.
	* arm.c (thumb_output_function_prologue): Likewise.
	* avr.c (print_operand): Likewise.
	* c4x.c (c4x_print_operand): Likewise.
	* c4x.h (ASM_OUTPUT_INTERNAL_LABEL, TRAMPOLINE_TEMPLATE,
	ASM_OUTPUT_REG_PUSH, ASM_OUTPUT_REG_POP): Likewise.
	* cris.c (cris_target_asm_function_prologue,
	cris_asm_output_mi_thunk): Likewise.
	* h8300.c (print_operand): Likewise.
	* h8300.h (ASM_OUTPUT_ADDR_VEC_ELT): Likewise.
	* ip2k.c (print_operand): Likewise.  Fix format specifier.
	* m68hc11.c (asm_print_register, print_operand,
	print_operand_address): Use stdio instead of asm_fprintf.
	(print_operand_address): Fix format specifier.
	* m68hc11.h (FUNCTION_PROFILER, ASM_OUTPUT_ADDR_DIFF_ELT,
	ASM_OUTPUT_ADDR_VEC_ELT, ASM_OUTPUT_ALIGN): Use stdio instead of
	asm_fprintf.
	* m68k/amix.h (ASM_OUTPUT_INTERNAL_LABEL): Likewise.
	* m68k/atari.h (ASM_OUTPUT_INTERNAL_LABEL): Likewise.
	* m68k.c (m68k_output_function_prologue,
	m68k_output_function_epilogue, print_operand): Likewise.
	* mmix.c (mmix_asm_output_mi_thunk, mmix_asm_weaken_label):
	Likewise.  Fix format specifier.
	* mn10200.h (ASM_OUTPUT_ADDR_VEC_ELT): Likewise.
	* mn10300.h (ASM_OUTPUT_ADDR_VEC_ELT): Likewise.
	* v850.h (ASM_OUTPUT_ADDR_VEC_ELT): Likewise.

2002-08-15  Eric Christopher  <echristo@redhat.com>
	    Jeff Knaggs  <jknaggs@redhat.com>

	* config.gcc (mipsisa64sr71k-elf): New target.
	* config/mips/sr71k.md: New file.
	* config/mips/mips.md: Use it.
	(rot*): Add sr71k specifics.
	* config/mips/t-sr71k: New file.
	* config/mips/mips.h (sr71k): New cpu.
	(TARGET_SR71K): Use it.
	(TUNE_SR71K): Ditto.
	(GENERATE_BRANCHLIKELY): Ditto.
	(ISA_HAS_MULHI, ISA_HAS_MULS, ISA_HAS_MSAC, ISA_HAS_MACC,
	ISA_HAS_ROTR_SIISA_HAS_ROTR_DI): Ditto.
	* config/mips/mips.c (sr71k): New cpu.
	(mips_use_dfa_pipeline_interface): Use.

2002-08-15  Eric Christopher  <echristo@redhat.com>
	    Richard Sandiford <rsandifo@redhat.com>
	    Aldy Hernandez  <aldyh@redhat.com>
	    Graham Stott    <grahams@redhat.com>
	    Michael Meissner  <meissner@redhat.com>
	    Gavin Romig-Koch  <gavin@redhat.com>
	    Ken Raeburn  <raeburn@cygnus.com>
	    Alexandre Oliva <aoliva@redhat.com>

	* config.gcc (mips64vr-elf): New target.
	* config/mips/5400.md: New file.
	* config/mips/5500.md: Ditto.
	* config/mips/mips.md: Use them.
	(frsqrt): New.
	* config/mips/mips.c (vr4111, vr4121, vr4320, vr5400, vr5500): New
	cpus.
	(mips_issue_rate): Use them.
	(mips_use_dfa_pipeline_interface): New function. Use for 5400 and 5500.
	(TARGET_SCHEDUSE_DFA_PIPELINE_INTERFACE): Define. Use above.
	* config/mips/mips.h (vr4111, vr4121, vr4320, vr5400, vr5500): New
	cpus.
	(TARGET_MIPSx): Use them.
	(TUNE_MIPSx): Ditto.
	(GETNATE_MULT3_SI): Ditto.
	(ISA_HAS_BRANCHLIKELY): Ditto.
	(ISA_HAS_CONDMOVE): Ditto.
	(ISA_HAS_NMADD_NMSUB): Ditto.
	(ISA_HAS_MULHI): New. Ditto.
	(ISA_HAS_MULS): Ditto.
	(ISA_HAS_MSAC): Ditto.
	(ISA_HAS_MACC): Ditto.
	(ISA_HAS_ROTR_SI): Ditto.
	(ISA_HAS_ROTR_DI): Ditto.
	(RTX_COSTS): Use.

2002-08-20  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* cppinit.c (remove_dup_dir): Add head_ptr argument to handle removal
	at head.
	(remove_dup_nonsys_dirs): New function.
	(remove_dup_dirs): Change argument head to head_ptr.  Remove warnings.
	(merge_include_chains): Remove non-system include directories from
	quote and bracket include chains when they duplicate equivalent system
	directories.
	* doc/cpp.texi (-I): Update.
	* doc/cppopts.texi (-I): Update.
	* doc/install.texi (--with-local-prefix): Further document usage of
	this option.
	* doc/invoke.texi (-I): Update.

2002-08-20  Richard Henderson  <rth@redhat.com>

	* expr.c (TARGET_MEM_FUNCTIONS): Transform to boolean.
	(emit_block_move): Split out subroutines.
	(emit_block_move_via_movstr): New.
	(emit_block_move_via_libcall): New.  Emit bcopy via normal call also.
	(emit_block_move_libcall_fn): New.  Construct function prototype for
	bcopy as well.
	(clear_storage): Split out subroutines.
	(clear_storage_via_clrstr): New.
	(clear_storage_via_libcall): New. Emit bzero as a normal call also.
	(clear_storage_libcall_fn): New.  Construct function prototype for
	bzero as well.
	(emit_push_insn): Use emit_block_move.
	(expand_assignment): Booleanize TARGET_MEM_FUNCTIONS.
	(store_constructor): Likewise.

2002-08-19  Ziemowit Laski  <zlaski@apple.com>

	* objc/objc-act.c (building_objc_message_expr): Rename to
	current_objc_message_selector.

2002-08-19  Ziemowit Laski  <zlaski@apple.com>

	* objc/objc-act.c (build_ivar_chain): Remove.
	(objc_copy_list): Likewise.
	(get_class_ivars): Inline call to removed build_ivar_chain
	function.  Save off a clean copy of ivars in the CLASS_OWN_IVARS
	slot; use that slot (rather than CLASS_IVARS) when accessing
	ivars for base classes.  Call copy_list and chainon instead of
	objc_copy_list.
	(build_private_template): Call get_class_ivars instead of
	build_ivar_chain.
	(start_class): Allocate room for the CLASS_OWN_IVARS slot.
	(continue_class): Call get_class_ivars instead of
	build_ivar_chain.
	(encode_field_decl): Check for DECL_BIT_FIELD_TYPE instead
	of DECL_BIT_FIELD (which may have been cleared).
	* objc/objc-act.h (CLASS_OWN_IVARS): New accessor macro.

2002-08-19  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* genautomata.c (output_translate_vect, output_state_ainsn_table,
	output_min_issue_delay_table): Mark variable with ATTRIBUTE_UNUSED
	in output file.
	(output_internal_min_issue_delay_func): Initialize variable in
	output file.

2002-08-19  Alexandre Oliva  <aoliva@redhat.com>

	* Makefile.in (GCC_FOR_TARGET): Prepend STAGE_CC_WRAPPER.
	(stage2_build, stage3_build, stage4_build): Likewise, to CC.

2002-08-19  Geoffrey Keating  <geoffk@redhat.com>
	    Steve Ellcey  <sje@cup.hp.com>

	* machmode.h (SCALAR_INT_MODE_P): New macro to test for
	scaler integer mode (MODE_INT or MODE_PARTIAL_INT).
	* explow.c (trunc_int_for_mode): Abort when the mode is not
	a scaler integer mode.
	* combine.c (expand_compound_operation): Don't expand Vector
	or Complex modes into shifts.
	(expand_field_assignment): Don't do bitwise arithmatic and
	shifts on Vector or Complex modes.
	(simplify_comparison): Don't call trunc_int_for_mode
	for VOIDmode.
	* recog.c (general_operand): Likewise.
	(immediate_operand): Likewise.
	(nonmemory_operand): Likewise.

2002-08-19  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.c (rs6000_emit_set_const): Inline
	multi-instruction SImode constant.  Add REG_EQUAL note.
	* config/rs6000/rs6000.md (movsi splitter): Use
	rs6000_emit_set_const.

2002-08-19  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* tree-inline.c (initialize_inlined_parameters): Wrap variable in
	the macro test controlling its use.

2002-08-18  H.J. Lu  (hjl@gnu.org)

	* config.gcc (*-*-linux*): Set extra_parts="crtbegin.o
	crtbeginS.o crtbeginT.o crtend.o crtendS.o", gas=yes and
	gnu_ld=yes.
	(alpha*-*-linux*, cris-*-linux*, i370-*-linux*,
	i[34567]86-*-linux*, x86_64-*-linux*, mips*-*-linux*,
	s390-*-linux*, s390x-*-linux*, sparc-*-linux*, sparc64-*-linux*,
	xtensa-*-linux*): Remove setting extra_parts, gas, and gnu_ld
	here.
	(cris-*-linux*): Remove setting thread_file here.

2002-08-18  Neil Booth  <neil@daikokuya.co.uk>

	PR preprocessor/7602
	* cppinit.c (path_include): Treat the system environment
	variables as being cxx_aware.

2002-08-17  Joseph S. Myers  <jsm@polyomino.org.uk>

	* c-decl.c (flexible_array_type_p): New function.
	(grokdeclarator, finish_struct): Use it.
	* doc/extend.texi: Document constraints on use of structures with
	flexible array members.

2002-08-17  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/t-coff, config/mips/t-elf, config/mips/t-isa3264,
	config/mips/t-r3900 (MULTILIB_MATCHES): Define.
	* config/mips/mips.h (ASM_SPEC): Use %(endian_spec).

2002-08-16  Stan Shebs  <shebs@apple.com>

	* c-common.c (cb_register_builds): Define __NEXT_RUNTIME__
	for ObjC with -fnext-runtime.
	* doc/cpp.texi: Document it.

2002-08-16  Janis Johnson  <janis187@us.ibm.com>

	* doc/install.texi (Final installation): Replace links to individual
	build status pages with a link to a common page that lists them all.

2002-08-16  Sylvain Pion <pion@cs.nyu.edu>

	* doc/invoke.texi: Fix typo.

2002-08-16  David Edelsohn  <edelsohn@gnu.org>

	* doc/install.texi (*-ibm-aix*): Explain AIX shared object versioning.

2002-08-16  Andrew Haley  <aph@redhat.com>

	* tree-inline.c: Add includes for Java inliner.
	(remap_decl): Don't handle anonymous types for Java.
	(remap_block): Add handling for Java trees.
	(copy_scope_stmt): Conditionalize for non-Java use only.
	(copy_body_r): Handle Java trees.  Add handling for
	LABELED_BLOCK_EXPR, EXIT_BLOCK_EXPR, Java blocks.
	(initialize_inlined_parameters):  Handle Java trees.
	(declare_return_variable): Likewise.
	(expand_call_inline): Handle Java trees.
	(walk_tree): Likewise.
	(copy_tree_r): Don't handle SCOPE_STMTs for Java.
	(add_stmt_to_compound): New function.

2002-08-15  Richard Henderson  <rth@redhat.com>

	* Makefile.in (LOOSE_WARN): Remove -fno-common.
	(NOCOMMON_FLAG): New substitution point.
	(GCC_WARN_CFLAGS): Include it.
	* configure.in (ac_checking): Set nocommon_flag.
	(nocommon_flag): New substitution point.

2002-08-15  Alexandre Oliva  <aoliva@redhat.com>

	* c-tree.h (skip_evaluation): Move declaration...
	* c-common.h: ... here.
	* c-typeck.c (build_external_ref): Don't assemble_external nor
	mark a tree as used if skip_evaluation is set.
	* c-parse.in (typeof): New non-terminal to set skip_evaluation
	around TYPEOF.
	(typespec_nonreserved_nonattr): Use it.

2002-08-15  Douglas B Rupp  <rupp@gnat.com>

	* dbxout.c (dbx_debug_hooks): Update end_prologue, end_epilogue.
	(xcoff_debug_hooks): Update end_prologue.
	* debug.c (do_nothing_debug_hooks): Update end_prologue, end_epilogue.
	* debug.h (end_prologue): Add file arg.
	(end_epilogue): Add line and file args.
	(dwarf2out_end_epilogue): Add line and file args.
	(vmsdbgout_after_prologue): Remove.
	* dwarf2out.c (dwarf2out_end_epilogue): Add line and file args.
	(dwarf2_debug_hooks): Update end_prologue.
	* dwarfout.c (dwarfout_end_epilogue): Add line and file args.
	(dwarfout_end_prologue): Add file arg.
	* final.c (vmsdbgout_after_prologue): Remove
	(final_end_function): Update end_epilogue call.
	(final_scan_insn): Update end_prologue call.
	* sdbout.c (sdbout_end_epilogue): Add line and file args.
	(sdbout_end_prologue): Add file arg.
	(sdb_debug_hooks): Update end_prologue.
	(sdb_begin_prologue): Update sdbout_end_prologue call.
	* vmsdbgout.c (vmsdbg_debug_hooks): Add vmsdbgout_end_prologue,
	vmsdbgout_end_function.
	(vmsdbgout_end_prologue): New function renamed from
	vmsdbgout_after_prologue. Call vmsdbgout_source_line.
	(vmsdbgout_end_function): New function.
	(vmsdbgout_end_epilogue): Add line and file args. Call
	vmsdbgout_source_line.
	(write_pclines): Write only valid line numbers.
	(write_srccorr): Don't write source correlation records if 0 lines.
	* xcoffout.c (xcoffout_end_epilogue): Add line and file args.

2002-08-15  Steve Ellcey  <sje@cup.hp.com>

	* gcc/unwind.h (_Unwind_Ptr): Make 64 bits on IA64 HP-UX.
	(_Unwind_Internal_Ptr): 32 bit version for use in
	read_encoded_value_with_base.
	* gcc/unwind-pe.h (read_encoded_value_with_base): Use
	_Unwind_Internal_Ptr instead of _Unwind_Ptr in order to get the
	right size.

2002-08-15  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* loop.c (scan_loop, move_movables, count_one_set): Cast to avoid
	signed/unsigned warnings.

	* regclass.c (init_reg_sets_1, choose_hard_reg_mode,
	record_reg_classes): Likewise.

	* reload.c (reload_inner_reg_of_subreg, push_reload,
	find_reloads_address_1): Likewise.

2002-08-15  David Edelsohn  <edelsohn@gnu.org>

	* rs6000.c (output_mi_thunk): Return to function section on
	TARGET_ELF.

	* rs6000-c.c (rs6000_cpu_cpp_builtins): Define __PPC405__ if PPC405.

2002-08-15  Ulrich Weigand  <uweigand@de.ibm.com>

	* config/s390/s390.c (legitimize_address): Optimize loading
	of large displacements.

2002-08-14  Douglas B Rupp  <rupp@gnat.com>

	* config/alpha/alpha-protos.h: Update.

	* config/alpha/alpha.c: (LINKAGE_SYMBOL_REF_P): New macro.
	(alpha_legitimate_address_p): Test LINKAGE_SYMBOL_REF_P.
	(alpha_linkage_symbol_p): New static function.
	(print_operand_address): Print linkage operand.

	(alpha_funcs_num, alpha_funcs_tree, alpha_links_tree): New static
	variables.
	(reloc_kind): New enum.
	(struct alpha_funcs): New struct.
	(struct alpha_links): Add reloc_kind field. Rename links_kind field.

	(alpha_need_linkage): Rewrite.
	(alpha_use_linkage): New global function.
	(alpha_write_linkage): Rewrite and make static.
	(alpha_write_one_linkage): Rewrite

	(alpha_start_function): Remove procedure descriptor output.
	(alpha_end_function): Write linkages at end of each function.

	* config/alpha/alpha.md (call_vms, call_value_vms): Rewrite.
	(call_vms_1, call_value_vms_1): Rewrite.

	* config/alpha/vms.h (ASM_FILE_END): Remove.

2002-08-14  Richard Henderson  <rth@redhat.com>

	* ggc-page.c (RTL_SIZE): New.
	(extra_order_size_table): Add specializations for 2 and 10 rtl slots.
	* rtl.def (BARRIER, NOTE): Pad to 9 slots.

2002-08-14  Richard Henderson  <rth@redhat.com>

	* calls.c: Include target.h.
	* Makefile.in (calls.o): Update.

	* config/alpha/alpha.c (alpha_end_function): Use targetm.binds_local_p.
	* config/alpha/alpha.h (FUNCTION_OK_FOR_SIBCALL): Likewise.

2002-08-14  Richard Henderson  <rth@redhat.com>

	* Makefile.in (LOOSE_WARN): Add -fno-common.
	* c-common.h (constant_string_class_name): Add missing extern.

2002-08-15  Neil Booth  <neil@daikokuya.co.uk>

	PR preprocessor/7358
	* c-opts.c (check_deps_environment_vars): Ignore main file
	for SUNPRO_DEPENDENCIES.
	* cppfiles.c (stack_include_file): Ignore main file if
	appropriate.
	* cpplib.h (struct cpp_options): New member in deps.
	* doc/cppenv.texi: Update.

2002-08-14  Neil Booth  <neil@daikokuya.co.uk>

	PR preprocessor/7526
	* cpplib.c (run_directive): Kludge so _Pragma dependency works.

2002-08-14  Nathan Sidwell  <nathan@codesourcery.com>

	* doc/invoke.texi (-a): Remove documentation.
	(-fprofile-arcs): Remove reference to -a, -ax options.
	* doc/gcov.texi (Gcov Data Files): Data might be merged.

2002-08-14  Gabriel Dos Reis  <gdr@nerim.net>

	Fix PR/7566
	* c-semantics.c (genrtl_case_label): Don't (mis)use
	warning_with_decl.

2002-08-14  Dale Johannesen  <dalej@apple.com>

	* explow.c (emit_stack_restore):  Emit memory clobbers
	preceding the stack pop, to prevent the scheduler from
	moving refs to variable arrays below this pop.
	* reload1.c (reload):  Preserve these clobbers for sched2.
	* doc/rtl.texi:  Document clobber (mem:BLK (scratch)).

2002-08-14  Neil Booth  <neil@daikokuya.co.uk>

	* c-opts.c (c_common_post_options): Correct test.

2002-08-14  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* m88k.h (ASM_OUTPUT_SOURCE_FILENAME): Fix incorrect argument
	order in call to fprintf.

2002-08-14  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config/sparc/sol2.h (SUBTARGET_EXTRA_SPECS): Define.

2002-08-14  Ulrich Weigand  <uweigand@de.ibm.com>

	* reload.c (find_reloads): Handle constraint letters marked by
	EXTRA_ADDRESS_CONSTRAINT and EXTRA_MEMORY_CONSTRAINT.
	(alternative_allows_memconst): Likewise.
	* reload1.c (maybe_fix_stack_asms): Likewise.
	* recog.c (asm_operand_ok, preprocess_constraints,
	constrain_operands): Likewise.
	* regclass.c (record_operand_costs, record_reg_classes): Likewise.
	* local-alloc.c (block_alloc, requires_inout): Likewise.
	* stmt.c (parse_output_constraint, parse_input_constraint): Likewise.

	* defaults.h (EXTRA_MEMORY_CONSTRAINT): Provide a default.
	(EXTRA_ADDRESS_CONSTRAINT): Likewise.
	* doc/tm.texi: Document these two new target macros.

	* config/s390/s390.c (s390_expand_plus_operand): Accept already
	valid operands.
	(q_constraint): New function.
	config/s390/s390-protos.h (q_constraint): Declare it.
	config/s390/s390.h (EXTRA_CONSTRAINT): Use it.
	(EXTRA_MEMORY_CONSTRAINT): New macro.

	* config/s390/s390.md: Throughout the machine description,
	replace all instances of the constraint combinations 'Qo'
	or 'oQ' with simply 'Q'.

2002-08-14  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.h (LINK_SPEC): Support -mrelax.
	* config/m68hc11/t-m68hc11-gas (LIBGCC2_DEBUG_CFLAGS): Can use -g now.
	(LIBGCC2_CFLAGS): Compile with -mrelax.

2002-08-14  Stephane Carrez  <stcarrez@nerim.fr>

	* doc/invoke.texi: Document -minmax for 68HC12.

	* config/m68hc11/m68hc11.md ("umaxqi3"): Use TARGET_MIN_MAX.
	("uminqi3"): Likewise.
	("uminhi3", "umaxhi3"): Likewise.

	* config/m68hc11/m68hc11.h (MASK_MIN_MAX): Define.
	(TARGET_MIN_MAX): Define.
	(TARGET_SWITCHES): New option -minmax/-mnominmax.

2002-08-14  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/t-m68hc11-gas (LIB1ASMFUNCS): Build __far_trampoline.
	(MULTILIB_OPTIONS): Must also generate for -mlong-calls.

	* config/m68hc11/larith.asm: Put a mode for ELF ABI flags.
	(ret, declare, farsym): New gas macros.
	(__premain, exit, abort, _cleanup, memcpy, memset, ___adddi3,
	___subdi3, ___notdi2, __mulhi32, __mulsi3): Use them to use 'rtc'
	and declare the symbol far when compiled with -mlong-calls.
	(__far_trampoline): New for 68HC12 trampoline code to invoke a
	far handler using jsr/bsr.

	* config/m68hc11/m68hc11-crt0.S: Put a mode for ELF ABI flags.
	(jsr): New macro to transform a 'jsr' into a 'call'.

2002-08-14  Stephane Carrez  <stcarrez@nerim.fr>

	* doc/invoke.texi: Document -mlong-calls for 68HC12.

	* config/m68hc11/m68hc11.h (CPP_SPEC): Pass -D__USE_RTC__ when
	-mlong-calls is specified.
	(ASM_DECLARE_FUNCTION_NAME): Define to generate .far and .interrupt
	assembler directives.
	(TARGET_LONG_CALL, MASK_LONG_CALL): Declare.
	(TARGET_SWITCHES): Add -mlong-calls options.
	(current_function_far): Declare.

	* config/m68hc11/m68hc11.c (m68hc11_initial_elimination_offset): Take
	into account the page register saved on the stack.
	(m68hc11_override_options): Take into account -mlong-calls option.
	(m68hc11_asm_file_start): Put a mode for the ELF flags ABI.

	* config/m68hc11/m68hc11.md ("*return_32bit"): Return rtc
	if the function is going to be in 68HC12 banked memory (-mlong-calls).
	("*return_16bit"): Likewise.
	("*return_void"): Likewise.
	("call", "call_value"): Use call for a far function call.

2002-08-14  Neil Booth  <neil@daikokuya.co.uk>

	* toplev.c (parse_options_and_default_flags): Don't call
	post_options here.
	(general_init): Initialize GC, pools and tree hash here,
	instead of lang_independent_init.
	(lang_independent_init): Rename backend_init.
	(do_compile): Call post_options hook; exit early if there
	have been errors after switch processing.
	(toplev_main): Update.

2002-08-14  Gabriel Dos Reis  <gdr@nerim.net>

	* c-pretty-print.h: Guard against multiple inclusion.
	Robustify macros.
	(pp_c_attributes): Declare.
	* c-pretty-print.c (pp_c_attributes): New function.

2002-08-13  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* m68k.c (m68k_output_function_prologue,
	m68k_output_function_epilogue): Delete versions for DPX2/MOTOROLA
	and NEWS/MOTOROLA.
	* genattrtab.c: Remove dpx2 comment.
	* libgcc2.c (__enable_execute_stack): Delete versions for
	NeXT/__MACH__, __convex__, __sysV88__, __pyr__ and
	sony_news/SYSTYPE_BSD.
	* longlong.h: Delete code for __a29k__, _AM29K, __clipper__,
	__gmicro__, __i860__, __NeXT__ and __pyr__.
	* rtl.h: Remove convex comment.
	* varasm.c: Likewise.

2002-08-13  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* c-opts.c (lang_flags): Const-ify.
	* ra-build.c (undef_table): Likewise.
	* ra.c (eliminables): Likewise.

2002-08-14  Gabriel Dos Reis  <gdr@nerim.net>

	* tree.h: Guard against multiple inclusion.

2002-08-14  Hans-Peter Nilsson  <hp@bitrange.com>

	* reload1.c (reload_cse_simplify): Before checking
	REG_FUNCTION_VALUE_P, check REG_P.

2002-08-13  Geoffrey Keating  <geoffk@redhat.com>

	* Makefile.in (attribs.o): Remove $(OBSTACK_H) dependency.

2002-08-13  Neil Booth  <neil@daikokuya.co.uk>

	* c-opts.c (c_common_init_options): Extra braces needed.

2002-08-13  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (sh_init_builtins): Add PARAMS to declaration.
	(sh_media_init_builtins, sh_expand_builtin): Likewise.
	(sh_expand_unop_v2sf): Use PARAMS for variable declaration.
	(sh_expand_binop_v2sf): Likewise.
	* sh-protos.h (sh_expand_unop_v2sf): Add PARAMS to declaration.
	(sh_expand_binop_v2sf, sh_cfun_interrupt_handler_p): Likewise.
	(sh_initialize_trampoline): Likewise.

2002-08-13  Ulrich Weigand  <uweigand@de.ibm.com>

	* s390-modes.def [CCL1, CCL2, CCT1, CCT2, CCT3, CCUR, CCSR]: Declare
	new condition code modes.
	s390.c (s390_match_ccmode_set): Handle those new CC modes.
	(s390_select_ccmode): Likewise.
	(s390_branch_condition_mask): Likewise.

	* s390-protos.h (s390_tm_ccmode): Declare.
	s390.c (s390_tm_ccmode): New function.
	(s390_match_ccmode): Allow VOIDmode as REQ_MODE.

	* s390.md ("*cmpdi_tm2"): Rename to "*tmdi_ext".
	("*cmpsi_tm2"): Rename to "*tmsi_ext".
	("*cmpqi_tm2"): Rename to "*tmqi_ext".

	("*cmpdi_tm_reg", "*cmpdi_tm_mem", "*cmpsi_tm_reg", "*cmpsi_tm_mem",
	"*cmphi_tm_sub","*cmphi_cct_0",  "*cmpqi_tm", "*cmpqi_tm_sub",
	"*cmpqi_cct_0", "*tm_0"): Remove, replace by ...
	("*tmdi_reg", "*tmsi_reg", "*tmdi_mem", "*tmsi_mem", "*tmhi_mem",
	"*tmqi_mem", "*tmhi_full", "*tmqi_full"): ... these new patterns.

	("*ltgr", "*cmpdi_ccs_0_64", "*cmpdi_ccs_0_31", "*ltr", "*icm15",
	"*icm15_cconly", "*cmpsi_ccs_0", "*icm3", "*cmphi_ccs_0", "*icm1",
	"*cmpqi_ccs_0"): Remove, replace by ...
	("*tstdi_sign", "*tstdi", "*tstdi_cconly", "*tstdi_cconly_31",
	"*tstsi", "*tstsi_cconly", "*tstsi_cconly2", "*tsthi", "*tsthi_cconly",
	"*tstqi", "*tstqi_cconly"): ... these new patterns.

	("*cmpsidi_ccs"): Remove, replace by ...
	("*cmpsi_ccs_sign"): ... this new pattern.
	("*cmpdi_ccs_sign", "*cmpdi_ccu_zero"): New patterns.

	("*cmpqi_ccu_0", "*cmpqi_ccu_immed"): Remove, replace by ...
	("*cli"): ... this new pattern.

	("*adddi3_sign", "*adddi3_zero_cc", "*adddi3_zero_cconly",
	"*adddi3_zero", "*adddi3_cc", "*adddi3_cconly", "*adddi3_cconly2"):
	New patterns.
	("adddi3_64"): Rename to "*adddi3_64".
	("adddi3_31"): Replace by insn and splitter "*adddi3_31".
	("adddi3"): Adapt expander.

	("*addsi3_cc"): Allow "general_operand" for operand 2.
	("*addsi3_carry1_cc", "*addsi3_carry1_cconly",
	"*addsi3_carry2_cc", "*addsi3_carry2_cconly"): New patterns.

	("addhi3", "addqi3"): Remove, replace by ...
	("*addsi3_sign", "*addsi3_sub"): ... these new patterns.

	("*subdi3_sign", "*subdi3_zero_cc", "*subdi3_zero_cconly",
	"*subdi3_zero", "*subdi3_cc", "*subdi3_cconly"): New patterns.
	("subdi3"): Replace by insn and splitter "*subdi3_31".
	("subdi3"): New expander.

	("*subsi3_borrow_cc", "*subsi3_borrow_cconly"): New patterns.

	("subhi3", "subqi3"): Remove, replace by ...
	("*subsi3_sign", "*subsi3_sub"): ... these new patterns.

	("*muldi3_sign"): New pattern.
	("muldi3"): Do not clobber CC.
	("mulsi3"): Likewise.
	("mulsi_6432"): Likewise.

2002-08-13  Denis Chertykov  <denisc@overta.ru>

	* config/avr/avr.md: Call CC_STATUS_INIT in all peepnoles
	which can change CC0.

2002-08-13  J"orn Rennecke <joern.rennecke@superh.com>

	* gcse.c (adjust_libcall_notes): New function.
	(do_local_cprop): Use it.  Add fourth parameter.  Changed caller.

2002-08-13  Nathan Sidwell  <nathan@codesourcery.com>

	* libgcc2.c (L_bb): Remove unneeded #includes.
	(__global_counters, __gthreads_active): Remove unused globals.
	(__bb_exit_func): Merge counts into files rather than appending.
	* Makefile.in (INTERNAL_CFLAGS): Move COVERAGE_FLAGS from here ...
	(ALL_CFLAGS): ... to here.

2002-08-13  Denis Chertykov  <denisc@overta.ru>

	* config/ip2k/ip2k.c (commands_in_file): Variable removed.
	(function_epilogue): Don't calculate function size.
	(ip2k_set_compare): Don't use lookup_const_double.
	(asm_file_start): Initialization of commands_in_file removed.
	(asm_file_end): Output of commands_in_file removed.

	* config/ip2k/ip2k.c (CPP_PREDEFINES): Remove definition of
	__INT_MAX__.

2002-08-13  Neil Booth  <neil@daikokuya.co.uk>

	* c-opts.c (c_common_init_options): Check option array is
	sorted if checking enabled.

2002-08-13  Gabriel Dos Reis  <gdr@nerim.net>

	* c-pretty-print.c: #include "c-tree.h".
	(pp_c_simple_type_specifier): Tweak.
	(pp_c_storage_class_specifier): New.
	(pp_c_function_specifier): Likewise.
	(pp_c_declaration_specifiers): Likewise.
	(pp_c_init_declarator): Likewise.
	(pp_c_declaration): Likewise.
	(pp_c_direct_declarator): Stub.
	(pp_c_declarator): Likewise.
	(pp_c_parameter_declaration): Likewise.

2002-08-13  Neil Booth  <neil@daikokuya.co.uk>

	* c-opts.c (deps_seen, deps_file, deferred_count, deferred_size,
	handle_deferred_opts, sanitize_cpp_opts, defer_opt,
	struct deferred_opt): New.
	(COMMAND_LINE_OPTIONS): Add -M*.
	(missing_arg): Update.
	(c_common_decode_option): Handle -M*.
	(c_common_post_options): Handle -M*.  Use sanitize_cpp_opts;
	don't call cpp_post_options.
	(c_common_finish, check_deps_environment_vars): Update.
	* cppfiles.c (stack_include_file, handle_missing_header): Update.
	* cpphash.h (CPP_PRINT_DEPS): Remove.
	* cppinit.c: Don't include version.h.
	(cpp_create_reader): Don't call deps_init.  Initialize
	warn_long_long.
	(cpp_read_main_file): Init deps if necessary.
	(cpp_destroy): Conditionally free deps.
	(cpp_finish): Update.
	(no_tgt): Remove.
	(COMMAND_LINE_OPTIONS, cpp_handle_option): Remove -M*.
	(cpp_post_options): Rename post_options.
	* cpplib.h (struct cpp_options): Remove some dependency options;
	move others to a new structure.
	(cpp_post_options): Remove.
	(cpp_finish): Comment.
	* fix-header.c (read_scan_file): Don't call cpp_post_options.

2002-08-12  Hans-Peter Nilsson  <hp@bitrange.com>

	* config/mmix/mmix.md (define_constants): Add MMIX_rR_REGNUM.
	("divdi3", "*divdi3_nonknuth", "moddi3", "*moddi3_nonknuth"): Mark
	MMIX_rR_REGNUM as clobbered.
	* config/mmix/mmix.h (MMIX_REMAINDER_REGNUM): Use MMIX_rR_REGNUM.

2002-08-12  Gabriel Dos Reis  <gdr@nerim.net>

	* diagnostic.h (output_formatted_scalar): Rename from
	output_formatted_integer.
	* diagnostic.def: Add DK_DEBUG.
	* diagnostic.c (output_decimal): Adjust.
	(output_long_decimal): Likewise.
	(output_unsigned_decimal): Likewise.
	(output_octal): Likewise.
	(output_long_octal): Likewise.
	(output_hexadecimal): Likewise.
	(output_long_hexadecimal): Likewise.
	* c-pretty-print.c (pp_c_type_specifier): New function.
	(pp_c_specifier_qualifier_list): Likewise.
	(pp_c_abstract_declarator): Likewise.
	(pp_c_char): Replace pp_format_integer with pp_format_scalar.

2002-08-12  David Edelsohn  <edelsohn@gnu.org>

	* doc/trouble.texi (Disappointments): Add static constructor and
	destructor dependency information for AIX.

2002-08-12  Neil Booth  <neil@daikokuya.co.uk>

	* cpphash.h (struct printer): New from cppmain.c.
	(cpp_reader): New member.
	* cppmain.c (struct printer): Move to cpphash.h.
	(options, print): Remove.
	(account_for_newlines, print_line, maybe_print_line,
	cpp_preprocess_file, setup_callbacks, scan_translation_unit,
	scan_translation_unit_trad, cb_line_change, cb_ident,
	cb_define, cb_undef, cb_include, cb_file_change, dump_macro,
	cb_def_pragma): Make reentrant.

2002-08-12  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* real.c (ieee_64): Always define.
	(ieee_113): Guard with INTEL_EXTENDED_IEEE_FORMAT == 0.
	(dec_h): Not used yet, hide it.
	(emdnorm): Mark parameter in ATTRIBUTE_UNUSED.  Guard label with
	macro controlling use.
	(TFbignan, TFlittlenan): Guard with INTEL_EXTENDED_IEEE_FORMAT == 0.

2002-08-12  Jan Hubicka  <jh@suse.cz>

	* i386.md (tablejump): Sign extend the operand.
	* i386.c (classify_argument): Fix missed case from previous patch.

2002-08-12  Neil Booth  <neil@daikokuya.co.uk>

	* c-common.c (STDC_0_IN_SYSTEM_HEADERS, c_common_init): Move
	to c-copts.c.
	(warn_multichar): Die.
	(cb_register_builtins): Export.
	* c-common.h (warn_multichar, preprocess_file): Remove.
	(cb_register_builtins): New.
	* c-lang.c (c_init): Remove.
	(LANG_HOOKS_INIT): Use c_objc_common_init.
	* c-lex.c (init_c_lex): Don't canonicalize filename.
	* c-opts.c (in_fname, STDC_0_IN_SYSTEM_HEADERS): New.
	(preprocess_file): Make static.  Update for cpplib.
	(c_common_decode_option): Remove warn_multichar.  Use in_fname.
	(c_common_post_options): Set some cpp options here.
	(c_common_init): Move from c-common.c.
	* cppinit.c (cpp_post_options): Don't canonicalize in_fname.
	* cpplib.h (struct cpp_options): Remove in_fname.
	(cpp_preprocess_file): Update.
	* cppmain.c (cpp_preprocess_file): Update for new prototypes.

2002-08-11  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* config.gcc (mips*-*-netbsd*): Include ${tm_file}.

2002-08-11  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* i370.h (TARGET_CPU_CPP_BUILTINS): Remove spurious trailing
	backslash in comment preceeding macro definition.
	* i370/linux.h (TARGET_OS_CPP_BUILTINS): Likewise.
	* i370/mvs.h (TARGET_OS_CPP_BUILTINS): Likewise.
	* i370/oe.h (TARGET_OS_CPP_BUILTINS): Likewise.

2002-08-12  Hans-Peter Nilsson  <hp@bitrange.com>

	* expr.c (store_expr): In condition for checking if value is
	generated in TARGET, move call to expr_size last.

2002-08-11  Neil Booth  <neil@daikokuya.co.uk>

	* c-common.c (c_common_init): Call preprocess_file instead.
	(c_common_finish): Move to c-opts.c.
	* c-common.h (preprocess_file): new.
	* c-opts.c (out_fname, out_stream, deps_append, preprocess_file,
	check_deps_environment_vars, c_common_finish): New.
	(c_common_decode_option): Update for out_fname and dependencies.
	* cppinit.c (init_dependency_output, output_deps): Remove.
	(cpp_destroy): Update prototype.
	(cpp_add_dependency_target): New.
	(cpp_read_main_file): Don't overlay a buffer.
	(cpp_finish): Take a deps output stream and write deps to it.
	Return the error count.
	(cpp_post_options): Don't canonicalize out_fname, or do anything
	with dependencies.
	* cpplib.h (struct cpp_options): Remove out_fname and
	preprocess_only.
	(cpp_add_dependency_target): New.
	(cpp_destroy, cpp_finish, cpp_preprocess_file): Update.
	* cppmain.c (cpp_preprocess_file): Update prototype.  Don't
	set preprocess_only.  Don't handle the output stream directly.

2002-08-11  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* dsp16xx.c (print_operand): Fix format specifier.
	* dsp16xx.md: Avoid automatic aggregate initialization.
	* frv.h (REG_CLASS_FROM_LETTER): Avoid char as array index.
	* h8300.c (emit_a_rotate, h8300_adjust_insn_length): Avoid U
	integer constant modifier.
	* ip2k.c (ip2k_set_compare): Avoid signed/unsigned warning.
	* mmix-protos.h (mmix_use_simple_return): Move outside TREE_CODE
	guards.
	* sh/netbsd-elf.h (FUNCTION_PROFILER): Fix format specifier.
	* v850.c (v850_select_section): Mark parameter with
	ATTRIBUTE_UNUSED.
	* global.c (global_alloc): Const-ify.
	* ra-colorize.c (hardregset_to_string): Fix format specifier.

2002-08-11  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* darwin-c.c (darwin_pragma_options): Const-ify.
	* darwin.c (machopic_non_lazy_ptr_name,
	machopic_validate_stub_or_non_lazy_ptr): Likewise.
	(machopic_indirect_data_reference): Wrap variables in macros
	controlling their use.
	(machopic_finish, update_non_lazy_ptrs, update_stubs): Const-ify.
	(machopic_select_section): Use parentheses around && within ||.
	* i386/darwin.h (ASM_OUTPUT_ALIGN): Avoid ambiguous-else.

2002-08-11  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* ip2k.c (mdr_resequence_xy_yx, mdr_propagate_reg_equivs,
	mdr_try_move_dp_reload, ip2k_check_can_adjust_stack_ref,
	ip2k_adjust_stack_ref, mdr_try_move_pushes, mdr_try_propagate_clr,
	ip2k_xexp_not_uses_reg_for_mem, mdr_try_propagate_move,
	mdr_try_remove_redundant_insns, track_w_reload,
	mdr_try_wreg_elim): Make function static to match prototype.
	* mmix.c (mmix_target_asm_function_epilogue): Likewise.  Mark
	parameter with ATTRIBUTE_UNUSED.

2002-08-11  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* arc.c (arc_init): Don't use ISO C style function definitions.
	* arm.c (count_insns_for_constant, thumb_far_jump_used_p,
	arm_get_strip_length, arm_strip_name_encoding): Likewise.
	* avr.h (progmem_section): Likewise.
	* h8300.c h8300_asm_insn_count): Likewise.
	* m32r.c (init_idents): Likewise.
	* s390.c (s390_split_branches, s390_chunkify_pool): Likewise.
	* sh.c (sh_cfun_interrupt_handler_p): Likewise.
	* xtensa.c (xtensa_build_va_list): Likewise.

2002-08-11  Neil Booth  <neil@daikokuya.co.uk>

	* c-common.h (enum c_language_kind): Emphasize that clk_c is 0.
	* c-opts.c (parse_option): Rename find_opt.
	(set_std_c99): New function.
	(COMMAND_LINE_OPTIONS): Handle -remap and -o.  Remove OPT_std_bad.
	(missing_arg): Remove OPT_std_bad.  Handle -o.
	(c_common_decode_option): Handle input and output file names,
	-o and -remap.	Clean up -std= handling.
	* cppinit.c (COMMAND_LINE_OPTIONS): Remove OPT_o and OPT_remap.
	(cpp_handle_option): Similarly.  Don't handle filenames.

2002-08-11  Jan Hubicka  <jh@suse.cz>

	* i386.c (classify_argument): Fix computing of field's offsets.

2002-08-11  Andreas Jaeger  <aj@suse.de>

	PR target/7531:
	* doc/invoke.texi (i386 and x86-64 Options): Document -mcmodel.

2002-08-10  Ziemowit Laski  <zlaski@apple.com>

	* config/alpha/alpha.h (TARGET_CPU_CPP_BUILTINS): Replace
	reference to clk_objective_c with flag_objc.
	* config/i386/i386-interix.h (TARGET_OS_CPP_BUILTINS):
	Likewise.
	* config/mips/mips.h (TARGET_CPU_CPP_BUILTINS): Likewise.

2002-08-10  Neil Booth  <neil@daikokuya.co.uk>

	* c-opts.c (set_std_cxx98, set_std_c89): New.
	(COMMAND_LINE_OPTIONS): Move more from cppinit.c.
	(c_common_decode_option): Handle new switches from cppinit.c.
	Add -std=gnu++98.
	* cppinit.c (set_lang): Rename cpp_set_lang.  Export.
	(no_arg, no_num): Remove.
	(COMMAND_LINE_OPTIONS): Move more to c-opts.c.  Drop all lang-
	switches apart from -lang-objc and lang-asm.
	(cpp_handle_option): Similarly.
	* cpplib.h (cpp_set_lang): New.
	* doc/cppopts.texi, doc/invoke.texi: Document -std=c++98,
	-std=gnu++98.
	* objc/lang-specs.h: Remove -ansi.

2002-08-10  Jan Hubicka  <jh@suse.cz>
			       Graham Stott

	* cfg.c (redirect_edge_succ_nodup): Avoid overflows due to roundoff
	errors.

2002-08-10  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* emit-rtl.c (emit_jump_insn_before, emit_call_insn_before,
	emit_jump_insn): Fix uninitialized variable.
	* gcov.c (init_line_info): Likewise.
	* genautomata.c (transform_3): Add braces around ambiguous
	else.
	* ifcvt.c (cond_exec_process_insns): Mark parameter with
	ATTRIBUTE_UNUSED.
	* ra-build.c (parts_to_webs_1): Fix uninitialized variable.
	* regrename.c (copyprop_hardreg_forward): Fix uninitialized
	variable.

	* gengtype.c (write_gc_structure_fields): Avoid signed/unsigned
	warnings in output files.

2002-08-09  Ziemowit Laski  <zlaski@apple.com>

	* c-common.c (flag_objc): New.
	* c-common.h (c_language_kind): Get rid of clk_objective_c
	enum value.
	(flag_objc): New extern declaration.
	* c-decl.c (implicitly_declare): Call objc_check_decl
	instead of maybe_objc_check_decl.
	(finish_decl): Likewise.
	(grokfield): Likewise.
	(finish_struct): Likewise.
	* c-lang.c (maybe_objc_check_decl): Rename to objc_check_decl.
	(maybe_objc_comptypes): Rename to objc_comptypes.
	(maybe_building_objc_message_expr): Rename to
	objc_message_selector.
	* c-lex.c (lex_charconst): Remove uses of clk_objective_c,
	replace with flag_objc as needed.
	* c-opts.c (c_common_init_options): Likewise.
	(c_common_decode_option): Likewise.
	* c-parse.in (init_reswords): Likewise.
	* c-tree.h (maybe_objc_check_decl): Rename to objc_check_decl.
	(maybe_objc_comptypes): Rename to objc_comptypes.
	(maybe_building_objc_message_expr): Rename to
	objc_message_selector.
	* c-typeck.c (comptypes): Call objc_comptypes instead of
	maybe_objc_comptypes, and/or objc_message_selector instead of
	maybe_building_objc_message_expr.
	(comp_target_types): Likewise.
	(convert_for_assignment): Likewise.
	(warn_for_assignment): Likewise.
	* cppinit.c (init_builtins): Set __OBJC__ manifest constant
	independently of those for other languages.
	* objc/objc-act.c (maybe_objc_comptypes): Delete.
	(maybe_objc_check_decl): Delete.
	(maybe_building_objc_message_expr): Rename to
	objc_message_selector.
	* objc/objc-lang.c (objc_init_options): Use clk_c instead of
	clk_objective_c; set flag_objc flag.

2002-08-09  Toshiyasu Morita  <toshiyasu.morita@hsa.hitachi.com>

	* ifcvt.c (find_if_case_2): Test correct basic block for size.

2002-08-09  Dale Johannesen  <dalej@apple.com>

	* config/rs6000/rs6000.md: Add sibcall patterns.
	* config/rs6000/rs6000.h (FUNCTION_OK_FOR_SIBCALL):  Define.
	* config/rs6000/rs6000.c (rs6000_ra_ever_killed):
	Rewritten to handle sibcalls.
	* config/rs6000/rs6000.c (function_ok_for_sibcall):  New.
	* config/rs6000/rs6000-protos.h (function_ok_for_sibcall):  New.

2002-08-08  Nathan Sidwell  <nathan@codesourcery.com>

	* profile.c (da_file_name): New static var.
	(init_branch_prob): Initialize it.
	(end_branch_prob): Remove da file.

	* Makefile.in (stage1_build): Pass empty COVERAGE_FLAGS.
	* configure.in (coverage_flags): Default to nothing.
	* configure: Rebuilt.

2002-08-09  Neil Booth  <neil@daikokuya.co.uk>

	* Makefile.in (c-opts.o): Update
	* c-opts.c: Include intl.h.
	(print_help): Move from cppinit.c.  Remove unused options.
	(COMMAND_LINE_OPTIONS): Move more from cppinit.c.
	(missing_arg): Complain for switches without an argument.
	(c_common_decode_option): Reject missing joined arguments.
	Handle new switches from cppinit.c.
	* cppinit.c (COMMAND_LINE_OPTIONS): Move some switches to c-opts.c.
	(cpp_handle_option): Similarly.
	(print_help): Moved to c-opts.c.
	* cpplib.h (struct cpp_options): Remove help_only.
	* gcc.c (cpp_unique_options): Remove -$.
	* doc/cppopts.texi: Undocument -h.

2002-08-08  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/i386.c (legitimate_constant_p): UNSPEC_TP is not
	legitimate constant.
	(legitimate_pic_operand_p): Neither pic operand.
	(legitimate_address_p): But legitimate address.
	(get_thread_pointer): Generate MEM/u instead of CONST around
	UNSPEC_TP.
	(print_operand): Remove printing of UNSPEC_TP.
	(print_operand_address): And print it here.

2002-08-08  Devang Patel  <dpatel@apple.com>

	* objc/objc-act.c (build_selector_translation_table): Issue warning,
	when  -Wselector is used,if method for which selector is being
	created does not exist.

2002-08-08  Stephen Clarke <stephen.clarke@superh.com>

	* config/sh/sh.c (prepare_move_operands): Only call
	target_reg_operand if TARGET_SHMEDIA.

2002-08-08  Jakub Jelinek  <jakub@redhat.com>

	* config/rs6000/rs6000.h, config/rs6000/aix.h,
	config/rs6000/darwin.h, config/rs6000/linux64.h: Revert last
	two patches.
	* config/rs6000/sysv4.h: Likewise, remove #undef ADJUST_FIELD_ALIGN.

2002-08-08  Lars Brinkhoff  <lars@nocrew.org>
	    Richard Henderson  <rth@redhat.com>

	* emit-rtl.c (gen_rtx_REG): After reload, only return
	frame_pointer_rtx or hard_frame_pointer_rtx if frame_pointer_needed.

2002-08-08  Jakub Jelinek  <jakub@redhat.com>

	* config/rs6000/rs6000-protos.h (rs6000_field_alignment): Remove.
	* config/rs6000/rs6000.c (rs6000_field_alignment): Move...
	* config/rs6000/rs6000.h (ADJUST_FIELD_ALIGN): ...inline into the
	macro.

2002-08-08  Adam Nemet  <anemet@lnxw.com>

	* config/arm/arm.c (thumb_unexpanded_epilogue): Stack the PIC
	register.
	(thumb_expand_prologue): Likewise.
	(thumb_output_function_prologue): Likewise.
	* config/arm/arm.h (THUMB_INITIAL_ELIMINATION_OFFSET): Account for
	the additional push of the PIC register.

2002-08-08  Nathan Sidwell  <nathan@codesourcery.com>

	* configure.in (enable_coverage): New enable switch.
	* configure: Rebuilt.
	* Makefile.in (COVERAGE_FLAGS, coverageexts): New variables.
	(INTERNAL_CFLAGS): Append COVERAGE_FLAGS.
	(ALL_FLAGS): Reorder so INTERNAL_CFLAGS comes after CFLAGS.
	(mostlyclean): Remove coverage files.
	* doc/install.texi: Document enable_coverage.

	* cp/Make-lang.in (c++.mostlyclean): Remove coverage files.
	* ada/Make-lang.in (ada.mostlyclean): Remove coverage files.
	* f/Make-lang.in (f.mostlyclean): Remove coverage files.
	* java/Make-lang.in (java.mostlyclean): Remove coverage files.
	* objc/Make-lang.in (objc.mostlyclean): Remove coverage files.
	* treelang/Make-lang.in (treelang.mostlyclean): Remove coverage
	files.

2002-08-08  Neil Booth  <neil@daikokuya.co.uk>

	* c-opts.c (cpp_opts): New.
	(COMMAND_LINE_OPTIONS): Add switches from cppinit.c.
	(c_common_decode_options): Handle cpplib switches.
	(c_common_init_options): Set cpp_opts.
	* cppinit.c (COMMAND_LINE_OPTIONS): Move some switches to c-opts.c.
	(cpp_handle_option): Similarly.

2002-08-08  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/aix.h (TARGET_ALTIVEC): Define to 0.
	(TARGET_ALTIVEC_ABI): Same.
	(TARGET_ALTIVEC_VRSAVE): Same.

	* config/rs6000/rs6000.c (rs6000_expand_ternop_builtin): Check
	icode not CODE_FOR_nothing.  Change switch to if.

2002-08-08  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.h (ASM_CPU_SPEC): Pass -mpower4 when cpu=power4.

2002-08-08  Jakub Jelinek  <jakub@redhat.com>

	* stor-layout.c (place_union_field): For bitfields if
	PCC_BITFIELD_TYPE_MATTERS and TYPE_USER_ALIGN, set record's
	TYPE_USER_ALIGN.

2002-08-07  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.c (struct deferred_plabel): Constify name field.

2002-08-07  Neil Booth  <neil@daikokuya.co.uk>

	* cppmacro.c (_cpp_builtin_macro_text): Remove unused variable.

2002-08-07  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* configure.in (PREFIX_INCLUDE_DIR): Don't define if prefix and
	local_prefix are the same.
	* configure: Rebuilt.

2002-08-07  Jakub Jelinek  <jakub@redhat.com>
	    Richard Henderson  <rth@redhat.com>

	* stor-layout.c (place_union_field): Apply ADJUST_FIELD_ALIGN
	to type_align when PCC_BITFIELD_TYPE_MATTERS.  Only apply
	ADJUST_FIELD_ALIGN if not DECL_USER_ALIGN resp. TYPE_USER_ALIGN.
	(place_field): Likewise.
	* config/i386/i386.c (x86_field_alignment): Don't check
	DECL_USER_ALIGN here.
	* config/rs6000/rs6000.c (rs6000_field_alignment): New.
	* config/rs6000/rs6000-protos.h (rs6000_field_alignment): New
	prototype.
	* config/rs6000/rs6000.h (ADJUST_FIELD_ALIGN): Define.
	* config/rs6000/aix.h (ADJUST_FIELD_ALIGN): Remove.
	* config/rs6000/darwin.h (ADJUST_FIELD_ALIGN): Remove.
	* config/rs6000/linux64.h (ADJUST_FIELD_ALIGN): Remove.
	* config/rs6000/sysv4.h (ADJUST_FIELD_ALIGN): Remove.
	* doc/tm.texi (ADJUST_FIELD_ALIGN): Update description.

2002-08-07  Neil Booth  <neil@daikokuya.co.uk>

	* Makefile.in (c-opts.o, c-common.o, C_AND_OBJC_OBJS): Update.
	* c-common.c: Don't include tree-inline.h.
	(c_common_init_options, c_common_post_options): Move to c-opts.c.
	* c-common.h (c_common_decode_option): New.
	* c-decl.c (c_decode_option): Remove.
	* c-lang.c (LANG_HOOKS_DECODE_OPTION): Use c_common_decode_option.
	* c-opts.c: New file.
	* c-tree.h (c_decode_option): Remove.
	* doc/passes.texi: Update.
	* objc/objc-act.c (objc_decode_option): Remove.
	* objc/objc-act.h (objc_decode_option): Remove.
	* objc/ojbc-lang.c (LANG_HOOKS_DECODE_OPTION): Use
	c_common_decode_option.

2002-08-07  Chris Demetriou  <cgd@broadcom.com>

	* config/mips/mips.md (sunlt_sf, suneq_sf, sunle_sf): Remove
	dependency on TARGET_DOUBLE_FLOAT.

2002-08-07  Stephen Clarke <stephen.clarke@superh.com>

	* config/sh/lib1funcs.asm (GCC_shcompact_incoming_args): Don't
	overwrite callee-save registers.  Fix comment.

2002-08-06  Chris Demetriou  <cgd@broadcom.com>

	* config/mips/mips.c (override_options): Set MASK_BRANCHLIKELY
	in target_flags based on ISA, if it was not set on the command
	line.  Warn if MASK_BRANCHLIKLEY is set but the ISA does not
	support Branch Likely instructions.
	* config/mips/mips.h (MASK_BRANCHLIKLEY): New macro.
	(TARGET_BRANCHLIKELY): Likewise.
	(TARGET_SWITCHES): Add -mbranch-likely and -mno-branch-likely.
	(GENERATE_BRANCHLIKELY): Use TARGET_BRANCHLIKELY rather than
	ISA_HAS_BRANCHLIKELY.
	(ISA_HAS_BRANCHLIKELY): Do not include MIPS16 check.
	* doc/invoke.texi: Document new MIPS -mbranch-likely and
	-mno-branch-likely options.

2002-08-06  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* ip2k.c (ip2k_set_compare): Add missing iteration variable.

	* Makefile.in (dummy-conditions.o): Depend on $(HCONFIG_H) not
	$(GCONFIG_H).

2002-08-06  Aldy Hernandez  <aldyh@redhat.com>

	* c-decl.c (duplicate_decls): Error out for incompatible TLS
	declarations.

	* testsuite/gcc.dg/tls/diag-3.c: New.

2002-08-06  Dale Johannesen  <dalej@apple.com>

	* c-common.c (fname_decl): Use line number 0 for
	__func__, to avoid confusing debuggers.

2002-08-06  Nathan Sidwell  <nathan@codesourcery.com>

	* gcov.c: Tidy.
	(struct line_info, struct coverage): New structures.
	(gcov_file_name, gcov_file): Remove globals.
	(output_data): Take source file parameter. Fix memory leak. Break
	up into ...
	(init_line_info, output_line_info, make_gcov_file_name,
	accumulate_branch_counts): ... here.
	(calculate_branch_probs, function_summary): Adjust.
	(main): Adjust.
	(function_*): Remove global variables.

2002-08-06  Neil Booth  <neil@daikokuya.co.uk>

	* dwarf2out.c: Remove unused macros.

2002-08-06  Neil Booth  <neil@daikokuya.co.uk>

	* function.c (TRAMPOLINE_ALIGNMENT): Always defined.

2002-08-06  Neil Booth  <neil@daikokuya.co.uk>

	* cppinit.c (struct lang_flags): Rename trigraphs std.
	(set_lang): Update.
	* cpplib.h (struct cpp_options): New member std.
	* cppmacro.c (_cpp_builtin_macro_text): Use std.
	(collect_args): Flag whether to swallow a possible future
	comma pasted with varargs.
	(replace_args): Use this flag.
	* doc/cpp.texi: Update varargs extension documentation.

2002-08-06  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/mmintrin.h (__m64): Make the type 64-bit aligned.

2002-08-06  Jakub Jelinek  <jakub@redhat.com>

	* config/i386/i386.c (x86_field_alignment): Apply min for all MODE_INT
	and MODE_CLASS_INT modes.

2002-08-06  Jakub Jelinek  <jakub@redhat.com>

	* config.gcc (*-*-linux*): Default to --enable-threads=posix if no
	--{enable,disable}-threads is given to configure.
	(alpha*-*-linux*, hppa*-*-linux*, i[34567]86-*-linux*,
	x86_64-*-linux*, ia64*-*-linux*, m68k-*-linux*, mips*-*-linux*,
	powerpc-*-linux-gnualtivec*, powerpc-*-linux*, s390-*-linux*,
	s390x-*-linux*, sh-*-linux*, sparc-*-linux*, sparc64-*-linux*):
	Remove thread_file setting here.

2002-08-06  David Edelsohn  <edelsohn@gnu.org>

	* doc/install.texi (Binaries): Update Bull Freeware URL.

2002-08-06  Gerald Pfeifer  <pfeifer@dbai.tuwien.ac.at>

	* doc/gcc.texi (Top): Rename Index to Keyword Index.

2002-08-05  Nathan Sidwell  <nathan@codesourcery.com>

	* gcov.c (output_data): Round to % to nearest, tweak formatting.

2002-08-05  Jakub Jelinek  <jakub@redhat.com>

	* fold-const.c (associate_trees): Only optimize NEGATE_EXPR in one
	of the operands into MINUS_EXPR if code is PLUS_EXPR.

2002-08-05  Douglas B Rupp  <rupp@gnat.com>

	* config.gcc (i[34567]86-*-interix*): Replace interix.o with winnt.o
	* config/i386/i386-interix.h (TARGET_NOP_FUN_DLLIMPORT,
	drectve_section): Define.
	* config/i386/t-interix: Replace interix.o rule with winnt.o.
	* config/i386/interix.c: Remove.

2002-08-05  Geoffrey Keating  <geoffk@redhat.com>

	* attribs.c: Don't include obstack.h.
	* builtins.c: Likewise.
	* cfganal.c: Likewise.
	* cfgbuild.c: Likewise.
	* cfgcleanup.c: Likewise.
	* emit-rtl.c: Likewise.
	* loop.c: Likewise.
	* stmt.c: Likewise.

	* Makefile.in (s-gtype): Re-add dependency on $(GTFILES).

2002-08-05  Gabriel Dos Reis  <gdr@nerim.net>

	* doc/c-tree.texi (Expression trees): Document VA_ARG_EXPR

2002-08-04  Chris Demetriou  <cgd@broadcom.com>

	* doc/invoke.texi: Remove duplicated paragraph describing
	TARGET_SWITCHES.

2002-08-04  Geoffrey Keating  <geoffk@redhat.com>

	* Makefile.in (sdbout.o): Doesn't need $(OBSTACK_H).
	* collect2.h (permanent_obstack): Delete declaration.
	* collect2.c (permanent_obstack): Delete definition.
	(main): Don't initialize permanent_obstack.  Use xstrdup instead.
	* expr.c: Don't include obstack.h.
	(permanent_obstack): Delete declaration.
	* function.c: Don't include obstack.h.
	(permanent_obstack): Delete declaration.
	* integrate.c: Don't include obstack.h.
	(function_maybepermanent_obstack): Delete declaration.
	* print-tree.c (debug_tree): Use x*alloc not permalloc.
	* sdbout.c (gen_fake_label): Use x*alloc not permalloc.
	* tlink.c (pfgets): Use xstrdup not permanent_obstack.
	* toplev.c (lang_independent_init): Rename init_obstacks to init_ttree.
	* tree.h: Rename init_obstacks to init_ttree.  Remove declarations
	of permalloc, expralloc, perm_calloc.
	* tree.c (permanent_obstack): Delete definition.
	(init_ttree): Rename from init_obstacks.
	(permalloc): Delete.
	(perm_calloc): Delete.
	(dump_tree_statistics): Don't print information about
	permanent_obstack.
	* varasm.c (assemble_start_function): Use xstrdup instead of
	permalloc/strcpy.
	(assemble_variable): Likewise.
	* config/alpha/alpha.c (unicosmk_need_dex): Use xmalloc instead of
	permalloc.
	(unicosmk_add_extern): Likewise.
	* config/c4x/c4x.c (c4x_external_ref): Likewise.
	(c4x_global_label): Likewise.
	* config/frv/frv.c (frv_encode_section_info): Likewise.
	* config/i386/winnt.c (i386_pe_record_external_function): Likewise.
	(i386_pe_record_exported_symbol): Likewise.
	* config/mips/mips.c (mips_output_external): Likewise.
	(mips_output_external_libcall): Likewise.
	* config/pa/pa.c: (permanent_obstack): Delete declaration.
	(output_call): Use ggc_strdup instead of allocating on
	permanent_obstack.
	* config/romp/romp.c: Include ggc.h.
	(get_symref): Don't declare permanent_obstack, use ggc_strdup
	intead of permanent_obstack.
	* config/rs6000/aix31.h (ASM_OUTPUT_EXTERNAL): Use concat
	instead of permalloc.
	* config/rs6000/rs6000.c (rs6000_gen_section_name): Use xmalloc
	instead of permalloc
	* config/rs6000/xcoff.h (ASM_OUTPUT_EXTERNAL): Use concat
	instead of permalloc.
	* config/vax/vax.c (vms_check_external): Use xmalloc instead of
	permalloc.

2002-08-04  Bernd Schmidt  <bernds@redhat.com>

	Contribute a port developed primarily by Michael Meissner,
	Catherine Moore, and Richard Sandiford <rsandifo@redhat.com>.
	* config.gcc: Add frv-elf target.
	* config/frv/cmovd.c: New file.
	* config/frv/cmovh.c: New file.
	* config/frv/cmovw.c: New file.
	* config/frv/frv-abi.h: New file.
	* config/frv/frv-asm.h: New file.
	* config/frv/frv-modes.def: New file.
	* config/frv/frv-protos.h: New file.
	* config/frv/frv.c: New file.
	* config/frv/frv.h: New file.
	* config/frv/frv.md: New file.
	* config/frv/frvbegin.c: New file.
	* config/frv/frvend.c: New file.
	* config/frv/lib1funcs.asm: New file.
	* config/frv/media.h: New file.
	* config/frv/modi.c: New file.
	* config/frv/t-frv: New file.
	* config/frv/uitod.c: New file.
	* config/frv/uitof.c: New file.
	* config/frv/ulltod.c: New file.
	* config/frv/ulltof.c: New file.
	* config/frv/umodi.c: New file.
	* config/frv/xm-frv.h: New file.

	* config/frv/media.h: Removed again.

2002-08-04  Nathan Sidwell  <nathan@codesourcery.com>

	* gcov.c (bb_file_time): New static variable.
	(object_directory): May also be object file.
	(preserve_paths): New static variable.
	(print_usage): Adjust.
	(options): Adjust.
	(process_args): Adjust.
	(open_files): Simplify. Cope when OBJECT_DIRECTORY is an object
	file. Find modification date on bb file.
	(read_profile): Don't rewind a NULL file.
	(format_hwint): New static function.
	(function_summary): Use format_hwint.
	(output_data): SOURCE_FILE_NAME is never relative to
	OBJECT_DIRECTORY. Use format_hwint. Adjust gcov file name
	mangling. Adjust output format to make it more machine readable.
	* doc/gcov.texi: Document & clarify semantics.

2002-08-04  Joseph S. Myers  <jsm@polyomino.org.uk>

	* doc/include/gcc-common.texi (version-GCC): Increase to 3.3.

2002-08-04  Nathan Sidwell  <nathan@codesourcery.com>

	* gcc.c (cc1_options): Pass output file as auxbase when
	appropriate.
	* profile.c (init_branch_prob): FILENAME has already had ending
	stripped.
	* final.c (end_final): Likewise.
	* toplev.c (aux_base_name): New global.
	(compile_file): Pass aux_base_name to init init_branch_prob and
	end_final.
	(independent_decode_option, case 'a'): New auxinfo options.
	(case 'd'): Protect against mising basename.
	(do_compile): Initialize aux_base_name.
	* toplev.h (aux_base_name): New global.
	* doc/invoke.texi: Adjust documentation.

2002-08-04  Nathan Sidwell  <nathan@codesourcery.com>

	* config/i386/i386.c (x86_field_alignment): Remove duplicate test
	of TARGET_ALIGN_DOUBLE.

2002-08-04  Gabriel Dos Reis  <gdr@nerim.net>

	* diagnostic.c (inform): New function.
	* diagnostic.h (inform): Declare.

2002-08-03  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.md (movsi_internal1): Add nop mnemonic.
	(movhi_internal): Same.
	(movqi_internal): Same.
	(movdi_internal64): Same.

	* config/rs6000/t-ppccomm (MULTILIB_MATCHES_FLOAT): Add mcpu=405.

	* config/rs6000/xcoff.h (SKIP_ASM_OP): Define.
	(ASM_OUTPUT_SKIP): Use it.  SIZE unsigned.
	(COMMON_ASM_OP): Define.
	(ASM_OUTPUT_ALIGNED_COMMON): Use it.  SIZE unsigned.
	Use ALIGN parameter.
	(LOCAL_COMMON_ASM_OP): Define.
	(ASM_OUTPUT_LOCAL): Use it.  SIZE unsigned.

2002-08-03  Roger Sayle  <roger@eyesopen.com>

	* builtins.def: Define new builtin functions exp, expf, expl,
	log, logf and logl (and their __builtin_* variants).
	* optabs.h (enum optab_index): Add new OTI_exp and OTI_log.
	Define exp_optab and log_optab.
	* optabs.c (init_optans): Initialize exp_optab and log_optab.
	* genopinit.c (optabs): Implement exp_optab and log_optab
	using exp?f2 and log?f2 patterns.
	* builtins.c (expand_builtin_mathfn): Handle BUILT_IN_EXP*
	and BUILT_IN_LOG* using exp_optab and log_optab respectively.
	(expand_builtin): Ignore the new builtins (and all cos and
	sin variants) when not optimizing.  Expand new builtins via
	expand_builtin_mathfn when flag_unsafe_math_optimizations.

	* doc/extend.texi: Document new exp and log builtins.
	* doc/md.texi: Document new exp?f2 and log?f2 patterns
	(and previously undocumented cos?f2 and sin?f2 patterns).

2002-08-03  Jason Merrill  <jason@redhat.com>

	* explow.c (int_expr_size): New fn.
	* expr.c (expand_expr) [CONSTRUCTOR]: Use it.
	* expr.h: Declare it.

2002-08-02  Krister Walfridsson  <cato@df.lth.se>

	* Makefile.in (gengtype-lex.o, gengtype-yacc.o): Add path to
	gengtype-* dependencies.

2002-08-02  Eric Christopher  <echristo@redhat.com>

	* config.gcc (mips*-*-linux*): Fix ordering of tm_file.
	* config/mips/mips.h (READONLY_DATA_SECTION_ASM_OP): Change
	#ifndef to #undef.
	(TARGET_MEM_FUNCTIONS): Define instead of define to 1.

2002-08-02  David Edelsohn  <edelsohn@gnu.org>

	PR optimize/7067
	* config/rs6000/rs6000.h (RTX_COSTS): Artificially make MULT
	small if optimizing for size.

2002-08-02  Daniel Jacobowitz  <drow@mvista.com>

	* configure.in (FORBUILD): Use $build_alias.
	* configure: Regenerated.

2002-08-02  Richard Sandiford  <rsandifo@redhat.com>

	* config.gcc: Don't include mips/abi64.h in $tm_file.
	* hard-reg-set.h (call_really_used_regs): Declare.
	* config/mips/abi64.h: Remove file.
	* config/mips/linux.h,
	* config/mips/iris6.h: Don't include it.
	* config/mips/mips-protos.h (mips_conditional_register_usage): Declare.
	* config/mips/mips.h (CONDITIONAL_REGISTER_USAGE): Use it.
	(REG_PARM_STACK_SPACE, STACK_BOUNDARY, STRICT_ARGUMENT_NAMING,
	FUNCTION_ARG_PASS_BY_REFERENCE, FUNCTION_ARG_PADDING,
	FUNCTION_ARG_CALLEE_COPIES, MUST_PASS_IN_STACK, MIPS_STACK_ALIGN):
	Bring across definitions from abi64.h.
	(GP_ARG_LAST, FP_ARG_LAST): Use MAX_ARGS_IN_REGISTERS.
	(BIGGEST_MAX_ARGS_IN_REGISTERS): New.
	(struct mips_args): Use it.
	* config/mips/mips.c (mips_conditional_register_usage): Define.

2002-08-02  Jason Merrill  <jason@redhat.com>

	* langhooks-def.h (LANG_HOOKS_EXPR_SIZE): New macro.
	* langhooks.c (lhd_expr_size): Define default.
	* langhooks.h (struct lang_hooks): Add expr_size.
	* explow.c (expr_size): Call it.
	* expr.c (store_expr): Don't copy an expression of size zero.
	(expand_expr) [CONSTRUCTOR]: Use expr_size to calculate how much
	to store.
	* Makefile.in (builtins.o): Depend on langhooks.h.

2002-08-02  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* Makefile.in (ra-debug.o): Depend on $(TM_P_H).
	* ra-debug.c: Include "tm_p.h".
	* ra-rewrite.c (is_partly_live_1): Change return type to bool.

2002-08-02  Toon Moene  <toon@moene.indiv.nluug.nl>

	* simplify-rtx.c (simplify_binary_operation): x * 1 is allowed
	when not honoring signalling NaNs.
	(simplify_ternary_operation): a == b has a definite value
	when not honoring NaNs.

2002-08-02  Jason Merrill  <jason@redhat.com>

	* gdbinit.in (pct): New macro.

2002-08-01  Stan Shebs  <shebs@apple.com>
	    Andreas Tobler  <toa@pop.agri.ch>

	* ginclude/stddef.h (_BSD_SIZE_T_DEFINED_): Define if not defined,
	plays nice with Darwin headers.
	(_BSD_RUNE_T_DEFINED_): Likewise.

2002-08-01  Zack Weinberg  <zack@codesourcery.com>

	* c-common.c (c_common_init): -Wtraditional also implies -Wlong-long.
	* cppinit.c (cpp_post_options): Likewise.

	* cppexp.c (cpp_classify_number): Suppress -Wtraditional
	warning about 'LL' suffix (but not 'ULL' etc) when
	-Wno-long-long is in effect.

	* cppmacro.c (_cpp_builtin_macro_text) [BT_TIME, BT_DATE]:
	Check for failing time()/localtime(), issue a warning, and
	make __TIME__ and __DATE__ expand to fallback strings.

	* doc/cpp.texi, doc/extend.texi: Document behavior of __DATE__
	and __TIME__ when the date and time cannot be determined.

2002-08-02  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.c (output_cbranch): Hint differently for power4.

2002-08-01  Daniel Jacobowitz  <drow@mvista.com>

	* Makefile.in ($(BUILD_PREFIX_1)ggc-none.o): Use $(GGC_H).

2002-08-01  Chris Demetriou  <cgd@broadcom.com>

	* config.gcc (mipsisa64sb1-*-elf*): New configuration.
	(mipsisa64sb1el-*-elf*): Likewise.
	* config/mips/mips.c (mips_cpu_info_table): Add sb1.
	* config/mips/mips.h (processor_type): Add PROCESSOR_SB1.
	(TARGET_SB1, TUNE_SB1): New macros.
	* doc/invoke.texi: Add sb1 to documentation for MIPS -march and
	-mtune flags.

2002-08-01  David Edelsohn  <edelsohn@gnu.org>

	* varasm.c (asm_emit_uninitialized): Return false if global BSS
	and ASM_EMIT_BSS not supported by target.
	(assemble_variable): Do not duplicate uninitialized logic.
	Fall through if asm_emit_uninitialized failed.

2002-08-01  Chris Demetriou  <cgd@broadcom.com>

	* config/mips/mips.h (BRANCH_LIKELY_P): Remove unused macro.

2002-08-02  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/linux64.h (DBX_OUTPUT_BRAC): Define.
	(DBX_OUTPUT_LBRAC, DBX_OUTPUT_RBRAC): Define.

	* config/rs6000/rs6000.c (output_toc): Don't use lshift_double when
	HOST_BITS_PER_WIDE_INT == 64.

2002-08-01  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* df.c (df_insn_table_realloc): Change parameter to unsigned.
	* optabs.c (expand_binop): Make variable unsigned.
	* simplify-rtx.c (simplify_subreg): Likewise.
	* unroll.c (unroll_loop): Cast to avoid signed/unsigned warnings.

2002-08-01  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	* c-common.c (cb_register_builtins): Always define __GXX_ABI_VERSION.

2002-08-01  Richard Henderson  <rth@redhat.com>

	* toplev.c (parse_options_and_default_flags): Don't set
	flag_reorder_blocks for -Os.

	* config/avr/avr.c (avr_optimization_options): Remove.
	* config/avr/avr.h (OPTIMIZATION_OPTIONS): Remove.
	* config/m68hc11/m68hc11.c (m68hc11_optimization_options): Remove.
	* config/m68hc11/m68hc11.h (OPTIMIZATION_OPTIONS): Remove.

2002-08-01  H.J. Lu <hjl@gnu.org>
	    Richard Henderson  <rth@redhat.com>

	* output.h (DECL_READONLY_SECTION): Remove.
	(decl_readonly_section): Declare.
	* varasm.c (decl_readonly_section): New.
	(default_section_type_flags, default_select_section): Use it.
	* config/arm/pe.c (arm_pe_unique_section): Likewise.
	* config/i386/interix.c (i386_pe_unique_section): Likewise.
	* config/i386/winnt.c (i386_pe_unique_section): Likewise.
	* config/mcore/mcore.c (mcore_unique_section): Likewise.
	* config/mips/mips.c (mips_unique_section): Likewise.

2002-08-01  Richard Henderson  <rth@redhat.com>

	* integrate.c (copy_rtx_and_substitute): Squash MEM_EXPR when it
	refers to a subroutine parameter.

2002-08-01  Jakub Jelinek  <jakub@redhat.com>

	* varasm.c (assemble_visibility): Strip name encoding.

2002-08-01  Ian Dall  <ian@sibyl.beware.dropbear.id.au>

	* config/ns32k/ns32k.h (TARGET_IEEE_COMPARE): Correct earlier patch.
	(RETURN_ADDR_RTX): Cannot determine return address for FRAME > 0
	when there is no frame pointer.
	(INITIAL_FRAME_POINTER_OFFSET): Count stack space for saved fp
	registers properly.
	* config/ns32k/__unorddf2.c: New file.
	* config/ns32k/__unordsf2.c: New file.
	* config/ns32k/t-ns32k: New file.
	* config.gcc (ns32k-*-netbsd*): Use it.

2002-08-01  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/rs6000.h (SPU_CONST_OFFSET_OK): Change to 0xff.

2002-08-01  Neil Booth  <neil@daikokuya.co.uk>

	* c-common.c (__GXX_ABI_VERSION): Correct spelling.

2002-08-01  Benjamin Kosnik  <bkoz@redhat.com>

	* c-common.c (cb_register_builtins): Set __GXX_ABI_VERSION__ to 102.

2002-08-01  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.md: Add [!]TARGET_MIPS16 to sgtu conditions.

2002-08-01  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>

	* gcse.c (expr_hash_table_size, n_exprs, set_hash_table_size,
	n_sets): Removed.
	(expr_hash_table, set_hash_table): Type changed to ...
	(struct hash_table): New type.
	(hash_scan_insn, hash_scan_set, hash_scan_clobber, hash_scan_call,
	insert_expr_in_table, insert_set_in_table, compute_hash_table,
	dump_hash_table, lookup_expr, lookup_set, compute_local_properties,
	compute_ae_gen, compute_ae_kill): Modified to pass the table explicitly.
	(alloc_set_hash_table, alloc_expr_hash_table): Merged to ...
	(alloc_hash_table): New.
	(free_set_hash_table, free_expr_hash_table): Merged to ...
	(free_hash_table): New.
	(compute_set_hash_table, compute_expr_hash_table): Merged to ...
	(compute_hash_table_work): New.
	(classic_gcse, one_classic_gcse_pass, compute_cprop_data,
	find_avail_set, one_cprop_pass, find_bypass_set, compute_pre_data,
	pre_edge_insert, pre_insert_copies, pre_delete, pre_gcse,
	one_pre_gcse_pass, compute_transpout, compute_code_hoist_vbeinout,
	hoist_code, one_code_hoisting_pass,
	trim_ld_motion_mems): Altered due to changed type of hash tables.

2002-08-01  Zack Weinberg  <zack@codesourcery.com>

	* final.c (output_alternate_entry_point):
	If ASM_OUTPUT_TYPE_DIRECTIVE is defined, use it.

2002-08-01  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* objc/objc-act.c (encode_complete_bitfield): Add prototype and
	avoid ISO C style function definition.

	* expr.c (expand_assignment): Delete unused variable.

2002-08-01  Toon Moene  <toon@moene.indiv.nluug.nl>

	* c-common.c (cb_register_builtins): Set
	__FINITE_MATH_ONLY__ to 1 if -ffinite-math-only
	is given, and to 0 otherwise.
	* combine.c (simplify_if_then_else): HONOR_NANS
	implies FLOAT_MODE_P.

2002-08-01  Neil Booth  <neil@daikokuya.co.uk>

	* cppinit.c (COMMAND_LINE_OPTIONS): Remove OPT_dollar.
	(cpp_handle_option): Don't handle it.
	(print_help): Update.
	* doc/cppopts.texi: Update.

2002-08-01  Neil Booth  <neil@daikokuya.co.uk>

	* c-common.c (cb_register_builtins): If C++, define
	__EXCEPTIONS, __DEPRECATED and __GXX_ABI_VERSION as appropriate.
	* gcc.c (cpp_unique_options): Remove __GXX_ABI_VERSION.
cp:
	* lang-specs.h: Simplify in accordance with new code in
	c-common.c.

2002-08-01  Neil Booth  <neil@daikokuya.co.uk>

	* c-common.c: Define all C/ObjC/C++ warning and flag variables.
	* c-common.h: Declare all C/ObjC/C++ warning and flag variables.
	* c-decl.c: Move all warning and flag variables to c-common.c.
	* c-format.c: Move all warning variables to c-common.c.
	* c-tree.h: Move all warning and flag declarations to c-common.h.
	* objc/objc-act.c: Move all warning variables to c-common.c.
	(flag_warn_protocol): Rename warn_protocol.

2002-07-31  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa-linux.h (GLOBAL_ASM_OP): Fix typo.

2002-07-31  Graham Stott  <graham.stott@btinternet.com>

	* config/stormy16/stormy16.h (BSS_SECTION_ASM_OP): Add missing
	.section prefix.

2002-07-31  Stan Shebs  <shebs@apple.com>

	* config.gcc (i[34567]86-*-darwin*): New configuration.
	* config/darwin.h (TARGET_ENCODE_SECTION_INFO): Undefine before
	defining.
	(TARGET_ENCODE_SECTION_INFO): Ditto.
	(ASM_PREFERRED_EH_DATA_FORMAT): Ditto.
	* config/darwin.c (machopic_indirect_data_reference): Remove
	setting of RTX_UNCHANGING_P.
	(machopic_legitimize_pic_address): Move RTX_UNCHANGING_P up so as
	not to be applied to sums.
	* config/i386/t-darwin: New file.
	* config/i386/darwin.h: New file.
	* config/i386/i386.h (TARGET_MACHO): Add default definition.
	* config/i386/i386.md (tablejump): Add TARGET_MACHO case.
	* config/i386/i386.c (output_set_got): For Mach-O, output Mach-O
	label and not the GOT add.
	(constant_address_p): For Mach-O, seeing a CONST is enough.
	(legitimate_pic_address_disp_p): Add a Mach-O case.
	(legitimate_address_p): Also test machopic_operand_p if Mach-O.
	(legitimize_pic_address): Use generic Mach-O code to legitimize.
	(output_pic_addr_const): Suppress @PLT if Mach-O, and parens
	if outputting a difference.
	(ix86_output_addr_diff_elt): Add Mach-O case.
	(ix86_expand_move): Similarly.
	(ix86_expand_call): Similarly.
	(current_machopic_label_num): New global.
	(machopic_output_stub): New function.
	(ix86_value_regno): New function.
	(ix86_function_value): Use it instead of VALUE_REGNO.
	(ix86_libcall_value): Ditto.
	* config/i386/unix.h (VALUE_REGNO): Remove.

2002-07-31  Graham Stott  <grahas@btinternet.com>

	* config/rs6000/rs6000.c(rs6000_hash_constant): Fix
	hash for LABEL_REF's.

2002-07-31  Graham Stott  <grahams@btinternet.com>

	* config/rs6000/rs6000.c (spe_init_builtins,
	altivec_init_builtins, rs6000_common_init_builtins):
	Replace ANSI with K&R function def.

2002-07-31  David Edelsohn  <edelsohn@gnu.org>

	* rs6000.c (validate_condition_mode): Test flag_finite_math_only
	for CCFPmode.

2002-07-31  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/crtn.asm: Don't use __mips16 to determine the
	return-address offset.  Define RA to a suitable temporary
	register for the return address.

2002-07-31  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.md (eh_set_lr_si, eh_set_lr_di): Change
	constraints to 'd'.

2002-07-30  Chris Demetriou  <cgd@broadcom.com>

	* config/mips/elf.h (STARTFILE_SPEC): Define differently if
	default ABI is MEABI.  (Undoes incorrect change in Eric Christopher's
	patch on 2002-07-29.)
	* config/mips/elf64.h (STARTFILE_SPEC): Likewise.

2002-07-30  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* alpha.h, arc.h, arm/aout.h, avr.h, cris.h, d30v.h, dsp16xx.h,
	fr30.h, h8300.h, i370.h, i386/sco5.h, i386/unix.h, i960.h, ia64.h,
	ip2k.h, m32r.h, mcore.h, mips.h, mn10200.h, mn10300.h, ns32k.h,
	openbsd.h, pa/pa-linux.h, pdp11.h, romp.h, rs6000/sysv4.h,
	s390/linux.h, sh.h, sparc.h, stormy16.h, v850.h, vax.h, xtensa.h:
	(ASM_GLOBALIZE_LABEL): Delete.
	(GLOBAL_ASM_OP): Define.

	* m68hc11.h, m68k.h, m88k.h (ASM_GLOBALIZE_LABEL): Delete.

	* defaults.h (ASM_GLOBALIZE_LABEL): Provide a default.
	* doc/tm.texi (ASM_GLOBALIZE_LABEL): Update docs.

2002-07-30  Geoffrey Keating  <geoffk@redhat.com>

	* doc/extend.texi (Hints implementation): Document that GCC
	mostly ignores `register'.

2002-07-30  Toon Moene  <toon@moene.indiv.nluug.nl>

	* flags.h: Declare flag_finite_math_only.
	Use it in definition of HONOR_NANS and
	HONOR_INFINITIES.
	* c-common.c (cb_register_builtins): Emit
	__FINITE_MATH_ONLY__ when flag_finite_math_only
	is set.
	* combine.c (simplify_if_then_else): If
	flag_finite_math_only is set, a == b has a
	definite value.
	* toplev.c: Initialize flag_finite_math_only.
	(set_flags_fast_math): Set it on -ffast-math.
	(flag_fast_math_set_p): Test it.
	* doc/invoke.texi: Document -ffinite-math-only.

2002-07-30  Richard Henderson  <rth@redhat.com>

	* ifcvt.c (noce_get_alt_condition): Use reg_overlap_mentioned_p.
	(noce_process_if_block): Likewise.

2002-07-30  Bernd Schmidt  <bernds@redhat.com>

	* ifcvt.c (cond_exec_process_if_block): Fix a merging error.
	Bail out early if false_expr is NULL and we'd crash due to this.
	* genemit.c (gen_expand): Recognize return insns even if the return
	appears in a parallel.
	* libgcc2.c: Expand macro DECLARE_LIBRARY_RENAMES if it is defined.
	* config/fp-bit.c: Likewise.
	* doc/tm.texi: Document it.

2002-07-30  David Edelsohn  <edelsohn@gnu.org>
	    Zack Weinberg  <zack@codesourcery.com>

	* rs6000.c (rs6000_expand_unop_builtin): Check icode not
	CODE_FOR_nothing.  Change switch to if.
	(rs6000_expand_binop_builtin): Same.
	(rs6000_expand_builtin): Expand builtin if target support enabled.
	(rs6000_init_builtins): Init builtin if target support enabled.
	(rs6000_common_init_builtins): Check icode not CODE_FOR_nothing.

2002-07-30  Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>

	* gcc.c (cpp_unique_options): Define __GXX_ABI_VERSION, bump it to 101.

2002-07-30  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.h (SUBTARGET_ASM_DEBUGGING_SPEC): Fix typo.

2002-07-30  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.md (cond_delay_slot): New attribute.
	(cbranch delay): Use it for anulled-true case.
	(stuff_delay_slot): New pattern.
	* sh.c (print_operand, case '.'): Don't print .s / /s fore zero-length
	delay slot insn.
	(gen_far_branch): Emit stuff_delay_slot pattern.

2002-07-30  J"orn Rennecke <joern.rennecke@superh.com>

	* unroll.c (copy_loop_body): Don't copy NOTE_INSN_LOOP_CONT.

2002-07-30  Kazu Hirata  <kazu@cs.umass.edu>

	* fold-const.c: Fix comment typos.
	* gcse.c: Likewise.
	* reload1.c: Likewise.

2002-07-29  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/rs6000.md: Disallow CCEQ compare with crnor/crnot
	for TARGET_SPE.

2002-07-30  Gabriel Dos Reis  <gdr@nerim.net>

	* c-pretty-print.h (pp_c_statement): Declare.
	* c-pretty-print.c (pp_c_postfix_expression): #if 0 support for SRCLOC.
	(pp_c_statement): Define.

2002-07-30  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* alpha.h, arc.h, arm/aout.h, avr.h, c4x.h, cris.h, d30v.h,
	darwin.h, dsp16xx.h, fr30.h, h8300.h, i370.h, i386.h, i960.h,
	ip2k.h, m32r.h, m68hc11.h, m68k.h, m88k.h, mcore.h, mips.h,
	mn10200.h, mn10300.h, ns32k.h, pa/pa-linux.h, pdp11.h, romp.h,
	rs6000/sysv4.h, s390/linux.h, sh.h, sparc.h, stormy16.h,
	v850.h, vax.h, xtensa.h (ASM_OUTPUT_LABEL): Delete definition.

	* defaults.h (ASM_OUTPUT_LABEL): Provide a default.
	* doc/tm.texi (ASM_OUTPUT_LABEL): Update docs.

2002-07-30  Gabriel Dos Reis  <gdr@nerim.net>

	* c-pretty-print.c (pp_c_primary_expression): Handle STMT_EXPR.
	(pp_c_postfix_expression): Handle ARROW_EXPR, FFS_EXPR,
	COMPOUND_LITERAL_EXPR, VA_ARG_EXPR.
	(pp_c_expression): Update.

2002-07-29  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* alpha/vms-cc.c (preprocess_args, main): Use xstrdup and/or
	concat in lieu of xmalloc/strcpy/memcpy/sprintf.
	* alpha/vms-ld.c (main): Likewise.
	* dsp16xx.c (double_reg_to_memory): Likewise.
	* mcore.c (mcore_expand_prolog): Likewise.
	* cppfiles.c (read_name_map): Likewise.
	* gensupport.c (process_rtx, identify_predicable_attribute,
	alter_test_for_insn): Likewise.
	* vmsdbgout.c (write_rtnbeg, vmsdbgout_init): Likewise.

2002-07-29  Roger Sayle  <roger@eyesopen.com>

	* builtins.c (expand_builtin):  Change the default behavior to
	only issue an error if the builtin function doesn't have a
	fallback library call.  Remove several cases handled by the
	new default.

2002-07-29  John David Anglin  <dave@hiauly1.hia.nrc>

	* real.c (ieee_24, ieee_53, ieee_64, ieee_113): Define only if the
	floating point format of the target is IEEE.
	* (dec_f, dec_d, dec_g, dec_h): Define only if the floating point
	format of the target is DEC.

2002-07-29  Richard Henderson  <rth@redhat.com>

	* unroll.c (verify_addresses): Remove.
	(find_splittable_givs): Never split DEST_ADDR givs.

2002-07-29  Geoffrey Keating  <geoffk@redhat.com>

	* doc/gty.texi (GGC Roots): Clarify that the list of syntaxes
	is exhaustive.
	(Files): Improve documentation on generated source files.

	* doc/extend.texi (Translation implementation): Document what
	diagnostics look like.
	(Identifiers implementation): Document that there's normally no
	limit on identifier names.
	(Integers implementation): Document two's complement.
	(Hints implementation): Document that GCC honors 'inline', mostly.
	(Preprocessing directives implementation): Document that GCC
	requires the current time.

2002-07-30  Gabriel Dos Reis  <gdr@nerim.net>

	* c-pretty-print.h (struct c_pretty_print_info): Add new member.
	(pp_initializer): New macro.
	(pp_c_initializer): Declare.
	* c-pretty-print.c (pp_c_primary_expression): HAndle TARGET_EXPR.
	(pp_c_initializer): Define.
	(pp_c_initializer_list): New function.
	(pp_c_postfix_expression): Handle ABS_EXPR, COMPLEX_CST,
	VECTOR_CST, CONSTRUCTOR.
	(pp_c_unary_expression): Handle CONJ_EXPR, REALPART_EXPR,
	IMAGPART_EXPR.
	(pp_c_cast_expression): Handle FLOAT_EXPR.
	(pp_c_assignment_expression): Handle INIT_EXPR.
	(pp_c_expression): Update.

2002-07-30  Neil Booth  <neil@daikokuya.co.uk>

	* objc/objc-act.c (objc_init): Return immediately if filename
	is NULL.

2002-07-29  Eric Christopher  <echristo@redhat.com>

	* config/mips/elf.h: Remove ecoff.h and gofast includes.
	(DWARF2_DEBUGGING_INFO, DBX_DEBUGGING_INFO): Define unconditionally.
	(SDB_DEBUGGING_INFO): Undefine.
	(PREFERRED_DEBUGGING_TYPE): Set to DWARF2_DEBUG.
	(PUT_SDB_SIZE): Remove.
	(SUBTARGET_ASM_DEBUGGING_SPEC): Redefine.
	(STARTFILE_SPEC): Add isa3264 define.
	* config/mips/elf64.h: Ditto.  Move TARGET_MEM_FUNCTIONS from here...
	* config/mips/ecoff.h: Remove. and here...
	* config/mips/iris3.h: and here...
	* config/mips/sni-svr4.h: and here...
	* config/mips/mips.h: To here. Remove OBJECT_FORMAT_ROSE ifdefs.
	Add assembler -mmdebug options for non-dwarf debugging.
	* config/mips/r3900.h: Remove debug info defines.
	* config/mips/isa32-linux.h: Remove, move functionality to config.gcc.
	* config/mips/isa3264.h: Ditto.
	* config/mips/t-isa3264: Fix up for file removal and gofast configure
	change.
	* config/mips/t-elf: Ditto.
	* config/mips/t-ecoff: Ditto.
	* config/mips/t-r3900: Ditto.
	* config/mips/t-iris5-6: Ditto.
	* config/mips/t-isa3264: Ditto.
	* config/mips/t-linux: Remove.
	* config/mips/t-netbsd: Remove.
	* config/mips/t-mips: New file.
	* config/mips/t-gofast: Ditto.
	* config/mips/netbsd.h: Remove unnecessary undefines.
	* config/mips/linux.h: Remove #include of mips.h.
	* config.gcc: Add mips.h include for elf targets. Remove tm_file
	for ecoff. Add gofast configure option for mips.

2002-07-29  Chris Demetriou  <cgd@broadcom.com>

	* configure.in (mips*-*-*): Add a test to see if MIPS libgloss
	linker scripts use STARTUP directives consistently.
	* configure: Regenerate.
	* config.in: Regenerate.
	* config/mips/elf.h (STARTFILE_SPEC): Define conditionally, based
	on whether HAVE_MIPS_LIBGLOSS_STARTUP_DIRECTIVES is defined.
	* config/mips/elf64.h (STARTFILE_SPEC): Likewise.
	* config/mips/isa3264.h (STARTFILE_SPEC): Do not redefine if
	HAVE_MIPS_LIBGLOSS_STARTUP_DIRECTIVES is set; the result
	will be the same.

2002-07-29  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/rs6000.md ("cpu"): Add ppc8540 to attribute.

2002-07-29  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/rs6000.h (RTX_COSTS): Add MULT case for 8540.

2002-07-29  Aldy Hernandez  <aldy@quesejoda.com>

	* config/rs6000/rs6000.md: Move altivec patterns from here...

	* config/rs6000/altivec.md: ...to here.

2002-07-29  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/spe.md ("spe_evmra"): Change to unspec.

2002-07-29  Richard Henderson  <rth@redhat.com>

	* emit-rtl.c (set_mem_attributes_minus_bitpos): Rename from
	set_mem_attributes and add BITPOS argument.  Subtract it from
	OFFSET when same is adjusted.
	(set_mem_attributes): New wrapper function.
	* expr.c (expand_assignment): Use set_mem_attributes_minus_bitpos;
	remove offset adjustment hack.
	* expr.h (set_mem_attributes_minus_bitpos): Declare.

2002-07-29  Gabriel Dos Reis  <gdr@nerim.net>

	* Makefile.in (C_OBJS): Include c-pretty-print.o
	(c-pretty-print.o): Add depency rule.
	* pretty-print.h: Add more macros.
	* c-pretty-print.c: New file.
	* c-pretty-print.h: Likewise.

2002-07-29  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/spe.h (__internal_ev_mwhgumian): Cast vector
	constants to __ev64_s32__.
	(__internal_ev_mwhgsmian): Same.
	(__internal_ev_mwhgsmfan): Same.
	(__internal_ev_mwhgssfan): Same.
	(__internal_ev_mwhgumiaa): Same.
	(__internal_ev_mwhgsmiaa): Same.
	(__internal_ev_mwhgsmfaa): Same.
	(__internal_ev_mwhgssfaa): Same.

2002-07-29  David Edelsohn  <edelsohn@gnu.org>

	* varasm.c (assemble_variable): Narrow test for uninitialized
	without BSS target support.

2002-07-29  Nathan Sidwell  <nathan@codesourcery.com>

	* profile.c: Add file comment describing the overall algorithm and
	structures.
	(struct edge_info): Add comments.
	(struct bb_info): Add comments.
	* basic-block.h (EDGE_*): Add comments.
	* doc/gcov.texi (Gcov Data Files): Document bit flags.

2002-07-29  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa/elf.h, config/xtensa/linux.h
	(TARGET_OS_CPP_BUILTINS): Define.
	(CPP_PREDEFINES): Remove.
	* config/xtensa/xtensa.h (TARGET_CPU_CPP_BUILTINS): Define.
	(CPP_SPEC): Remove.

2002-07-29  Zack Weinberg  <zack@codesourcery.com>

	* gensupport.c: Include hashtab.h.
	(insn_elision, condition_table, hash_c_test, cmp_c_test,
	maybe_eval_c_test): New routines and data structures to
	support insn elision.
	(init_md_reader): Read and initialize the condition_table.
	(read_md_rtx): Discard insn patterns whose C test is provably
	always false.
	* gensupport.h: Declare new functions and data structures.

	* genconditions.c, dummy-conditions.c: New files.
	* Makefile.in: Build genconditions; run it to construct
	insn-conditions.c; build that and link it into most gen*
	programs.
	(HOST_SUPPORT, HOST_EARLY_SUPPORT): New variables.
	(GEN): Delete, unused.
	(STAGESTUFF): Update.

	* gencodes.c: (gen_insn): #define CODE_FOR_xxx equal to
	CODE_FOR_nothing for all elided patterns.
	(main): Tweaked to support this.
	* genflags.c (gen_proto): Emit a static inline generator
	function here for all elided patterns, which simply returns
	NULL_RTX.
	(gen_insn): Do not define HAVE_xxx for elided patterns.
	(main): Tweaked to support this.  No need to forward-declare
	struct rtx_def.
	* genrecog.c: Do not bother emitting the C test if it's known
	to be true at compile time.

2002-07-29  Mike Stump  <mrs@apple.com>

	* config.gcc (target_gtfiles): Initialize, as otherwise cross
	compilers hosted on powerpc-apple-darwin6.0 won't even build.

2002-07-29  Richard Earnshaw  <rearnsha@arm.com>

	* arm.md (sibcall, sibcall_value): Add RETURN as part of the pattern,
	remove clobber of LR.
	(sibcall_insn, sibcall_value_insn): Update accordingly.
	(sibcall_epilogue): Remove debugging comment from assembler stream.

2002-07-29  Gabriel Dos Reis  <gdr@nerim.net>

	* pretty-print.h: Define more macros.
	* diagnostic.h (output_formatted_integer): Moved from...
	* diagnostic.c: ... here.

2002-07-28  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* stormy16.h (ASM_OUTPUT_SYMBOL_REF): Use ASM_OUTPUT_LABEL_REF.

2002-07-28  Zack Weinberg  <zack@codesourcery.com>

	* defaults.h (ASM_OUTPUT_MEASURED_SIZE): Take only two
	arguments.  Always use ".-symbol" as expression argument.
	* doc/tm.texi: Update to match.  Document requirement for
	".size symbol, .-symbol" to be acceptable to assembler.

	* config/elfos.h, config/netbsd-aout.h, config/openbsd.h,
	config/arm/elf.h, config/avr/avr.h, config/cris/aout.h,
	config/i386/freebsd-aout.h, config/i386/sco5.h,
	config/ip2k/ip2k.h, config/m88k/m88k.h, config/xtensa/elf.h,
	config/xtensa/linux.h:  Update uses of ASM_OUTPUT_MEASURED_SIZE.

2002-07-28  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* Makefile.in (gengtype-lex.c): Fix error in last change.

	* alpha/freebsd.h (TARGET_OS_CPP_BUILTINS): Add missing
	backslash.

	* Makefile.in (vmsdbgout.o): Depend on function.h.

	* vmsdbgout.c: Include function.h.

2002-07-28  Alan Modra  <amodra@bigpond.net.au>

	* prefix.c (update_path): Don't strip single `.' path components
	unless stripping a later `..' component.  Exit loop as soon as
	a valid path is found.

2002-07-27  Roger Sayle  <roger@eyesopen.com>

	* builtins.def [DEF_GCC_BUILTIN]: Require an explicit ATTRS
	argument.  Mark BUILT_IN_RETURN, BUILT_IN_EH_RETURN,
	BUILT_IN_LONGJMP and BUILT_IN_TRAP as noreturn, the ISO C99
	floating point unordered comparisons (e.g. __builtin_isgreater)
	as const, and leave the remaining GCC_BUILTINs unchanged.

	* c-decl.c (builtin_function): No need to explicitly mark
	BUILT_IN_RETURN and BUILT_IN_EH_RETURN as noreturn.

2002-07-27  Roger Sayle  <roger@eyesopen.com>

	* Makefile.in: rtlanal.o now depends upon real.h.

	* flags.h [flag_signaling_nans]: New flag.
	[HONOR_SNANS]: New macro.

	* toplev.c [flag_signaling_nans]: Initialize to false.
	(f_options): Add processing for "-fsignaling-nans".
	(set_fast_math_flags): Clear flag_signaling_nans with -ffast-math.
	(process_options): flag_signaling_nans implies flag_trapping_math.

	* c-common.c (cb_register_builtins): Define __SUPPORT_SNAN__
	when -fsignaling-nans.  First step to implementing WG14's N965.

	* fold-const.c (fold) [MULT_EXPR]: Conditionalize transforming
	1.0 * x into x, and -1.0 * x into -x on !HONOR_SNANS.
	[RDIV_EXPR]: Conditionalize x/1.0 into x on !HONOR_SNANS.

	* simplify-rtx.c (simplify_relational_operation): Conditionalize
	transforming abs(x) < 0.0 into false on !HONOR_SNANS.

	* rtlanal.c: #include real.c for TARGET_FLOAT_FORMAT definitions
	required by HONOR_SNANS.  (may_trap_p): Floating point DIV, MOD,
	UDIV, UMOD, GE, GT, LE, LT and COMPARE may always trap with
	-fsignaling_nans.  EQ and NE only trap for flag_signaling_nans
	not flag_trapping_math (i.e. HONOR_SNANS but not HONOR_NANS).

	* doc/invoke.texi: Document new -fsignaling-nans compiler option.

2002-07-27  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* Makefile.in (gengtype-lex.c): Work around a bug in flex.
	* gengtype-lex.l (YY_USE_PROTOS): Undef.
	(YY_DECL): Define.

2002-07-27  Roger Sayle  <roger@eyesopen.com>

	* doc/invoke.texi: Document that both -fno-builtin-foo and
	-fno-builtin are supported by the g++ front-end.

2002-07-27  Stan Shebs  <shebs@apple.com>

	* configure.in: Rename config_gtfiles to target_gtfiles.
	* configure: Regenerate.
	* doc/gty.texi: Update reference.
	* config.gcc (powerpc-*-darwin*): Set target_gtfiles
	instead of appending to it.

2002-07-25  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/rs6000.c (function_arg_advance): SPE vararg
	vectors are split into two registers.
	(function_arg): Same.

2002-07-26  J"orn Rennecke <joern.rennecke@superh.com>

	* pa.md (extv): Check predicates before emitting extv_32.

2002-07-27  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.c (rs6000_traceback_name): New var.
	(rs6000_traceback): New var.
	(rs6000_override_options): Set rs6000_traceback.
	(rs6000_output_function_epilogue): Implement traceback options.
	* config/rs6000/rs6000.h (TARGET_OPTIONS): Add "traceback=".
	(rs6000_traceback_name): Declare.

	* config/rs6000/rs6000.c (output_profile_hook): Don't generate profile
	label reference when NO_PROFILE_COUNTERS.

2002-07-26  Jason Merrill  <jason@redhat.com>

	* function.c (assign_parms): Handle frontend-directed pass by
	invisible reference.

2002-07-26  Neil Booth  <neil@daikokuya.co.uk>

	* doc/cppopts.texi: Update.

2002-07-26  Neil Booth  <neil@daikokuya.co.uk>

	* cppmacro.c (_cpp_create_definition): Don't attempt redefinition
	warnings on assertions.

2002-07-26  Neil Booth  <neil@daikokuya.co.uk>

	* c-common.h (RID_AND, RID_AND_EQ, RID_NOT, RID_NOT_EQ,
	RID_OR, RID_OR_EQ, RID_XOR, RID_XOR_EQ, RID_BITAND, RID_BITOR,
	RID_COMPL): Remove.
	* c-parse.in (rid_to_yy): Similarly.

2002-07-26  Jason Merrill  <jason@redhat.com>

	* c-dump.c: Resurrect.
	* tree-dump.c: Move C-specific stuff to c-dump.c.
	* c-common.h: Declare c_dump_tree.
	* c-lang.c (LANG_HOOKS_TREE_DUMP_DUMP_TREE_FN): Define.
	* Makefile.in (C_AND_OBJC_OBJS): Add c-dump.o.
	(c-dump.o): New rule.

2002-07-26  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.md: Enable patterns using rlwinm for
	PowerPC64.  Replace "T" and "S" constraints with "n" when the
	predicate will do.  Formatting fixes.
	(extzvsi_internal2): Use "andi.", "andis." and attr type of "compare"
	as for extzvsi_internal1.

2002-07-25  Neil Booth  <neil@daikokuya.co.uk>

	* dwarfout.c (VERSION_ASM_OP, DERIV_BEGIN_LABEL_FMT,
	DERIV_END_LABEL_FMT): Remove.
	(SL_BEGIN_LABEL_FMT, SL_END_LABEL_FMT): Move.

2002-07-25  Neil Booth  <neil@daikokuya.co.uk>

	* objc/objc-act.c (UTAG_STATICS, UTAG_PROTOCOL_LIST, USERTYPE):
	Remove.

2002-07-25  Stan Shebs  <shebs@apple.com>

	* config/rs6000/rs6000.c (rs6000_emit_prologue): Remove unused
	local var dwarfp.
	(output_compiler_stub): Remove unused locals.
	(output_call): Always initialize line number.

2002-07-25  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (LOAD_EXTEND_OP): QImode zero-extends on SHmedia.
	* sh.md (truncdiqi2, movqi_media): Likewise.

2002-07-25  Neil Booth  <neil@daikokuya.co.uk>

	* gcse.c (obstack_chunk_alloc): Remove.
	(gcse_alloc): Fix to count allocated bytes.
	* collect2.c (SYMBOL__MAIN): Remove.

2002-07-25  Neil Booth  <neil@daikokuya.co.uk>

	* gcc.c (TARGET_EXECUTABLE_SUFFIX): Only used if
	HAVE_TARGET_EXECUTABLE_SUFFIX.

2002-07-25  J"orn Rennecke <joern.rennecke@superh.com>

	* rtl.h (mem_attrs): Spell out more clearly the roles of ALIGN,
	SIZE, EXPR and OFFSET.

2002-07-25  Richard Henderson  <rth@redhat.com>

	* emit-rtl.c (set_mem_attributes): Fix size and alignment thinkos
	in ARRAY_REF of DECL_P case.

2002-07-25  Richard Sandiford  <rsandifo@redhat.com>

	* doc/invoke.texi: Document -mabi=meabi, and expand on the EABI
	description.  Document -mips32, -mips64, and the associated -march
	values.  Describe the "mipsN" arguments to -march.  Say that the
	-mipsN options are equivalent to -march.  Reword the description
	of default type sizes.
	* toplev.h (target_flags_explicit): Declare.
	* toplev.c (target_flags_explicit): New var.
	(set_target_switch): Update target_flags_explicit.
	* config/mips/abi64.h (SUBTARGET_TARGET_OPTIONS): Undefine.
	* config/mips/elf64.h (MIPS_ISA_DEFAULT): Undefine.
	* config/mips/iris6.h (SUBTARGET_ASM_SPEC): -mabi=64 implies -mips3.
	* config/mips/isa3264.h (MIPS_ENABLE_EMBEDDED_O32): Undefine.
	* config/mips/mips.h (mips_cpu_info): New struct.
	(mips_cpu_string, mips_explicit_type_size_string): Remove.
	(mips_cpu_info_table, mips_arch_info, mips_tune_info): Declare.
	(MIPS_CPP_SET_PROCESSOR): New macro.
	(TARGET_CPP_BUILTINS): Declare a macro for each supported processor.
	Define _MIPS_ARCH and _MIPS_TUNE.
	(MIPS_ISA_DEFAULT): Don't provide a default value.  Instead...
	(MIPS_CPU_STRING_DEFAULT): Set to "from-abi" if neither it nor
	MIPS_ISA_DEFAULT were already defined.
	(MULTILIB_DEFAULTS): Add MULTILIB_ABI_DEFAULT.
	(TARGET_OPTIONS): Remove -mcpu and -mexplicit-type-size.
	(ABI_NEEDS_32BIT_REGS, ABI_NEEDS_64BIT_REGS): New.
	(GAS_ASM_SPEC): Remove -march, -mcpu, -mgp* and -mabi rules.
	(ABI_GAS_ASM_SPEC): Remove.
	(MULTILIB_ABI_DEFAULT, ASM_ABI_DEFAULT_SPEC): New macros.
	(ASM_SPEC): Add -mgp32, -mgp64, -march, -mabi=eabi and -mabi=o64.
	Invoke %(asm_abi_default_spec) if no ABI was specified.
	(CC1_SPEC): Remove ISA -> register-size rules.
	(EXTRA_SPECS): Remove abi_gas_asm_spec.  Add asm_abi_default_spec.
	* config/mips/mips.c (mips_arch_info, mips_tune_info): New vars.
	(mips_cpu_string, mips_explicit_type_size_string): Remove.
	(mips_cpu_info_table): New array.
	(mips_set_architecture, mips_set_tune): New fns.
	(override_options): Rework to make -mipsN equivalent to -march.
	Detect more erroneous cases, including those removed from CC1_SPEC.
	Don't change the ABI based on architecture, or vice versa.
	Unify logic with GAS.
	(mips_asm_file_start): Get architecture name from mips_arch_info.
	(mips_strict_matching_cpu_name_p, mips_matching_cpu_name_p): New fns.
	(mips_parse_cpu): Take the name of the option as argument.  Handle
	'from-abi'.  Raise an error if the option is wrong.
	(mips_cpu_info_from_isa): New fn.

2002-07-25  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.md (tablejump_mips161): Use gen_rtx_LABEL_REF.
	(tablejump_mips162): Likewise.

2002-07-25  J"orn Rennecke <joern.rennecke@superh.com>

	* simpify-rtx.c (simplify_subreg): Don't pass MODE_CC mode to
	int_mode_for_mode.

2002-07-25  Gabriel Dos Reis  <gdr@nerim.net>

	* c-common.c (c_sizeof_or_alignof_type): Take a third argument for
	complaining.
	* c-common.h (c_sizeof): Adjust definition.
	(c_alignof): Likewise.
	* c-tree.h (c_sizeof_nowarn): Now macro.
	* c-typeck.c (c_sizeof_nowarn): Remove definition.

2002-07-25  Neil Booth  <neil@daikokuya.co.uk>

	* c-decl.c (c_decode_option): No need to handle switches
	cpplib handles.

2002-07-24  Zack Weinberg  <zack@codesourcery.com>

	* defaults.h (ASM_OUTPUT_TYPE_DIRECTIVE, ASM_OUTPUT_SIZE_DIRECTIVE,
	ASM_OUTPUT_MEASURED_SIZE): New default definitions of new macros.
	* doc/tm.texi: Document them.  Also document SIZE_ASM_OP,
	TYPE_ASM_OP, and TYPE_OPERAND_FMT.

	* config/elfos.h, config/netbsd-aout.h, config/openbsd.h,
	config/alpha/elf.h, config/arm/elf.h, config/avr/avr.h,
	config/cris/aout.h, config/i386/freebsd-aout.h,
	config/i386/sco5.h, config/ia64/ia64.c, config/ip2k/ip2k.h,
	config/m68k/m68kelf.h, config/m68k/m68kv4.h, config/m88k/m88k.h,
	config/mcore/mcore-elf.h, config/mips/elf.h, config/mips/elf64.h,
	config/mips/iris6.h, config/mips/linux.h, config/pa/pa-linux.h,
	config/pa/pa64-hpux.h, config/rs6000/sysv4.h,
	config/xtensa/elf.h, config/xtensa/linux.h:
	Use the new macros.
	Where possible, remove redundant definitions of SIZE_ASM_OP,
	TYPE_ASM_OP, and TYPE_OPERAND_FMT.

2002-07-24  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/eabi.h: Define TARGET_SPE_ABI, TARGET_SPE,
	TARGET_ISEL, and TARGET_FPRS.

	* doc/invoke.texi (RS/6000 and PowerPC Options): Document
	-mabi=spe, -mabi=no-spe, and -misel=.

	* config/rs6000/rs6000-protos.h: Add output_isel.
	Move vrsave_operation prototype here.

	* config/rs6000/rs6000.md (sminsi3): Allow pattern for TARGET_ISEL.
	(smaxsi3): Same.
	(uminsi3): Same.
	(umaxsi3): Same.
	(abssi2_nopower): Disallow when TARGET_ISEL.
	(*ne0): Same.
	(negsf2): Change to expand and rename old pattern to *negsf2.
	(abssf2): Change to expand and rename old pattern to *abssf2.

	New expanders: fix_truncsfsi2, floatunssisf2, floatsisf2,
	fixunssfsi2.

	Change patterns that check for TARGET_HARD_FLOAT or
	TARGET_SOFT_FLOAT to also check TARGET_FPRS.

	* config/rs6000/rs6000.c: New globals: rs6000_spe_abi,
	rs6000_isel, rs6000_fprs, rs6000_isel_string.
	(rs6000_override_options): Add 8540 case to
	processor_target_table.
	Set rs6000_isel for the 8540.
	Call rs6000_parse_isel_option.
	(enable_mask_for_builtins): New.
	(rs6000_parse_isel_option): New.
	(rs6000_parse_abi_options): Add spe and no-spe.
	(easy_fp_constant): Treat !TARGET_FPRS as soft-float.
	(rs6000_legitimize_address): Check for TARGET_FPRS when checking
	for TARGET_HARD_FLOAT.
	Add case for SPE_VECTOR_MODE.
	(rs6000_legitimize_reload_address): Handle SPE vector modes.
	(rs6000_legitimate_address): Disallow PRE_INC/PRE_DEC for SPE
	vector modes.
	Check for TARGET_FPRS when checking for TARGET_HARD_FLOAT.
	(rs6000_emit_move): Check for TARGET_FPRS.
	Add cases for SPE vector modes.
	(function_arg_boundary): Return 64 for SPE vector modes.
	(function_arg_advance): Check for TARGET_FPRS and
	Handle SPE vectors.
	(function_arg): Same.
	(setup_incoming_varargs): Check for TARGET_FPRS.
	(rs6000_va_arg): Same.
	(struct builtin_description): Un-constify mask field.  Move up in
	file.
	(bdesc_2arg): Un-constify and add SPE builtins.
	(bdesc_1arg): Same.
	(bdesc_spe_predicates): New.
	(bdesc_spe_evsel): New.
	(rs6000_expand_unop_builtin): Add SPE 5-bit literal builtins.
	(rs6000_expand_binop_builtin): Same.
	(bdesc_2arg_spe): New.
	(spe_expand_builtin): New.
	(spe_expand_predicate_builtin): New.
	(spe_expand_evsel_builtin): New.
	(rs6000_expand_builtin): Call spe_expand_builtin for SPE.
	(rs6000_init_builtins): Initialize SPE builtins.  Call
	rs6000_common_init_builtins.
	(altivec_init_builtins): Move all non-altivec builtin code to...
	(rs6000_common_init_builtins): ...here.  New function.
	(branch_positive_comparison_operator): Allow NE code for SPE.
	(ccr_bit): Return correct ccr bit for SPE fp.
	(print_operand): Emit crnor in 'D' case for SPE.
	New case 't'.
	Add SPE code for 'y' case.
	(rs6000_generate_compare): Generate rtl for SPE fp.
	(output_cbranch): Handle SPE hard floats.
	(rs6000_emit_cmove): Handle isel.
	(rs6000_emit_int_cmove): New.
	(output_isel): New.
	(rs6000_stack_info): Adjust stack frame so GPRs are saved in
	64-bits for SPE.
	(debug_stack_info): Add SPE info.
	(gen_frame_mem_offset): New.
	(rs6000_emit_prologue): Save GPRs in 64-bits for SPE abi.
	Change mode of frame pointer, when saving it, to Pmode.
	(rs6000_emit_epilogue): Restore GPRs in 64-bits for SPE abi.
	Misc cleanups and use gen_frame_mem_offset when appropriate.

	* config/rs6000/rs6000.h (processor_type): Add PROCESSOR_PPC8540.
	(TARGET_SPE_ABI): New.
	(TARGET_SPE): New.
	(TARGET_ISEL): New.
	(TARGET_FPRS): New.
	(FIXED_SCRATCH): New.
	(RTX_COSTS): Add PROCESSOR_PPC8540.
	(ASM_CPU_SPEC): Add case for 8540.
	(TARGET_OPTIONS): Add isel= case.
	(rs6000_spe_abi): New.
	(rs6000_isel): New.
	(rs6000_fprs): New.
	(rs6000_isel_string): New.
	(UNITS_PER_SPE_WORD): New.
	(LOCAL_ALIGNMENT): Adjust for SPE.
	(HARD_REGNO_MODE_OK): Same.
	(DATA_ALIGNMENT): Same.
	(MEMBER_TYPE_FORCES_BLK): New.
	(FIRST_PSEUDO_REGISTER): Set to 113.
	(FIXED_REGISTERS): Add SPE registers.
	(reg_class): Same.
	(REG_CLASS_NAMES): Same.
	(REG_CLASS_CONTENTS): Same.
	(REGNO_REG_CLASS): Same.
	(REGISTER_NAMES): Same.
	(DEBUG_REGISTER_NAMES): Same.
	(ADDITIONAL_REGISTER_NAMES): Same.
	(CALL_USED_REGISTERS): Same.
	(CALL_REALLY_USED_REGISTERS): Same.
	(SPE_ACC_REGNO): New.
	(SPEFSCR_REGNO): New.
	(SPE_SIMD_REGNO_P): New.
	(HARD_REGNO_NREGS): Adjust for SPE.
	(VECTOR_MODE_SUPPORTED_P): Same.
	(REGNO_REG_CLASS): Same.
	(FUNCTION_VALUE): Same.
	(LIBCALL_VALUE): Same.
	(LEGITIMATE_OFFSET_ADDRESS_P): Same.
	(SPE_VECTOR_MODE): New.
	(CONDITIONAL_REGISTER_USAGE): Disable FPRs when target does FP on
	the GPRs.  Set FIXED_SCRATCH fixed in SPE case.
	(rs6000_stack): Add spe_gp_size, spe_padding_size,
	spe_gp_save_offset.
	(USE_FP_FOR_ARG_P): Check for TARGET_FPRS.
	(LEGITIMATE_LO_SUM_ADDRESS_P): Same.
	(SPE_CONST_OFFSET_OK): New.
	(rs6000_builtins): Add SPE builtins.

	* testsuite/gcc.dg/ppc-spe.c: New.

	* config/rs6000/eabispe.h: New.

	* config/rs6000/spe.h: New.

	* config/rs600/spe.md: New.

	* config/rs6000/rs6000-c.c (rs6000_cpu_cpp_builtins): Define
	__SIMD__ for TARGET_SPE.

	* config.gcc: Add powerpc-*-eabispe* case.
	Add spe.h to user headers for powerpc.

2002-07-24  Chris Demetriou  <cgd@broadcom.com>

	* config/mips/elf.h (STARTFILE_SPEC): Undo previous change.
	* config/mips/elf64.h (STARTFILE_SPEC): Likewise.
	* config/mips/isa3264.h (STARTFILE_SPEC): Likewise.

2002-07-24  Richard Henderson  <rth@redhat.com>

	* expr.c (expand_expr) [TRY_FINALLY_EXPR]: Use GOTO_SUBROUTINE_EXPR
	form when not optimizing.

2002-07-24  David Mosberger  <davidm@hpl.hp.com>

	* config/ia64/ia64.c (gen_thread_pointer): Fix typo in marking
	thread_pointer_rtx as unchanging.

2002-07-24  Michael Matz  <matz@suse.de>

	* ra-colorize.c (INV_REG_ALLOC_ORDER): New macro.
	(free_reg): Use it.

2002-07-24  Richard Earnshaw  <rearnsha@arm.com>

	* arm.md (arm_buneq, arm_bltgt): put '\' before ';' in output
	pattern.
	(arm_buneq_reversed, arm_bltgt_reversed): Likewise.
	(movsicc, movsfcc, movdfcc): FAIL if UNEQ or LTGT.

2002-07-24  Chris Demetriou  <cgd@broadcom.com>

	* config/mips/elf.h (STARTFILE_SPEC): Never include crt0.o.
	* config/mips/elf64.h (STARTFILE_SPEC): Likewise.
	* config/mips/isa3264.h (STARTFILE_SPEC): Do not redefine.

2002-07-24  Jan Hubicka  <jh@suse.cz>

	* toplev.c (rest_of_compilation): Dump loops before clobbering
	the structure.

2002-07-24  Jan Hubicka  <jh@suse.cz>

	* rtlanal.c (keep_with_call_p): Avoid overflow in fixed_regs.

2002-07-24  Frank van der Linden  <fvdl@wasabisystems.com>

	PR optimization/7291
	* config/i386/i386.c (ix86_expand_clrstr): Fix bzero alignment
	problem on x86_64.

2002-07-24  Gabriel Dos Reis  <gdr@nerim.net>

	* pretty-print.h: Add macros from cp/error.c

2002-07-24  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000-protos.h (mask_operand_wrap): Declare.
	(mask64_2_operand): Declare.
	(build_mask64_2_operands): Declare.
	(and64_2_operand): Declare.
	(extract_MB): Declare.
	(extract_ME): Declare.
	* config/rs6000/rs6000.c (mask64_operand): Allow all ones.  Remove
	CONST_DOUBLE code.
	(mask_operand_wrap): New insn predicate.
	(mask64_2_operand): Likewise.
	(and64_2_operand): Likewise.
	(build_mask64_2_operands): New function.
	(extract_MB): New function.
	(extract_ME): New function.
	(print_operand <case m,M>): Use extract_MB and extract_ME.
	(print_operand <case S>): Allow all ones.  Remove CONST_DOUBLE support.
	* config/rs6000/rs6000.h (EXTRA_CONSTRAINT): Add 't'.
	(PREDICATE_CODES): Add and64_2_operand, mask_operand_wrap and
	mask64_2_operand.  Remove CONST_DOUBLE from mask64_operand.
	* config/rs6000/rs6000.md (andsi3_internal3): New
	(andsi3_internal3+1): Enable split for powerpc64.
	(andsi3_internal3+2): New split.
	(andsi3_internal4): Renamed old andsi3_internal3.
	(andsi3_internal5): New.
	(andsi3_internal5+1): Enable split for powerpc64.
	(andsi3_internal5+2): New split.
	(andsi3_internal6, andsi3_internal7, andsi3_internal8): New.
	(anddi3): Handle 't' constraint.
	(anddi3+1): New split.
	(anddi3_internal2): Handle 't' constraint.
	(anddi3_internal2+1): New split.
	(anddi3_internal3): Handle 't' constraint.
	(anddi3_internal3+1): New split.

2002-07-24  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.md: Remove scratch reg on insns using
	addze and similar (plus (comparison r1 r2) r3) insns.  Add
	missing scratch reg in one case.  Formatting fixes.

2002-07-24  Neil Booth  <neil@daikokuya.co.uk>

	* cppexp.c (parse_defined): Mark macro used.
	* cpphash.h (struct cpp_macro): New member "used".
	(_cpp_mark_macro_used, _cpp_warn_if_unused_macro): New.
	(struct cpp_reader): New member.
	* cppinit.c (cpp_finish_options): Set first_unused_line.
	(cpp_finish): Warn of unused macros if requested.
	(OPT_TABLE): New switches.
	(cpp_handle_option): Handle them.
	* cpplib.c (do_undef): Warn if macro unused.
	(do_ifdef, do_ifndef): Mark macro used.
	* cpplib.h (struct cpp_options): New member.
	* cppmacro.c (_cpp_warn_if_unused_macro): New.
	(enter_macro_context): Mark macro used.
	(_cpp_create_definition): Mark macro unused; warn if unused
	when redefined.
	* cpptrad.c (scan_out_logcial_line, push_replacement_text):
	Mark macros used.
	* doc/cppopts.texi: Update.

2002-07-23  Neil Booth  <neil@daikokuya.co.uk>

	* dwarf2out.c (SECTION_ASM_OP,
	ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL): Remove.
	* system.h (SECTION_ASM_OP): Poison.
	* tree.c (FILE_FUNCTION_PREFIX_LEN): Remove.
	* config/alpha/alpha-interix.h, config/mips/linux.h
	(ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL): Remove.
	* config/mmix/mmix-protos.h, config/mmix/mmix.c
	(mmix_asm_output_define_label_difference_symbol): Remove.
	* config/mmix/mmix.h
	(ASM_OUTPUT_DEFINE_LABEL_DIFFERENCE_SYMBOL): Remove.
	* doc/tm.texi: Remove documentation.

2002-07-23  J"orn Rennecke <joern.rennecke@superh.com>

	* recog.c (asm_operand_ok): Allow float CONST_VECTORs for 'F'.
	(constrain_operands): Likewise.
	* regclass.c (record_reg_classes): Likewise.
	* reload.c (find_reloads): Likewise.
	* doc/md.texi: Likewise.

	* reload.c (find_reloads_toplev): Use simplify_gen_subreg.
	* simplify-rtx.c (simplify_subreg): When converting to a non-int
	mode, try to convert to an integer mode of matching size first.

	* simplify-rtx.x (simplify_subreg): When constructing a CONST_VECTOR
	from individual subregs, check that each subreg has been generated
	sucessfully.

2002-07-23  Neil Booth  <neil@daikokuya.co.uk>

	* genautomata.c (VLA_HWINT_SHORTEN, VLA_HWINT_LAST): Remove.
	* df.c (HANDLE_SUBREG, FOR_EACH_BB_IN_BITMAP_REV,
	FOR_EACH_BB_IN_SBITMAP): Remove.
	* gcse.c (NEVER_SET, FOLLOW_BACK_EDGES): Remove.
	* haifa-sched.c (DONE_PRIORITY, MAX_PRIORITY, TAIL_PRIORITY,
	LAUNCH_PRIORITY, DONE_PRIORITY_P, LOW_PRIORITY_P): Remove.
	* loop.c (PREFETCH_BLOACK_IN_LOOP_MIN,
	PREFETCH_LIMIT_TO_SIMULTANEOUS): Remove.
	* regrename.c (REGNO_MODE_OK_FOR_BASE_P): Remove.

2002-07-23  Gabriel Dos Reis  <gdr@nerim.net>

	* pretty-print.h: New file.

2002-07-23	Paul Koning	<pkoning@equallogic.com>

	* real.c (REAL_WORDS_BIG_ENDIAN): Make 1 for DEC.
	(LARGEST_EXPONENT_IS_NORMAL): Ditto.
	(VAX_HALFWORD_ORDER): Define (1 for DEC VAX, 0 otherwise).
	(TARGET_G_FLOAT): Default to 0 if not defined.
	(ieeetoe): New, common routine to convert target format floats
	to internal form.
	(e24toe, e53toe): Change to use ieeetoe, distinguish DEC
	vs. others.
	(e113toe): Change to use ieeetoe.

2002-07-23  Roman Lechtchinsky  <rl@cs.tu-berlin.de>

	* real.c (REAL_WORDS_BIG_ENDIAN): Make sure it is 0 for DEC and 1 for
	IBM.
	(e53toe): Assume IEEE if non of DEC, IBM and C4X is defined.
	(e64toe): Remove special cases for DEC and IBM. Remove support for
	ARM_EXTENDED_IEEE_FORMAT.
	(e24toe): Remove special cases for DEC.
	(significand_size): Simplify. Indent.
	(ieee_format, ieee_24, ieee_53, ieee_64, ieee_113): New.
	(etoieee, toieee): New.
	(etoe113, toe113, etoe64, toe64, etoe53, toe53, etoe24, toe24): Use
	etoieee and toieee for IEEE arithmetic.

2002-07-23  Gabriel Dos Reis  <gdr@nerim.net>

	* doc/extend.texi: Say ISO C90, not ISO C89.
	* doc/invoke.texi: Likewise.
	* doc/standards.texi: Likewise.

2002-07-23  Steve Ellcey  <sje@cup.hp.com>

	* gcc/explow.c (convert_memory_address): Fix conversion of CONSTs.
	Fix permutation of conversion and plus/mult.
	* gcc/builtins.c (expand_builtin_memcpy) Ensure return pointer is
	ptr_mode and not Pmode when POINTERS_EXTEND_UNSIGNED is defined.
	(expand_builtin_strncpy) Ditto.
	(expand_builtin_memset) Ditto.

2002-07-23  Gabriel Dos Reis  <gdr@nerim.net>

	Fix PR/7363:
	* c-common.c (c_sizeof_or_alignof_type): New function.
	(c_alignof): Remove definition.
	* c-common.h (c_sizeof, c_alignof): Define as macros.
	(c_sizeof_or_alignof_type): Declare.
	(my_friendly_assert): Moved from cp/cp-tree.h
	* c-typeck.c (c_sizeof): Remove definition.

2002-07-23  Jan Hubicka  <jh@suse.cz>

	* gcse.c (try_replace_reg): Use num_changes_pending.
	* recog.c (num_changes_pending): New function.
	(validate_replace_src): Use validate_repalce_src_group.
	(validate_replace_src_group): New.
	* recog.h (validate_repalce_src_group): New.
	(num_changes_pending): Likewise.

2002-07-23  J"orn Rennecke <joern.rennecke@superh.com>

	* calls.c (emit_library_call_value_1): If
	FUNCTION_ARG_PASS_BY_REFERENCE is true, pretend this is neither
	libcall, const call nor pure call.

2002-07-23  Neil Booth  <neil@daikokuya.co.uk>

	* config/m88k/m88k.h (SECTION_ASM_OP): Remove.

2002-07-23  Neil Booth  <neil@daikokuya.co.uk>

	* vmsdbgout.c (SECTION_ASM_OP): Remove.

2002-07-23  Neil Booth  <neil@daikokuya.co.uk>

	* config/i386/i386.c (AT_BP): Remove.

2002-07-23  Neil Booth  <neil@daikokuya.co.uk>

	* defaults.h (obstack_chunk_alloc, obstack_chunk_free):
	Default definition.
	* gcse.c: Don't define obstack_chunk_free.
	* collect2.c, conflict.c, df.c, diagnostic.c, fix-header.c,
	flow.c, gcc.c, genattrtab.c, genautomata.c, genflags.c, gensupport.c,
	integrate.c, loop.c, ra.c, read-rtl.c, regrename.c, reload1.c,
	reorg.c, tlink.c, tree.c, config/arm/arm.c, objc/objc-act.c:
	Don't define obstack macros.

2002-07-22  Stephane Carrez  <stcarrez@nerim.fr>

	PR target/6744
	* config/m68hc11/m68hc11.c (m68hc11_z_replacement): Also replace
	ASM_OPERANDS instructions.

2002-07-22  Stephane Carrez  <stcarrez@nerim.fr>

	PR target/7361
	* config/m68hc11/m68hc11.c (go_if_legitimate_address_internal): Accept
	constant addresses only on 68HC12.

2002-07-22  Neil Booth  <neil@daikokuya.co.uk>

	* cppfiles.c (stack_include_file): Correct test of whether
	a dependency should be output.

2002-07-22  David Edelsohn  <edelsohn@gnu.org>

	* collect2.c (is_ctor_dtor): Add other possible JOINER values.

2002-07-22  Richard Earnshaw  <rearnsha@arm.com>

	* arm.md (movqi): If optimizing and we can create pseudos, use
	a ZERO_EXTEND to load from memory, then copy the result into the
	target.
	(movhi): Likewise, but only for ARMv4.

2002-07-22  Neil Booth  <neil@daikokuya.co.uk>

	* ssa-ccp.c (PHI_PARMS): Remove.

2002-07-22  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.h (CLASS_CANNOT_CHANGE_MODE): Include FP_REGS
	on big-endian targets.

2002-07-22  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* hwint.h (HOST_WIDE_INT_PRINT_DEC_SPACE,
	HOST_WIDE_INT_PRINT_UNSIGNED_SPACE,
	HOST_WIDEST_INT_PRINT_DEC_SPACE, HOST_WIDEST_INT_PRINT_DEC_SPACE):
	New formatting macros.

	* ra-debug.c (dump_static_insn_cost): Avoid string concatenation.

2002-07-22  J"orn Rennecke <joern.rennecke@superh.com>

	* rtlanal.c (subreg_regno_offset): Return correct offset for
	big endian paradoxical subregs.

	* optabs.c (expand_vector_unop): Don't expand using sub_optab
	if we got the wrong mode.

	* hwint.c (define HOST_WIDE_INT_PRINT_DEC_C): New define.
	* genrecog.c (write_switch, write_cond): Use it.
	* genemit.c (gen_exp): Likewise.

2002-07-22  Jakub Jelinek  <jakub@redhat.com>

	* c-decl.c (build_compound_literal): Set decl TREE_READONLY from TYPE.

2002-07-22  Jakub Jelinek  <jakub@redhat.com>

	* c-decl.c (build_compound_literal): Defer compound literal decls
	until until file end to emit them only if they are actually used.

2002-07-21  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* ra-build.c (check_conflict_numbers): Hide unused function.
	(livethrough_conflicts_bb): Avoid automatic aggregate
	initialization.
	(parts_to_webs_1): Avoid `U' integer constant modifier.
	(conflicts_between_webs): Wrap a variable in the macro controlling
	its usage.
	* ra-debug.c (ra_debug_msg): Use VA_OPEN/VA_CLOSE.
	(dump_igraph, dump_graph_cost): Avoid string concatenation
	(dump_static_insn_cost): Avoid automatic aggregate
	initialization.
	* ra-rewrite.c (insert_stores): Avoid automatic aggregate
	initialization.
	(dump_cost): Avoid string concatenation

2002-07-21  Richard Henderson  <rth@redhat.com>

	* expr.c (expand_expr) [TRY_FINALLY_EXPR]: Don't use
	GOTO_SUBROUTINE_EXPR when finally_block can be re-expanded.

2002-07-21  Richard Henderson  <rth@redhat.com>

	* unroll.c (find_splittable_givs): Do not split DEST_ADDR givs
	that are not unrolled completely.

2002-07-21  Richard Henderson  <rth@redhat.com>

	* loop.h (LOOP_AUTO_UNROLL): Rename from LOOP_FIRST_PASS.
	* loop.c (strength_reduce): Update.
	* toplev.c (rest_of_compilation): Do unrolling in the first
	loop pass, not the second.

2002-07-21  Richard Henderson  <rth@redhat.com>

	* emit-rtl.c (set_mem_attributes): Preserve indirection of PARM_DECL
	when flag_argument_noalias == 2.
	* alias.c (nonoverlapping_memrefs_p): Handle that.
	* print-rtl.c (print_mem_expr): Likewise.

2002-07-21  Hartmut Schirmer  <hartmut.schirmer@arcor.de>

	* libgcc2.c (__divdi3, __moddi3): Use unary minus operator
	instead of __negdi2 directly.

2002-07-21  Neil Booth  <neil@daikokuya.co.uk>

	* gengenrtl.c (gencode): Don't define obstack_alloc_rtx.
	* function.c (SYMBOL__MAIN): Remove definition.
	* global.c (SET_CONFLICT, REGBITP, ALLOCNO_LIVE_P): Remove.
	* predict.c (PROB_NEVER, PROB_LIKELY, PROB_UNLIKELY): Remove.
	* profile.c (GCOV_INDEX_TO_BB): Remove.
	* sched-rgn.c (ABS_VALUE, MIN_DIFF_PRIORITY, MIN_PROB_DIFF): Remove.
	* simplify-rtx.c (FIXED_BASE_PLUS_P): Remove.

2002-07-21  Neil Booth  <neil@daikokuya.co.uk>

	* c-lex.c (GET_ENVIRONMENT): Remove.
	* collect2.c (GET_ENV_PATH_LIST): Remove.
	(prefix_from_env): Use GET_ENVIRONMENT.
	* cppinit.c (GET_ENV_PATH_LIST): Remove.
	(init_standard_includes): Use GET_ENVIRONMENT.
	* defaults.h (GET_ENVIRONMENT): Define here if not already.
	* gcc.c (GET_ENV_PATH_LIST): Remove.
	(make_relative_prefix, process_command): Update.
	* protoize.c (GET_ENV_PATH_LIST): Remove.
	(do_processing): Update.

2002-07-21  Gabriel Dos Reis  <gdr@nerim.net>

	* c-decl.c (build_array_declarator): Say 'ISO C90', not 'ISO C89'.
	(grokdeclarator): Likewise.
	* c-format.c (C_STD_NAME): Likewise.
	* c-lex.c (interpret_integer): Likewise.
	* c-typeck.c (build_array_ref): Likewise.
	* cpplex.c (_cpp_lex_direct): Likewise.
	* toplev.c (documented_lang_options): Likewise.

2002-07-21  Neil Booth  <neil@daikokuya.co.uk>

	* c-format.c (T99_I, T99_UI): Remove.

2002-07-21  Neil Booth  <neil@daikokuya.co.uk>

	* c-typeck.c (SAVE_SPELLING_DEPTH): Remove.

2002-07-21  Jan Hubicka  <jh@suse.cz>

	* gcse.c (do_local_cprop): Do not extend lifetimes of registers set by
	do_local_cprop.

2002-07-21  Andreas Jaeger  <aj@suse.de>

	* reload1.c (fixup_abnormal_edges): Remove unused variable.

2002-07-21  Bernd Schmidt  <bernds@redhat.com>

	Improvements for the ifcvt pass from Michael Meissner, with patches
	by Richard Sandiford <rsandifo@redhat.com>
	* basic-block.h (struct ce_if_block, ce_if_block_t): New types.
	* ifcvt.c (cond_exec_changed_p): New static variable.
	(last_active_insn): New function, renamed from last_active_insn_p
	and changed to return the last active insn in a basic block. All
	callers updated.
	(block_fallthru): New function.
	(cond_exec_process_insns): New argument CE_INFO.  Pass it to
	IFCVT_MODIFY_INSN.  All callers updated.
	Return false if START or END are NULL.
	Handle case where we're processing an insn that is already
	conditional.

	(noce_process_if_block): CE_INFO argument rather than
	multiple args containing the involved basic blocks.  All callers
	changed.
	(process_if_block, merge_if_block, find_if_block,
	cond_exec_process_if_block): Likewise.

	(cond_exec_process_if_block): New arg DO_MULTIPLE_P.  All callers
	changed.
	Use new function last_active_insn to simplify some code.
	New code to handle multiple tests.
	Call IFCVT_MODIFY_CANCEL in all failure cases, otherwise set
	cond_exec_changed_p to TRUE.

	(process_if_block): New code to handle multiple tests.
	(merge_if_block): Likewise.
	(find_if_header): New arg PASS.  Changed to return the currently
	processed basic block or NULL instead of true/false. All callers
	changed.
	Call IFCVT_INIT_EXTRA_FIELDS.
	(block_jumps_and_fallthru_p): New function.
	(find_if_block): Discover opportunities to convert multiple tests.
	Add additional debugging output.
	Update the ce_info structure before returning.

	(if_convert): Run multiple passes of if-conversion.
	* doc/tm.texi (IFCVT_MODIFY_TESTS, IFCVT_MODIFY_INSN,
	IFCVT_MODIFY_FINAL, IFCVT_MODIFY_CANCEL, IFCVT_MODIFY_MULTIPLE_TESTS,
	IFCVT_INIT_EXTRA_FIELDS, IFCVT_EXTRA_FIELDS): Update documentation for
	these macros.

2002-07-21  Jan Hubicka  <jh@suse.cz>

	* gcse.c: Include cselib.h
	(constptop_register): Break out from ...
	(cprop_insn): ... here; kill basic_block argument.
	(do_local_cprop, local_cprop_pass): New functions.
	(one_cprop_pass): Call local_cprop_pass.

2002-07-20  Roger Sayle  <roger@eyesopen.com>

	* simplify-rtx.c (simplify_relational_operation): Optimize
	abs(x) < 0.0 (and abs(x) >= 0.0 when using -ffast-math).

2002-07-20  Michae Matz  <matz@suse.de>

	* ra-build.c: (remember_web_was_spilled): Use GENERAL_REGS.

2002-07-20  Neil Booth  <neil@daikokuya.co.uk>

	* cppexp.c (struct op): Add token pointer.
	(check_promotion, CHECK_PROMOTION): New.
	(optab): Update.
	(_cpp_parse_expr): Update, use token pointer of struct op.
	(reduce): Warn about change of sign owing to promotion.
	* cppinit.c (cpp_handle_option): New warning if -Wall.
	* cpplib.h (struct cpp_options): New member.

2002-07-19  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.md: Remove ppc630 fpcompare from single
	fpu list.  Separate Power4 compare and delayed_compare.  Correct
	Power4 fpcompare.
	(fix_truncdfsi2_internal): Restore FPR preference.
	* config/rs6000/t-aix43 (MULTILIB_MATCHES): Add mcpu?power3,
	mcpu?power4, mcpu?604e.  Remove mpower, mpower2, mpowerpc.

2002-07-19  Momchil Velikov <velco@fadata.bg>

	* reload1.c (reload_as_needed): Duplicate oldpat.

2002-07-20  Alan Modra  <amodra@bigpond.net.au>

	PR optimization/7130
	* loop.h (struct loop_info): Add "preconditioned".
	* unroll.c (unroll_loop): Set it.
	* doloop.c (doloop_modify_runtime): Correct count for unrolled loops.

2002-07-19  Zack Weinberg  <zack@codesourcery.com>

	* rtl.def (CODE_LABEL): Remove slot 8.
	* rtl.h (struct rtx_def): Document new uses of jump and call fields.
	(LABEL_ALTERNATE_NAME): Delete.
	(LABEL_KIND, SET_LABEL_KIND, LABEL_ALT_ENTRY_P): New.
	* defaults.h: Remove default for ASM_OUTPUT_ALTERNATE_LABEL_NAME.

	* final.c (output_alternate_entry_point): New.
	(final_scan_insn): Use it instead of
	ASM_OUTPUT_ALTERNATE_LABEL_NAME.  Do not consider possibility
	of a case label being an alternate entry point.

	* cfgbuild.c (make_edges, find_bb_boundaries): Use LABEL_ALT_ENTRY_P.
	* emit-rtl.c (gen_label_rtx): Adjust call to gen_rtx_CODE_LABEL.
	Do not clear LABEL_NUSES (unnecessary) or LABEL_ALTERNATE_NAME
	(field deleted).
	* print-rtl.c, ra-debug.c: Update code to output CODE_LABELs.

	* doc/rtl.texi: Document LABEL_KIND, SET_LABEL_KIND, and
	LABEL_ALT_ENTRY_P; not LABEL_ALTERNATE_NAME.
	* doc/tm.texi: Delete documentation of
	ASM_OUTPUT_ALTERNATE_LABEL_NAME.

2002-07-19  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config/mips/iris5gas.h (DWARF2_DEBUGGING_INFO): Define.
	(PREFERRED_DEBUGGING_TYPE): Use DWARF2_DEBUG.
	(LINK_SPEC): Define.
	(STARTFILE_SPEC): Define.
	(ENDFILE_SPEC): Define.

	* config/mips/iris6-o32.h (LINK_SPEC): Move ...
	* config/mips/iris6-o32-as.h (LINK_SPEC): ... here.

	* config/mips/iris6-o32-gas.h: New file.
	* config.gcc (mips-sgi-irix6*o32): Use it.

	* config/mips/t-iris5-gas: New file.
	* config.gcc (mips-sgi-irix6*o32, mips-sgi-irix5*): Use it.

2002-07-19  Neil Booth  <neil@daikokuya.co.uk>

	* cppexp.c (ALWAYS_EVAL): Remove.
	(optab, reduce): Always evaluate.
	(num_unary_op, num_binary_op, num_div_op): Issue diagnostics
	only if not skipping evaluation.

2002-07-19  Marek Michalkiewicz  <marekm@amelek.gda.pl>

	* config/avr/avr.c (debug_hard_reg_set): Remove.

2002-07-19  Chris Demetriou  <cgd@broadcom.com>

	* gcc.c (cpp_options): Include "%1" (cc1_spec).

2002-07-19  Richard Henderson  <rth@redhat.com>

	* loop.c (loop_givs_rescan): Delete the REG_EQUAL note, not the insn.

2002-07-19  Alan Modra  <amodra@bigpond.net.au>

	* prefix.c (update_path): Don't zap single `.' path components
	unless followed by another `.' and fix typo last patch.

2002-07-18  Neil Booth  <neil@daikokuya.co.uk>

	* cppexp.c (cpp_num_mul): Remove unused parameter.
	(UNARY, BINARY, OTHER, binary_handler): Remove.
	(ALWAYS_EVAL): New.
	(optab): Update.
	(reduce): Refactor to a large switch, don't use a function
	pointer.

2002-07-18  Bo Thorsen  <bo@berlioz.suse.de>

	* config/i386/linux64.h (STARTFILE_PREFIX_SPEC): Define this always.

2002-07-18  J"orn Rennecke <joern.rennecke@superh.com>

	* sh-protos.h (sh_expand_unop_v2sf): Move inside #ifdef RTX_CODE guard.
	(sh_expand_binop_v2sf): Likewise.
	* sh.c (machine_dependent_reorg): Add move for UNSPEC_MOVA.
	(int_gpr_dest, trunc_hi_operand): New functions.
	* sh.h (PREDICATE_CODES): Add any_register_operand, int_gpr_dest and
	trunc_hi_operand.
	(SPECIAL_MODE_PREDICATES, any_register_operand): Define.
	* sh.md (cmpeqdi_t+1): Remove comments that genrecog warns about.
	(adddi3_compact+1, subdi3_compact+1, ashlsi3_n+1, ashlhi3+1): Likewise.
	(ashrsi2_16+1, ashrsi2_31+1, lshrsi3_n+1, ashrdi3+[12]): Likewise.
	(and_shl_scratch+[12], zero_extendhidi2+1): Likewise.
	(zero_extendhisi2_media+1, extendhidi2+1, extendqidi2+1): Likewise.
	(extendhisi2_media+1, extendqisi2_media+1): Likewise.
	(movsi_media_nofpu+[12], movhi_media+1, movdi_media_nofpu+1): Likewise.
	(movdi_const_16bit+[12], movdf_i4+[123], reload_outdf+[2-5]): Likewise.
	(movsf_ie+1): Likewise.
	(loaddi_trunc): Use int_gpr_dest predicate.
	(use_sfunc_addr, indirect_jump_scratch, sibcall_compact): Add mode(s).
	(mova, mova_const, GOTaddr2picreg, ptrel, casesi_worker_0): Likewise.
	(casesi_worker_0+[12], casesi_worker): Likewise.
	(shcompact_preserve_incoming_args): Likewise.
	(mov_nop): Use any_register_operand predicate.
	(mperm_w0): Use trunc_hi_operand predicate.

2002-07-18  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa-linux.h (DWARF2_UNWIND_INFO): Delete define.
	* pa.h (EH_RETURN_DATA_REGNO): Revise TARGET_64BIT and correct
	numbering.

2002-07-18  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.c (output_deferred_plabels): Remove unused millicode enum mulU.

2002-07-18  Richard Henderson  <rth@redhat.com>

	PR optimization/7147
	* ifcvt.c (noce_get_condition): Make certain that the condition
	is valid at JUMP.

2002-07-18  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (barrier_align, push): Shut up compiler warnings.
	(initial_elimination_offset,sh_media_init_builtins): Likewise.
	(reg_no_subreg_operand): Delete.

2002-07-17  Bo Thorsen  <bo@suse.de>

	* config/i386/linux64.h (LINK_SPEC): Remove bogus -Y option.
	(STARTFILE_PREFIX_SPEC): Define for NATIVE_CROSS compilations.
	(STARTFILE_SPEC): Remove hardcoded library paths.
	(ENDFILE_SPEC): Likewise.

2002-07-18  Jan Hubicka  <jh@suse.cz>

	* gcse.c (hoist_expr_reaches_here_p):  Stop once expr_bb is reached.

	* gcse.c (try_replace_reg): Do not return false positives.

2002-07-18  Alan Modra  <amodra@bigpond.net.au>

	* prefix.c: (update_path): Strip ".." components when prior dir
	doesn't exist.  Pass correct var to UPDATE_PATH_HOST_CANONICALIZE.

	* config/rs6000/sysv4.h (ASM_OUTPUT_REG_PUSH): Remove 64-bit support.
	(ASM_OUTPUT_REG_POP): Likewise.

2002-07-18  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/rs6000.c (first_reg_to_save): Remove bogus
	adjustments to first_reg for profiling case.
	(output_function_profiler): Correct lr save slot for ABI_AIX_NODESC.
	Disable profiling for 64 bit code on both ABI_V4 and ABI_AIX_NODESC.
	Save static chain reg to sp + 12 on ABI_AIX_NODESC.
	* config/rs6000/sysv4.h (ASM_OUTPUT_REG_PUSH): Define.
	(ASM_OUTPUT_REG_POP): Define.
	* config/rs6000/linux64.h (ASM_OUTPUT_REG_PUSH): Undef.
	(ASM_OUTPUT_REG_POP): Undef.

2002-07-17  Neil Booth  <neil@daikokuya.co.uk>

	* cpplib.c (do_sccs): Handle #sccs on all systems.
	* system.h (SCCS_DIRECTIVE): Poison.
	* config/darwin.h, config/freebsd.h, config/netbsd.h,
	config/ptx4.h, config/svr3.h, config/svr4.h, config/alpha/elf.h,
	config/arm/linux-elf.h, config/c4x/c4x.h, config/d30v/d30v.h,
	config/i370/i370.h, config/i386/gas.h, config/i386/sco5.h,
	config/i960/i960.h, config/m68hc11/m68hc11.h, config/m68k/3b1.h,
	config/m68k/3b1g.h, config/m68k/crds.h, config/m68k/mot3300.h,
	config/m68k/pbb.h, config/m88k/m88k.h, config/mips/mips.h,
	config/sparc/pbd.h, config/stormy16/stormy16.h, config/vax/vaxv.h:
	Remove all references to SCCS_DIRECTIVE.
	* doc/cpp.texi, doc/tm.texi: Update.

2002-07-17  J"orn Rennecke <joern.rennecke@superh.com>

	* regrename.c (maybe_mode_change): New function.
	(find_oldest_value_reg, copyprop_hardreg_forward_1): Use it.

2002-07-17  Rodney Brown  <rbrown64@csc.com.au>

	* config/i386/i386.c (ix86_expand_int_movcc): In the general case
	suppress addition when either ct or cf are zero.

2002-07-17  Eric Botcazou <ebotcazou@multimania.com>
	    Glen Nakamura <glen@imodulo.com>

	PR optimization/6713
	* loop.c (loop_givs_rescan): Explicitly delete the insn that
	sets a non-replaceable giv after issuing the new one.

2002-07-17  Neil Booth  <neil@daikokuya.co.uk>

	* cppexp.c (cpp_interpret_integer, append_digit, parse_defined,
	eval_token): Clarify and correct use of "bool" variables.
	* cpplib.h (struct cpp_options): Similarly.
	* cppmacro.c (parse_params, _cpp_save_parameter): Ditto.
	* cpptrad.c (recursive_macro): Similarly.

2002-07-17  J"orn Rennecke <joern.rennecke@superh.com>

	* config/sh/lib1funcs.asm (udivsi3_i4): Implement SHcompact version in
	SHmedia code.

	* sh.md (cmpgtudi_media): Remove spurious @.

	* config/sh/lib1funcs.asm (FMOVD_WORKS): Don't define for little endian.
	* sh.h (OVERRIDE_OPTIONS): Don't set FMOVD_BIT for little endian.

	* config/sh/lib1funcs.asm (init_trampoline): New entry point.
	* sh-protos.h (sh_initialize_trampoline): Declare.
	* sh.c (sh_initialize_trampoline): New function.
	* sh.h (TRAMPOLINE_SIZE): Only 24 for TARGET_SHMEDIA32.
	(TRAMPOLINE_ALIGNMENT): Need cache-line alignment for TARGET_SHMEDIA.
	(INITIALIZE_TRAMPOLINE): Call sh_initialize_trampoline.
	(TRAMPOLINE_ADJUST_ADDRESS): Not needed for SHcompact.
	* sh.md (initialize_trampoline, double_shori): New patterns.
	(initialize_trampoline_compact): Likewise.
	(shmedia32_initialize_trampoline_big): Remove.
	(shmedia32_initialize_trampoline_little): Likewise.

	* sh-protos.h (binary_float_operator): Remove declaration.
	(sh_expand_unop_v2sf, sh_expand_binop_v2sf): Declare.
	* sh.c (print_operand, case 'N'): Check against CONST0_RTX.
	(unary_float_operator, sh_expand_unop_v2sf): New functions.
	(sh_expand_binop_v2sf): Likewise.
	(zero_vec_operand): Delete.
	(SH_BLTIN_UDI): New builtin shared signature define.  Renumbered
	all non-shared ones.
	(bdesc): Change all the mextr builtins to use SH_BLTIN_UDI.
	Enable nsb and byterev.
	* sh.h (CONDITIONAL_REGISTER_USAGE): Initialize DF_HI_REGS.
	(HARD_REGNO_MODE_OK): Allow TImode in fp regs.  Allow V2SFmode
	in general regs.
	(enum reg_class, REG_CLASS_NAMES, REG_CLASS_CONTENTS): Add DF_HI_REGS.
	(SECONDARY_OUTPUT_RELOAD_CLASS): Likewise.  Remove clause for
	immediate operands.
	(SECONDARY_INPUT_RELOAD_CLASS): Add clause for immediate operands.
	Add DF_HI_REGS.
	(CLASS_CANNOT_CHANGE_MODE, CLASS_CANNOT_CHANGE_MODE_P): Allow
	lowpart fp regs - only for big endian for now.
	(LEGITIMATE_CONSTANT_P): Don't allow nonzero float vectors
	when FPU is in use.
	(EXTRA_CONTRAINT_U): Check against CONST0_RTX.
	(LOAD_EXTEND_OP): NIL for SImode.
	(REGISTER_MOVE_COST): Add DF_HI_REGS.  Const for moves between
	general and fp registers is 4.
	PREDICATE_CODES: Amend binary_float_operator entry.
	Remove zero_vec_operand.  Add unary_float_operator.
	* sh.md (udivsi3_i4_media): Use truncate instead of paradoxical
	subreg SET_DEST.
	(truncdisi2, truncdihi2, movv2sf): Allow memory destinations.
	(truncdiqi2): Do sign extension.
	(movsi_media, movdi_media): Allow to use r63 to an fp register.
	(movdf_media, movsf_media): Likewise.
	(movv2sf_i, movv2sf_i+1): Don't use f{ld,st}.p or SUBREGS.
	Collapse to one define_insn_and_split.  Allow immediate sources.
	(addv2sf3, subv2sf3, mulv2sf3, divv2sf3): New patterns.
	(movv4sf_i): Allow immediate sources.  Use simplify_gen_subreg.
	(movv4sf): Allow immediate sources.
	(movsf_media_nofpu+1): Don't split moves to FP registers.
	(unary_sf_op, binary_sf_op, mshflo_w_x, concat_v2sf): New patterns.
	(movv8qi_i+3): Check against CONST0_RTX.
	(mextr1, mextr2. mextr3. mextr4, mextr5, mextr6, mextr7): Use DImode
	for input and output operands.  Fix argument 3 to gen_mextr_rl.
	(mmul23_wl, mmul01_wl, mmulsum_wq_i): s/const_vector/parallel/
	(msad_ubq_i, mshf4_b, mshf0_b, mshf4_l, mshf0_l, mshf4_w): Likewise.
	(mshf0_w, fipr, ftrv): Likewise.
	(mshfhi_l_di): Now insn_and_split.  Can handle FP regs.

2002-07-17  Jeroen Dobbelaere  <jeroen.dobbelaere@acunia.com>

	* arm.h (ARM_NUM_INTS, ARM_NUM_REGS, ARM_NUM_REGS2): Renamed from
	NUM_INTS, NUM_REGS and ARM_NUM_REGS2 respectively.  All uses changed.
	* arm.c: Similarly.

2002-07-17  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips-protos.h (mips_sign_extend): Declare.
	* config/mips/mips.h (MASK_DEBUG_H, TARGET_DEBUG_H_MODE): Remove.
	(TARGET_SWITCHES): Remove debugh.
	(ISA_HAS_TRUNC_W): New macro.
	(CLASS_CANNOT_CHANGE_MODE): Include FP_REGS if TARGET_FLOAT64.
	(PREDICATE_CODES): Remove se_nonimmediate_operand.
	* config/mips/mips.c (movdi_operand): Allow sign-extensions of
	any SImode move_operand.
	(se_nonimmediate_operand): Remove.
	(mips_sign_extend): New.
	(mips_move_2words): Use it for sign-extended source operands.
	(override_options): Allow integers to be put into single FPRs.
	(mips_secondary_reload_class): Handle integers in float registers.
	* config/mips/mips.md (extendsidi2): Turn into a define_expand.
	(fix_truncsfsi2, fix_truncdfsi2): Likewise.
	(fix_truncdfsi2_insn, fix_truncdfsi2_macro): New.
	(fix_truncsfsi2_insn, fix_truncsfsi2_macro): New.
	(fix_truncdfdi2): Provide only a single alternative, in which the
	integer is in a float register.  Depend on TARGET_FLOAT64 rather
	than TARGET_64BIT.
	(fix_truncsfdi2, floatdidf2, floatdisf2): Likewise.
	(floatsidf2, floatsisf2): Likewise, but no TARGET_FLOAT64 dependency.
	(movdi_internal2): Don't allow the source operand to be sign-extended.
	Add alternatives for float registers.
	(*movdi_internal2_extend): New.  Version of movdi_internal2 that
	allows sign-extension.
	(*movdi_internal2_mips16): Name the existing mips16 movdi pattern.
	(movsi_internal2): Rename to movsi_internal.  Add alternatives for
	float registers.  Remove TARGET_DEBUG_H_MODE test.
	(movhi_internal1): Rename to movhi_internal.  Don't check
	TARGET_DEBUG_H_MODE.  Fix transposed *d and *f source constraints.
	(movqi_internal1): Rename to movqi_internal and remove
	TARGET_DEBUG_H_MODE dependency.
	(movsi_internal1, movhi_internal2, movqi_internal2): Remove.

2002-07-16  Jim Wilson  <wilson@redhat.com>

	* toplev.c (lang_dependent_init): Create function context for
	init_expr_once.

2002-07-16  Hans-Peter Nilsson  <hp@axis.com>

	* config/cris/linux.h (CRIS_LINK_SUBTARGET_SPEC): Don't
	--gc-sections if -r.
	* config/cris/cris.h: Ditto.

2002-07-16  Rodney Brown  <rbrown64@csc.com.au>

	* config/i386/i386.c (ix86_expand_int_movcc): In the case where
	the comparison directly gives a mask suppress addition when cf is
	zero by complementing the mask.

2002-07-16  Nathanael Nerode  <neroden@gcc.gnu.org>

	* Makefile.in: Delete references to enquire.
	* enquire.c: Move to contrib.

2002-07-16  Stan Shebs  <shebs@apple.com>

	* config/darwin.h (ASM_OUTPUT_LABEL): Move to here from
	config/rs6000/darwin.h.
	(ASM_OUTPUT_SKIP): Ditto.
	(TEXT_SECTION_ASM_OP): Ditto.
	(DATA_SECTION_ASM_OP): Ditto.
	(ASM_APP_ON): Define.
	(ASM_APP_OFF): Define.
	* config/rs6000/darwin.h (ASM_OUTPUT_LABEL, ASM_OUTPUT_SKIP,
	TEXT_SECTION_ASM_OP, DATA_SECTION_ASM_OP): Remove.

	* config/darwin.c (func_name_maybe_scoped): Remove unused decl.
	(machopic_function_base_name): Declare result to be const.
	(machopic_non_lazy_ptr_name): Ditto.
	(machopic_stub_name): Ditto.
	* config/darwin-protos.h: Ditto for the prototypes.

2002-07-17  Jan Hubicka  <jh@suse.cz>

	* m68hc11.c (m68hc11_reorg): Do not rebuild CFG.

2002-07-17  Jan Hubicka  <jh@suse.cz>

	* i386.md (prefetch): Fix for 64bit mode.
	(prefetch_sse_rex, prefetch_3dnow_rex): New patterns.

2002-07-17  Jan Hubicka  <jh@suse.cz>

	* i386.h (MACHINE_DEPENDENT_REORG): New macro.
	* i386.c (x86_machine_dependent_reorg): New function.
	* i386-protos.h (x86_machine_dependent_reorg): Declare.

2002-07-16  Zack Weinberg  <zack@codesourcery.com>

	* builtins.c (std_expand_builtin_va_start): Remove unused
	first argument.
	(expand_builtin_va_start): Call EXPAND_BUILTIN_VA_START and
	std_expand_builtin_va_start with just two arguments.
	* expr.h: Update prototypes.

	* alpha-protos.h, alpha.h, alpha.c, arc-protos.h, arc.h,
	arc.c, d30v-protos.h, d30v.h, d30v.c, i386-protos.h, i386.h,
	i386.c, i960-protos.h, i960.h, i960.c, m88k-protos.h, m88k.h,
	m88k.c, mips-protos.h, mips.h, mips.c, mn10300-protos.h,
	mn10300.h, mn10300.c, pa-protos.h, pa.h, pa.c,
	rs6000-protos.h, rs6000.h, rs6000.c, s390-protos.h, s390.h,
	s390.c, sh-protos.h, sh.h, sh.c, sparc-protos.h, sparc.h,
	sparc.c, stormy16-protos.h, stormy16.h, stormy16.c,
	xtensa-protos.h, xtensa.h, xtensa.c:  Remove unused first
	argument from all implementations of EXPAND_BUILTIN_VA_START
	and all uses of std_expand_builtin_va_start.

2002-07-16  J"orn Rennecke <joern.rennecke@superh.com>

	* regrename.c (copy_value): Don't record high part copies.

2002-07-16  Steve Ellcey  <sje@cup.hp.com>

	* gcc/config/pa/long_double.h (FIXUNS_TRUNCTFDI2_LIBCALL): New define.
	(fixunstfdi_libfunc): Change to use FIXUNS_TRUNCTFDI2_LIBCALL.
	* gcc/config/pa/quadlib.c (_U_Qfcnvfxt_quad_to_udbl): New function.

2002-07-16  Ian Dall  <ian@sibyl.beware.dropbear.id.au>

	* doc/invoke.texi (NS32K Options): Document -mieee-compare option

	* config/ns32k/ns32k.md (addsi3, *frame_addr, *stack_addr): merge
	into addsi3 using register class "x" and "y".

	* config/ns32k/ns32k.md (*madddf, *maddsf, *msubdf, *msubsf):
	"earlyclobber" constraint modifier for some alternative.

	* config/ns32k/ns32k.md (tstdf, tstsf, cmpdf, cmpsf, blt, ble)
	(*ble, *blt): Flag to indicate bCOND and sCOND should check for
	unordered.
	config/ns32k/ns32k.h (CC_UNORD): define corresponding mask.

	* config/ns32k/ns32k.h (TARGET_IEEE_COMPARE, MASK_IEEE_COMPARE)
	(TARGET_SWITCHES): Add -mieee-compare option.
	(OVERRIDE_OPTIONS): 32332 is a subset of
	32532. Don't use IEEE_COMPARE -funsafe-math-optimizations.
	(TARGET_SWITCHES): Fix description of bit-field option.
	* config/ns32k/netbsd.h (TARGET_DEFAULT): Add
	-mieee-compare option. Remove 32332 flag.

2002-07-16  Steve Ellcey  <sje@cup.hp.com>

	* explow.c (convert_memory_address): Remove special handling
	when POINTERS_EXTEND_UNSIGNED < 0.
	* config/ia64.md (movsi_symbolic): New instruction for ILP32 mode.
	(movedi_symbolic): Fix typo.
	(load_fptr): Remove mode restriction so it works for SI and DI.
	(load_fptr_internal1): Ditto.
	(load_gprel): Ditto.
	(load_symptr_internal1): Ditto.
	(call_pic): Ditto.
	* config/ia64.c (call_operand): Modify mode check.
	(ia64_expand_load_address): Handle DI and SI addresses and symbols.
	(ia64_expand_move): Ditto.
	(ia64_assemble_integer): Handle SImode function pointers.
	(ia64_expand_fetch_and_op): Handle SImode mem addresses.
	(ia64_expand_op_and_fetch): Ditto.
	(ia64_expand_compare_and_swap): Ditto.
	(ia64_expand_lock_test_and_set): Ditto.
	(ia64_expand_lock_release): Ditto.

2002-07-16  Jeroen Dobbelaere <jeroen.dobbelaere@acunia.com>

	* arm.c (emit_sfm): Don't set RTX_FRAME_RELATED_P on DWARF.

2002-07-16  Jeroen Dobbelaere <jeroen.dobbelaere@acunia.com>
	    Richard Earnshaw  <rearnsha@arm.com>

	* arm.h (LEGITIMATE_PIC_OPERAND_P): Only test
	CONSTANT_POOL_ADDRESS_P if a SYMBOL_REF.  Simplify logic.

2002-07-16  Richard Earnshaw  <rearnsha@arm.com>

	* arm.md (stack_tie): New insn.  Use an idiom that the alias code
	understands to be a memory clobber.
	* arm.c (arm_expand_prologue): Use it.

2002-07-16  Daniel Berlin  <dberlin@dberlin.org>

	* ra-rewrite.c: #include reload.h, insn-config.h
	* ra-build.c: #include reload.h
	* Makefile.in: Update ra-rewrite.o, ra-build.o dependencies to
	depend on reload.h, insn-config.h.

2002-07-16  J"orn Rennecke <joern.rennecke@superh.com>

	* expr.c (emit_move_insn_1): Handle arbitrary moves that are
	the same size as a word.

	* regrename.c (find_oldest_value_reg): Take WORDS_BIG_ENDIAN /
	BYTES_BIG_ENDIAN into account.

2002-07-16  Jan Hubicka  <jh@suse.cz>

	* i386.md (prefetch): Fix for 64bit mode.
	(prefetch_sse_rex, prefetch_3dnow_rex): New patterns.

	* i386.md (movss, movsd): Use xorps/xorpd for Athlon.

2002-07-16  Marek Michalkiewicz  <marekm@amelek.gda.pl>

	* hard-reg-set.h (TEST_HARD_REG_BIT): Return 1 if the bit is set.

2002-07-15  Zack Weinberg  <zack@codesourcery.com>

	* ginclude/varargs.h: Replace with stub which issues #error.
	* ginclude/stdarg.h: __builtin_stdarg_start is renamed
	__builtin_va_start.

	* builtins.def (BUILT_IN_VARARGS_START): Delete.
	(BUILT_IN_VA_START): New.
	* builtins.c (expand_builtin_va_start): Eliminate first
	argument and code to implement pre-ISO varargs.
	(std_expand_builtin_va_start): Ignore first argument; it is
	always 1.
	(expand_builtin): Handle BUILT_IN_VA_START and
	BUILT_IN_STDARG_START identically.  Delete
	BUILT_IN_VARARGS_START case.

	* function.c (assign_parms): Delete hide_last_arg and all
	its uses.
	(mark_varargs): Delete function.
	* function.h (struct function): Delete 'varargs' bit.
	(current_function_varargs): Delete macro.
	* tree.h: Don't declare mark_varargs.

	* c-decl.c (c_function_varargs, c_mark_varargs): Delete.
	(c_expand_body): Don't call mark_varargs.
	* c-objc-common.c: Handle BUILT_IN_VA_START and
	BUILT_IN_STDARG_START identically.  Delete
	BUILT_IN_VARARGS_START case.
	* c-tree.h: Don't declare c_mark_varargs.
	* c-parse.in: Remove grammar rules for '&...' (which has been
	commented out since before 2.7.2) and for '...' in K+R
	argument declarations.

	* builtins.c, function.c, integrate.c, sibcall.c,
	config/alpha/unicosmk.h, config/arc/arc.c, config/arc/arc.h,
	config/avr/avr.c, config/cris/cris.c, config/fr30/fr30.c,
	config/i960/i960.c, config/i960/i960.md, config/m32r/m32r.c,
	config/m32r/m32r.h, config/m88k/m88k.c, config/m88k/m88k.h,
	config/mips/mips.c, config/mmix/mmix.c, config/mmix/mmix.h,
	config/mn10300/mn10300.c, config/pa/som.h, config/s390/s390.c,
	config/sh/sh.c, config/sh/sh.h, config/sparc/sparc.h,
	config/stormy16/stormy16.c: Delete all references to
	current_function_varargs, and code predicated on that flag.

	* config/alpha/alpha.c (alpha_va_start),
	config/arc/arc.c (arc_va_start),
	config/i386/i386.c (ix86_va_start),
	config/mips/mips.c (mips_va_start),
	config/mn10300/mn10300.c (mn10300_va_start),
	config/rs6000/rs6000.c (rs6000_va_start),
	config/s390/s390.c (s390_va_start),
	config/sh/sh.c (sh_va_start),
	Ignore first argument; it is always 1.

	* config/c4x/c4x-protos.h, config/c4x/c4x.c: Delete c4x_va_start.
	* config/ia64/ia64-protos.h, config/ia64/ia64.c: Delete ia64_va_start.
	* config/m68hc11/m68hc11-protos.h, config/m68hc11/m68hc11.c:
	Delete m68hc11_va_start.
	* config/c4x/c4x.h, config/ia64/ia64.h, config/m68hc11/m68hc11.h:
	No need to define EXPAND_BUILTIN_VA_START.

	* doc/invoke.texi, doc/sourcebuild.texi, doc/tm.texi,
	doc/trouble.texi: Remove references to GCC-provided <varargs.h>.

2002-07-15  Eric Botcazou  <ebotcazou@multimania.com>

	PR optimization/7153
	* regmove.c (optimize_reg_copy_3): Don't optimize if the register
	dies in more than one insn.

2002-07-15  Jason Thorpe  <thorpej@wasabisystems.com>

	* config/sparc/netbsd-elf.h (TRANSFER_FROM_TRAMPOLINE): Remove.

2002-07-15  Michael Matz  <matz@suse.de>,
	    Daniel Berlin  <dberlin@dberlin.org>,
	    Denis Chertykov  <denisc@overta.ru>

	Add a new register allocator.

	* ra.c: New file.
	* ra.h: New file.
	* ra-build.c: New file.
	* ra-colorize.c: New file.
	* ra-debug.c: New file.
	* ra-rewrite.c: New file.

	* Makefile.in (ra.o, ra-build.o, ra-colorize.o, ra-debug.o,
	(ra-rewrite.o): New .o files for libbackend.a.
	(GTFILES): Add basic-block.h.

	* toplev.c (flag_new_regalloc): New.
	(f_options): New option "new-ra".
	(rest_of_compilation): Call initialize_uninitialized_subregs()
	only for the old allocator.  If flag_new_regalloc is set, call
	new allocator, instead of local_alloc(), global_alloc() and
	friends.

	* doc/invoke.texi: Document -fnew-ra.
	* basic-block.h (FOR_ALL_BB): New.
	* config/rs6000/rs6000.c (print_operand): Write small constants
	as @l+80.

	* df.c (read_modify_subreg_p): Narrow down cases for a rmw subreg.
	(df_reg_table_realloc): Make size at least as large as max_reg_num().
	(df_insn_table_realloc): Size argument now is absolute, not relative.
	Changed all callers.

	* gengtype.c (main): Add the pseudo-type "HARD_REG_SET".
	* regclass.c (reg_scan_mark_refs): Ignore NULL rtx's.

	2002-06-20  Michael Matz  <matz@suse.de>

	* df.h (struct ref.id): Make unsigned.
	* df.c (df_bb_reg_def_chain_create): Remove unsigned cast.

	2002-06-13  Michael Matz  <matz@suse.de>

	* df.h (DF_REF_MODE_CHANGE): New flag.
	* df.c (df_def_record_1, df_uses_record): Set this flag for refs
	involving subregs with invalid mode changes, when
	CLASS_CANNOT_CHANGE_MODE is defined.

	2002-05-07  Michael Matz  <matz@suse.de>

	* reload1.c (fixup_abnormal_edges): Don't insert on NULL edge.

	2002-05-03  Michael Matz  <matz@suse.de>

	* sbitmap.c (sbitmap_difference): Accept sbitmaps of different size.

	Sat Feb  2 18:58:07 2002  Denis Chertykov  <denisc@overta.ru>

	* regclass.c (regclass): Work with all regs which have sets or
	refs.
	(reg_scan_mark_refs): Count regs inside (clobber ...).

	2002-01-04  Michael Matz  <matzmich@cs.tu-berlin.de>

	* df.c (df_ref_record): Correctly calculate SUBREGs of hardregs.
	(df_bb_reg_def_chain_create, df_bb_reg_use_chain_create): Only
	add new refs.
	(df_bb_refs_update): Don't clear insns_modified here, ...
	(df_analyse): ... but here.

	* sbitmap.c (dump_sbitmap_file): New.
	(debug_sbitmap): Use it.

	* sbitmap.h (dump_sbitmap_file): Add prototype.

	2001-08-07  Daniel Berlin  <dan@cgsoftware.com>

	* df.c (df_insn_modify): Grow the UID table if necessary, rather
	than assume all emits go through df_insns_modify.

	2001-07-26  Daniel Berlin  <dan@cgsoftware.com>

	* regclass.c (reg_scan_mark_refs): When we increase REG_N_SETS,
	increase REG_N_REFS (like flow does), so that regclass doesn't
	think a reg is useless, and thus, not calculate a class, when it
	really should have.

	2001-01-28  Daniel Berlin  <dberlin@redhat.com>

	* sbitmap.h (EXECUTE_IF_SET_IN_SBITMAP_REV): New macro, needed for
	dataflow analysis.

2002-07-15  Jakub Jelinek  <jakub@redhat.com>

	PR middle-end/7245
	* config/i386/i386.c (const_int_1_31_operand): New.
	* config/i386/i386.h (PREDICATE_CODES): Add it.
	* config/i386/i386.md (ashlsi3_cmp, ashlsi3_cmp_zext, ashlhi3_cmp,
	ashlqi3_cmp, ashrsi3_cmp, ashrsi3_cmp_zext, ashrhi3_cmp, ashrqi3_cmp,
	lshrsi3_cmp, lshrsi3_cmp_zext, lshrhi3_cmp, lshrqi3_cmp): Use it.

2002-07-14  Alan Modra  <amodra@bigpond.net.au>

	PR target/7282
	* config/rs6000/rs6000.md (floatsidf2): Enable for POWERPC64.
	(floatunssidf2): Likewise.
	(floatsidf_ppc64): New insn_and_split.
	(floatunssidf_ppc64): Likewise.

2002-07-14  Andreas Jaeger  <aj@suse.de>

	* config.gcc (sh64): Remove unused
	target_requires_64bit_host_wide_int.

2002-07-12  Roger Sayle  <roger@eyesopen.com>

	* expr.c [CLEAR_RATIO]: New macro defining the maximum number
	of move instructions to use when clearing memory, c.f. MOVE_RATIO.
	[CLEAR_BY_PIECES]: New macro, using CLEAR_RATIO, to determine
	whether clear_by_pieces should be used to clear storage.
	(clear_storage): Use CLEAR_BY_PIECES instead of MOVE_BY_PIECES.

	* doc/tm.texi: Document these two new target macros.

2002-07-12  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("zero_extendsidi2"): Use D_REG only for
	the scratch register.
	("*movhi2_push"): Accept Z_REG because a split pattern can make use
	of it, forbid reload to use it.

2002-07-12  Marek Michalkiewicz  <marekm@amelek.gda.pl>

	* config/avr/avr.c (test_hard_reg_class): Fix TEST_HARD_REG_BIT
	usage on 64-bit hosts, return value was truncated to 32 bits.

2002-07-12  J"orn Rennecke <joern.rennecke@superh.com>

	* simplify-rtx.c (simplify_subreg): Handle floating point
	CONST_DOUBLEs.  When an integer subreg of a smaller mode than
	the element mode is requested, compute a subreg with an
	integer mode of the same size as the element mode first.

2002-07-11  J"orn Rennecke <joern.rennecke@superh.com>

	* combine.c (try_combine): When converting a paradoxical subreg
	to an extension, take LOAD_EXTEND_OP into account.

2002-07-11  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* config.gcc (mips-sgi-irix6*o32): New configuration.

	* configure.in (libgcc_visibility): Disable for mips-sgi-irix6*o32
	configurations.
	* configure: Regenerate.

	* config/mips/iris6-o32-as.h: New file.
	* config/mips/iris6-o32.h: New file.

	* config/mips/iris5gas.h (TARGET_ASM_NAMED_SECTION): Define.
	(NM_FLAGS): Define.
	(HAVE_AS_SHF_MERGE): Undefine.

	* config/mips/t-iris5-as: New file.
	* config.gcc (mips-sgi-irix6*o32, mips-sgi-irix5*): Use it.

	* config/mips/t-iris6 (SHLIB_EXT, SHLIB_SOLINK, SHLIB_SONAME,
	SHLIB_NAME, SHLIB_MAP, SHLIB_OBJS, SHLIB_SLIBDIR_QUAL, SHLIB_LINK,
	SHLIB_INSTALL, SHLIB_MKMAP, SHLIB_MAPFILES, FPBIT, DPBIT,
	dp-bit.c, fp-bit.c): Move ...
	* config/mips/t-iris5-6: ... here.
	New file, shared by IRIX 5 and IRIX 6.
	* config.gcc (mips-sgi-irix6*o32, mips-sgi-irix6*,
	mips-sgi-irix5*): Use it.

	* config/mips/iris6.h: Remove duplicate comment.

	* config/mips/mips.c (TARGET_ASM_UNALIGNED_DI_OP) [TARGET_IRIX5 &&
	!TARGET_IRIX6]: Define.
	(mips_asm_file_start): Don't emit mdebug.<ABI> sections on IRIX 5/6.

	* config/mips/mips.h (ASM_DECLARE_FUNCTION_NAME): Fix comment.

2002-07-11  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.md (adddi3): Change predicate of operand 2 to adddi3_operand
	and delete code to force constant to register.
	* pa-protos.h (adddi3_operand): Add prototype.
	* pa.c (adddi3_operand): New function.

2002-07-11  Roger Sayle  <roger@eyesopen.com>

	* c-decl.c (duplicate_decls): Preserve the noreturn attribute on
	non-ANSI builtin functions.

2002-07-11  J"orn Rennecke <joern.rennecke@superh.com>

	* rtl.h (gen_rtx_CONST_VECTOR): Declare.
	* gengenrtl.c (special_rtx): Check for CONST_VECTOR.
	* emit-rtl.c (gen_rtx_CONST_VECTOR): New function.
	(gen_const_vector_0): Use it.

2002-07-11  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* pa.md (adddi3): For 32-bit targets, force constants to a register
	if they don't fit in an 11-bit immediate.  Change insn predicate to
	arith11_operand.  Remove comment.
	* pa.c (cint_ok_for_move): Fix comment.
	(emit_move_sequence):  Don't directly split DImode constants on 32-bit
	targets.

2002-07-11  Tim Josling  <tej@melbpc.org.au>

	Remove front end hard coding from gengtype.c.

	* Makefile.in
	(STAGESTUFF): add gtyp-gen.h
	(GTFILES): Remove front end specific files.
	(GTFILES_FILES_LANGS): New, from configure..
	(GTFILES_FILES_FILES): Likewise.
	(GTFILES_LANG_DIR_NAMES): Likewise.
	(GTFILES_SRCDIR): Likewise.
	(gtyp-gen.h): Build from configure information.
	(s-gtype): Remove command line parameters from gengtype.
	(gengtype.o): Remove dependency on GTFILES. Depend on gtyp-gen.h.
	(mostlyclean): Delete files generated by and for gengtype.

	* c-config-lang.in: New file.

	* configure.in (all_gtfiles_files_langs): New. Accumulate files
	for each language.
	(all_gtfiles_files_files): New. Accumulate language for each file
	accumulated.
	(gtfiles): Pick up value for C.
	(srcdir): AC-SUBST this variable.
	(all_gtfiles_files_langs): AC-SUBST this variable.
	(all_gtfiles_files_files): AC-SUBST this variable.

	* configure: Regenerate.

	* gengtype-lex.l (parse_file): Make parameter const.

	* gengtype.c (toplevel): include gtyp-gen.h.
	(BASE_FILE_<language> unnamed enum): Delete.
	(lang_names): Delete (replaced by gtyp-gen.h)
	(lang_dir_names): From gtyp-gen.h, replaces lang_names; changed
	all references.
	(NUM_GT_FILES): New.
	(NUM_LANG_FILES): New.
	(srcdir_len): New.
	(NUM_BASE_FILES): Change calculation.
	(open_base_files): Change prototype to avoid warning.
	(startswith): Delete.
	(get_file_basename): Iterate through generated language list not
	hard coded list.
	(get_base_file_bitmap): Use generated list of files and languages.
	(close_output_files): Add prototype to rmove warning.
	(main): Iterate through list of generated files from gtyp-gen.h
	rather than command line paramaters.  Ignore duplicated file
	names.

	* gengtype.h (parse_file): Amend prototype for const parameter.

	* doc/sourcebuild.texi: Document gtfiles variable.

	* doc/gty.texi: Document changes to gtfiles variable for front
	ends.

	* objc/config-lang.in (gtfiles): Add files needed for objc front
	end.

2002-07-10  Roger Sayle  <roger@eyesopen.com>

	PR c/2454
	* combine.c (nonzero_bits): LOAD_EXTEND_OP should only apply
	to SUBREGs of MEMs.  (num_sign_bit_copies): Likewise.

2002-07-10  Roger Sayle  <roger@eyesopen.com>
	    Zack Weinberg <zack@codesourcery.com>

	* builtins.def: Make the argument types of abort and exit
	independent of the front-end.

2002-07-11  Alan Modra  <amodra@bigpond.net.au>

	* config/rs6000/linux64.h (ASM_SPEC): Define.

2002-07-10  Aldy Hernandez  <aldyh@redhat.com>

	* config/rs6000/rs6000.c (emit_frame_save): New.
	(rs6000_frame_related): Replace reg2 before reg.
	(rs6000_emit_prologue): Use emit_frame_save for saving gprs, fprs,
	and eh_return registers.

2002-07-10  Toon Moene  <toon@moene.indiv.nluug.nl>

	Revert all patches for optimization of Complex .op. Real.
	* complex_part_zero_p: Remove
	* expand_cmplxdiv_straight: Replace complex_part_zero_p(x)
	with x.
	* expand_cmplxdiv_wide: Ditto.
	* expand_binop: Ditto.

2002-07-10  Marek Michalkiewicz  <marekm@amelek.gda.pl>

	* config/avr/avr.md: Fix two 0x80000000 constants to make them
	negative also on 64-bit hosts.

	Default to -fno-reorder-blocks when optimizing for size.
	* config/avr/avr-protos.h (avr_optimization_options): Declare.
	* config/avr/avr.c (avr_optimization_options): New function.
	* config/avr/avr.h (OPTIMIZATION_OPTIONS): New.

	Optimize returning from simple functions.
	* config/avr/avr-protos.h (avr_simple_epilogue): Declare.
	* config/avr/avr.c (avr_simple_epilogue): New function.
	* config/avr/avr.md (return): New insn.

2002-07-10  Douglas B Rupp  <rupp@gnat.com>

	* config/i386/i386.c  (ix86_svr3_asm_out_constructor): Add
	HAS_INIT_SECTION to protection.

2002-07-10  Mark Mitchell  <mark@codesourcery.com>

	* doc/invoke.texi (Debugging Options): Mention that -gdwarf is
	deprecated.

2002-07-10  J"orn Rennecke <joern.rennecke@superh.com>

	* combine.c (gen_lowpart_for_combine): Handle vector modes.
	Supply non-VOID mode to simplify_gen_subreg.

2002-07-10  Jan Hubicka  <jh@suse.cz>

	* i386.c (ix86_init_mmx_sse_builtins): Fix thinko.

2002-07-10  Jeffrey A Law  <law@redhat.com>

	* mn10200.c (expand_prologue): Create REG_MAYBE_DEAD notes
	as appropriate.

	* mn10200.c (expand_epilogue): Fix test to determine which scratch
	register to use.

2002-07-10  J"orn Rennecke <joern.rennecke@superh.com>

	* cse.c (cse_insn): Supply proper SUBREG_BYTE to simplify_gen_subreg.
	Get mode from dest.
	If simplify_gen_subreg fails, try next equivalent.

2002-07-09  Gabriel Dos Reis  <gdr@codesourcery.com>

	* diagnostic.h: #include location.h
	(location_t): Move definition to..
	* location.h: ... here.  New file.
	* tree.h: #include location.h
	(DECL_SOURCE_LOCATION): New macro.
	(DECL_SOURCE_FILE): Use.
	(DECL_SOURCE_LINE): Likewise.
	(struct tree_decl): REplace filename and linenum with locus.
	* Makefile.in (TREE_H): add location.h
	(diagnostic.o): Depends on gt-location.h
	(gt-location.h): Depends on s-gtype

2002-07-09  Matt Kraai  <kraai@alumni.cmu.edu>

	* config/rs6000/aix.h: Convert CPP_PREDEFINES to
	TARGET_OS_CPP_BUILTINS.
	* config/rs6000/aix31.h: Likewise.
	* config/rs6000/aix41.h: Likewise.
	* config/rs6000/aix43.h: Likewise.
	* config/rs6000/aix51.h: Likewise.
	* config/rs6000/beos.h: Likewise.
	* config/rs6000/darwin.h: Likewise.
	* config/rs6000/eabi.h: Likewise.
	* config/rs6000/eabisim.h: Likewise.
	* config/rs6000/linux.h: Likewise.
	* config/rs6000/linux64.h: Likewise.
	* config/rs6000/lynx.h: Likewise.
	* config/rs6000/mach.h: Likewise.
	* config/rs6000/rtems.h: Likewise.
	* config/rs6000/sysv4.h: Likewise.
	* config/rs6000/vxppc.h: Likewise.

2002-07-09 Devang Patel <dpatel@apple.com>
	* objc/objc-act.c (adjust_type_for_id_default): Fix my previous patch.
	Do not allow ObjC objects as a parameter type for Objective-C methods.
	My previous patch restricted  'struct' also.

2002-07-09  Neil Booth  <neil@daikokuya.co.uk>

	* cpperror.c (cpp_error): Default to directive_line within
	directives here.
	* cppexp.c (cpp_interpret_integer): Only use traditional
	number semantics in directives.
	* cpplib.c (prepare_directive_trad): Don't reset pfile->line.
	(do_include_common): Similarly.
	* cpptrad.c (scan_out_logical_line): Implement accurate
	quoting of <> in #include.
	* doc/cpp.texi: Update.

2002-07-09  Stephen Clarke <stephen.clarke@superh.com>
			  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (sh_adjust_cost): Special handling of SHMEDIA code.
	* sh.md (attribute issues): Replace with:
	(attribute pipe_model).  All users changed.
	(attribute type): Change pt / ptabs to pt_media / ptabs_media.
	All users changed.
	(function units sh5issue, sh5fds): New.
	(attribute is_mac_media): New.
	(adddi3_media, subdi3_media, divsi3_i1_media, anddi3): Add type.
	(andcdi3, iordi3, xordi3, ashldi3_media, lshrdi3_media): Likewise.
	(ashrdi3_media, negdi_media, extendsidi2, movqi_media): Likewise.
	(movhi_media, shori_media, movv2sf_i, jump_media): Likewise.
	(call_media, call_value_media, sibcall_media): Likewise.
	(casesi_jump_media, casesi_shift_media, casesi_load_media): Likewise.
	(return_media_i, addsf3_media, subsf3_media, mulsf3_media): Likewise.
	(mac_media, divsf3_media, floatdisf2, floatsisf2_media): Likewise.
	(fix_truncsfdi2, fix_truncsfsi2_media, cmpeqsf_media): Likewise.
	(cmpgtsf_media, cmpgesf_media, cmpunsf_media, negsf2_media): Likewise.
	(sqrtsf2_media, abssf2_media, adddf3_media, subdf3_media): Likewise.
	(muldf3_media, divdf3_media, floatdidf2, floatsidf2_media): Likewise.
	(fix_truncdfdi2, fix_truncdfsi2_media, cmpeqdf_media): Likewise.
	(cmpgtdf_media, cmpgedf_media,cmpundf_media, negdf2_media): Likewise.
	(sqrtdf2_media, absdf2_media, extendsfdf2_media): Likewise.
	(truncdfsf2_media): Likewise.
	(movsi_media, movsi_media_nofpu, movdi_media): Use new types.
	(movdi_media_nofpui, movdf_media, movdf_media_nofpu): Likewise.

2002-07-09  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (PREDICATE_CODES): Add general_extend_operand and inqhi_operand.
	* sh.c (general_extend_operand, inqhi_operand): New functions.
	* sh.md (cmpeqdi_media, cmpgtdi_media, cmpgtudi_media): Collapse
	alternatives using 'N' modifier.  Add type.
	(adddi3z_media): Likewise.  Enable generator function generation.
	(movdicc_false, movdicc_true, addsi3_media, subsi3_media): Use more
	exact predicates / constraints.  Add type.
	(subsi3): Allow 0 for SHMEDIA.
	(udivsi3_i4_media): Use match_operand for input values
	rather than hard registers.
	(udivsi3 - TARGET_SHMEDIA_FPU case): Don't ferry values
	unnecessarily through hard registers.  Keep copies of pseudo
	registers outside of the libcall sequence.
	(mulsidi3_media, umulsidi3_media): Use more exact predicates.  Add type.
	(ashlsi3_media, ashrsi3_media, lshrsi3_media): Likewise.
	(zero_extendsidi2, zero_extendhidi2, zero_extendqidi2): Likewise.
	(extendhidi2, extendqidi2): Likewise.
	(andsi3_compact): Name.
	(andcdi3): Enable generator function generation.
	(zero_extendhisi2, zero_extendqisi2): Rename to
	(zero_extendhisi2_compact, zero_extendqisi2_compact).
	(extendhisi2, extendqisi2): Rename to
	(extendhisi2_compact, extendqisi2_compact).
	(rotldi3, rotldi3_mextr, rotrdi3, rotrdi3_mextr): New patterns.
	(loaddi_trunc, zero_extendhisi2, zero_extendhisi2_media): Likewise.
	(zero_extendhisi2_media+1, zero_extendqisi2): Likewise.
	(zero_extendqisi2_media, extendhisi2, extendhisi2_media): Likewise.
	(extendhisi2_media, extendhisi2_media+1, extendqisi2): Likewise.
	(extendqisi2_media, extendqisi2_media+1, truncdisi2): Likewise.
	(truncdihi2, truncdiqi2, reload_inqi, reload_inhi): Likewise.
	(shmedia32_initialize_trampoline_big): Likewise.
	(shmedia32_initialize_trampoline_little): Likewise.
	(nsb, nsbsi, nsbdi, ffsdi2, ffssi2, byterev): Likewise.
	(negdi2): Remove spurious T clobber.
	(zero_extendhidi2+1, extendhidi2+1, extendqidi2+1): Handle TRUNCATE.
	(movsi_media, movsi_media_nofpu): Remove spurious *k after b.
	(movdi_media, movdi_media_nofpu, pt, ptb): Likewise.
	(movsi_media_nofpu+2, movhi_media+1): Only do split after reload.
	(ic_invalidate_line_media): Write back data cache before invalidating
	instruction cache.  Add type.
	(movsf_media): Sign-extend when the destination is a general
	purpose register.  Add type.
	(bgt_media, bge_media, bgtu_media, bgeu_media, blt_media_i): Allow 0.
	(casesi_worker_0+1): Only increment ref count for proper label.
	(casesi_worker_0+2): Likewise.

2002-07-09  Mark Mitchell  <mark@codesourcery.com>

	* dwarfout.c (dwarfout_init): Warn that DWARF1 is deprecated.

2002-07-09  Steve Ellcey  <sje@cup.hp.com>

	* gcc/except.c (expand_eh_region_end_cleanup): Change exception pointer
	from Pmode to ptr_mode.
	(get_exception_pointer): Ditto.
	(connect_post_landing_pads): Ditto.
	(dw2_build_landing_pads): Ditto.

2002-07-08  Steve Ellcey  <sje@cup.hp.com>
	* gcc/c-pragma.h (add_to_renaming_pragma_list): New function.
	* gcc/c-pragma.c (add_to_renaming_pragma_list): New function.
	(handle_pragma_redefine_extname): Change to use new function.

2002-07-08  Roger Sayle  <roger@eyesopen.com>

	* combine.c (combine_simplify_rtx): Add an explicit cast
	to avoid signed/unsigned comparison warning.
	(simplify_if_then_else): Likewise.
	(extended_count): Likewise.
	(simplify_shift_const): Likewise.
	(simplify_comparison): Likewise.

2002-07-08  Richard Sandiford  <rsandifo@redhat.com>

	* config/mips/mips.md: Add imadd type.  Update scheduler description
	to use imadd as well as imul.
	(*mul_acc_si, *madsi): Change imul alternatives to imadd.
	(*mul_acc_di, *mul_acc_64bit_di): Likewise.
	(*mul_sub_si): Likewise for first alternative.  Change second
	alternative from imul to multi.

2002-07-07  Neil Booth  <neil@daikokuya.co.uk>

	* c-common.c (c_common_post_options): Update prototype;
	don't init backends if preprocessing only.
	* langhooks-def.h (LANG_HOOKS_POST_OPTIONS): Update.
	* langhooks.h (struct lang_hooks): Update post_options to
	return a boolean.
	* toplev.c (parse_options_and_default_flags, do_compile,
	lang_independent_init): Update prototypes.  Allow the
	front end to specify that there is no need to initialize
	the back end.
	(general_init): Move call to hex_init here...
	(toplev_main): ...from here.  Pass flag for back end init
	suppression.

2002-07-07  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.h (PRINT_OPERAND_PUNCT_VALID_P): Allow '\''.
	(PREDICATE_CODES): Add entries for equality_comparison_operator,
	greater_comparison_operator and less_comparison_operator.
	* sh.c (print_operand): Add '\'' code.  Make 'o' handle
	more operators.
	(equality_comparison_operator): New function.
	(greater_comparison_operator, less_comparison_operator): Likewise.
	* sh.md (beq_media_i): Disable generator function generation.
	Use match_operator to handle a whole class of comparisons.  Add
	modifier in output template to provide branch prediction.  Add type.
	(bgt_media_i, ble_media_i): Likewise.  Allow zero operands.
	(bne_media_i, bge_media_i, bgtu_media_i, bgeu_media_i): Delete.
	(blt_media_i, bleu_media_i, bltu_media_i): Likewise.
	(bgt, blt, ble, bge, bgtu, bltu, bgeu, bleu): Allow zero operands.

2002-07-07  Hans-Peter Nilsson  <hp@bitrange.com>

	Emit MMIX function prologue and epilogue as rtl.
	* config/mmix/mmix.md ("call"): Use mmix_get_hard_reg_initial_val,
	not unprototyped get_hard_reg_initial_val.
	("call_value", "nonlocal_goto_receiver"): Ditto.
	("return"): Make define_expand.  Move real insn to...
	("*expanded_return"): New pattern.
	("prologue", "epilogue"): New define_expands.
	* config/mmix/mmix.h (MMIX_rO_REGNUM): New macro.
	(struct machine_function): New member in_prologue.
	(FIRST_PSEUDO_REGISTER): Adjust for including rO as register.
	(FIXED_REGISTERS, CALL_USED_REGISTERS): Ditto.
	(MMIX_MMIXWARE_ABI_REG_ALLOC_ORDER): Ditto.
	(MMIX_GNU_ABI_REG_ALLOC_ORDER, REG_CLASS_CONTENTS): Ditto.
	(REGISTER_NAMES, ADDITIONAL_REGISTER_NAMES): Ditto.
	(LOCAL_REGNO): Define.  Adjust comment.
	* config/mmix/mmix.c (MMIX_CFUN_NEEDS_SAVED_EH_RETURN_ADDRESS):
	Consider regs_ever_live[MMIX_rJ_REGNUM], not just
	leaf_function_p.
	(MMIX_OUTPUT_REGNO): Don't translate registers while outputting
	the prologue.
	(mmix_target_asm_function_prologue): Make static.  Just mark that
	the prologue is being emitted.  Move guts to...
	(mmix_expand_prologue): New function.  Adjust for emitting
	prologue as rtl.  For sizes, use HOST_WIDE_INT only.
	(mmix_target_asm_function_epilogue): Make static.  Simply emit a
	\n.  Move guts to...
	(mmix_expand_epilogue): New function.  Adjust for emitting
	epilogue as rtl.  For sizes, use HOST_WIDE_INT only.
	(mmix_target_asm_function_end_prologue): Mark that the prologue
	has ended.
	(TARGET_ASM_FUNCTION_END_PROLOGUE): Define.
	(mmix_conditional_register_usage): Improve comments.
	(mmix_local_regno): New function.
	(mmix_emit_sp_add, mmix_get_hard_reg_initial_val): Ditto.
	* config/mmix/mmix-protos.h (mmix_local_regno): Prototype.
	(mmix_expand_prologue, mmix_expand_epilogue): Ditto.
	(mmix_get_hard_reg_initial_val): Ditto.

2002-07-06  Andreas Jaeger  <aj@suse.de>

	* toplev.c (set_fast_math_flags): Don't use ISO C style function
	definitions.
	* gengtype.c (open_base_files): Likewise.
	(close_output_files): Likewise.
	* tracer.c (find_best_predecessor): Likewise.
	(find_best_successor): Likewise.
	(ignore_bb_p): Likewise.

2002-07-05  Roger Sayle  <roger@eyesopen.com>

	PR c++/7099
	* builtin-attrs.def: Define new attribute lists for use in
	builtins.def.
	* builtins.def [DEF_BUILTIN]: Modify to take an additional
	ATTRS argument, an enumerated value defined in builtin-attrs.def
	that represents the attribute list for the builtins.  Modify
	all builtin functions to pass an appropriate attribute list.
	Specify "abort", "exit", "_exit" and "_Exit" builtins here with
	their required noreturn attributes.
	* tree.h (enum_builtin_function): Ignore the additional parameter
	to DEF_BUILTIN.
	* builtins.c (built_in_names): Likewise.
	* c-common.c: (builtin_function_2): Replace the "int noreturn_p"
	argument with a tree representing the functions attribute list.
	Pass this "attrs" argument to builtin_function.  No longer handle
	the noreturn_p processing manually.
	(built_in_attributes): Move the definitions from builtin-attrs.def
	before c_common_nodes_and_builtins.
	(c_common_nodes_and_builtins): Handle the new ATTRS parameter in
	DEF_BUILTIN, passing it to both builtin_function and the changed
	builtin_function_2.

	* doc/extend.texi: Document __builtin_abort, __builtin_exit,
	__builtin__exit and __builtin__Exit.

2002-07-05  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("*movqi_68hc12"): Avoid allocating
	QI mode registers in soft registers.
	("zero_extendqihi2"): Do not take into account soft registers
	for register allocation (use '*' constraint).

2002-07-05  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md ("*ashlsi3"): Avoid saving y if we know
	it is dead.
	("*ashrsi3"): Likewise.
	("*lshrsi3"): Likewise.

2002-07-05  Vladimir Makarov  <vmakarov@redhat.com>

	* genautomata.c (output_max_insn_queue_index_def): Take latencies
	into account.

2002-07-05  Stephane Carrez  <stcarrez@nerim.fr>

	* config/m68hc11/m68hc11.md (peephole2): New peephole2 to optimize
	address computation and memory moves.

2002-07-03  Mark Mitchell  <mark@codesourcery.com>

	PR c++/6706
	* dwarfout.c (output_reg_number): Fix warning message.
	(output_bound_representation): Check SAVE_EXPR_RTL is not NULL
	before using it.

2002-07-05  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>

	* gcc/gcc.c (asm_debug): Move initialization ...
	(init_spec): ... here.

2002-07-05  Nathan Sidwell  <nathan@codesourcery.com>

	* c-parse.in (extdef): Append ';'.
	(old_style_parm_decls): Append ';'.

2002-07-04  Daniel Jacobowitz  <drow@mvista.com>

	* configure.in: Correct typos: gcc_cv_as_gdwarf2_debug_flag to
	gcc_cv_as_gdwarf2_flag and gcc_cv_as_gstabs_debug_flag
	to gcc_cv_as_gstabs_flag.
	* configure: Rebuilt.

2002-07-04  Geoffrey Keating  <geoffk@redhat.com>

	* ggc.h (ggc_add_root): Document as obsolete.

2002-07-04  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.md (mshfhi_b, mshflo_b, mshfhi_l, mshflo_l, mshfhi_w): Add DONE.
	(mshflo_w): Likewise.

2002-07-04  J"orn Rennecke <joern.rennecke@superh.com>

	* simplify-rtx.c (simplify_subreg): Reduce problem of finding
	vector mode subregs of constants to finding integer mode
	subregs of constants.
	* cse.c (cse_insn): Use simplify_gen_subreg.
	* convert.c (convert_to_integer): Don't strip a NOP_EXPR
	From a vector mode expression of different size than the
	target mode.

2002-07-03  Eric Christopher  <echristo@redhat.com>

	* config/mips/linux.h: Add #undef for SUBTARGET_CPP_SPEC.
	* config/mips/mips.h: Remove deprecated -m<processor> options
	and cc1_cpu_spec associated.
	(CONSTANT_ADDRESS_P): Fix last patch.
	(ASM_DECLARE_FUNCTION_NAME): Declare. Fix comment.
	* config/mips/mips.md (bungt, bunge, sungt_df, sungt_sf, sunge_df,
	sunge_sf): Remove.

2002-07-03  Stan Shebs  <shebs@apple.com>

	* config/darwin.h (APPLE_CC): Remove, not meaningful in FSF GCC.
	(STRINGIFY_THIS, REALLY_STRINGIFY): Remove.
	(CPP_SPEC): Remove insertion of APPLE_CC definition.

2002-07-03  Roger Sayle  <roger@eyesopen.com>

	* combine.c (struct_undo): Change types of recorded substitutions
	to be either "int" or "rtx", instead of "unsigned int" and "rtx".
	(do_SUBST_INT): Change types of the substitution from unsigned int
	to int, to avoid compilation warning from SUBST_INT's only caller.

	(make_extraction): Add cast to avoid compilation warning.
	(force_to_mode): Remove cast to avoid compilation warning.

2002-07-03  Eric Botcazou  <ebotcazou@multimania.com>
	    Jeff Law  <law@redhat.com>

	* i386.md (length_immediate attribute): Fix typo.
	(length_address attribute): Likewise.
	(modrm attribute): Set it to 0 for immediate call instructions.
	(jcc_1 pattern): Set modrm attribute to 0.
	(jcc_2 pattern ): Likewise.
	(jump pattern): Likewise.
	(doloop_end_internal pattern): Explicitly set length.
	(leave pattern): Fix typo.
	(leave_rex64 pattern): Likewise.

2002-07-03  David Edelsohn  <edelsohn@gnu.org>

	* config/rs6000/rs6000.md (fix_truncdfsi2_internal): Ignore DImode
	in FPR as preference.
	(fctiwz): Same.
	(floatdidf2, fix_truncdfdi2): Same.
	(floatdisf2, floatditf2, fix_trunctfdi2): Same.
	(floatditf2): Same.
	(floatsitf2, fix_trunctfsi2): SImode in GPR.
	(ctrdi): Remove FPR alternative and splitter.

2002-07-03  Will Cohen  <wcohen@redhat.com>

	* config/i386/i386.c (x86_integer_DFmode_moves): Disable for PPro.

2002-07-03  J"orn Rennecke <joern.rennecke@superh.com>

	* optabs.c (expand_vector_binop): Don't store using a SUBREG smaller
	than UNITS_PER_WORD, unless this is little endian and the first unit
	in this word.  Let extract_bit_field decide how to load an element.
	Force arguments to matching mode.
	(expand_vector_unop): Likewise.

	* simplify-rtx.c (simplify_subreg): Don't assume that all vectors
	consist of word_mode elements.
	* c-typeck.c (build_binary_op): Allow vector types for BIT_AND_EXPR,
	BIT_ANDTC_EXPR, BIT_IOR_EXPR and BIT_XOR_EXPR.
	(build_unary_op): Allow vector types for BIT_NOT_EPR.
	* emit-rtl.c (gen_lowpart_common): Use simplify_gen_subreg for
	CONST_VECTOR.
	* optabs.c (expand_vector_binop): Try to perform operation in
	smaller vector modes with same inner size.  Add handling of AND, IOR
	and XOR.  Reject expansion to inner-mode sized scalars when using
	OPTAB_DIRECT.  Use simplify_gen_subreg on constants.
	(expand_vector_unop): Try to perform operation in smaller vector
	modes with same inner size.  Add handling of one's complement.
	When there is no vector negate operation, try a vector subtract
	operation.  Use simplify_gen_subreg on constants.
	* simplify-rtx.c (simplify_subreg): Add capability to convert vector
	constants into smaller vectors with same inner mode, and to
	integer CONST_DOUBLEs.

2002-07-02  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* c-parse.in (parsing_iso_function_signature): New variable.
	(extdef_1): New, copied from...
	(extdef): ... here.  Reset parsing_iso_function_signature.
	(old_style_parm_decls):  Reset parsing_iso_function_signature.
	(old_style_parm_decls_1): New, copied from old_style_parm_decls.
	Warn about ISO C style function definitions.
	(nested_function, notype_nested_function): Reset
	parsing_iso_function_signature.
	(parmlist_2): Set parsing_iso_function_signature.

	* doc/invoke.texi (-Wtraditional): Document new behavior.

2002-07-02  Chris Demetriou  <cgd@broadcom.com>

	* config.gcc (mips*el-*-*): Use tm_defines to set
	TARGET_ENDIAN_DEFAULT, rather than including mips/little.h.
	* config/mips/little.h: Remove.

2002-07-02 Devang Patel <dpatel@apple.com>

	* objc/objc-act.c (adjust_type_for_id_default): Do not allow an
	object as parameter. Prevent something like 'NSObject' to be
	used as the type for a method argument.

2002-07-03  Neil Booth  <neil@daikokuya.co.uk>

	* cpptrad.c: Update comment.

2002-07-02  Neil Booth  <neil@daikokuya.co.uk>

	* doc/cpp.texi: Update for traditional preprocessing changes.
	* goc/cppopts.texi: Similarly.

2002-07-02  Ziemowit Laski  <zlaski@apple.com>

	* c-parse.in (designator): Enable designated initializers if ObjC.
	(objcmessageexpr): Remove references to objc_receiver_context.
	* objc/objc-act.h (objc_receiver_context): Remove decl.
	* objc/objc-act.c (objc_receiver_context): Remove.
	(lookup_objc_ivar): Test objc_method_context instead of
	objc_receiver_context.

2002-07-02  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (print_operand, case 'N'): Allow zero vector.
	(arith_reg_or_0_operand): Likewise.
	(zero_vec_operand): Check for CONST_VECTOR, not PARALLEL.
	* sh.h (CONST_COSTS): 0 has 0 cost.  Check OUTER_CODE for
	IOR, XOR, PLUS and SET and take their respective constant
	ranges into account.
	(PREDICATE_CODES, arith_reg_or_0_operand): Can be CONST_VECTOR.
	* sh.md (subdi3, subdi3_media): Allow zero operand.
	(movv8qi_i+3): Only vector that is not split is the zero vector.
	Fix operand 3 to simplify_subreg.
	(movv2si_i): Split alternative 1.
	(mshfhi_l_di_rev+1): New splitter.

2002-07-02  Neil Booth  <neil@daikokuya.co.uk>

	PR preprocessor/7029
	* cppinit.c (cpp_handle_option):  Suppress warnings with an
	implicit "-w" for "-M" and "-MM".
	* doc/cppopts.texi: Update.

2002-07-01  Roger Sayle  <roger@eyesopen.com>

	* config/sh/sh.c (sh_media_init_builtins): Change use of poisoned
	identifier "bzero" to "memset".  Pass extra NULL_TREE argument to
	builtin_function.

2002-07-02  Alan Modra  <amodra@bigpond.net.au>

	* README.Portability: Fix typos.

2002-07-01  Hans-Peter Nilsson  <hp@axis.com>

	PR target/7177
	* config/cris/cris.h (LEGITIMIZE_RELOAD_ADDRESS): Correct number
	of indirections for register inside sign-extended mem part.

2002-07-01  Roger Sayle  <roger@eyesopen.com>

	* tree.h:  Modify builtin_function interface to take an extra
	argument ATTRS, which is a tree representing an attribute list.

	* c-decl.c (builtin_function): Accept additional parameter.
	* objc/objc-act.c (builtin_function): Likewise.
	* f/com.c (builtin_function): Likewise.
	* java/decl.c (builtin_function): Likewise.
	* ada/utils.c (builtin_function): Likewise.
	* cp/decl.c (builtin_function): Likewise.
	(builtin_function_1): Likewise.

	* c-common.c (c_common_nodes_and_builtins): Pass an additional
	NULL_TREE argument to builtin_function.  (builtin_function_2):
	Likewise.
	* cp/call.c (build_java_interface_fn_ref): Likewise.
	* objc/objc-act.c (synth_module_prologue): Likewise.
	* java/decl.c (java_init_decl_processing): Likewise.
	* f/com.c (ffe_com_init_0): Likewise.

	* config/alpha/alpha.c (alpha_init_builtins): Pass an additional
	NULL_TREE argument to builtin_function.
	* config/arm/arm.c (def_builtin): Likewise.
	* config/c4x/c4x.c (c4x_init_builtins): Likewise.
	* config/i386/i386.c (def_builtin): Likewise.
	* config/ia64/ia64.c (def_builtin): Likewise.
	* config/rs6000/rs6000.c (def_builtin): Likewise.

2002-07-01  Zack Weinberg  <zack@codesourcery.com>

	* config/ip2k/t-ip2k: Remove LIBGCC1, CROSS_LIBGCC1, and LIBGCC1_TEST.
	* config/mips/t-isa3264: Likewise.
	* config/mmix/t-mmix: Likewise.

2002-07-01  John David Anglin  <dave@hiauly1.hia.nrc.ca>

	* emit-rtl.c (init_emit_once): Add missing cast to HOST_WIDE_INT.

2002-07-01  Roger Sayle  <roger@eyesopen.com>

	PR opt/4046
	* fold-const.c (fold) [COND_EXPR]: Simplify A ? 0 : 1 to !A,
	A ? B : 0 to A && B and A ? B : 1 into !A || B if both A and
	B are truth values.

2002-07-01  Nathanael Nerode  <neroden@gcc.gnu.org>

	* config/mmix/t-mmix: Eliminate last reference to LIBGCC1_TEST.

2002-07-01  Matt Kraai  <kraai@alumni.cmu.edu>

	* README.Portability (Function prototypes): Give an example of
	declaring and defining a function with no arguments.

	* README.Portability (Function prototypes): Document new
	variable-argument function macros.

2002-07-01  J"orn Rennecke <joern.rennecke@superh.com>

	* sh.c (langhooks.h): Include.
	(sh_init_builtins, sh_media_init_builtins): New functions.
	(sh_expand_builtin, arith_reg_dest,and_operand): Likewise.
	(mextr_bit_offset, extend_reg_operand, zero_vec_operand): Likewise.
	(sh_rep_vec, sh_1el_vec, sh_const_vec): Likewise.
	(builtin_description): New struct tag.
	(signature_args, bdesc): New arrays.
	(TARGET_INIT_BUILTINS, TARGET_EXPAND_BUILTIN): Undef / define.
	(print_operand): Add 'N' modifier.
	* sh.h (VECTOR_MODE_SUPPORTED_P): Add SHmedia vector modes.
	(EXTRA_CONSTRAINT_U, EXTRA_CONSTRAINT_W): New macros.
	(EXTRA_CONSTRAINT): Add 'U' and 'W' cases.
	(CONST_COSTS): Add special case for SHmedia AND.
	(PREDICATE_CODES): Add and_operand, arith_reg_dest,
	extend_reg_operand, extend_reg_or_0_operand, mextr_bit_offset,
	sh_const_vec, sh_1el_vec, sh_rep_vec, zero_vec_operand.
	target_operand can also be const or unspec.
	* sh.md (UNSPEC_INIT_TRAMP, UNSPEC_FCOSA UNSPEC_FSRRA): New constants.
	(UNSPEC_FSINA, UNSPEC_NSB, UNSPEC_ALLOCO): Likewise.
	(attribute type): Add new types.
	(anddi3): Add splitter.
	(movdi_const_16bit+1): Add code to handle vector constants and
	bitmasks efficiently.
	(shori_media): Have generator function made.
	(movv8qi, movv8qi_i, movv8qi_i+1, movv8qi_i+2): New patterns.
	(movv8qi_i+3, movv2hi, movv2hi_i, movv4hi, movv4hi_i): Likewise.
	(movv2si, movv2si_i, absv2si2, absv4hi2, addv2si3, addv4hi3): Likewise.
	(ssaddv2si3, usaddv8qi3, ssaddv4hi3, negcmpeqv8qi): Likewise.
	(negcmpeqv2si, negcmpeqv4hi, negcmpgtuv8qi, negcmpgtv2si): Likewise.
	(negcmpgtv4hi, mcmv, mcnvs_lw, mcnvs_wb, mcnvs_wub): Likewise.
	(mextr_rl, mextr_lr, mextr1, mextr2, mextr3, mextr4, mextr5): Likewise.
	(mextr6, mextr7, mmacfx_wl, mmacfx_wl_i, mmacnfx_wl): Likewise.
	(mmacnfx_wl_i, mulv2si3, mulv4hi3, mmulfx_l, mmulfx_w): Likewise.
	(mmulfxrp_w, mmulhi_wl, mmullo_wl, mmul23_wl, mmul01_wl): Likewise.
	(mmulsum_wq, mmulsum_wq_i, mperm_w, mperm_w_little): LIkewise.
	(mperm_w_big, mperm_w0, msad_ubq, msad_ubq_i, mshalds_l): Likewise.
	(mshalds_w, ashrv2si3, ashrv4hi3, mshards_q, mshfhi_b): Likewise.
	(mshflo_b,  mshf4_b, mshf0_b, mshfhi_l, mshflo_l, mshf4_l): Likewsie.
	(mshf0_l, mshfhi_w, mshflo_w, mshf4_w, mshf0_w, mshfhi_l_di): Likewise.
	(mshfhi_l_di_rev, mshflo_l_di, mshflo_l_di_rev): Likewise.
	(mshflo_l_di_x, mshflo_l_di_x_rev, ashlv2si3, ashlv4hi3): Likewise.
	(lshrv2si3, lshrv4hi3, subv2si3, subv4hi3, sssubv2si3): Likewise.
	(ussubv8qi3, sssubv4hi3, fcosa_s, fsina_s, fipr, fsrra_s): Likewise.
	(ftrv): Likewise.

	(fpu_switch+1, fpu_switch+2): Remove constraint.

2002-07-01  Aldy Hernandez  <aldyh@redhat.com>

	* tree.c (build_function_type_list): Update function comment.
	Rename first argument to return_type.

2002-07-01  Neil Booth  <neil@daikokuya.co.uk>

	* Makefile.in: Remove all trace of tradcpp.c, tradcpp.h,
	tradcif.y and related files.

2002-07-01  Neil Booth  <neil@daikokuya.co.uk>

	* cpptrad.c (skip_whitespace): Pass pointer to prior char.

2002-07-01  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>

	* mips.h (FUNCTION_ARG_REGNO_P): Fix parentheses.

See ChangeLog.7 for earlier changes.
