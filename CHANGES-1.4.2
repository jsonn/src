#	$NetBSD: CHANGES-1.4.2,v 1.1.2.8 1999/08/28 22:49:05 he Exp $

A complete list of changes from NetBSD 1.4.1 to NetBSD 1.4.2:

File						Revision(s)
----						--------

bin/pax/tar.c					1.15

  Add the ability to read V7 tar archives which use USTAR-style
  directories.  Addresses PR#8220.  (kleink)

sbin/newfs_msdos/newfs_msdos.c			1.4

  After determining the size of a file being used as an msdosfs image, seek
  back to its start so subsequent writes go to the right places.  (cgd)

lib/libkvm/kvm_file.c				1.14

  Fix kvm_getfiles() so that it works properly on kernel core dumps.  (cgd)

usr.bin/netstat/unix.c				1.18

  Report error returns from kvm_getfiles() more correctly.  (cgd)

sys/lib/libsa/ufs.c				1.26

  Fix a problem that could cause files' seek pointers to be incorrect
  after being opened.  (cgd)

usr.sbin/mbrlabel/mbrlabel.c			1.4-1.5

  Correct usage message and make the MBR examination code function
  properly on architectures which enforce strict alignment.  (cgd)

usr.bin/tail/extern.h				1.4
usr.bin/tail/forward.c				1.16
usr.bin/tail/read.c				1.7
usr.bin/tail/reverse.c				1.11

  Avoid incorrectly-repeated error messages.  (cgd)

sys/msdosfs/denode.h				1.31
sys/msdosfs/fat.h				1.13
sys/msdosfs/msdosfs_fat.c			1.31
sys/msdosfs/msdosfs_vnops.c			1.83

  Fix LP64 problems which made the MS-DOS file system unusable on
  NetBSD/alpha as reported in PR#8037 and several other problems
  encountered while researching it (NFS exporting and printf
  formats).  (cgd)

usr.bin/find/extern.h				1.12
usr.bin/find/find.h				1.12
usr.bin/find/find.1				1.22-1.23
usr.bin/find/function.c				1.31
usr.bin/find/option.c				1.13

  Implement -regex and -iregex primaries which behave similarly (but
  not identically) to the GNU find primaries of the same names.  (The
  differences are caused by differences in the Basic Regular
  Expression implementations.)  (cgd)

distrib/sets/lists/comp/md.arm32		1.25

  Add "usr/include/machine/devmap.h" so that the X server can be built.
  (mrg)

sys/dev/rnd.c					patch

  A more consistent branch-specific fix for the data extraction locking
  bug previously fixed.  (ross)

lib/libc/sys/connect.2				1.14

  Explain how to get status information for non-blocking connects,
  fixing PR#8208.  (sommerfeld)

sys/dev/eisa/eisadevs				1.16
sys/dev/eisa/eisadevs.h				regen
sys/dev/eisa/eisadevs_data.h			regen
sys/dev/eisa/if_ep_eisa.c			1.21

  Recognize a 3Com 3c509 Combo configured in EISA mode, fixing PR#8234.
  (tron)

usr.sbin/pkg_install/Makefile.inc		1.6-1.8
usr.sbin/pkg_install/add/extract.c		1.17-1.19
usr.sbin/pkg_install/add/main.c			1.10
usr.sbin/pkg_install/add/perform.c		1.30,1.32-1.36
usr.sbin/pkg_install/add/pkg_add.1		1.16
usr.sbin/pkg_install/admin/main.c		1.4-1.6
usr.sbin/pkg_install/create/perform.c		1.18
usr.sbin/pkg_install/create/pkg_create.1	1.17-1.18
usr.sbin/pkg_install/create/pl.c		1.12-1.15
usr.sbin/pkg_install/delete/delete.h		1.5
usr.sbin/pkg_install/delete/main.c		1.12
usr.sbin/pkg_install/delete/perform.c		1.24-1.25
usr.sbin/pkg_install/delete/pkg_delete.1	1.13-1.14
usr.sbin/pkg_install/info/info.h		1.10
usr.sbin/pkg_install/info/main.c		1.17
usr.sbin/pkg_install/info/perform.c		1.24-1.26
usr.sbin/pkg_install/info/show.c		1.13-1.15
usr.sbin/pkg_install/info/pkg_info.1		1.18
usr.sbin/pkg_install/lib/file.c			1.28-1.30
usr.sbin/pkg_install/lib/lib.h			1.22-1.23
usr.sbin/pkg_install/lib/plist.c		1.19-1.21
usr.sbin/pkg_install/lib/str.c			1.16

  Update in-tree pkg tools:

  o Pass & use BINDIR instead of hardcoding /usr/sbin.
  o Adapt this to work better on Solaris.
  o Treat absolute paths in PLIST properly, i.e. do not allow them
    at all.
  o Clean up URL handling.
  o Fix conflict checking for package names with hyphens in their name
    by using "pkg-[0-9]*" instead of "pkg-*" for detecting conflicting
    packages.
  o Document PKG_TMPDIR environment variable.
  o De-linting and some code cleanup.
  o @srcdir was renamed to @src a long time ago (fixing PR#7555).
  o Message files in binary packages are not displayed with more(1).
  o Allow specifying a package name without a version.
  o Call deinstall-script again after files are removed, with
    POST-DEINSTALL argument.
  o Disable annoying "key not present" warning.
  o Fix error checking when creating directory for pkgdb.

  (hubertf)

sys/net/if.c					1.51

  Fix a problem in ifa_ifwithnet() for netatalk, making atalkd
  work in more configurations.  (bouyer)

sys/netinet/ip_proxy.c				1.18

  Check the protocol before forwarding to proxy module.  Fixes
  PR#7831.  (bouyer)

gnu/usr.bin/tar/gnu.c				1.5
gnu/usr.bin/tar/list.c				1.6

  Cast off_t to size_t when passing arguments to functions expecting
  a size_t.  This fixes errors due to memory corruption when
  extracting archives with gtar style long file names on big endian
  machines.  Fixes PR#8229.  (bad)

doc/tmac/doc-common				1.32

  Mark Ap as callable, fixes formatting of a few man pages.  (ross)

sys/dev/ata/ata_wdc.c                           1.20
sys/dev/ic/wdc.c                                1.69-1.70
sys/dev/scsipi/atapi_wdc.c                      1.22+patch

  Add some debug printfs, change timeout handling to be more efficient
  and less error-prone, and fix the "lockup after lost interrupt"
  problem some users have been reporting.  Also a mostly-stylistic
  change guarding tsleep() with a while() loop, and a retry if PIO
  mode < 3 fails.  (bouyer)

share/mk/bsd.man.mk				1.46

  Use -Tascii for pre-generated man pages, avoiding nroff character
  set dependence on LESSCHARSET (!).  (bad)

etc/mtree/special				1.23-1.24

  Change to match the permissions set on install, and fix for
  nonexistent group name.  (is)

share/zoneinfo/africa				1.1.1.10
share/zoneinfo/antarctica			1.1.1.6
share/zoneinfo/asia				1.1.1.9
share/zoneinfo/australasia			1.1.1.9
share/zoneinfo/europe				1.1.1.9
share/zoneinfo/leapseconds			1.1.1.4
share/zoneinfo/northamerica			1.1.1.10
share/zoneinfo/southamerica			1.1.1.9

  Update to tzdata1999e.  (kleink)
