$NetBSD: newlock2-TODO,v 1.1.2.1 2006/10/24 21:41:48 ad Exp $

Goals:

	Locking primatives:

	- Implement the full assembly stubs on most-used ports.
	- Do the minimum necessary on other ports.
	- mb_read(), mb_write(), mb_memory() on all platforms

	Locking:

	- Lock access to struct lwp
	- Lock signalling
	- Remove sched_lock
	- Make sleep/wakeup MP safe

	Signalling:

	- Implement _lwp_kill()
	- Per-LWP signal masks

TODO:

	- sysvmsg must be marked/made MPSAFE for compat code,
	  otherwise we could have lock order problems.
	- Eliminate lwp_setlock_linked() if possible
	- Fix and improve subr_lockdebug.c
	- Split p_flags into interrupt / non-interrupt parts
	- Lock the SA subsystem
	- Fix signals for SA
	- Finish updating signals
	- Locking for procfs
	- Locking for ptrace
	- Just enough locking for exec, exit
	- Test and verify: SA, LWP syscalls, signals, procfs
	- Benchmark comparisons against newlock2-base
	- Review proc table locking
	- Eliminate all XXXAD comments
	- Sync with head
	- Examine diff against HEAD

Would be nice to have:

	- Posting of signals via a workqueue to reduce locking impact
	- Replace spinlocks in UVM
	- Remove spinlockmgr()

Bugs:

	- The SA signal mask stuff was not well thought out.
	- Signalling is incomplete and doesn't always work
	- Hang on shutdown
