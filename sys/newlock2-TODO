$NetBSD: newlock2-TODO,v 1.1.2.2 2006/11/17 16:34:32 ad Exp $

Goals:

	Locking primatives:

	- Implement the full assembly stubs on most-used ports.
	- Do the minimum necessary on other ports.
	- mb_read(), mb_write(), mb_memory() on all platforms

	Locking:

	- Lock access to struct lwp
	- Lock signalling
	- Remove sched_lock
	- Make sleep/wakeup MP safe

	Signalling:

	- Implement _lwp_kill()
	- Per-LWP signal masks

TODO:

	- Uniprocessor kernels don't work, due to LWP locking
	- Fix ptrace
	- Locking around PCB / setcontext for ptrace
	- Further locking around sigstack
	- Lock the SA subsystem
	- Save and restore old SPL / mutex count for each idepth
	- Architectures other than i386, amd64
	- Compat struct proc flags for sysctl, other emulations
	- Check proc flags usage outside MI kernel
	- Check for memory barriers before posting an AST
	- Verify that the signals stuff is correct for SA
	- Test and verify: SA, LWP syscalls, signals, procfs
	- Benchmark comparisons against newlock2-base
	- Eliminate all XXXAD comments
	- Sync with head
	- Examine diff against HEAD
