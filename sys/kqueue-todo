#	$NetBSD: kqueue-todo,v 1.1.2.16 2002/06/23 18:17:31 jdolecek Exp $

items todo from bill sommerfeld/thorpej:
	- multiple entry points
	- events should remain across fork()
	- rewrite sowakeup()
	- high-level docco overview of kqueues [c.f jlemon's various papers]
	- make sure there are no selwakeup() calls left (they should
	  all be selnotify() now).
	- kqfilter entry points for:
		- smb_trantcp
		- dev/pci/bktr/bktr_os.c		??? doesn't poll?

	- Test-compile the following ports:
		- evbsh3	XXX link fails - missing symbols, unrelated to kq
		- pc532			XXX not xcompile capable
		- sparc		(missing kqfilter hooks)
		- sparc64	(missing kqfilter hooks)
		- sun2		(missing kqfilter hooks - fb, bw)
		- sun3		(missing kqfilter hooks)
		- x68k		(missing kqfilter hook - ite)

done:
	- test compiled following ports:
		acorn26 acorn32 algor alpha arc atari bebox cats cesfic
		cobalt dreamcast evbarm evbmips
		i386 hp300 hpcarm hpcmips hpcsh luna68k mac68k macppc
		mipsco mmeye mvme68k mvmeppc news68k netwinder newsmips
		next68k ofppc pmax pmppc prep
		sandpoint shark sbmips sgimips vax walnut
	- name->id lookup
	- why is union kn_ptr not just a void *? (added p_opaque)
	- need more comments in kern_event.c
	- explain fd_knlistsize better
	- section 9 man page for internal api
	- use pool for everything (that it can sanely be used for)

merge in from freebsd:
	usr.bin/tail
	pkgsrc/devel/py-kqueue
	lib/libc/sys/kqueue.2
	lib/libc/net/res_send.c
	sys/netinet/tcp_subr.c	1.93 (?)
	libc/libc_r/uthread (?)
	pkgsrc/security/l0pht-watch (?)
	pkgsrc/www/thttpd



general points:
	- miscfs/fifofs/fifo_* seems to define filters which aren't used
	  by our tree

to fix:

	- look for XXXLUKEM in the comments. these usually indicate
	  areas to either fix or sanity check they're ok (and remove
	  the XXXLUKEM comment)

	- need to test bits of the tree that call closef() to determine
	  if knote_fdclose() is required. (aka fdrelease()/fdfree()):
		* ktrderef()		ktrace [jdolecek - OK]
		* unp_detach()
		* nfsrv_zapsock()	nfsd
		* portal_unmount()	mount_portal ?

not implemented:
	- aio support
		not supported on netbsd; a noop for now


pkgsrc todo:

tested:

	create/close	OK

	EVFILT_PROC	OK

	EVFILT_SIGNAL	OK

	EVFILT_VNODE	OK for ufs (all NOTE_*s seem to work).
			implement & test for other file systems.

	EVFILT_READ	OK for ufs, socket listen, socket read
			test pipes, fifos, tty
			implement & test for other file systems.

	EVFILT_AIO	FAIL: not implemented, returns EINVAL

	timeouts	OK. tested  NULL (infinity), 0 (poll), >0 (maxwait)

	KEVENT_NAME	(ioctl) OK

	KEVENT_FILTER	(ioctl) OK

to test:

	EVFILT_WRITE	test socket, tty, pipe, fifo
