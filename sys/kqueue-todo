#	$NetBSD: kqueue-todo,v 1.1.2.14 2002/06/18 21:05:02 jdolecek Exp $

items todo from bill sommerfeld/thorpej:
	- multiple entry points
	- events should remain across fork()
	- rewrite sowakeup()
	- high-level docco overview of kqueues [c.f jlemon's various papers]
	- make sure there are no selwakeup() calls left (they should
	  all be selnotify() now).
	- kqfilter entry points for:
		- smb_trantcp
		- dev/pci/bktr/bktr_os.c		??? doesn't poll?

	- Test-compile the following ports:
		- acorn26	(still arm26, check aftermerge)
		- cats		(aftermerge - isa_machdep.c missing)
		- evbarm	(aftermerge)
		- evbmips	(config prob, revisit aftermerge)
		- evbsh3	(compile prob, revisit aftermerge)
		- hpcarm	(compile prob, revisit aftermerge)
		- hpcsh		(compile prob, revisit aftermerge)
		- mvme68k	(config prob, revisit aftermerge)
		- netwinder	(compile problems - missing arm/footbr/isadma)
		- pc532			XXX not xcompile capable
		- pmppc		(aftermerge)
		- sandpoint	(compile prob unrelated to kq, aftermerge)
		- sbmips	(aftermerge)
		- shark		(aftermerge)
		- sparc		(missing kqfilter hooks)
		- sparc64	(compile problem, revisit aftermerge)
		- sun2		(config incorrect, revisit aftermerge)
		- sun3		(missing kqfilter hooks)
		- walnut	(compile problems with obsol walnut/clock.c,
				 revisit aftermerge)
		- x68k		(compile problem with dev/ic/msm6258.c,
				 revisit aftermerge)

done:
	- test compiled following ports:
		acorn32 algor alpha arc atari bebox cesfic cobalt dreamcast
		i386 hp300 hpcmips luna68k mac68k macppc mipsco
		mmeye news68k newsmips next68k ofppc pmax prep sgimips vax
	- name->id lookup
	- why is union kn_ptr not just a void *? (added p_opaque)
	- need more comments in kern_event.c
	- explain fd_knlistsize better
	- section 9 man page for internal api
	- use pool for everything (that it can sanely be used for)

merge in from freebsd:
	usr.bin/tail
	pkgsrc/devel/py-kqueue
	lib/libc/sys/kqueue.2
	lib/libc/net/res_send.c
	sys/netinet/tcp_subr.c	1.93 (?)
	libc/libc_r/uthread (?)
	pkgsrc/security/l0pht-watch (?)
	pkgsrc/www/thttpd



general points:
	- miscfs/fifofs/fifo_* seems to define filters which aren't used
	  by our tree

to fix:

	- look for XXXLUKEM in the comments. these usually indicate
	  areas to either fix or sanity check they're ok (and remove
	  the XXXLUKEM comment)

	- need to test bits of the tree that call closef() to determine
	  if knote_fdclose() is required. (aka fdrelease()/fdfree()):
		* ktrderef()		ktrace [jdolecek - OK]
		* unp_detach()
		* nfsrv_zapsock()	nfsd
		* portal_unmount()	mount_portal ?

not implemented:
	- aio support
		not supported on netbsd; a noop for now


pkgsrc todo:

tested:

	create/close	OK

	EVFILT_PROC	OK

	EVFILT_SIGNAL	OK

	EVFILT_VNODE	OK for ufs (all NOTE_*s seem to work).
			implement & test for other file systems.

	EVFILT_READ	OK for ufs, socket listen, socket read
			test pipes, fifos, tty
			implement & test for other file systems.

	EVFILT_AIO	FAIL: not implemented, returns EINVAL

	timeouts	OK. tested  NULL (infinity), 0 (poll), >0 (maxwait)

	KEVENT_NAME	(ioctl) OK

	KEVENT_FILTER	(ioctl) OK

to test:

	EVFILT_WRITE	test socket, tty, pipe, fifo
