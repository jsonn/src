#	$NetBSD: kqueue-todo,v 1.1.2.6 2001/09/08 21:49:16 thorpej Exp $

items todo from bill sommerfeld/thorpej:
	- resolve si_klist (NetBSD) vs. si_note (FreeBSD)
	- multiple entry points
	- events should remain across fork()
	- rewrite sowakeup()
	- high-level docco overview of kqueues [c.f jlemon's various papers]
	- kqfilter entry points for:
		- i4b
		- smb_trantcp
		- arch/amiga/dev/event.c
		- arch/arc/dev/opms.c
		- arch/arm32/dev/kbd.c
		- arch/arm32/dev/pms.c
		- arch/arm32/dev/qms.c
		- arch/arm32/shark/pms.c
		- arch/atari/dev/event.c
		- arch/bebox/isa/lms.c
		- arch/bebox/isa/mms.c
		- arch/bebox/isa/pms.c
		- arch/hp300/dev/hil.c
		- arch/mac68k/dev/aed.c
		- arch/macppc/dev/aed.c
		- arch/pmax/dev/fb_usrreq.c
		- arch/pmax/dev/px.c
		- arch/sparc/dev/tctrl.c
		- arch/x68k/dev/event.c
		- dev/pci/bktr/bktr_os.c
		- arch/hpcmips/dev/apm/apmdev.c

done:
	- name->id lookup
	- why is union kn_ptr not just a void *? (added p_opaque)
	- need more comments in kern_event.c
	- explain fd_knlistsize better
	- section 9 man page for internal api
	- use pool for everything (that it can sanely be used for)


merge in from freebsd:
	usr.bin/tail
	pkgsrc/devel/py-kqueue
	lib/libc/sys/kqueue.2
	lib/libc/net/res_send.c
	sys/netinet/tcp_subr.c	1.93 (?)
	libc/libc_r/uthread (?)
	pkgsrc/security/l0pht-watch (?)
	pkgsrc/www/thttpd



general points:
	- miscfs/fifofs/fifo_* seems to define filters which aren't used
	  by our tree

to fix:

	- look for XXXLUKEM in the comments. these usually indicate
	  areas to either fix or sanity check they're ok (and remove
	  the XXXLUKEM comment)

	- need to test bits of the tree that call closef() to determine
	  if knote_fdclose() is required. (aka fdrelease()/fdfree()):
		* ktrderef()		ktrace
		* unp_detach()
		* nfsrv_zapsock()	nfsd
		* portal_unmount()	mount_portal ?

not implemented:

	- pipes/fifos
		named pipes (fifos) don't work.
		c.f. freebsd's kern/sys_pipe.c. need to integrate with the
		pipe code that jdolocek has integrated

	- aio support
		not supported on netbsd; a noop for now


pkgsrc todo:

tested:

	create/close	OK

	EVFILT_PROC	OK

	EVFILT_SIGNAL	OK

	EVFILT_VNODE	OK for ufs (all NOTE_*s seem to work).
			implement & test for other file systems.

	EVFILT_READ	OK for ufs, socket listen, socket read
			FAIL for fifos (not implemented; speak to jdolocek)
			test tty
			implement & test for other file systems.

	EVFILT_AIO	FAIL: not implemented, returns EINVAL

	timeouts	OK. tested  NULL (infinity), 0 (poll), >0 (maxwait)

	KEVENT_NAME	(ioctl) OK

	KEVENT_FILTER	(ioctl) OK

to test:

	EVFILT_WRITE	test socket, tty, fifo
