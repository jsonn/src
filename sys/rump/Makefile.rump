#	$NetBSD: Makefile.rump,v 1.5.4.3 2008/02/04 09:24:48 yamt Exp $
#

.include <bsd.own.mk>

MKPRIVATELIB=	yes
NOMAN=		wizd
MKLINT?=	no
MKPIC?=		no

WARNS?=		4
DBG=		-g -O0

CPPFLAGS+=	-I${.CURDIR} -I. 

.if "${RUMPKERNEL}" != "no"
CFLAGS+=	-ffreestanding
CPPFLAGS:=	-I${NETBSDSRCDIR}/sys/rump/include ${CPPFLAGS}
CPPFLAGS+=	-D_KERNEL -DDIAGNOSTIC -I${NETBSDSRCDIR}/common/include
CPPFLAGS+=	-D_RUMPKERNEL -DDEBUG
CPPFLAGS+=	-nostdinc -I${NETBSDSRCDIR}/sys
.endif

LDFLAGS+=	-Wl,--wrap=malloc

LIBRUMPDIR != cd ${NETBSDSRCDIR}/sys/rump/librump/rumpkern && ${PRINTOBJDIR}
