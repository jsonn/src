#	$NetBSD: PS2,v 1.7.6.1 2001/04/09 01:53:28 nathanw Exp $
#
#	Sample kernel config for PS/2 with MCA bus
#
#	WARNING: DO NOT USE UNLESS YOU ARE PREPARED TO DEAL WITH PROBLEMS.
#
#	BEWARE:
#	 MCA support in NetBSD is still very experimental at this
#	 stage and should be used with extreme caution. MCA-enabled
#	 kernels won't currently work on non-MCA machines and it's
#	 not wise to try even try it unless you are prepared to deal
#	 with strange hardware failures. Please note that MCA
#	 support doesn't yet reach standard NetBSD quality,
#	 should be really used only for experimentation and is provided
#	 specially and only to make access to the code easier for people
#	 who wish to help with PS/2 development.
#	 See also sys/dev/mca/TODO for list of problems and current list of
#	 projects. If you try this out and encounter any problems, please
#	 let us know via send-pr(1) or ask on port-i386@NetBSD.org.

include "arch/i386/conf/std.i386"

# Enable the hooks used for initializing the root memory-disk.
#options 	MEMORY_DISK_HOOKS
#options 	MEMORY_DISK_IS_ROOT	# force root on memory disk
#options 	MEMORY_DISK_SERVER=0	# no userspace memory disk support
#options 	MINIROOTSIZE=3072	# size of memory disk, in blocks
#options 	MINIROOTSIZE=2880	# 1.44M, same as a floppy

makeoptions	COPTS="-Os"	# generates smaller code than -O2, -O1

maxusers	8		# estimated number of users

options 	I386_CPU
options 	I486_CPU

options 	MATH_EMULATE    # floating point emulation
#options 	XSERVER         # X server support in console drivers

#options 	UCONSOLE        # users can use TIOCCONS (for xconsole)
options 	INSECURE        # disable kernel security levels

options	RTC_OFFSET=-600 # hardware clock is this many mins. west of GMT
#options 	KTRACE          # system call tracing via ktrace(1)

#options 	SYSVMSG         # System V-like message queues
#options 	SYSVSEM         # System V-like semaphores
#options 	SYSVSHM         # System V-like memory sharing
#options 	SHMMAXPGS=1024  # 1024 pages is the default

options 	DIAGNOSTIC      # cheap kernel consistency checks
options 	DEBUG           # expensive debugging checks/support
#options 	KMEMSTATS       # kernel memory statistics (vmstat -m)
options 	DDB             # in-kernel debugger
options 	DDB_HISTORY_SIZE=512	# enable history editing in DDB

file-system 	FFS             # UFS
file-system 	NFS             # Network File System client
file-system 	MSDOSFS         # MS-DOS file system
#file-system 	FDESC           # /dev/fd
file-system 	KERNFS          # /kern
#file-system	MFS		# memory file system

#options 	QUOTA           # UFS quotas
#options 	NFSSERVER       # Network File System server
options 	FIFO            # FIFOs; RECOMMENDED

options 	INET            # IP + ICMP + TCP + UDP

options 	MCAVERBOSE      # verbose MCA device autoconfig messages

options		NFS_BOOT_DHCP,NFS_BOOT_BOOTPARAM

options 	WSEMUL_VT100            # VT100 / VT220 emulation
options 	WS_KERNEL_FG=WSCOL_GREEN

#config		netbsd  root on ? type ?
config		netbsd  root on ? type nfs

#
# Device Configuration
#

mainbus0 at root
mca0	at mainbus0
isa0	at mainbus0

#npx0	at isa? port 0xf0 irq 13        # x86 math coprocessor

#pc0	at isa? port 0x60 irq 1   

# wscons
pckbc0		at isa?			# pc keyboard controller
options		PCKBCDEBUG
#pcconskbd*	at pckbc?
#pms*		at pckbc?		# PS/2 mouse for wsmouse
#wsmouse*	at pms?
pckbd*		at pckbc?               # PC keyboard
wskbd*		at pckbd? console ?
vga0		at isa?
wsdisplay*	at vga? console ?
options	WSDISPLAY_DEFAULTSCREENS=4

com0	at isa? port 0x3f8 irq 4	# "SERIAL_!"
lpt0	at isa? port 0x3bc irq 7	# "PARALLEL_1"
fdc0	at isa? port 0x3f0 irq 6 drq 2	# standard PC floppy controllers
fd*	at fdc? drive ?			# the drives themselves
tr*	at mca? slot ?			# IBM Token Ring adapter

# MCA serial interfaces
com*	at mca? slot ?			# 16x50s on comm boards

# MCA network devices
elmc*	at mca? slot ?			# 3Com EtherLink/MC (3c523)
ep*	at mca? slot ?			# 3Com EtherLink III (3c529)
we*	at mca? slot ?			# WD/SMC Ethernet
ate*	at mca? slot ?			# Allied Telesis AT1720

# MCA SCSI controllers
aha*	at mca? slot ?			# Adaptec AHA-1640

# SCSI bus support
scsibus* at aha?

# SCSI devices
sd*	at scsibus? target ? lun ?	# SCSI disk drives
#st*	at scsibus? target ? lun ?	# SCSI tape drives
cd*	at scsibus? target ? lun ?	# SCSI CD-ROM drives
#ch*	at scsibus? target ? lun ?	# SCSI autochangers
#ses*	at scsibus? target ? lun ?	# SCSI Enclosure Services devices
#ss*	at scsibus? target ? lun ?	# SCSI scanners
#uk*	at scsibus? target ? lun ?	# SCSI unknown

# network pseudo-devices
pseudo-device	bpfilter	4	# Berkeley packet filter
pseudo-device	loop			# network loopback

# miscellaneous pseudo-devices
pseudo-device	pty			# pseudo-terminals
pseudo-device	md		1	# memory disk device (ramdisk)
# rnd works; RND_COM does not on port i386 yet.
pseudo-device	rnd			# /dev/random and in-kernel generator
#options 	RND_COM			# use "com" randomness as well (BROKEN)
