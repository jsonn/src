#	$NetBSD: CHANGES-1.5.1,v 1.1.2.8 2000/12/15 03:29:40 he Exp $

A complete list of changes from NetBSD 1.5 to NetBSD 1.5.1:

File						Revision(s)
----						--------

sys/sys/param.h					patch
sys/conf/osrelease.sh				patch
share/tmac/doc-common				patch

  Mark this as 1.5.1_ALPHA.

sys/dev/ic/an.c					1.1-1.3 + patch (new)
sys/dev/ic/anreg.h				1.1-1.2 (new)
sys/dev/ic/anvar.h				1.1 (new)
sys/dev/pcmcia/if_an_pcmcia.c			1.1-1.2 (new)
sys/dev/DEVNAMES				1.24
sys/conf/files					1.409
sys/dev/pcmcia/files.pcmcia			1.30
sys/arch/i386/conf/GENERIC			1.382
sys/arch/i386/conf/GENERIC_LAPTOP		1.7
sys/arch/i386/conf/INSTALL_LAPTOP		1.7

  Add a driver for an(4), Aironet and Cisco wireless pcmcia cards.

crypto/dist/krb4/lib/krb/tf_util.c		1.2
crypto/dist/krb4/lib/krb/kdc_reply.c		1.2
crypto/dist/krb4/lib/krb/extra.c		1.2

  Remove overwriting of the old ticket file.  Fix buffer overrun.
  Remove obsolete support for environment variables.

libexec/ftpd/cmds.c				1.9
libexec/ftpd/version.h				patch

  Fix a one-byte buffer overrun.

sys/netinet/udp_usrreq.c			1.73-1.74

  Fix multicast inbound packet processing.  Fixes PR#11629.

sys/dev/wscons/wsdisplay.c			1.43

  Make sure to switch consoles synchronously.

sys/arch/powerpc/powerpc/ofw_machdep.c		1.7

  Make memory probing work correctly with the DIMMs in any order.

distrib/atari/miniroot/install.md		1.14

  Add the X11 sets to MDSETS.

distrib/sets/lists/base/obsolete.mi		1.14

  Add /usr/sbin/gifconfig; we now do "ifconfig tunnel".

usr.sbin/dhcp/common/discover.c			1.9-1.10
usr.sbin/dhcp/common/bpf.c			1.7

  Fix multiple problems that caused dhcpd to either spin or not
  respond to queries in a timely fashion.

sys/arch/vax/conf/INSTALL			1.11

  Enable VS4000/90 SCSI controller.

sys/arch/hp300/stand/Makefile.inc		1.11

  Use ``make print-objdir'' to get obj directory correctly.

sys/dev/pci/fms.c				1.8

  Make this build without ``mpu at fms''.

usr.sbin/user/user.c				1.34

  Don't try to create or move directory if only ``-d'' option is
  given; documentation claims ``-m'' is also required.

usr.bin/login/k5login.c				1.17

  Use strlcpy() to copy environment variable into a fixed-length
  buffer.  Fixes PR#11550.

libexec/telnetd/sys_term.c			1.20 via patch

  Fix buffer overflow and environment passing problems, and only
  accept a limites set of environment variables and non-filename
  TERMCAP variables.

sys/arch/mac68k/nubus/nubus.h			1.52

  Add the DrHw Apple 24AC "Boogie" video card.

sys/arch/mac68k/nubus/grf_nubus.c		1.60

  Clear interrupts on the Apple "Boogie" card.

sys/coda/coda_vnops.c				1.21
sys/kern/vfs_subr.c				1.140
sys/kern/vfs_syscalls.c				1.162
sys/miscfs/genfs/genfs_vnops.c			1.20
sys/miscfs/genfs/layer_vnops.c			1.4
sys/miscfs/specfs/spec_vnops.c			1.50
sys/miscfs/syncfs/sync_subr.c			1.6
sys/miscfs/syncfs/sync_vnops.c			1.4
sys/miscfs/union/union_vnops.c			1.48
sys/msdosfs/msdosfs_vfsops.c			1.70
sys/ntfs/ntfs_vnops.c				1.30
sys/ufs/ext2fs/ext2fs_vfsops.c			1.39
sys/ufs/lfs/lfs_vnops.c				1.45
sys/ufs/ffs/ffs_balloc.c			1.22
sys/ufs/ffs/ffs_inode.c				1.37
sys/ufs/ffs/ffs_softdep.c			1.6	
sys/ufs/ffs/ffs_vfsops.c			1.71
sys/ufs/ffs/ffs_vnops.c				1.33,1.34
sys/nfs/nfs_nqlease.c				1.33
sys/nfs/nfs_serv.c				1.58
sys/nfs/nfs.h					1.24
sys/nfs/nfs_bio.c				1.52
sys/nfs/nfs_node.c				1.36
sys/nfs/nfs_subs.c				1.83
sys/nfs/nfs_syscalls.c				1.44,1.45
sys/nfs/nfs_var.h				1.18
sys/nfs/nfs_vnops.c				1.120,1.123
sys/nfs/nfs_vfsops.c				1.96
sys/nfs/nfsnode.h				1.30
sys/nfs/nfsproto.h				1.9
sys/nfs/nfs_socket.c				1.60
sys/nfs/nfs_subs.c				1.85,1.87
sys/kern/vnode_if.src				1.25	
sys/kern/vnode_if.c				regenerate
sys/sys/vnode_if.h				regenerate

  Improve NFS performance, possibly with as much as 100% in
  throughput.  Please note: this implies a kernel interface change,
  VOP_FSYNC gains two arguments.

sys/nfs/nfs_boot.c				1.55
sys/nfs/nfs_socket.c				1.63
sys/kern/uipc_socket.c				1.51
sys/kern/uipc_syscalls.c			1.56
sys/sys/socketvar.h				1.41

  Fix NFS+tcp client hangs on server or network outage.  Again,
  please note that this introduces yet another kernel interface
  change: sobind() gains an argument.

usr.bin/passwd/krb5_passwd.c			1.10

  Don't try to free an uninitialized context; fixes core dump when
  called as ``yppasswd''.

sys/dev/pcmcia/if_ray.c				1.24-1.25

  Add a missing return after freeing an mbuf.
  Add support for 802.11 authentication frames, required to
  interoperate with Aviator Pro cards on Windows.

sys/dev/pci/pccbb.c				1.47,1.49

  Turn off power on shutdown, except on ToPIC (TI 113X) bridges on
  shutdown to avoid hangs on some systems.

distrib/notes/sparc64/hardware			1.6
distrib/notes/sparc64/install			1.5

  Recommend minimum 32MB.  The pciide cdroms work on secondary channel,
  but disks do not.  Also, add ``Install from Solaris'' instructions.

distrib/sparc/ramdisk/dot.profile		1.15

  Look for ``instfs.tgz'' in the $MACHINE subdir on cdrom first.

sys/arch/pmax/pmax/autoconf.c			1.55

  Fix netbooting on the 2100/3100.  Fixes PR#11212.
