#	$NetBSD: CHANGES-1.5.1,v 1.1.2.25 2001/02/03 22:33:45 he Exp $

A complete list of changes from NetBSD 1.5 to NetBSD 1.5.1:

File						Revision(s)
----						--------

sys/sys/param.h					patch
sys/conf/osrelease.sh				patch
share/tmac/doc-common				patch

  Mark this as 1.5.1_ALPHA.

sys/dev/ic/an.c					1.1-1.3 + patch (new)
sys/dev/ic/anreg.h				1.1-1.2 (new)
sys/dev/ic/anvar.h				1.1 (new)
sys/dev/pcmcia/if_an_pcmcia.c			1.1-1.2 (new)
sys/dev/DEVNAMES				1.24
sys/conf/files					1.409
sys/dev/pcmcia/files.pcmcia			1.30
sys/arch/i386/conf/GENERIC			1.382
sys/arch/i386/conf/GENERIC_LAPTOP		1.7
sys/arch/i386/conf/INSTALL_LAPTOP		1.7

  Add a driver for an(4), Aironet and Cisco wireless pcmcia cards.

crypto/dist/krb4/lib/krb/tf_util.c		1.2
crypto/dist/krb4/lib/krb/kdc_reply.c		1.2
crypto/dist/krb4/lib/krb/extra.c		1.2

  Remove overwriting of the old ticket file.  Fix buffer overrun.
  Remove obsolete support for environment variables.

libexec/ftpd/cmds.c				1.9
libexec/ftpd/version.h				patch

  Fix a one-byte buffer overrun.

sys/netinet/udp_usrreq.c			1.73-1.74

  Fix multicast inbound packet processing.  Fixes PR#11629.

sys/dev/wscons/wsdisplay.c			1.43

  Make sure to switch consoles synchronously.

sys/arch/powerpc/powerpc/ofw_machdep.c		1.7

  Make memory probing work correctly with the DIMMs in any order.

distrib/atari/miniroot/install.md		1.14

  Add the X11 sets to MDSETS.

distrib/sets/lists/base/obsolete.mi		1.14

  Add /usr/sbin/gifconfig; we now do "ifconfig tunnel".

usr.sbin/dhcp/common/discover.c			1.9-1.10
usr.sbin/dhcp/common/bpf.c			1.7

  Fix multiple problems that caused dhcpd to either spin or not
  respond to queries in a timely fashion.

sys/arch/vax/conf/INSTALL			1.11

  Enable VS4000/90 SCSI controller.

sys/arch/hp300/stand/Makefile.inc		1.11

  Use ``make print-objdir'' to get obj directory correctly.

sys/dev/pci/fms.c				1.8

  Make this build without ``mpu at fms''.

usr.sbin/user/user.c				1.34

  Don't try to create or move directory if only ``-d'' option is
  given; documentation claims ``-m'' is also required.

usr.bin/login/k5login.c				1.17

  Use strlcpy() to copy environment variable into a fixed-length
  buffer.  Fixes PR#11550.

libexec/telnetd/sys_term.c			1.20 via patch

  Fix buffer overflow and environment passing problems, and only
  accept a limites set of environment variables and non-filename
  TERMCAP variables.

sys/arch/mac68k/nubus/nubus.h			1.52

  Add the DrHw Apple 24AC "Boogie" video card.

sys/arch/mac68k/nubus/grf_nubus.c		1.60

  Clear interrupts on the Apple "Boogie" card.

sys/coda/coda_vnops.c				1.21
sys/kern/vfs_subr.c				1.140
sys/kern/vfs_syscalls.c				1.162
sys/miscfs/genfs/genfs_vnops.c			1.20
sys/miscfs/genfs/layer_vnops.c			1.4
sys/miscfs/specfs/spec_vnops.c			1.50
sys/miscfs/syncfs/sync_subr.c			1.6
sys/miscfs/syncfs/sync_vnops.c			1.4
sys/miscfs/union/union_vnops.c			1.48
sys/msdosfs/msdosfs_vfsops.c			1.70
sys/ntfs/ntfs_vnops.c				1.30
sys/ufs/ext2fs/ext2fs_vfsops.c			1.39
sys/ufs/lfs/lfs_vnops.c				1.45
sys/ufs/ffs/ffs_balloc.c			1.22
sys/ufs/ffs/ffs_inode.c				1.37
sys/ufs/ffs/ffs_softdep.c			1.6	
sys/ufs/ffs/ffs_vfsops.c			1.71
sys/ufs/ffs/ffs_vnops.c				1.33,1.34
sys/nfs/nfs_nqlease.c				1.33
sys/nfs/nfs_serv.c				1.58
sys/nfs/nfs.h					1.24
sys/nfs/nfs_bio.c				1.52
sys/nfs/nfs_node.c				1.36
sys/nfs/nfs_subs.c				1.83
sys/nfs/nfs_syscalls.c				1.44,1.45
sys/nfs/nfs_var.h				1.18
sys/nfs/nfs_vnops.c				1.120,1.123
sys/nfs/nfs_vfsops.c				1.96
sys/nfs/nfsnode.h				1.30
sys/nfs/nfsproto.h				1.9
sys/nfs/nfs_socket.c				1.60
sys/nfs/nfs_subs.c				1.85,1.87
sys/kern/vnode_if.src				1.25	
sys/kern/vnode_if.c				regenerate
sys/sys/vnode_if.h				regenerate

  Improve NFS performance, possibly with as much as 100% in
  throughput.  Please note: this implies a kernel interface change,
  VOP_FSYNC gains two arguments.

sys/nfs/nfs_boot.c				1.55
sys/nfs/nfs_socket.c				1.63
sys/kern/uipc_socket.c				1.51
sys/kern/uipc_syscalls.c			1.56
sys/sys/socketvar.h				1.41

  Fix NFS+tcp client hangs on server or network outage.  Again,
  please note that this introduces yet another kernel interface
  change: sobind() gains an argument.

usr.bin/passwd/krb5_passwd.c			1.10

  Don't try to free an uninitialized context; fixes core dump when
  called as ``yppasswd''.

sys/dev/pcmcia/if_ray.c				1.24-1.25

  Add a missing return after freeing an mbuf.
  Add support for 802.11 authentication frames, required to
  interoperate with Aviator Pro cards on Windows.

sys/dev/pci/pccbb.c				1.47,1.49

  Turn off power on shutdown, except on ToPIC (TI 113X) bridges on
  shutdown to avoid hangs on some systems.

distrib/notes/sparc64/hardware			1.6
distrib/notes/sparc64/install			1.5

  Recommend minimum 32MB.  The pciide cdroms work on secondary channel,
  but disks do not.  Also, add ``Install from Solaris'' instructions.

distrib/sparc/ramdisk/dot.profile		1.15

  Look for ``instfs.tgz'' in the $MACHINE subdir on cdrom first.

sys/arch/pmax/pmax/autoconf.c			1.55

  Fix netbooting on the 2100/3100.  Fixes PR#11212.

usr.sbin/pkg_install/add/main.c			1.17
usr.sbin/pkg_install/add/perform.c		1.56
usr.sbin/pkg_install/admin/main.c		1.17
usr.sbin/pkg_install/create/perform.c		1.24
usr.sbin/pkg_install/info/perform.c		1.34
usr.sbin/pkg_install/lib/file.c			1.44-1.45
usr.sbin/pkg_install/lib/ftpio.c		1.28
usr.sbin/pkg_install/lib/str.c			1.24

  Accept ``.tbz'' as an alternative suffix; compress with bzip2 if
  a .tbz suffix is given.  Fix pkg_info to work via ftp, either
  via URL on command line or from PKG_PATH environment variable.

sys/arch/news68k/dev/zs.c			1.5

  Initialize zs chip in zscninit() so that the kernel can use serial
  console even if the PROM uses bitmap console.  Remove some dead
  code.  Use BPS_TO_TCONST() to initialize baudrate.

sys/arch/arm32/pci/pciide_machdep.c		1.3

  Print which IRQ is used for compatibility interrupts.

sys/arch/sun3/sun3/sunmon.c			1.11
sys/arch/sun3/sun3x/machdep.c			1.61

  Make PROM boot command work properly even after halt on 3/80.

sys/lib/libsa/loadfile.c			1.9

  Don't print ``]'' if loading kernel does not have a symbol table.

sys/dev/pci/pciide.c				1.93

  Add support for Intel ICH2 IDE controller.

usr.sbin/mopd/mopd/process.c			1.10

  Make sure dle points to the correct slot.  Fixes PR#11253.

sys/dev/microcode/siop/ncr53cxxx.c		1.3-1.5

  Allow conditional branch like "JUMP foo, IF FALSE" (that the
  driver can later patch).  Bug fixes and syntax checking improvement.

sys/dev/microcode/siop/siop.ss			1.8-1.12
sys/dev/microcode/siop/siop.out			regenerate
sys/dev/ic/siop.c				1.23-1.24,1.28-1.36
sys/dev/ic/siop_common.c			1.7-1.11
sys/dev/ic/siopreg.h				1.7
sys/dev/ic/siopvar.h				1.9-1.13
sys/dev/ic/siopvar_common.h			1.5-1.8
sys/dev/pci/siop_pci_common.c			1.3
sys/dev/pci/siop_pci_common.h			1.2

  Speed improvements to the siop driver, and add tagged queueing
  support.  As a side effect, better handling of some not so common
  phase or message sequences.

distrib/notes/amiga/hardware			1.39

  Nowadays, need to tell people what models didn't have an MMU out
  of the box.

sbin/ping6/ping6.c				1.25

  Validate strdup() error on argument parsing.  Also, use strlcat()
  on complex string manipulation.

usr.sbin/grfconfig/grfconfig.8			1.10

  Document that text console modes need a depth field of 4.

share/man/man8/compat_pecoff.8			1.3-1.6

  Various grammar corrections, markup fixes.  Updates for the
  current status of The PEACE Project.

share/man/man8/Makefile				1.40

  Alias compat_win32.8 and peace.8.

distrib/sets/lists/man/mi			1.288

  Add peace(8) and compat_win32(8).

distrib/x68k/floppies/ramdisk-common/Makefile.inc 1.2

  Change all ocurrences of ``crunchgen'' to ${CRUNCHGEN}.

distrib/x68k/floppies/Makefile			1.7
distrib/x68k/floppies/bootfloppy-common/Makefile.inc 1.16
distrib/x68k/floppies/ramdisk.sysinst/Makefile	1.12 via patch
distrib/x68k/floppies/ramdisk.sysinst/dot.profile 1.7
distrib/x68k/floppies/bootfloppy.generic/Makefile 1.1 (new)
distrib/x68k/floppies/inst/Makefile		1.1 (new)
distrib/x68k/floppies/bootfloppy/Makefile	delete
distrib/x68k/floppies/ramdisk/Makefile		delete
distrib/x68k/floppies/ramdisk/dot.hdprofile	delete
distrib/x68k/floppies/ramdisk/dot.profile	delete
distrib/x68k/floppies/ramdisk/install.tmpl	delete
distrib/x68k/floppies/ramdisk/list		delete
distrib/x68k/floppies/ramdisk/mtree.conf	delete
distrib/x68k/floppies/ramdisk/ramdiskbin.conf	delete
distrib/x68k/floppies/ramdisk/start.tmpl	delete
distrib/x68k/floppies/ramdisk/upgrade.tmpl	delete

  Reorganize installation system by removing the old script based
  installer, provided for 4M systems.  Instead we provide
  ``floppy-root'' 2-floppy installer.

etc/etc.x68k/Makefile.inc			1.9
sys/arch/x68k/conf/INSTALL_SMALL		delete

  We do not use INSTALL_SMALL anymore.

sys/arch/x68k/conf/INSTALL			1.36 via patch

  Adjust the ramdisk size.

distrib/x68k/floppies/bootfloppy.sysinst/Makefile 1.6

  Change the kernel name from netbsdsi(.gz) to netbsd(.gz).

sys/arch/mac68k/obio/grf_obio.c			1.46-1.47

  Map only the register space of the DAFB required to set up the
  video hardware.  Fixes PR#11000.
  Be careful to unmap anything we map in the drivers' match function
  in order to avoid potential future problems.

sys/dev/ic/an.c					patch

  Fix multicast packet reception; handle corresponding ioctl().

sys/kern/vfs_getcwd.c				1.14

  Avoid an infinite loop if VOP_READDIR returned an error.

sys/arch/news68k/include/cpu.h			1.7
sys/arch/news68k/news68k/genassym.cf		1.6
sys/arch/news68k/news68k/locore.s		1.13,1.17

  Allow runtime enabling/disabling of DC_BE and IC_BE bits in %cacr
  and enable them on news1200/1400/1500 (Which have no L2 cache); yields
  a performance improvement.  Also correct a typo in a comment.

sys/arch/news68k/include/romcall.h		1.2
sys/arch/news68k/stand/boot/boot.c		1.3
sys/arch/news68k/stand/boot/locore.S		1.3
sys/arch/news68k/stand/bootxx/start.S		1.2
sys/arch/news68k/stand/common/romcalls.S	1.2

  Make sure to return PROM prompt even if loading kernel fails halfway,
  by calling the PROM halt routine upon failure of loadfile().

gnu/usr.bin/ld/ld/ld.c				1.73
gnu/usr.bin/ld/ld/ld_i.h			1.2
gnu/usr.bin/ld/ld/lib.c				1.23

  Correct various problems with argument parsing for --whole-archive
  and --no-whole-archive. Fully implement --no-whole-archive.  Remove
  spurious warning for -Bshareable.

sys/dev/pci/tga.c				1.29

  Restore code to clear "odd" in VCHR. This seems to be required
  for X to function properly on the T8-02 TGA (onboard on Multias,
  seperate card in other machines).

usr.sbin/chown/chown.c				1.25 via patch

  Correct the display of some errors in chown.  Fixes PR#11695.

distrib/utils/sysinst/mbr.c			1.24

  Correct an error in the calculation of the end of a partition.
  Fixes PR#7556.

usr.sbin/rpc.lockd/lockd_lock.c			1.5

  Fix an error freeing the wrong lock; in some cases this might
  have lfree()'d a NULL pointer.

distrib/utils/sysinst/util.c			1.59
distrib/utils/sysinst/msg.mi.en			1.79
distrib/utils/sysinst/msg.mi.fr			1.39

  Fix sysinst to require base.tgz (in addition to etc.tgz and
  kern.tgz) to successfully install.  Fixes PR#11634.

sys/dev/pcmcia/wdc_pcmcia.c			1.36 via patch

  Support AMACOM "Value Engineered" CDROM.

sys/dev/isa/ad1848_isa.c			1.17
sys/dev/isa/ad1848var.h				1.35

  Support full-duplex audio on 1848 wss devices by using
  seperate interrupt handlers for play and record. Fix from
  Juergen Weiss <weiss@uni-mainz.de> by way of PR#11178.

gnu/usr.sbin/sendmail/Makefile			1.3

  Move the the "doc" subdirectory from MKSHARE conditional to the
  MKDOC one.

sys/dev/tc/sfbreg.h				1.3

  Make XalphaNetBSD compile with SFB support.

sbin/ifconfig/ifconfig.c			1.81, 1.87
sbin/ifconfig/ifconfig.8			1.34, 1.38
sys/net/if.c					1.63-1.64, 1.67
sys/net/if.h					1.51, 1.53
sys/sys/sockio.h				1.12-1.13

  Support cloning of network pseudo-interfaces.

etc/etc.i386/MAKEDEV				1.131 via patch

  Support up to five SCSI disks during INSTALL, not only three.
  Fixes PR#9912.

sys/arch/macppc/include/vmparam.h		1.13

  Increase limits (max test size, datasize, default datasize, and
  default stacksize) to match other ports.  (Fixes a bunch of
  problems running apps like Mozilla with the defaults.)

sbin/ifconfig/ifconfig.c			1.89
sbin/ifconfig/ifconfig.8			1.43
distrib/sets/lists/comp/mi			1.258
distrib/sets/lists/man/mi			1.269
share/man/man4/Makefile				1.166
share/man/man4/vlan.4				1.1-1.6 (new)
sys/conf/files					1.395 via patch
sys/net/Makefile				1.8
sys/net/if_ether.h				1.18-1.19, 1.21
sys/net/if_ethersubr.c				1.59-1.60, 1.62-1.65, 1.70
						via patch
sys/net/if_vlan.c				1.1-1.14, 1.16-1.21,
						1.23-1.26 (new)
sys/net/if_vlanvar.h				1.1-1.4 (new)
sys/sys/sockio.h				1.14
sys/dev/ic/dp8390.c				1.39
sys/dev/ic/elinkxl.c				1.43 via patch
sys/dev/ic/elinkxlreg.h				1.4
sys/dev/ic/i82557.c				1.39
sys/dev/ic/lance.c				1.14
sys/dev/ic/smc83c170.c				1.36
sys/dev/ic/tulip.c				1.74-1.75

  Add support for 802.1Q virtual LANs.

sys/dev/pci/if_ti.c				1.12, 1.15 via patch
sys/dev/pci/if_tireg.h				1.3
sys/dev/pci/pcidevs				1.272 via patch
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen
sys/dev/pci/ti_fw.h				1.2
sys/dev/pci/ti_fw2.h				1.2
share/man/man4/ti.4				1.4 via patch
share/man/man4/vlan.4				1.7

  For the ti driver, add hardware 802.1Q support, update firmware
  to 12.4.13+wpaul, and support the Netgear GA620T copper gigabit card,
  and the Alteon ACEnic 100baseSX and 1000baseT gigabit cards. Various
  small changes from FreeBSD.

sys/arch/i386/i386/sys_machdep.c                1.55

  Validate gate targets correctly.

sys/dev/ic/rtl81x9.c				1.12, 1.21-1.24 via patch
sys/dev/ic/rtl81x9var.h				1.6-1.7

  Clean up receive interrupt routine and fix DMA buffer handing
  for receive buffering.
  Add missed bus_dmamem_free() in rtk_detach().
  Some cosmetic fixes.

usr.sbin/user/user.c				1.35
usr.sbin/user/usermod.8				1.8

  Make moving a user's homedirectory with -md work correctly,
  and clarify the meaning of -d in the absence of -m.  Fixing PR#11707 

sbin/modload/elf.c				1.4

  Ensure that data_hole is aligned to a section, otherwise
  elf_mod_sizes() may report a size too small, affecting LKM loading.

crypto/dist/heimdal/lib/gssapi/acquire_cred.c	1.2, 1.3
crypto/dist/heimdal/lib/gssapi/gssapi.h		1.2 via patch
crypto/dist/heimdal/lib/gssapi/init_sec_context.c 1.2 via patch
crypto/dist/heimdal/lib/gssapi/release_cred.c	1.2

  Make gss_acquire_cred() work for cases other than GSS_C_NO_CREDENTIAL
  (i.e 'get current, default credentials').  This is needed to support
  things like gss-api authentication with IKE, as currently implemented
  in racoon.

sys/netinet6/in6_prefix.c			1.13

  Don't dereference null ra_addr pointer.

share/examples/supfiles/sup.de.netbsd.org	deleted
share/examples/supfiles/Makefile		1.7

  sup.de.netbsd.org no longer exists (since May 2000).

sys/net/bpf.c					1.60

  Fix non-blocking BPF reads.  Fixes PR#11836.

share/misc/acronyms				1.64-1.73

  Various acryonym updates.

sys/arch/amiga/dev/if_ne_zbus.c			1.6
sys/arch/amiga/conf/GENERIC			1.154
sys/arch/amiga/conf/AMIGA			regen
sys/arch/amiga/conf/DRACO			regen
sys/arch/amiga/conf/INSTALL			regen

  Correct and add (Respectively) the name of the X-surf board in comments.

distrib/sets/lists/man/mi			patch

  Remove duplicates (presumed due to merge errors).

sys/dev/isa/if_cs_isa.c				1.3
sys/dev/ofisa/if_cs_ofisa.c			1.4

  Include <sys/rnd.h> as appropriate to properly size cs_softc.

sys/arch/mac68k/mac68k/locore.s			1.133
sys/arch/mac68k/obio/esp.c			1.26-1.28
sys/arch/mac68k/obio/espvar.h			1.6

  Improve performance of the pseudo-DMA mode of the esp driver, and
  handle residual FIFO data on write.

usr.bin/tftp/main.c				1.14

  Fix argument validation error in setpeer().

sys/dev/pcmcia/if_wi.c				1.48
sys/dev/pcmcia/if_wivar.h			1.15

  Ensure the ethernet payload is properly aligned.  Fixes PR#11477.

distrib/sets/lists/base/mi			1.204
etc/mtree/NetBSD.dist				1.128

  /etc/openssl/cert.pem is a file, not a directory.  Fixes PR#11772.

lib/libc/locale/setlocale.c			1.23, 1.25-1.27, 1.31 via patch

  Updates to setlocale(): return NULL for nonexistant locales, ignore
  some errors, and handle environment vars consistently (no slashes).

sys/dev/sbus/isp_sbus.c				1.31-1.34
sys/dev/microcode/isp/asm_2200.h		1.2
sys/dev/microcode/isp/asm_sbus.h		1.16
sys/dev/pci/isp_pci.c				1.57-1.58, 1.61
sys/dev/ic/isp.c				1.62-1.65
sys/dev/ic/ispvar.h				1.36-1.38
sys/dev/ic/isp_netbsd.h				1.30-1.33
sys/dev/ic/isp_netbsd.c				1.31-1.35

  Add in correct SBus bursting; upgrade to 2.01.26 firmware; pull to latest
  initiator mode level; make changes to WWN default handling; quiet
  chatty boot messages; fix endian code so MacPPC works; fix bug in
  lock recursion counter; fix bug which excluded all but NL-ports from
  being logged into on a fabric.

share/man/man7/packages.7			1.40

  Remove documentation of NOCLEANDEPENDS (default); document
  MAKEFILE, per PR#11866.

crypto/dist/ssh/packet.c			1.2

  Set TCP_NODELAY interactive IPv6 connections.

sys/arch/x68k/dev/rtclock.c			1.6

  Correct errant year 2001 bounds check.

sys/arch/x68k/conf/ALL				1.38
sys/arch/x68k/conf/GENERIC			1.55
sys/arch/x68k/conf/INSTALL			1.37
sys/arch/x68k/conf/Makefile.x68k		1.49 via patch
sys/arch/x68k/conf/TOKOCHAN			1.16

  CMACHFLAGS now defaults to -m68020-60.

lib/libc/regex/regcomp.c			1.17

  Pass unsigned char (not char) to ctype(3) functions, except iascii(3).
  Fixes PR#11885.

crypto/dist/openssl/crypto/rand/randfile.c	1.2

  Ignore environment variables if issetugid(), and fall back to /dev/random.

sys/arch/pmax/pmax/autoconf.c			1.57 via patch

  Adjust recent netboot fix to work on the 5100 as well.

dist/ipf/man/ipf.8				1.3

  Xref ipf.conf(5)

sys/arch/alpha/include/pio.h			1.6

  Make this file safe for inclusion in C++ programs.

sys/arch/alpha/alpha/mem.c			1.29

  Pass the PA (not the PFN) to alpha_pa_access().

sys/dev/isa/ess.c				1.53
sys/dev/isa/essvar.h				1.18
sys/dev/ofisa/ess_ofisa.c			1.6

  Support certain ISAPnP ESS 1868 and 1869 cards.  Per PR#11630.

sys/uvm/uvm_mmap.c				1.47-1.48 via patch

  Change PROT_EXEC handling. Clear it from the maxprot if the protection
  lacks it, after a failed udv_attach() and retry the udv_attach().

sys/dev/pcmcia/if_ray.c				1.26

  Cast pktlen to u_long and print with %ld.  Now it compiles on
  the alpha.

sys/dev/ic/tulip.c				1.85

  Ignore receive errors if VLAN_MTU is enabled.

sys/netinet6/icmp6.c				1.50,1.51

  Only printf() IPv6 ICMP checksum errors under ND6_DEBUG.  Fixes
  PR#11911.

sbin/ifconfig/ifconfig.c			1.94

  Initialize an uninitialized pointer. PR#11702.

lib/libcrypto_idea/Makefile			1.2
lib/libcrypto_rc5/Makefile			1.2

  Don't build these libraries shared.

lib/libc/arch/i386/stdlib/div.S			1.6
lib/libc/arch/i386/stdlib/ldiv.S		1.6

  Implement working versions of div() and ldev(). Previously they returned
  garbage, but were generally unused.

gnu/dist/gcc/gcc.1				1.8

  Mention Objective C in .SH NAME section.

gnu/usr.bin/gawk/Makefile			1.11

  Use -msoft-quad-float on the sparc64.

sys/netinet/ip_output.c				1.80

  Initialize len during getsokcopt() for IP_IPSEC_POLICY.

sys/arch/sparc/dev/cgsix.c			patch
sys/arch/sparc/dev/cgsixreg.h			patch

  Initialize cgsix registers for machines that do not do so by
  themselves.  Fixes PR#11944.

share/termcap/termcap.src			1.64

  Remove visual bell from xterm termcap, for compatibility.  Fixes
  PR#11882.

bin/ps/ps.1					1.40-1.42
bin/ps/print.c					1.63-1.65

  Clarify meaning of COMMANDs printed in parentheses.  Addresses
  PR#11930.

distrib/sparc/miniroot/dot.profile		1.10

  Do not reset the baud rate to 9600.  Fixes PR#11946.

dist/bind/LICENSE				1.2
dist/bind/README				1.3
dist/bind/bin/dig/dig.c				1.3
dist/bind/bin/dnskeygen/dnskeygen.c		1.2
dist/bind/bin/dnsquery/dnsquery.c		1.2
dist/bind/bin/host/host.c			1.4
dist/bind/bin/irpd/irpd.c			1.2
dist/bind/bin/mkservdb/mkservdb.c		1.2
dist/bind/bin/named-bootconf/named-bootconf.sh	1.2
dist/bind/bin/named-xfer/named-xfer.c		1.3
dist/bind/bin/named/db_defs.h			1.2
dist/bind/bin/named/db_dump.c			1.3
dist/bind/bin/named/db_func.h			1.2
dist/bind/bin/named/db_glob.h			1.2
dist/bind/bin/named/db_glue.c			1.3
dist/bind/bin/named/db_ixfr.c			1.2
dist/bind/bin/named/db_load.c			1.3
dist/bind/bin/named/db_lookup.c			1.2
dist/bind/bin/named/db_save.c			1.2
dist/bind/bin/named/db_sec.c			1.2
dist/bind/bin/named/db_tsig.c			1.2
dist/bind/bin/named/db_update.c			1.3
dist/bind/bin/named/named.conf			1.3
dist/bind/bin/named/named.h			1.2
dist/bind/bin/named/ns_config.c			1.4
dist/bind/bin/named/ns_ctl.c			1.4
dist/bind/bin/named/ns_defs.h			1.3
dist/bind/bin/named/ns_forw.c			1.4
dist/bind/bin/named/ns_func.h			1.5
dist/bind/bin/named/ns_glob.h			1.3
dist/bind/bin/named/ns_glue.c			1.3
dist/bind/bin/named/ns_init.c			1.2
dist/bind/bin/named/ns_ixfr.c			1.3
dist/bind/bin/named/ns_lexer.c			1.3
dist/bind/bin/named/ns_lexer.h			1.3
dist/bind/bin/named/ns_main.c			1.8
dist/bind/bin/named/ns_maint.c			1.3
dist/bind/bin/named/ns_ncache.c			1.2
dist/bind/bin/named/ns_notify.c			1.3
dist/bind/bin/named/ns_parser.y			1.3
dist/bind/bin/named/ns_parseutil.c		1.2
dist/bind/bin/named/ns_parseutil.h		1.2
dist/bind/bin/named/ns_req.c			1.3
dist/bind/bin/named/ns_resp.c			1.4
dist/bind/bin/named/ns_signal.c			1.2
dist/bind/bin/named/ns_sort.c			1.3
dist/bind/bin/named/ns_stats.c			1.3
dist/bind/bin/named/ns_udp.c			1.2
dist/bind/bin/named/ns_update.c			1.3
dist/bind/bin/named/ns_xfr.c			1.2
dist/bind/bin/named/pathtemplate.h		1.2
dist/bind/bin/ndc/ndc.c				1.3
dist/bind/bin/nslookup/commands.l		1.2
dist/bind/bin/nslookup/debug.c			1.3
dist/bind/bin/nslookup/getinfo.c		1.3
dist/bind/bin/nslookup/list.c			1.2
dist/bind/bin/nslookup/main.c			1.2
dist/bind/bin/nslookup/nslookup.help		1.3
dist/bind/bin/nslookup/pathnames.h		1.2
dist/bind/bin/nslookup/res.h			1.2
dist/bind/bin/nslookup/send.c			1.3
dist/bind/bin/nslookup/subr.c			1.2
dist/bind/bin/nsupdate/nsupdate.c		1.2
dist/bind/bind2netbsd				1.15
dist/bind/include/arpa/nameser.h		1.3
dist/bind/include/irs.h				1.2
dist/bind/include/isc/assertions.h		1.2
dist/bind/include/isc/list.h			1.2
dist/bind/include/isc/logging.h			1.3
dist/bind/include/isc/misc.h			1.2
dist/bind/include/port_after.h			1.2-1.3
dist/bind/include/port_before.h			1.4
dist/bind/include/resolv.h			1.5
dist/bind/lib/dst/bsafe_link.c			1.2
dist/bind/lib/dst/cylink_link.c			1.2
dist/bind/lib/dst/dst_api.c			1.3
dist/bind/lib/dst/eay_dss_link.c		1.2
dist/bind/lib/dst/hmac_link.c			1.2
dist/bind/lib/dst/md5.h				1.1-1.3 (new)
dist/bind/lib/dst/md5_dgst.c			1.1-1.3 (new)
dist/bind/lib/dst/md5_locl.h			1.1-1.3 (new)
dist/bind/lib/dst/prandom.c			1.2
dist/bind/lib/dst/rsaref_link.c			1.2
dist/bind/lib/dst/support.c			1.2
dist/bind/lib/inet/inet_cidr_pton.c		1.2
dist/bind/lib/inet/inet_net_ntop.c		1.2
dist/bind/lib/inet/inet_ntop.c			1.2
dist/bind/lib/irs/dns.c				1.2
dist/bind/lib/irs/dns_ho.c			1.2
dist/bind/lib/irs/dns_sv.c			1.2
dist/bind/lib/irs/gen_gr.c			1.2
dist/bind/lib/irs/gethostent.c			1.2
dist/bind/lib/irs/gethostent_r.c		1.2
dist/bind/lib/irs/getnameinfo.c			1.2
dist/bind/lib/irs/getnetent.c			1.2
dist/bind/lib/irs/getpwent.c			1.2
dist/bind/lib/irs/hesiod.c			1.2
dist/bind/lib/irs/irp.c				1.2
dist/bind/lib/irs/irpmarshall.c			1.2
dist/bind/lib/irs/irs_data.c			1.4
dist/bind/lib/irs/lcl.c				1.2
dist/bind/lib/irs/nis.c				1.2
dist/bind/lib/irs/util.c			1.2
dist/bind/lib/isc/ctl_clnt.c			1.3
dist/bind/lib/isc/ctl_p.c			1.2
dist/bind/lib/isc/ctl_srvr.c			1.3
dist/bind/lib/isc/ev_connects.c			1.2
dist/bind/lib/isc/ev_timers.c			1.3
dist/bind/lib/isc/ev_waits.c			1.3
dist/bind/lib/isc/eventlib.c			1.3
dist/bind/lib/isc/eventlib_p.h			1.3
dist/bind/lib/isc/logging.c			1.2
dist/bind/lib/isc/logging_p.h			1.2
dist/bind/lib/isc/movefile.c			1.1 (new)
dist/bind/lib/nameser/ns_name.c			1.3
dist/bind/lib/nameser/ns_parse.c		1.2
dist/bind/lib/nameser/ns_print.c		1.2
dist/bind/lib/nameser/ns_sign.c			1.2
dist/bind/lib/nameser/ns_verify.c		1.2
dist/bind/lib/resolv/res_data.c			1.5
dist/bind/lib/resolv/res_debug.c		1.3
dist/bind/lib/resolv/res_debug.h		1.2
dist/bind/lib/resolv/res_findzonecut.c		1.3
dist/bind/lib/resolv/res_init.c			1.2
dist/bind/lib/resolv/res_mkupdate.c		1.2
dist/bind/lib/resolv/res_query.c		1.2
dist/bind/lib/resolv/res_send.c			1.3
dist/bind/lib/resolv/res_sendsigned.c		1.2
dist/bind/lib/resolv/res_update.c		1.3
dist/bind/man/host.1				1.4
dist/bind/man/named.8				1.5
dist/bind/man/named.conf.5			1.3
dist/bind/man/nsupdate.8			1.3
usr.sbin/bind/Makefile				1.9
usr.sbin/bind/lib/Makefile			1.11 via patch

  Upgrade to BIND version 8.2.3.

crypto/dist/ssh/ssh.conf			1.3

  Document that we ship with "ForwardX11 no" as the default.

sys/arch/i386/i386/apm.c			1.58 via patch

  Fix problem detected on IBM thinkpads causing it to suspend
  shortly after resume.  This is caused by duplicate events filling
  the event queue, so improve detection of duplicates.  Also cleanup
  and add some APMDEBUG code.

sys/arch/i386/isa/npx_isa.c			1.2

  Avoid doing Very Bad Things by passing a horrible IRQ value to
  npxprobe1().  Fixes a problem on IBM Thinkpads.

sys/arch/sparc/stand/common/promdev.c		1.9

  On V0 proms, read the ``idprom'' property at the root node to
  get to the station's ethernet address.  Fixes netbooting on some
  older SPARCstations where the boot program would otherwise crash.

sys/arch/mac68k/dev/ite_compat.c		1.3

  Correct the implementation of iteopen()/iteclose().  Fixes
  PR#12022.

usr.sbin/ypserv/ypinit/Makefile.yp		1.14

  Handle multiple-line netgroup entries correctly.

sys/arch/i386/stand/lib/biosdisk.c		1.13

  Add support for booting off RAIDframe RAID1 mirrors.  Done by
  checking the first partition type in biosdiskopen(), and if it
  is of type FS_RAID, add 64 to d->b_off.

  NOTE: installboot(8) still needs some hacking to DTRT, but at
  least this way if you can load "/boot" off another partition
  (e.g, wd0h), then wd0a can be of type `RAID' with a raidframe
  mirror at the start and the kernel will load OK of wd0a, and with
  raidctl -A root partitions, it will change root as well.

sys/dev/pckbc/wskbdmap_mfii.c.			1.20

  Cause the ``delete'' key to actually send <DEL> like it used to
  (and still does with pccons) rather than <ESC>[3~.

usr.sbin/grfconfig/grfconfig.c			1.10

  Fix parameter file checking.  Fixes PR#11865.

usr.sbin/apmd/apmd.c				1.17

  Be more picky about running /etc/apm/{battery,line} in response
  to APM_POWER_CHANGE event.  Some BIOSes post this event periodically
  while the battery is charging/discharging, even though there's
  no change in a/c state.  Thus, track a/c state, and only run the
  scripts when a/c state actually changes.

share/misc/bsd-family-tree			1.7

  Keep in sync with current reality.  Include up-to-date information
  about NetBSD-1.5, BSD/386, BSD/OS and other BSDs.

sys/kern/uipc_socket.c				1.52

  Prevent bogus data from being returned from the kernel on accept(2)
  in case the peer already have disconnected.  Partial fix for
  PR#12027 and PR#10698.

sys/dev/raidframe/rf_copyback.c			1.15
sys/dev/raidframe/rf_reconstruct.c		1.27

  Make sure we update the ``partitionSize'' field of the component
  labels when doing a reconstruct or copyback, instead of leaving
  behind possibly uninitialized junk, which could cause autoconfig
  failure on reboot.

distrib/i386/floppies/ramdisk-rescuesmall/ramdiskbin.conf	1.2
distrib/i386/floppies/ramdisk-small/ramdiskbin.conf	1.3 via patch
distrib/i386/floppies/ramdisk-small/Makefile	patch

  Squeeze so these fit again:
   o Replace less(1) with more(1)
   o Reduce number of inodes

usr.bin/time/time.1				1.9-1.12

  Note that ``time'' is also a builtin in ksh, and document rusage
  information.  Fixes PR#11975.  Also use "EXIT STATUS" instead of
  "DIAGNOSTICS".

usr.sbin/wsfontload/wsfontload.8		1.11
usr.sbin/wsfontload/wsfontload.c		1.5

  Improve error messages by printing device name.  Add -v switch
  to wsfontload to dump stats on fonts before loading.

sys/sys/exec.h					1.77

  Correct macro expansions of NEW_VMCMD and NEW_VMCMD2 (under DEBUG)
  to not contain ``;'' at the end.

sys/compat/pecoff/pecoff_exec.c			1.8

  Add support to mmap .bss section, using vmcmd_map_pagedvn if
  possible.

usr.bin/file/magdir/netbsd			1.15

  Fix arm32 confusion.

distrib/sparc64/ramdisk/Makefile		deleted
distrib/sparc64/ramdisk/list.m4			deleted
distrib/sparc64/ramdisk/disktab			deleted
distrib/sparc64/ramdisk/disktab.preinstall	deleted
distrib/sparc64/ramdisk/termcap.mini		deleted
distrib/sparc64/ramdisk/dot.profile.m4		deleted
distrib/sparc64/ramdisk/mtree.conf		deleted
distrib/sparc64/ramdisk/ramdiskbin.m4		deleted
distrib/sparc64/ramdisk/dist/base_obsolete	deleted
distrib/sparc64/ramdisk/dist/comp_obsolete	deleted
distrib/sparc64/ramdisk/dist/games_obsolete	deleted
distrib/sparc64/ramdisk/dist/man_obsolete	deleted
distrib/sparc64/ramdisk/dist/misc_obsolete	deleted
distrib/sparc64/ramdisk/dist/secr_obsolete	deleted
distrib/sparc64/ramdisk/dist/xbase_obsolete	deleted
distrib/sparc64/ramdisk/dist/xserver_obsolete	deleted
distrib/sparc64/xminiroot/Makefile		1.1-1.2 (new)
distrib/sparc64/xminiroot/disktab		1.1 (new)
distrib/sparc64/xminiroot/disktab.preinstall	1.1 (new)
distrib/sparc64/xminiroot/dot.profile.m4	1.1 (new)
distrib/sparc64/xminiroot/list.m4		1.1 (new)
distrib/sparc64/xminiroot/mtree.conf		1.1 (new)
distrib/sparc64/xminiroot/ramdiskbin.m4		1.1 (new)
distrib/sparc64/xminiroot/termcap.mini		1.1 (new)
distrib/sparc64/xminiroot/dist/base_obsolete	1.1 (new)
distrib/sparc64/xminiroot/dist/comp_obsolete	1.1 (new)
distrib/sparc64/xminiroot/dist/games_obsolete	1.1 (new)
distrib/sparc64/xminiroot/dist/man_obsolete	1.1 (new)
distrib/sparc64/xminiroot/dist/misc_obsolete	1.1 (new)
distrib/sparc64/xminiroot/dist/secr_obsolete	1.1 (new)
distrib/sparc64/xminiroot/dist/xbase_obsolete	1.1 (new)
distrib/sparc64/xminiroot/dist/xserver_obsolete	1.1 (new)
etc/etc.sparc64/Makefile.inc			1.5
distrib/sparc64/Makefile			1.2

  Rename sparc64 ``ramdisk'' to ``xminiroot'' to avoid confusion
  about what it actually does.

usr.sbin/mailwrapper/mailwrapper.c		1.4

  Add forgottern addarg(&al, NULL, 0) before execve() to prevent
  coredump.

lib/libkvm/kvm.c				1.69

  Add forgotten initialization.  Fixes PR#11446.

sys/arch/pmax/pmax/dec_3100.c			1.31

  Distinguish between PMIN and PMAX in boot message.

libexec/lfs_cleanerd/cleanerd.c			1.23
libexec/lfs_cleanerd/library.c			1.17

  Plug memory leak in lfs_cleanerd.  Fixes PR#11094.

usr.sbin/rarpd/rarpd.c				1.40

  Diagnostic message was the wrong way round.  Fixes PR#11330.

usr.sbin/pwd_mkdb/pwd_mkdb.c			1.21

  Use empty string as default prefix so that e.g. ``/etc/spwd.db''
  is used instead of ``//etc/spwd.db''.

bin/dd/dd.c					1.18-1.19

  Accept the getopt(3) ``last option'' delimiter.  Fixes PR#11229.

usr.bin/patch/patch.1				1.5
usr.bin/patch/patch.c				1.8

  Support the 1003.2-92 -i option.   Fixes PR#11221.

usr.bin/at/Makefile				1.7
usr.bin/at/at.1					1.13
usr.bin/at/at.c					1.18
usr.bin/at/panic.c				1.9
usr.bin/at/stime.c				1.1 (new)
usr.bin/at/stime.h				1.1 (new)

  Support the 1003.2-92 -t option.  Fixes PR#11205.
  For symmetry, extend -t to batch(1) as well.

libexec/tftpd/tftpd.c				1.20-1.21

  Handle getnameinfo error properly.
  Make sure not to overrun packet buffer with error message string.

usr.bin/tftp/main.c				1.13

  Make sure we do not overrun peeraddr.

usr.sbin/wiconfig/wiconfig.c			1.10

  Cast isprint() parameter to (unsigned char) - it looses if the
  character has high bit set when the architecture is using signed
  char by default.  Fixes PR#11556.

sys/ufs/lfs/lfs.h				1.33-1.35
sys/ufs/lfs/lfs_balloc.c			1.26-1.27
sys/ufs/lfs/lfs_bio.c				1.31-1.32
sys/ufs/lfs/lfs_extern.h			1.22
sys/ufs/lfs/lfs_inode.c				1.46-1.47 via patch
sys/ufs/lfs/lfs_segment.c			1.60-1.62
sys/ufs/lfs/lfs_syscalls.c			1.50,1.52-1.53
sys/ufs/lfs/lfs_vfsops.c			1.59
sys/ufs/lfs/lfs_vnops.c				1.47-1.49
sbin/newfs_lfs/lfs.c				1.19,1.21
sbin/fsck_lfs/main.c				1.7
sbin/fsck_lfs/pass5.c				1.7-1.8
sbin/mount_lfs/mount_lfs.c			1.12 via patch
libexec/lfs_cleanerd/Makefile			1.7
libexec/lfs_cleanerd/cleanerd.c			1.24-1.27
usr.sbin/dumplfs/dumplfs.c			1.17

  Major LFS pullup:
  o Don't write anything if the filesystem is idle (PR#10979).
  o Allow the user to specify a 0% free space threshold at fs
    creation time with "newfs_lfs -m 0" (PR#11112).
  o Add compatibility option "-f" to fsck_lfs (PR#11129).
  o Don't spawn more cleaners when using "mount -u", unless
    upgrading from r/o to r/w; when downgrading, kill the cleaner.
  o Close up accounting holes in LFS' accounting of immediately-
    available-space, number of clean segments, and amount of dirty
    space taken up by metadata (PR#11468, PR#11470, PR#11534).
  o Fix locking and reference leaks in lfs_markv, on error (PR#11547).
  o Initialize cleaner info from superblock, making fsck_lfs'
    accounting of lfs_nclean work.    
  o Don't clean the same segment twice.
  o Make dumplfs report lfs_nclean and lfs_dmeta.
  o Make fsck_lfs report and fix lfs_nclean and lfs_dmete
    inconsistencies.

usr.sbin/amd/amd/Makefile			1.17
usr.sbin/amd/amd/amd.conf.5			1.1 (new)

  Add amd.conf.5 from dist/am-utils/scripts here, and install it.
  Fixes PR#5051, PR#7524, PR#8999, PR#10814.
