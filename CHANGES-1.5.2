#	$NetBSD: CHANGES-1.5.2,v 1.1.2.20 2001/08/16 17:22:29 tv Exp $

A complete list of changes from NetBSD 1.5.1 to NetBSD 1.5.2:

File						Revision(s)
----						--------

sys/sys/param.h					patch
sys/conf/osrelease.sh				patch
share/tmac/doc-common				patch

  Mark this release as 1.5.2_ALPHA.

libexec/telnetd/authenc.c			1.8
libexec/telnetd/termstat.c			1.8
libexec/telnetd/ext.h				1.13
libexec/telnetd/state.c				1.17 via patch
libexec/telnetd/sys_term.c			1.23 via patch
libexec/telnetd/telnetd.c			1.26
libexec/telnetd/telnetd.h			1.7
libexec/telnetd/utility.c			1.18 via patch

  Security-related fixups for telnet
    Bound-check all "*nfrontp++" code.  From OpenBSD and Heimdal.
    Complain if file descriptor goes above FD_SETSIZE.  From OpenBSD.

crypto/dist/openssl/crypto/rand/md_rand.c	1.2

  Fix a pseudo-random number generator weakness. Noted on bugtraq.

sys/arch/i386/include/reg.h			1.16

  Redefine register offsets using offsetof().  Fixes math emulation
  lossage.

etc/services					1.44,1.47-1.50

  Rename old BSD ``kpasswd'' to ``kpwd'', add ``ripng'', ``sstp'',
  and AFS services.  Fixes PR#11139.

distrib/notes/macppc/hardware			1.17
distrib/notes/macppc/install			1.15
distrib/notes/macppc/prep			1.20
distrib/notes/macppc/whatis			1.4
distrib/notes/common/main			1.132

  Clarify explanations and add additional deail about known problems
  with two models.

distrib/utils/sysinst/Makefile.inc		1.10

  Add dependency for menu files on osrelease.sh.

dist/ipf/fils.c					1.11
usr.sbin/ipf/ipfstat/Makefile			1.14
usr.sbin/ipf/Makefile.inc			1.8

  Enable ``top''-like running state display in ``ipfstat''.
  Fixes PR#13404.

share/misc/bsd-family-tree			1.8-1.9

  Update to state after NetBSD-1.5.1.

sys/kern/kern_proc.c				1.44

  When freeing a session, remove the reference to it from the
  associated tty.

distrib/notes/macppc/hardware			1.18-1.19

  Add ``iMac (Summer 2000)'' (confirmed working); correct D-Link
  DFE-530TX driver reference.

sbin/route/route.c				1.46

  Make sure decoded output from ``route monitor'' gets properly
  flushed.

sys/net/if_spppsubr.c				1.24

  Fix bug causing NCP bit mask to get out of sync.  Fixes PR#11161.

sys/dev/pci/pciide.c				1.120

  Workaround for buggy OPTi pciide chipset revisions, as reported
  in PR#11644.

sys/kern/kern_descrip.c				1.80 via patch

  Unshare the file descriptor table and ``cwdinfo'' when we exec.

sys/kern/kern_sig.c				1.115 via patch

  Unshare signal actions on exec.

sys/dev/pci/cs4281.c				patch
sys/dev/pci/yds.c				patch

  Correct argument to pci_intr_map().  Fixes PR#13508.

etc/defaults/daily.conf				1.2
etc/defaults/monthly.conf			1.2
etc/defaults/rc.conf				1.2
etc/defaults/security.conf			1.2
etc/defaults/weekly.conf			1.2

  Remind people to edit /etc/*.conf instead of /etc/defaults/*.conf.

distrib/utils/init_s/Makefile			patch
distrib/utils/libhack/Makefile			patch
distrib/utils/libhack/Makefile.inc		patch
distrib/utils/more/Makefile			patch
distrib/utils/ssh/Makefile			patch
distrib/utils/tls/Makefile			patch
distrib/utils/x_dd/Makefile			patch
distrib/utils/x_dmesg/Makefile			patch
distrib/utils/x_ftp/Makefile			patch
distrib/utils/x_gzip/Makefile			patch
distrib/utils/x_ifconfig/Makefile		patch
distrib/utils/x_netstat/Makefile		patch
distrib/utils/x_ping/Makefile			patch
distrib/utils/x_ping6/Makefile			patch
distrib/utils/x_route/Makefile			patch
distrib/utils/x_sh/Makefile			patch
distrib/utils/x_umount/Makefile			patch
distrib/utils/zcat/Makefile			patch

  Drop ``-Os'' on sparc64 due to toolchain issues.

distrib/amiga/miniroot/install.md		1.15

  Workaround for the changed ``mount'' behaviour, which no longer
  defaults to ``ffs'' in certain circumstances.

sys/kern/kern_sig.c				patch

  Typo correction.

sys/arch/i386/include/frame.h			1.14

  Protect against multiple inclusion.

distrib/i386/floppies/ramdisk-rescuetiny/Makefile	patch
sys/arch/i386/conf/INSTALL_TINY			patch

  Bump size of INSTALL_TINY ramdisk image and the rescuetiny
  image to accommodate increased size.

distrib/i386/floppies/ramdisk-big/Makefile	patch
distrib/i386/floppies/ramdisk-big/list		patch
distrib/i386/floppies/ramdisk-big/ramdiskbin.conf	patch

  Add restore / rrestore to this image, so that PCI-only machines
  can have a chance at being restored.

distrib/utils/sysinst/arch/i386/md.h		patch

  The ``base'' i386 set grew one more split fragment.

sbin/dump/optr.c				1.18 via patch
sbin/dump/main.c				1.37 via patch

  Temporarily drop setgid (for setgid tty) privileges, but restore them
  if we fork to perform an operator notification. Generalize pre-existing
  #ifdef RDUMP code.

sys/arch/mips/mips/locore_mips3.S		1.70
sys/arch/mips/mips/vm_machdep.c			1.77-1.78

  Fix bugs in handling of SR on mips3 machines, causing TLB miss panics.

sys/dev/ic/pckbc.c				1.6-1.8

  Change the way the aux port is probed for. Some older chipsets w/o
  mouse port seem to interpret the "test aux port" (0xa9) command differently,
  leading to a non-working keyboard.

sys/kern/sysv_sem.c				1.41

  Make local variable "nsops" the same (unsigned) type as its syscall arg.

sys/ufs/lfs/lfs_syscalls.c			1.58 via patch

  Constrain "cnt" of lfs_markv() syscall to 64KB.

sys/coda/coda_venus.c				1.9

  Bounds check vi.in_size in venus_ioctl().

sys/miscfs/umapfs/umap_vfsops.c			1.29-1.30
sys/kern/vfs_subr.c				1.156
sys/nfs/nfs.h					1.30

  Bounds check mount args.

sys/dev/ccd.c					1.73
sys/dev/ccdvar.h				1.20

  Provide hard limit on the number of concatenated disks, and bounds
  check against that limit.

sys/dev/wscons/wsdisplay.c			1.52
sys/dev/wscons/wskbd.c				1.42
sys/dev/wscons/wsconsio.h			1.40

  Introduce hard limits on wscons font size and keymap size, and
  bounds check against those limits.

sys/arch/amiga/dev/grf_cl.c			1.26
sys/arch/amiga/dev/grfioctl.h			1.14
sys/arch/hpcmips/dev/plumvideo.c		1.20
sys/arch/macppc/dev/ofb.c			1.25
sys/arch/sparc/dev/cgtwo.c			1.35
sys/arch/sparc/include/fbio.h			patch
sys/arch/sparc64/include/fbio.h			patch
sys/arch/sun3/dev/cg2.c				1.14
sys/arch/sun3/include/fbio.h			patch
sys/dev/pci/tga.c				1.35
sys/dev/tc/cfb.c				1.28
sys/dev/tc/mfb.c				1.27
sys/dev/tc/sfb.c				1.46
sys/dev/tc/sfbplus.c				1.10 via patch
sys/dev/tc/tfb.c				1.30
sys/dev/tc/xcfb.c				1.23
sys/net/if_ppp.c				1.71

  Use unsigned variable types to make bounds checking more correct.

sbin/disklabel/disklabel.c			1.97

  Make disklabel viewing work on platforms that use MBR, for devices
  without a valid MBR (such as CD-ROMs).

share/man/man9/lock.9				1.4-1.8

  Correct several semantic and descriptive errors.

libexec/telnetd/termstat.c			1.9-1.10

  Add missing parentheses; fixes PR bin/13612.

distrib/notes/common/main			patch
distrib/notes/common/sysinst			patch
distrib/notes/macppc/install			patch

  Update versions to 1.5.2, leaving some references to 1.5.1 (as
  1.5.2 is released as a rapid bug-fix release relative to 1.5.1).
