.\"	$NetBSD: upgrade,v 1.5.10.1 2000/11/01 03:47:55 tv Exp $
.\"
.\" Copyright (c) 1999, 2000 The NetBSD Foundation, Inc.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"        This product includes software developed by the NetBSD
.\"        Foundation, Inc. and its contributors.
.\" 4. Neither the name of The NetBSD Foundation nor the names of its
.\"    contributors may be used to endorse or promote products derived
.\"    from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
.\" ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
.\" TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
.\" BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
.\" CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
.\" ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
Before updating, you probably would want to backup your original
file systems!
.Pp
The update procedure will not overwrite or remove any files not present
in the sets you install. If you've replaced programs present in the
distribution, you have to replace them again after you did the update.
The etc-set needs special caution. You generally don't want to install
this one when upgrading. It is recommended that you get a copy of this
set and
.Em carefully
upgrade your configuration files by hand.
.(enum
Starting the upgrade
.Pp
Ok, let's go. Insert the bootfloppy and follow the
.Sq normal
installation procedure until it asks you if you wish to install or
upgrade. At this time, select upgrade.
You will now be greeted and reminded of the fact that this is a
potential dangerous procedure and that you should not upgrade the
etc-set.
.It
Selecting your root disk
.Pp
When you decide to proceed, you will be prompted to enter
your root disk. After you've done this, it will be checked
automatically to make sure that the file system is in a sane
state before making any modifications. After this is done,
you will be asked if you want to configure your network. You
can skip this section on
.Nx*M
for now.
.It
Editing the fstab
.Pp
You are now allowed to edit your fstab. Normally you don't have
to. Note that the upgrade-kit uses it's own copy of the fstab.
Whatever you do here *won't* affect your actual fstab.
After you are satisfied with your fstab, the upgrade-kit will check
all file systems mentioned in it. When they're ok, they will be
mounted.
.It
The actual upgrade
.Pp
You will now be asked if your sets are stored on a normally
mounted file system. You should answer
.Sq Ic y
to this question if
you have the sets stored on a file system that was present in
the fstab. The actions you should take for the set extraction
are pretty logical (we think). You might want to read the notes
in section 9 (Installing the distribution sets) of the
installation section.
.It
Finishing up
.Pp
After you have extracted the sets, the upgrade kit will proceed
with setting the timezone and installing the kernel and bootcode.
This is all exactly the same as described in the installation
section.
.enum)
