.\"	$NetBSD: prep,v 1.5.8.2 2000/11/02 23:30:29 tv Exp $
.
\*M machines usually need little or no preparation before installing
.Nx ,
other than the usual, well advised precaution of
.Em backing up all data
on any attached storage devices.
.Pp
The exception to the above is that
.Tn MVME162-LX
and
.Tn MVME167
boards require a jumper to be removed before
.Nx
can be installed.
On
.Tn MVME162-LX
pins 1-2 of jumper J11
.Em must
be removed.
On
.Tn MVME167
pins 1-2 of jumper J1
.Em must
be removed.
.Pp
Once you've made any necessary jumper changes,
the following instructions should make your machine
.Dq NetBSD Ready .
.Pp
Power-up your MVME147 board. You should have the
.Em bug No prompt:
.(disp
COLD Start

Onboard  RAM start = $00000000,  stop = $007FFFFF

147-Bug\*>
.disp)
.Pp
Or, if you have an MVME162-LX or MVME167 board (the following boot
message is from MVME167; MVME162-LX is similar):
.(disp
MVME167 Debugger/Diagnostics Release Version 2.3 - 02/25/94
COLD Start

Local Memory Found =02000000 (&33554432)

MPU Clock Speed =33Mhz

167-Bug\*>
.disp)
.Pp
Make sure the RAM size looks ok (if you've got an 8 MB MVME147 or a
32 MB MVME167 you should
have the same value as we do). Also make sure the clock is ticking:
.Pp
.Dl 1xx-Bug\*> Ns Ic time
.Dl Sunday   12/21/31   16:25:14
.Dl 1xx-Bug\*> Ns Ic time
.Dl Sunday   12/21/31   16:25:15
.Dl 1xx-Bug\*>
.Pp
Note that
.Nx
bases its year at 1968, and adds the year offset in
the system's real-time clock to get the current year. So the
.Li 31
here
equates to 1999. You may have to adjust your clock using the
.Ic set
command to comply with
.Nx "" 's
requirements. Don't worry if the
.Sq Day of the week
is not correct, as
.Nx
doesn't use it.
Motorola has acknowledged a year 2000 bug in some versions of the MVME147
whereby the day of the week
doesn't get set correctly by the 147Bug PROM.
.Em \It does not affect
.Nx "" !
.Pp
Also make sure that your board's ethernet address is initialised to
the correct value. You'll find the address on a label on the inside of
the MVME147's front panel, and on the VMEbus P2 connector of the MVME162-LX
and MVME167.
On the MVME147, enter the last five digits of the address
using the
.Ic lsad
command. On the MVME162-LX and MVME167, you should use the
.Ic cnfg
command.
.Pp
To install successfully to a local SCSI disk, you need to ensure that
the system is aware of what targets are connected to the SCSI bus. This
can be done by issueing the following command:
.Pp
.Dl 1xx-Bug\*> Ic iot;t
.Pp
At this point, Bug will scan for any attached SCSI devices. After
a short delay, a list of SCSI devices will be displayed. 147Bug will
ask if LUNs should be assigned from SCSI ids, to which you should
answer Y. You should also answer Y when asked if the information is
to be saved to NVRAM. 16xBug does not prompt for this information.
.Pp
The following installation instructions will assume that your target
SCSI disk drive appears at SCSI-ID 0. If you have a tape drive, the
instructions assume is is configured for SCSI-ID 5. When the RAMDISK
root boots,
.Nx
will refer to these devices as
.Li sd0
and
.Li rst0
respectively. You may wish to note these down; you'll be using them
a lot. :-)
