File						Version(s)
----						--------

XXX changes before cgd started???		XXX

sbin/swapctl/swaplist.c				patch

  Test correct return value.  (mrg)

include/ctype.h					1.16

  Cast the argument of ctype macros to (int) to fix behaviour on
  unsigned char machines.  (tv)

distrib/notes/amiga/prep			1.16

  Add a warning to reinstall miniroot.fs before retrying installation.  (is)

libexec/ld.elf_so/rtld.c			1.7

  Don't forget to update _rtld_objtail when _rtld_dlclose() removes
  the current tail entry.  (mhitch)

etc/etc.pmax/MAKEDEV				1.22

  PMAX SCSI drivers support rz5, rz6, rz7 [on DS3100], rz13, and rz14.
  MAKEDEV needs to be able to create those devices, and to include
  them in 'all'.  (mhitch)

lib/libc/arch/mips/sys/cerror.S			1.6

  Explicilty reload the mips-ABIcall GOT/$gp in cerror().  cerror()
  gets called from outside libc (e.g., from libposix's rename(), and
  if we don't load $t9, cerror() makes wild references using the
  libposix $gp and coredumps.  (jonathan)

usr.sbin/inetd/inetd.c				1.43

  From "buqtraq": avoid file descriptor leak if service is looping.
  (tron)

usr.sbin/pkg_install/add/perform.c		1.20

  Fix broken package dependence handling mentioned by Brook Milligan on
  tech-pkg@netbsd.org.  (tron)

gnu/usr.bin/cpio/Makefile			1.6

  Add -DHAVE_LCHOWN=1 to CPPFLAGS to ensure that owner/group of
  symlinks are properly keept. Closes PR#5595.  (frueauf)

lib/libc/stdio/fseek.3				1.10-1.11

  Fix typo (PR#6053), and make return value description match XSH5.  (kleink)

include/time.h					1.22

  Remove the public declaration of gtime(), which is shipped with
  tzcode but is not compiled into our libc since it is intended for
  use with Mach only.  (kleink)

sys/dev/ic/z8530tty.c				1.49-1.50

  Initialize the struct tty's t_dev field at attach, so that the
  console parameters are correctly set even if the console is not
  zstty0.  (wrstuden)

sys/arch/amiga/amiga/locore.s			patch

  Fix catastrophic typo. DraCos rev. 3 (or older) would crash on
  exiting from the first timer interupt.  (is)

sys/dev/scsipi/scsi_tape.h			1.15
	       st.c				1.98 (patch)

  Fix incorrect length of LOCATE CDB (PR#5306).  (drochner)

sys/compat/freebsd/freebsd_misc.c		1.4
		       syscalls.master		1.16
		       freebsd_syscall.h	regen
		       freebsd_syscallargs.h	regen
		       freebsd_syscalls.c	regen
		       freebsd_sysent.c		regen

  Implement FreeBSD issetugid().  (tv)

sys/kern/kern_subr.c				1.35 (patch)

  Remove rounding-down of hash size in hashinit(); support non &hashmask
  hash func tions such as % [prime number] without bletcherous hacks.  (tls)

sys/netinet/if_arp.c				1.43-1.45, 1.47-1.49, 1.52
sys/netinet/igmp.c				1.18
sys/netinet/in.c				1.38-1.39, 1.45 (patch)
sys/netinet/in_pcb.c				1.49-1.50, 1.53 (patch)
sys/netinet/in_var.h				1.21-1.22, 1.27, 1.29-1.30,
						1.31 (patch)
sys/netinet/ip_icmp.c				1.27-1.28, 1.30
sys/netinet/ip_input.c				1.57-1.58 (patch), 1.71 (patch)
sys/netinet/ip_output.c				1.44-1.45, 1.51 (patch)

  Change list of interface IP addresses to a hash.  Improves performance
  on hosts with a large number of IP addresses significantly.  (tls)

sys/netinet/tcp_fsm.h				1.9-1.10

  Back out the change from TCP/IP vol 2, in revision 1.7, which removed
  TH_FIN from the output flags for CLOSING state.  Fix TCPS_HAVERCVDFIN()
  to actually catch all TCP states in which a FIN has been received
  (CLOSE_WAIT, CLOSING, LAST_ACK, and TIME_WAIT).  (mycroft)

sys/arch/amiga/include/vmparam.h		1.20

  Workaround for pmap bugs. Several reports on the port-amiga list claim
  this helps with some big-machine situations. (is)

sys/arch/amiga/amiga/machdep.c			patch

  Fix execution of SunOS binaries by reverting a patch mistakenly
  included in 1.3.1 (PR#5782).  (is)

usr.sbin/rarpd/mkarp.c				1.2

  Set the length of arp entries, so that the kernel accepts them
  (PR#4835).  (christos)

distrib/utils/sysinst/arch/i386/fdisk.c		patch

  Eliminates a gratious call to fdisk to initialize the mbr.
  If the mbr already contained valid code and a partition table,
  these were overridden by this fdisk call.  If the mbr wasn't
  valid yet, fdisk would initialize the code and partition table
  anyway the first time it writes anything to the disk, and fdisk
  will be called at least once in any case, to set the active
  partition.  (ws)

sys/arch/i386/i386/disksubr.c			patch
sys/arch/i386/include/disklabel.h		patch

  Recognize DOS FAT32 and Linux ext2fs partitions in the default
  disklabel so that users get them automatically when creating a
  new disklabel and can mount them from a disk that contains no
  NetBSD partition.  (fvdl)

distrib/sets/lists/base/md.x68k			patch
distrib/sets/lists/comp/md.x68k			1.18

  Fix lists to include previously-missed files.  (minoura)

etc/etc.x68k/MAKEDEV				1.17

  Fix things so that kernels containing ramdisks can be
  made correctly.  (minoura)

sys/arch/x68k/conf/ALL				patch
sys/arch/x68k/conf/GENERIC			patch
sys/arch/x68k/conf/INSTALL			patch
sys/arch/x68k/include/vmparam.h			patch
sys/arch/x68k/x68k/machdep.c			patch
sys/arch/x68k/x68k/pmap_bootstrap.c		patch

  Work around broken extended memory detection, by specifying
  its start and size by hand.  (minoura)

sys/arch/x68k/conf/INSTALL			patch

  Enable MSDOSFS so that installation from a DOS-formatted
  removable disk is possible.  (minoura)

sys/arch/x68k/dev/grf.c				patch
sys/arch/x68k/dev/ite.c				patch

  Fixed possible stray pointer access.  (minoura)

sys/arch/x68k/dev/mha.c				1.4 (patch)

  Correctly set XS_BUSY error code at device busy.  In
  addition, change DMA transfer mode according to the model,
  so that it runs on more models of x68k.  (minoura)

sys/arch/x68k/dev/spc.c				1.14 (patch)

  Correctly sets XS_BUSY error code at device busy.  (minoura)

sys/arch/x68k/x68k/locore.s			patch
sys/arch/x68k/x68k/vectors.s			1.3

  Move vectors to the data segment, so they can be overwritten
  on '060 systems.  (minoura)

sys/arch/x68k/stand/Makefile			patch
sys/arch/x68k/stand/writefdboot			patch

  Fix bugs in the installation and operation of
  'writefdboot.'  (minoura)

share/man/man4/options.4			1.62

  Fix typo: SHMPAXPGS -> SHMMAXPGS (PR#6178).  (frueauf)

bin/pax/tar.c					1.12

  Fix a bug in restoring files with path names >100
  characters.  (mycroft)

sys/arch/i386/include/cputypes.h		1.11
sys/arch/i386/i386/machdep.c			1.329

  Add the IDT WinChip C6 to the cpu types table.  (bad)

sys/arch/i386/include/segments.h		1.29
sys/arch/i386/i386/machdep.c			patch

  Set up new system call gate used by Solaris 2.6.  (christos)

sbin/newfs/newfs.c				1.36

  Fix a performance problem with 4KB/512B file systems.  (mycroft)

usr.bin/at/Makefile				1.3
usr.bin/at/at.1					1.8
usr.bin/at/at.c					1.8-1.12
usr.bin/at/at.h					1.3
usr.bin/at/panic.c				1.5
usr.bin/at/panic.h				1.3
usr.bin/at/parsetime.c				1.6-1.7
usr.bin/at/parsetime.h				1.3
usr.bin/at/pathnames.h				1.4
usr.bin/at/perm.c				1.1 (new)
usr.bin/at/perm.h				1.1 (new)
usr.bin/at/privs.h				1.4
libexec/atrun/atrun.8				1.7-1.8
libexec/atrun/atrun.c				1.5
libexec/atrun/atrun.h				1.4

  Fix several bugs (some of which are security related), and implement
  some new features (e.g. at.allow and at.deny files).  (mrg)

distrib/x68k/floppies/Makefile.inc		1.7 (patch)
distrib/x68k/floppies/bootfloppy/Makefile	1.2
distrib/x68k/floppies/bootfloppy-common/Makefile.inc
						1.4-1.5
distrib/x68k/floppies/ramdisk/dot.hdprofile	1.3
distrib/x68k/floppies/ramdisk/dot.profile	1.3
distrib/x68k/floppies/ramdisk/install.tmpl	1.2-1.3
distrib/x68k/floppies/ramdisk/list		1.2
distrib/x68k/floppies/ramdisk/ramdiskbin.conf	1.2
distrib/x68k/floppies/ramdisk/upgrade.tmpl	1.2 (patch)

  Fix various bugs in x68k installation script and distribution
  floppy build process.  (minoura)

sys/arch/pmax/dev/tz.c				1.16-1.18

  Suport TZ30 by recognizing it and setting the TK50 flag,
  and support a WangTek QIC-150 model by setting the Viper
  150 flag.  (jonathan)

sys/vm/vm_map.h					1.21 (patch)
sys/conf/param.c				1.25
sys/sys/param.h					1.53

  Change MAX_KMAPENT to be computed from NPROC (with a lower
  bound), to avoid panics on heavily used servers due to
  running out of kernel map entries (PR#6293).  (jonathan)

gnu/usr.bin/gcc/arch/mips/netbsd.h		1.8

  Add -D__ELF__ to CPP predefines for mips, which indirectly
  causes PR#3539 to be fixed.  (jonathan)

sys/arch/pmax/pmax/conf.c			patch

  Add two missing NODEV entries (93 and 94) in the pmax
  chrtoblktbl.  (jonathan)

sys/arch/i386/i386/machdep.c			patch

  Correct panic message in _bus_dmamap_load_mbuf (PR#6226).  (frueauf)

sbin/routed/input.c				1.23

  Disable and log RIP_TRACEON and RIP_TRACEOFF.  They are
  insecure.  (christos)

usr.sbin/named/named/ns_req.c			1.8

  Prevent CH TXT version.bind information leakage.  (lukem)

usr.sbin/named/ndc/ndc.sh			1.4

  Read in 'named_flags' from /etc/rc.conf, to be used when
  restarting named.  (lukem)

usr.sbin/named/nslookup/main.c			1.4
usr.sbin/named/nslookup/res.h			1.4

  Fix a buffer overflow.  (lukem)

sys/netinet/ip_output.c				1.53

  Fix a bug when looking up an interface for multicast: zero
  out the routing structure before calling the route lookup
  code in order to correctly match addresses.  (ws)

sys/dev/isa/if_ec.c				1.10
sys/dev/isa/if_we.c				1.12

  Fill in the "init_card" entry points so that media selection
  can work.  (thorpej)

sys/kern/vfs_bio.c				1.57

  Fix potential file corruption problems with clustering
  (PR#6332).  (mycroft)

usr.bin/Makefile				1.89 (patch)
usr.bin/fdformat/Makefile			1.2
distrib/sets/lists/man/mi			1.95
distrib/sets/lists/man/md.arm32			patch
distrib/sets/lists/man/md.atari			patch
distrib/sets/lists/man/md.i386			patch
distrib/sets/lists/man/md.sparc			patch

  Build and install fdformat manual pages on all ports, so
  the manual pages really can be shared.  (jonathan)

distrib/notes/pmax/install			patch

  Fix various small typos.  (simonb)

sys/arch/pmax/dev/dtop.c			1.34

  Make handler FSM robust enough to not lose its place after data
  overrun.  Stops keyboard from going catatonic.  (jonathan)

gnu/usr.bin/ld/ld/ld.c				1.51-1.53
gnu/usr.bin/ld/ld/ld.1				1.13-1.16

  Add emulation of binutils 2.x ld options (-rpath dir,
  -shared, -soname, --whole-archive, --no-whole-archive,
  --export-dynamic) for compatibility with ELF ports and
  to aid migration to bintils.  (jonathan)

sys/arch/atari/dev/atari5380.c			1.29

  Disable SCSI interrupts while polling for the transfer to
  finish.  This fixes spurious panics while some Hades systems.
  This bug could also occur on a TT030.  (leo)

sys/arch/atari/dev/grfabs_et.c			1.8-1.9

  Let et4000 work with other RAMDAC than STG1703.  Use NOWAIT when
  malloc()-ing a buffer for switching screens. It might be running
  from an interrupt handler.  (leo)

sys/arch/atari/dev/grfabs_fal.c			1.11

  Fix a bug in the colormap handling.  (leo)

sys/arch/atari/stand/bootxx/bootxx.c		1.3

  Accept an 68060 as cpu type.  (leo)

sys/arch/pmax/tc/scc.c				patch

  Fix a problem preventing kernels from being built with no
  frame buffer or rconsole devices.  (mrg)

libexec/ld.elf_so/link.h			1.3
gnu/dist/gdb/solib.c				1.6

  Fix gdb shared-lib handling on mips.  (gdb expects link.h,
  if it exists, to include certain symbols from elf_machdep.h.
  Also, work around non-relocation and misfeatures in mips ELF
  to avoid heuristic fencepost errors.)  (jonathan)


NOT YET PULLED UP (expecting patches):

sys/arch/i386/i386/trap.c			1.125 (patch)

  Don't corrupt 'edx' register when running under linux emulation
  (PR#6356).  (mycroft)

distrib/sets/lists/base/md.i386			patch
sys/arch/i386/isa/pcvt/Makefile			??? (1.1-1.3 (new)?)
sys/arch/i386/isa/pcvt/Util/Makefile		1.7-1.8
sys/arch/i386/isa/pcvt/Util/Makefile.inc	1.8-1.9 (patch)

  Install pcvt utilities.  (feyrer)
