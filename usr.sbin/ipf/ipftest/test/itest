#!/bin/sh
#
#	$NetBSD: itest,v 1.1.1.1.2.1 1998/07/23 00:43:08 mellon Exp $
#
if [ -f /usr/ucb/touch ] ; then
	TOUCH=/usr/ucb/touch
else
	if [ -f /usr/bin/touch ] ; then
		TOUCH=/usr/bin/touch
	else
		if [ -f /bin/touch ] ; then
			TOUCH=/bin/touch
		fi
	fi
fi

if [ -f ../ipf ] ; then
	IPF=../ipf
else
	if [ -f /usr/sbin/ipf ] ; then
		IPF=/usr/sbin/ipf
	else
		IPF=ipf
	fi
fi

echo "$1...";
/bin/cp /dev/null results/$1
$IPF -nvf regress/$1 2>/dev/null > results/$1
cmp expected/$1 results/$1
status=$?
if [ $status = 0 ] ; then
	$TOUCH $1
fi
exit $status
