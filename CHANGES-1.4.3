#	$NetBSD: CHANGES-1.4.3,v 1.1.2.6 2000/04/30 20:24:11 he Exp $

A complete list of changes from NetBSD 1.4.2 to NetBSD 1.4.3:

File						Revision(s)
----						--------

sys/conf/osrelease.sh				patch

  Bump visible version number to 1.4.2A, to indicate that we're
  no longer exactly at 1.4.2.

sys/ufs/lfs/lfs_vfsops.c			1.37-1.38

  Prevent lfs_mountroot() from attempting to use a network device
  as root.

sys/arch/sparc/dev/zs.c				patch

  Fix a NULL pointer dereference when a zs device interrupts during
  autoconfiguration of subdevices (keyboard & mouse).

usr.sbin/sup/source/scm.c			1.10

  Improve error message when unable to look up local hostname.

gnu/dist/gcc/config/alpha/alpha.c		1.5

  Change ev5/ev56 L1 cache latency from 2 to 3.

usr.bin/lex/flex.skl				1.13-1.14

  Allow C++ lexers to build.  Fixes PR#8258.

sbin/mknod/mknod.8				1.17

  In the example conf.c path, arch-specific directories now
  live under sys/arch, not directly under sys.

libexec/ld.aout_so/rtld.1			1.9-1.10

  Document LD_PRELOAD and note the security restrictions.
  Fixes PR#9663.  Also some spelling fixes.

distrib/notes/Makefile				patch
distrib/notes/Makefile.inc			patch

  Format HTML with latin1 characters.  Add a "release" target to
  install the formatted release notes.

sys/arch/arm32/conf/CATS			patch

  Add vr(4) and ukphy to config.

lib/libc/sys/intro.2				1.20-1.21

  Note that EFAULT can't be guaranteed in e.g. pipe(2); fixes PR#7720.
  Update the description of errno.  Fixes PR#9496.

etc/etc.i386/MAKEDEV				1.85

  Create wd2 and wd3 device nodes also on the floppy images, to allow
  installation on those drives too.

sys/dev/pci/ncr.c				1.87, 1.96-1.97

  Fix script bug in processing QUEUE FULL response (would always
  trigger an assertion failure), and add Quantum Atlas IV drives
  to the quirk table so that they don't use tagged queueing.
  Fixes problems reported in PR#7694.

distrib/notes/common/sysinst			patch

  Clarify the PCMCIA IRQ allocation workaround.  Fixes PR#9568.

usr.bin/du/du.c					1.15

  Include -r flag in usage message.

sys/arch/alpha/alpha/pmap.c			1.130
sys/arch/i386/i386/pmap.new.c			patch (1.85 pmap.c)
sys/arch/mips/mips/pmap.c			1.88
sys/arch/pc532/pc532/pmap.new.c			patch (1.47 pmap.c)
sys/uvm/uvm.h					1.19
sys/uvm/uvm_page.c				1.32

  Use a more reliable method to determine if uvm_page_init() has
  completed.  This fixes a problem observed on some i386 configs
  (typically with lots of memory) where the kernel page table needs
  to grow during initialization.

gnu/dist/gcc/config/alpha/alpha.c		1.6

  Do not enable CIX on ev6/21264, but add an ev67/21264a switch
  that does.  Fixes kernel built with -mcpu=ev6.

distrib/notes/common/sysinst			patch

  More tweaking of the text explaining the PCICMA workaround.  Now
  includes instructions for patching the kernel binary and for
  configuring the corresponding kernel option.

lib/libarch/m68k/m68k_sync_icache.S		1.3 via patch

  Make libm68k work.

share/man/man4/wscons.4				1.11

  Clarify language, fixes PR#9708.

sys/netinet/ip_output.c				1.73

  Pass M_BCAST and M_MCAST flags to fragments.  Fixes PR#9772.

distrib/notes/common/postinstall		1.6 via patch
distrib/notes/common/postinstall		1.7

  Clarify exactly where pkgsrc.tar.gz should be extraced.
  Fixes PR#9580.  Clarify that /usr/pkgsrc is not the One True
  Location, but merely a convention.

share/man/man4/options.4			1.103-1.104 via patch

  Document PCMCIA IO space conflicts and options.  Note use and
  existance of PCIC_ISA_ALLOC_IOBASE and PCIC_ISA_ALLOC_IOSIZE.
  Re-sort references.

share/man/man4/pcmcia.4				1.15 via patch

  Note PCIC_ISA_ALLOC_IOBASE and PCIC_ISA_ALLOC_IOSIZE.
  Fixes PR#9683.

usr.bin/man/man.c				1.17-1.22
usr.bin/man/config.c				1.10
usr.bin/man/man.1				1.9
usr.bin/man/config.h				1.3
usr.bin/man/man.conf.5				1.6-1.7
usr.bin/man/pathnames.h				1.4

  Pull up various changes from the trunk:
   o fix signal handlers to avoid obscure exit codes
   o clean up after SIGPIPE
   o try TMPDIR env variable, fall back to _PATH_TMP
   o fall back to more if PAGER is set but null
   o recognize _crunch in man.conf
   o use uname(3) to determine MACHINE type
   o man page typos fixed.  Document _crunch.

lib/libpcap/pcap.c				1.8
lib/libpcap/savefile.c				1.6

  Fix pcap_dispatch() timeout handling.  Use snprintf, not sprintf.
  This synchronizes with a more recent LBL libpcap.

sys/arch/i386/conf/HOMEWORLD			patch

  Synchronize with config for the new HOMEWORLD machine.

share/man/man8/man8.i386/boot_console.8		1.5

  Remove text asserting that CONSDEV_AUTO and CONSDEV_COM*KBD imply
  COMCONS_KEYPRESS (they don't).

bin/dd/position.c				1.7-1.8

  Correctly lseek() on non-tape character devices (e.g. disks)
  as the manual page documents.

sys/sys/proc.h					1.88 via patch
sys/kern/kern_subr.c				1.62 via patch
sys/kern/kern_synch.c				1.69 via patch
sys/kern/kern_ktrace.c				1.38-1.39 via patch

  Fix two bugs:
   o A malicious or erroneous program can hog the CPU in uiomove()
   o A ktrace of such a program can hog large amounts of kernel memory

sys/conf/osrelease.sh				patch

  Bump version number to 1.4.2B due to modified struct proc.

distrib/notes/common/main			patch

  Add a (for the time being empty) caveats section for 1.4.3.

lib/libskey/skeylogin.c				1.13 via patch

  In skeyverify(), don't restore priority to 0, but to previous
  priority.  Fixes PR#4891.

sys/uvm/uvm_map.c				1.72

  Undo revision 1.13: don't block interrupts while deactivating
  one pmap and activating another, since these only affect user-
  level mappings which cannot be accessed from interrupt context.
  This fixes Sparc zstty overflows reported in PR#8322, since pmap
  operations are slow on old sun4c sparcs.

gnu/dist/gcc/config/alpha/netbsd.h		1.11

  Pass the appropriate directive to the assembler if an -mcpu=...
  option is given to the compiler.

sys/net/if.c					1.62 via patch

  Fix ifa_ifwithnet() for the netatalk case to properly return the
  best match and not the first match.  Makes netatalk work again
  on networks without AppleTalk routers.  Fixes PR#9957.

sys/dev/pci/if_ti.c				1.6-1.7 via patch

  Fix bug which could result in a panic.  Add a shutdown hook to
  stop the board to avoid memory corruption on reboot.  Use bus_space
  for TIGON 2 chips, so that they will work even if we can't map
  the memory space linearly (e.g. on alpha).

sys/msdosfs/fat.h				1.14

  Correct broken "LP64 fix" introduced in last pullup, and better
  explain sense of MSDOSFSEOF() macro.  Fixes PR#9116, PR#9206 and
  part of PR#8037.

sys/msdosfs/msdosfs_vnops.c			1.96

  Avoid integer overflow preventing reading of files >2GB in size.
  Fixes PR#9046.

sys/dev/isa/pas.c				1.47

  Fix bug related to allocation / deallocation of bus_space region
  if map of SB I/O space failed.  Fixes PR#9992.
