# $NetBSD: CHANGES-5.1.3,v 1.1.2.6 2012/03/17 18:46:52 bouyer Exp $

A complete list of changes from the NetBSD 5.1.2 release to the NetBSD 5.1.3
release:

gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 5.1.2_PATCH.
	[snj]

sys/kern/kern_fork.c				1.184 via patch

	fork1: fix stop-on-fork case, lend a correct lock to LWP for
	LSSTOP state.
	Fixes PR/44935.
	[rmind, ticket #1628]

sys/kern/vfs_bio.c				1.233

	sysctl_dobuf: re-acquire the sysctl lock on retry path.  PR/45827.
	[rmind, ticket #1718]

sys/net/route.c					1.126

	Count length from the beginning of the structure not the sa_data
	portion.
	[christos, ticket #1721]

distrib/sets/lists/base/mi			1.988
doc/3RDPARTY					1.920 via patch
share/zoneinfo/antarctica			patch
share/zoneinfo/asia				patch
share/zoneinfo/australasia			patch
share/zoneinfo/europe				patch
share/zoneinfo/leapseconds			patch
share/zoneinfo/northamerica			patch
share/zoneinfo/southamerica			patch
share/zoneinfo/zone.tab				patch

	Update to tzdata2012a.
	[apb, ticket #1733]

doc/3RDPARTY					1.921
share/zoneinfo/northamerica			patch
share/zoneinfo/zone.tab				patch

	Update to tzdata2012b.
	[apb, ticket #1734]

doc/HACKS					1.123 via patch
sys/arch/sparc64/conf/Makefile.sparc64		1.71 via patch
sys/arch/sparc64/conf/files.sparc64		1.138 via patch
sys/arch/sparc64/sparc64/locore.s		1.340 via patch

	Fix the root cause of the hack "disable optimizations for uvm_bio.c
	on 32 bit kernels".

	gcc converts a division in the calculation of UBC_UMAP_ADDR macro
	to multiplication (smul or combination of add/sll), and the
	register of its result contains a garbage in upper 32 bits (the
	upper 32 bits of smul/add/sll's result isn't zero cleared).

	Then it passes to pseg_get{,_real} through pmap_extract without the
	zero clear of upper 32 bits in the optimization case.  So the
	result of pseg_get and pmap_extact sometimes gets screwed up.
	[nakayama, ticket #1736]

