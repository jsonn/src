#	$NetBSD: CHANGES-2.2,v 1.1.2.69 2006/08/28 14:53:48 tron Exp $

A complete list of changes from the NetBSD 2.1 release to the NetBSD 2.2 
release

File						Revision(s)
----						--------
sys/sys/param.h                                 patch
share/tmac/doc-common                           patch
gnu/usr.bin/groff/tmac/mdoc.local               patch

	Welcome to 2.1_STABLE

doc/LAST_MINUTE					patch

	Null out in preparation for 2.2

gnu/libexec/uucp/doc/uucp.texi			1.6
gnu/libexec/uucp/libunix/pipe.c			1.3

	Allow for \H -> "address ..." substitution in PIPE ports. Useful
	e.g. for generic UUCP over SSH or SSL... Idea and part of the patch
	by Joerg Durchain, has apparently been integrated in Debian for a
	while.
	[is, ticket #5825]

sys/dev/raidframe/rf_dagdegwr.c			1.26

	Remove an RF_ASSERT that is just plain wrong.
	[oster, ticket #5878]

doc/README.files				patch

	Note new CHANGES file and fix XXX's for release numbers.

sys/nfs/nfs.h					1.49
sys/nfs/nfs_subs.c				1.152 via patch
sys/nfs/nfs_vfsops.c				1.149 via patch
sys/nfs/nfs_vnops.c				1.227 via patch
sys/nfs/nfsmount.h				1.34
usr.sbin/amd/include/config.h			1.36

	Allow the attribute cache to be turned off, and allow amd
	to do it.
	[christos, ticket #5863]

sys/arch/alpha/conf/GENERIC			1.276

	If we're enabling ipfilter then we should really have IPFILTER_LOG
	[abs, ticket #5893]

sys/dev/ic/wdc.c				patch

	In __wdccommand_start(), don't cann wdcwait() with ata_c->flags, as 
	this gives  information about the context in which wdc_exec_command() 
	was called, but we may be in interrupt context here. Call wdcwait() 
	with flags derived from xfer->c_flags instead, as do other wdcwait() 
	callers. PR#31083
	[bouyer, ticket #5852]

include/sched.h					1.8
lib/libpthread/sched.c				1.4

	Change the sched_*() functions to return -1 and set errno to ENOSYS
	(per the standard) instead of returning ENOSYS. PR#30970
	[kleink, ticket #5918]

usr.sbin/rpc.statd/statd.c			1.24

	rpc.statd doesn't save failed notifies in the database. PR#31502
	[christos, ticket #5934]

share/misc/airport				1.26

	Correct typo in the airport file.
	[is, ticket #5937]

sys/kern/uipc_socket.c				1.112

	Check the argument to SO_LINGER.
	[nathanw, ticket #5939]

sys/dev/ic/elinkxl.c				1.85

	The previous change (to use bus_space_read_2), was broken because it was
	reading from an odd offset.
	[christos, ticket #5942]

sys/netinet6/icmp6.c				1.111

	In icmp6_redirect_output(), sip6 is initialised to point to the
	data area of m0. But m0 may be freed later, so trying to use
	sip6 at the end of this function is wrong. My guess is that
	we want to reference the data area of m (the mbuf about to be
	send) instead at this point.  Fix a panic on Xen (where a data
	area of a mbuf may be unmapped when the mbuf is freed), and
	probably potential data/pool corruption in other cases.
	[bouyer, ticket #5938]

share/man/man4/fast_ipsec.4			1.2-1.3

	Fix Dd argument; new sentence, new line; sort sections;
	typo fixes.
	[jmc, ticket #5946]

distrib/sets/lists/base/md.ibmnws		delete
distrib/sets/lists/base/mi			1.576
distrib/sets/lists/man/md.ibmnws		delete
distrib/sets/lists/man/mi			1.835 via patch
gnu/usr.sbin/Makefile				1.14

	Build ncdcs on everything. Allows better set sharing (and
	we don't exclude other 'system specific' binaries from other
	builds ala sunlabel, etc), and nuke only md man page in existence,
	simplifying man.tgz set sharing.
	[jmc, ticket #5948]

sys/arch/sparc/sparc/cpu.c			1.193

	Compute c_totalsize for split caches correctly: it's max, not sum (and
	we even have that documented in cache.h).  Initialize c_nlines for
	split caches.
	This should fix srmmu cache flush routines for split I/D caches that
	has been broken since cache.c revision 1.79 started using c_nlines.
	[uwe, ticket #5950]

sys/kern/kern_exec.c				patch

	Don't clear unconditionally P_SUGID when we exec. Clear it only when
	the real and effective user and group ids match.
	[dan, ticket #5955]

dist/ntp/ntpd/ntpd.c				1.8

	Use group-id from ``gr'' and not ``pw''.
	Fixes security issue addressed by CAN-2005-2496.
	[dan, ticket #5958]

sys/dev/scsipi/scsipi_ioctl.c			1.54

	Don't claim there is a data in or out phase if the datalen is 0
	(userland shouldn't claim it either, but a buggy software shouldn't
	be able to crash the kernel anyway). Should fix port-sparc64/31925
	by Johan A.van Zanten (which should really be kern/31925).
	Analysed and patch tested by Martin Husemann.
	[bouyer, ticket #5961]

distrib/utils/sysinst/util.c			1.137

	Don't redisplay the title messages before displaying sub-menus
	during set selection (eg selecting the X sets).
	libcurses got changed earlier in the year so that the erase (and
	refresh) of the message window caused all the unchanged spaces
	to be redrawn overwriting most of the main set selection window.
	[dsl, ticket #5964]

sys/uvm/uvm_glue.c				1.90

	Remove the assertion in uvm_swapout_threads() about LSONPROC lwps
	not running on the same CPU as the swapper.  l_stat is protected by
	sched_lock, which isn't held here, so we can race with that lwp
	starting to run and see its l_cpu not updated yet, as in PR 31870.
	we check l_stat again in uvm_swapout() while holding sched_lock,
	so the race itself is harmless.
	[bouyer, ticket #5965]

usr.sbin/rpc.statd/stat_proc.c			1.7

	When forking, we keep a reference to the status db file, and if the
	memory copy of the file is dirty, is will be synced when the child
	exists.  But the parent may have done changes to the database in
	the meantime, resulting in a db corruption.
	Fix this by calling sync_file() just before the fork. The child
	will still have a reference to the db, but won't try to write it
	on exit.
	[bouyer, ticket #5967]

sys/dev/sbus/be.c				1.46

	ETHERCAP_VLAN_MTU is a flag for ec_capabilities, the size of the 802.1q
	encaptulation header is ETHER_VLAN_ENCAP_LEN. Pointed out by der Mouse
	on tech-kern.
	[bouyer, ticket #5968]

lib/libkvm/kvm_x86_64.c				1.5

	Fix parsing the page tables.
	[chs, ticket #5969]

sbin/newfs/mkfs.c				1.92

	don't set fs_maxsymlinklen and fs_old_inodefmt twice,
	we set them correctly the first time.  fixes PR 26995.
	[chs, ticket #5971]

sys/fs/msdosfs/denode.h				1.10
sys/fs/msdosfs/msdosfs_vnops.c			1.22

	PR/32003: Brian Buhrow: msdosfs doesn't properly zero out high
	cluster data on non-FAT32 msdos filesystems.
	[christos, ticket #5972]

usr.bin/cap_mkdb/cap_mkdb.c			1.21-1.22

	Write the database file into a temporary file first, because
	otherwise if we don't specify an output filename, the database file
	we create will end up being used during population as the database
	file to find entries quickly.
	[christos, ticket #5978]

sys/kern/vfs_vnops.c				1.99

	vput() -> vrele(). Vnode is already unlocked.
	With much help from Pavel Cahyna.  PR#32005
	[hannken, ticket #5983]

sys/dev/usb/ulpt.c				1.70 via patch

	Fix a long standing typo noticed by Alex Pivovarov on PR/32061.
	When people use variables like 'flag' and 'flags' in the same function
	(one local and one passed as a parameter) this is prone to happen..
	[rpaulo, ticket #5988]

sys/miscfs/kernfs/kernfs_vnops.c		1.114 via patch

	Fix 64 bit truncation problem allowing to read arbitrary kernel memory.
	[christos, ticket #10155]

sys/dev/pci/if_fxp_pci.c			1.42
sys/dev/pci/pcidevs				1.727
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	New Dell Day, continued:  add support for the fxp(4) variant in the
	802801G* family of SB.
	[cube, ticket #5990]

sys/nfs/nfs_bio.c				1.136-1.137 via patch

	The problem (kern/31926): under certain conditions, which could be
	reliably reproduced, NFS reads would occasionally return zeroes instead
	of some of the file data, or fail with EINVAL.
	[jld, ticket #8826]

include/ieeefp.h				1.7 via patch

PR/32108: Greg Oster: fpgetmask() linking failure with g++ on macppc
Missing __{BEGIN,END}_DECLS.
[oster, ticket #8833]

sys/dev/ic/an.c					1.33 via patch
sys/dev/ic/anvar.h				1.9 via patch

	Fix two bugs: frames were bogusly discarded with the complaint
	"oversize frame."  Also, some an(4) instances (esp. w/ firmware
	version 5+) would not reliably interoperate with some Cisco APs.
	Thanks to Jim Miller for his valuable bug reports and testing, and
	to Dheeraj Reddy for RID-length patches.
	[jnemeth, ticket #10159]

sys/arch/sgimips/stand/sgivol/sgivol.c		1.10

	0 is a success code for ioctl().  Fixes install problem introduced by
	revision 1.9 last November.
	[tsutsui, ticket #10164]

sbin/fdisk/fdisk.c				1.82 via patch

	Fix intuit_translated_geometry() calculation. PR#26917.
	[tsutsui, ticket #10165]

sys/dev/ic/esiop.c				1.34 via patch
sys/dev/ic/esiopvar.h				1.13 via patch
sys/dev/ic/siop.c				1.79 via patch
sys/dev/ic/siopvar.h				1.22 via patch
sys/dev/ic/siopvar_common.h			1.33 via patch
sys/dev/microcode/siop/esiop.ss			1.20 via patch
sys/dev/microcode/siop/esiop.out		regen
sys/dev/microcode/siop/siop.ss			1.20 via patch
sys/dev/microcode/siop/siop.out			regen

	Some drives disconnect after the last data phase without a save
	data pointer message. In such case we would not update resid with
	the proper value (eventually resid would not be updated at all if
	there was only one data phase). To fix this, have the script save
	the offset in the data tables at disconnect time if there was a
	transfer, and use this to compute the resid if the current offset
	is 0.  Problem reported and patch tested by edwin, Roy Bixler and
	YAMAMOTO Takashi.  Fix kern/31990 by YAMAMOTO Takashi.
	[bouyer, ticket #10168]

sys/dev/pci/if_bgereg.h				1.29

	Remove unnecessary byteswap code so that bge(4) should work
	at least on macppc.
	[tsutsui, ticket #10169]

sys/dev/pci/if_sk.c                             1.17

	Fix occasional "sk0: watchdog timeout" from the on-board ethernet on
	an Asus A8V motherboard.
	[riz, ticket #10154]

sys/dev/pci/if_re.c				patch
sys/dev/pci/if_sk.c				1.18 via patch

	Special-case the Linksys EG1032 cards using PCI subsystem ID;
	rev. 2 uses the sk(4) driver, while rev. 3 needs re(4).
	[riz, ticket #10156]

sys/dev/pci/if_re.c				patch
sys/dev/pci/pcidevs				1.710
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	Two re(4) candidates.
	[riz, ticket #10158, #10160]

usr.bin/cap_mkdb/cap_mkdb.c			patch

	PR bin/32142: Fix build problem caused by ticket #5978.
	[christos, ticket #10182]

sys/kern/kern_time.c				patch

	Avoid time wrap when setting the system time.
	[christos, ticket #10184]

sys/kern/kern_time.c				patch

	Avoid time wrap when setting the system time.
	[christos, ticket #10184]

sys/dev/usb/usb_subr.c				1.130

	usbd_setup_pipe(): Don't call usbd_clear_endpoint_stall(). It's not
	necessary for normal devices, and it prevents some common (but
	apparantly buggy) devices from working, including the Apple iPod (mini
	and photo) and certain M-Systems DiskOnKey flash devices.
	If (also buggy) devices resurface that need this when they are
	attached, they can be addressed, ideally in each device's driver.
	[riz, ticket #10181]

build.sh					patch

	Clean up environment to avoid side effects on builds.
	[jmc, ticket #10194]

usr.sbin/rpc.statd/statd.c			1.25

        We can't call db->put() with key or data pointing back to db(3)'s memory
	space, or the database will be corrupted (noticed when the database is
	updated in reset_host()). Change change_host() to copy hostname and 
	HostInfo to local storage before calling db->put().
	Change notify_one() to use change_host() instead of calling db->put()
	directly. 
        [bouyer, ticket #10171]

usr.bin/gzip/gzip.c				1.78-180
usr.bin/gzip/unbzip2.c				1.9
usr.bin/gzip/zuncompress.c			1.6

	Fix a few issues:
	  gzip -vt just prints the contents of a .Z file
	  gzip -vt will print OK even if the .gz file is corrupt
	  gzip -vt prints nothing with a .bz2 file
	  gzip can loop endlessly with a corrupt .bz2 file
	  Don't warn about >4GB files not having their size correctly stored. 
	PR#32105 PR#32070
	[mrg, ticket #10172]

sys/dev/usb/usbdevs				1.419
sys/dev/usb/usb_quirks.c			1.53
sys/dev/usb/usbdevs.h				regen
sys/dev/usb/usbdevs_data.h			regen

	Add Siemens AG Wireless Modules MC75 support. PR#32180
	[augustss, ticket #10179]

share/zoneinfo/asia				patch
share/zoneinfo/northamerica			patch
share/zoneinfo/southamerica			patch

	Update to tzdata2005o
	[kleink, ticket #10183]

sys/arch/cobalt/cobalt/console.c		1.8
sys/arch/cobalt/conf/files.cobalt		1.20
sys/arch/cobalt/dev/com_mainbus.c		1.9
sys/arch/cobalt/dev/com_mainbusvar.h		1.1

	Cobalt kernel hangs in the second
	consinit() call if it is loaded by the native bootloader,
	so there is no bootstrap way to install other than to use
	an older kernel.

	[tsutsui, ticket #10175]

sys/arch/cobalt/conf/INSTALL			patch
etc/etc.cobalt/Makefile.inc			1.2

	The cobalt firmware has a size restriction on loading kernel.
	so we should also have a smaller kernel binary for bootstrap install.  

	[tsutsui, ticket #10176]

xsrc/xfree/xc/programs/xdm/config/Imakefile	1.6

	Fix the old native XFree86 release build broken by the pullup 978. 
	PR#32214

	[tron, ticket #10185]


usr.bin/gzip/gzip.c				1.81

	Remove unhandled H option from getopt() argument. Describe -l in usage.
	[wiz, ticket #10197]

distrib/notes/mac68k/prep				1.14

	Add text for workaround of sysinst not running newfs etc. PR#29049
	[hubertf, ticket #10198]

sys/dev/ic/aic79xx_osm.c			1.13-1.14
sys/dev/ic/aic7xxx_osm.c			1.19-1.20
sys/dev/ic/aic79xx.c				1.32
sys/dev/ic/aic79xxvar.h				1.20
sys/dev/ic/aic7xxx.c				1.117
sys/dev/ic/aic7xxx_inline.h			1.7
sys/dev/ic/aic7xxxvar.h				1.50

	Don't call alloc_scb() (which can call bus_dmamem_alloc/map) from
	ADAPTER_REQ_RUN_XFER context (which can be interrupt context), defer 
	this to the ADAPTER_REQ_GROW_RESOURCES callback. Fixes a panic in uvm.
	[bouyer, ticket #10177]

sys/kern/kern_sig.c				1.211

	in kpsignal2(), do not try to wake up a cached LWP for SA processes
	in the case where we're sending SIGKILL but all LWPs are not signalable.
	some LWP will wake up soon enough to process the signal, and there may
	not be any LWPs in the cache to wake up anyway.  fixes PR 28886 and
	PR 26771.  also, add a missing "break" pointed out by yamt.
	[chs, ticket #10206]

sys/kern/vfs_subr.c				1.231

	Fix an annoying deadlock involving 3 separate processes.
	[chs, ticket #10207]

sys/dev/pci/pciide_common.c			1.29 via patch

	Fix forcing use of DMA mode for the generic pciide driver:
	default_chip_map() is called from pciide_attach() and at
	this point we don't know which drives are here. Just assume
	all drives are there and allocate DMA ressources for all of them.
	[bouyer, ticket #10212]

sys/fs/union/union_vfsops.c			1.32 via patch

	Change union_unmount() to not play with the fs root vnode explicitly.
	Let it get recycled along with all of the others. This is important
	as if the root vnode has already been reclaimed, then we get a panic
	when we try to vget it.  This addresses PR: kern/31382
	[wrstuden, ticket #10213]

sys/net/if_gif.h				1.11
sys/netinet/in_gif.c				1.45
sys/netinet6/in6_gif.c				1.43

	Expire cached route. Fixes PR kern/22792.
	[mlelstv, ticket #10214]

share/man/man9/pfil.9				1.30 via patch

	pfil_add_hook() and pfil_remove_hook() return int, not void.
	[riz, ticket #10217]

sys/net/if_bridge.c				1.35

	Make sure we initialize all structs to 0.
	[christos, ticket #10219]

crypto/dist/kame/racoon/isakmp_agg.c		patch

	Fix denial of service vulnerabilityin racoon(8).
	[adrianp, ticket #10224]

sys/dev/ic/ninjascsi32.c			1.6

	- Fix diagnostic panic for unaligned DMA buffer.
	- Fix error cleanup path in attach.
	[itohy, ticket #10222]

sys/uvm/uvm_amap.c				1.66 via patch

	Prevent occasional panics on machines which are low on memory.
	This fixes PR kern/25392, port-sparc/30257 and kern/31924.
	[chs, ticket #10230]

sys/sys/socket.h				1.78

	Since NULL isn't necessarily available, change CMSG_*() to use the
	integer constant expression directly instead.
	[kleink, ticket #10233]

sys/net/if_pppoe.c				1.64

	Make sure error messages (received from the access concentrator) are
	zero terminated.
	[martin, ticket #10239]

sys/net/if_bridge.c				1.36

	Fix memory disclosure in bridge(4).
	[adrianp, ticket #10306]

tools/gcc/README.mknative			1.5 via patch
tools/toolchain/README.mknative			1.7

	I haven't touched the mknative stuff since 2002.  Take my name off
	of the readmes, so I'm not implied as a point of contact.
	[tv, ticket #10318]

sys/arch/alpha/pci/pci_6600.c			1.14

	Fix interrupt event counter attach typo.  Only the last interrupt
	was getting an event counter, and none of the dec_6600 interrupts were
	getting counted.
	[mhitch, ticket #10320]

sys/arch/i386/pci/pchb_rnd.c			patch

	Improve code probing for the Intel hardware RNG to avoid false
	detections.
	[tron, ticket #10327]

usr.bin/login/login.c				1.87 via patch

	PR/31059: don't issue different message for root login on
	insecure terminal.
	[jnemeth, ticket #10356]

usr.bin/login/login.c				1.88

	PR/23616: Christian Biere: login might not back-off as expected
	[jnemeth, ticket #10358]

sys/dev/pci/if_rtk_pci.c			1.24
sys/dev/pci/pcidevs				1.774 via patch
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.			regen

	Add recognition of Nortel Baystack 21 as an rtk8139 variant.
	[hw, ticket #10364]

usr.bin/mail/send.c				1.24

	PR/32978: Johan Veenhuizen: mail(1) creates record file with
	insecure umask
	[adrianp, ticket #10365]

sys/kern/exec_elf32.c				1.110-1.111

	Found by coverity issue 887.  Check for NULL before using base_ph so
	an interpreter that does not have PT_LOAD in the program header doesn't
	crash the system.
	[erh, ticket #10380]

gnu/dist/sendmail/libsm/fflush.c		patch
gnu/dist/sendmail/libsm/local.h			patch
gnu/dist/sendmail/libsm/refill.c		patch
gnu/dist/sendmail/sendmail/collect.c		patch
gnu/dist/sendmail/sendmail/conf.c		patch
gnu/dist/sendmail/sendmail/deliver.c		patch
gnu/dist/sendmail/sendmail/headers.c		patch
gnu/dist/sendmail/sendmail/mime.c		patch
gnu/dist/sendmail/sendmail/parseaddr.c		patch
gnu/dist/sendmail/sendmail/savemail.c		patch
gnu/dist/sendmail/sendmail/sendmail.h		patch
gnu/dist/sendmail/sendmail/sfsasl.c		patch
gnu/dist/sendmail/sendmail/sfsasl.h		patch
gnu/dist/sendmail/sendmail/srvrsmtp.c		patch
gnu/dist/sendmail/sendmail/tls.c		patch
gnu/dist/sendmail/sendmail/usersmtp.c		patch
gnu/dist/sendmail/sendmail/util.c		patch
gnu/dist/sendmail/sendmail/version.c		patch

	Apply patch 8.12.11.p0 from sendmail.org, with local compile fixes.
	[christos, ticket #10383]

sys/kern/kern_sysctl.c				1.191

	Check the "oldlen" argument to sysctl(2) before passing it
	to vslock(9). This prevents a local DOS.
	[drochner, ticket #10381]

sys/netipsec/xform_esp.c			1.8

	FreeBSD SA-06:11 and CVE-2006-0905: update the replay sequence number
	or else the anti-reply technique won't work as expected.
	[rpaulo, ticket #10384]

sys/dev/ata/wd.c				1.310 via patch

	Use a pmatch(9) expression which should catch all present and future
	seagate drives larger than 200GB for the WD_QUIRK_FORCE_LBA48 quirks.
	Based on infos from
	http://www.seagate.com/support/kb/disc/howto/interpret_model.html
	[bouyer, ticket #10396]

usr.sbin/rpc.statd/statd.c			1.27

	Use sigaction(2) to setup automatic disposal of child processes after
	daemonizing. This is more portable and avoids zombie "rpc.statd"
	processes after an NFS client running e.g. Mac OS X shuts down.
	[tron, ticket #10400]

sys/dev/pci/if_sk.c				1.19
sys/dev/pci/if_skvar.h				1.8

	PR kern/31304: Contribute to the random pool.
	[riz, ticket #10402]

sys/dev/pci/if_sk.c				1.20 via patch
sys/dev/pci/if_skreg.h				1.6
sys/dev/pci/if_skvar.h				1.9

	Not all chips supported by this driver use the same interrupt
	moderation timer frequency. Also add sysctl support for changing
	the interrupt moderation timer at runtime; each board is controlled
	independently.
	[riz, ticket #10403]

sys/netinet/in.c				1.105

	Close NULL dereference when a GIFALIAS is performed on a
	non existant address.
	[seanb, ticket #10411]

share/man/man9/mbuf.9				1.41

	Fix up the description of m_copyback_cow(), which was at best
	ambiguous, and at worst, wrong.
	[riz, ticket #10405]

distrib/sets/lists/man/mi			1.870 via patch
share/man/man4/Makefile				1.378 via patch
share/man/man4/ciss.4				1.1-1.2
sys/conf/files					1.764
sys/dev/DEVNAMES				1.195 via patch
sys/dev/ic/ciss.c				1.1 via patch
sys/dev/ic/cissreg.h				1.1
sys/dev/ic/cissvar.h				1.1
sys/dev/pci/ciss_pci.c				1.1
sys/dev/pci/files.pci				1.245
sys/dev/pci/pcidevs				1.776 via patch
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	Add a driver, ciss(4), for the HP/Compaq drivers using the newer
	"Command Interface to SCSI-3 Support" command interface.  Driver
	ported from OpenBSD by Tonnerre Lombard -- thanks!
	[he, ticket #10409]

lib/libm/arch/i387/s_scalbn.S			1.8
lib/libm/arch/i387/s_scalbnf.S			1.7

	Fix the ldexp() bug reported on the port-amd64 mailing list.
	[drochner, ticket #10412]

etc/rc.subr					1.66

	In order to handle some perl scripts running as daemons, add a
	pattern which also matches "`basename $interpreter`: $command" in the
	ps listing. This fixes PR bin/31932.
	[he, ticket #10413]

lib/libpthread/arch/i386/pthread_md.h		1.7

	Instead of using hard-coded values for various registers, get them 
	rom the current context. Valid values can change depending on how
	the kernel is setup. i386 and amd64 happen to be setup differently.
	[cube, ticket #10448]

sys/dev/ic/ciss.c				1.2

	Repair commands with no SCSI transfer.
	[martti, ticket #10451]

games/sail/pl_main.c				1.17

	fix buffer overflow (CVE-2006-1744), from Debian
	[drochner, ticket #10504]

usr.sbin/rtadvd/rtadvd.c			patch

	Process Source Link-Layer Address (SLLA) option correctly.
	[martti, ticket #10527]

sys/arch/amd64/amd64/fpu.c			1.14-1.15
sys/arch/i386/isa/npx.c				1.112
sys/arch/xen/i386/npx.c				1.8

	Apply fix from FreeBSD's advisory: fxrstor on AMD FPU's does not
	restore FIP,FDP,FOP thus leaking other process's execution history.
	[adrianp, ticket #10553]

sys/dev/ata/wd.c				1.324

	Add yet another broken 160Gb seagate drive.
	[bouyer, ticket #10625]

sys/netinet6/ip6_input.c			1.87 via patch

	In ip6_savecontrol(), ignore IPv4 packets.
	From JINMEI Tatuya (KAME). PR#33269.
	[rpaulo, ticket #10626]

games/dm/dm.c					1.23

	Read config more strictly.
	[dan, ticket #10630]

sys/kern/vfs_vnops.c				1.112

	Limit the size of any kernel buffers allocated by the VOP_READDIR
	routines to MAXBSIZE.
	[simonb, ticket #10633]

sys/arch/hp300/dev/grf_dv.c			1.31 via patch
sys/arch/hp300/dev/grf_gb.c			1.30 via patch
sys/arch/hp300/dev/grf_hy.c			1.28 via patch
sys/arch/hp300/dev/grf_rb.c			1.31 via patch
sys/arch/hp300/dev/grf_tc.c			1.33 via patch

	Fix boot failure problem on HP400t with fb console.
	[tsutsui, ticket #10634]

sys/dev/pci/pcidevs				1.788
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	Add a couple DLINK product IDs.
	[riz, ticket #10635]

sys/dev/pci/if_sk.c				1.26
sys/dev/pci/if_skreg.h				1.7

	Add support for the DLink DGE-530T revision B1 and the DGE-560T.
	[riz, ticket #10636]

xsrc/xfree/xc/extras/freetype2/include/freetype/fterrdef.h	1.2
xsrc/xfree/xc/extras/freetype2/src/base/ftmac.c			1.2
xsrc/xfree/xc/extras/freetype2/src/base/ftutil.c		1.2
xsrc/xfree/xc/extras/freetype2/src/bdf/bdflib.c			1.2
xsrc/xfree/xc/extras/freetype2/src/cff/cffgload.c		1.2
xsrc/xfree/xc/extras/freetype2/src/cff/cfftypes.h		1.2
xsrc/xfree/xc/extras/freetype2/src/pshinter/pshglob.c		1.2
xsrc/xfree/xc/extras/freetype2/src/sfnt/ttcmap0.c		1.2
xsrc/xfree/xc/extras/freetype2/src/type1/t1load.c		1.2

	Fixes for several integer overflows and null-pointer dereferences in
	freetype2.
	[tron, ticket #10639]

games/tetris/scores.c				1.14

	Check data read from "tetris.scores". This address CVE-2006-1539.
	A standard NetBSD installation is not as much risk because "tetris"
	is set-group-ID "games", and users shouldn't be in that group.
	[dan, ticket #10641]

gnu/dist/sendmail/sendmail/deliver.c		patch
gnu/dist/sendmail/sendmail/mime.c		patch
gnu/dist/sendmail/sendmail/sendmail.h		patch
gnu/dist/sendmail/sendmail/version.c		patch

	Fix potential denial of service problem caused by excessive recursion
	which leads to stack exhaustion when attempting delivery of a malformed
	MIME message.
	[adrianp, ticket #10645]

etc/MAKEDEV.tmpl				1.58

	Create /dev/ipsync, /dev/ipscan and /dev/iplookup (misc/33504).
	[martti, ticket #10665]

sys/dev/sysmon/sysmon_power.c			1.12

	Correct a bug in power event queue management.
	[freza, #10642]

share/man/man4/puc.4				1.19 via patch
sys/dev/pci/pucdata.c				1.43-1.45 via patch

	Add support for Moxa SmartIO CP104 and CP104-V2/PCI and
	EXAR XR17D15x.
	[bouyer, ticket #10643]

sys/dev/ata/wd.c				1.325 via patch

	Improve recognition of Seagate drives which need the LBA48 work
	arround. This fixes PR kern/33637.
	[bouyer, ticket #10644]

lib/libc/arch/i386/sys/__sigtramp2.S		1.2

	Fix PR 34112, where a program could mysteriously exit on return from a
	signal handler, by deriving the context pointer from the stack pointer
	instead of trying to read it from where the sigaction function may have
	overwritten it with arbitrary bits.
	[jld, ticket #10667]

usr.bin/cut/cut.1				1.13-1.14
usr.bin/cut/cut.c				1.21

	PR/33995: Aleksey Cheusov: support use "-" to indicate stdin from SUS
	[jnemeth, ticket #10672]

sys/net/if_spppsubr.c				1.96

	Avoid buffer overflow in the in-kernel PPP code shared by ISDN PPP
	interfaces ippp(4) and pppoe(4). This fixes SA2006-019 (CVE-2006-4304).
	[adrianp, ticket #10677]

sys/kern/uipc_syscalls.c			1.102

	Don't leave a dangling socket in CLOSE_WAIT state if the user
	supplies a bad name or namelen parameter to accept(2).
	[seanb, ticket #10675]

