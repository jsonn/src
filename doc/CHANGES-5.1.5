# $NetBSD: CHANGES-5.1.5,v 1.1.2.8 2014/06/06 06:44:24 msaitoh Exp $

A complete list of changes from the NetBSD 5.1.4 release to the NetBSD 5.1.5
release:

doc/README.files				patched by hand
gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 5.1.4_PATCH.
	[bouyer]

sys/kern/kern_verifiedexec.c			1.132

	Reorder code to avoid use-after-free on error. From Maxime Villard.
	[maxv, ticket #1899]

sys/kern/vfs_syscalls.c				1.478, 1.480 via patch
sys/coda/coda_vfsops.c				1.81
sys/fs/adosfs/advfsops.c			1.70
sys/fs/cd9660/cd9660_vfsops.c			1.84
sys/fs/efs/efs_vfsops.c				1.25
sys/fs/filecorefs/filecore_vfsops.c		1.76
sys/fs/hfs/hfs_vfsops.c				1.31
sys/fs/msdosfs/msdosfs_vfsops.c			1.107
sys/fs/ntfs/ntfs_vfsops.c			1.94
sys/fs/ptyfs/ptyfs_vfsops.c			1.50 via patch
sys/fs/puffs/puffs_vfsops.c			1.110 via patch
sys/fs/smbfs/smbfs_vfsops.c			1.100
sys/fs/sysvbfs/sysvbfs_vfsops.c			1.43
sys/fs/tmpfs/tmpfs_vfsops.c			1.59 via patch
sys/fs/udf/udf_vfsops.c				1.67
sys/fs/union/union_vfsops.c			1.72
sys/fs/unionfs/unionfs_vfsops.c			1.13
sys/kern/vfs_syscalls.c				1.479
sys/miscfs/nullfs/null_vfsops.c			1.88 via patch
sys/miscfs/overlay/overlay_vfsops.c		1.61
sys/miscfs/procfs/procfs_vfsops.c		1.91
sys/miscfs/umapfs/umap_vfsops.c			1.92
sys/nfs/nfs_vfsops.c				1.227
sys/ufs/ext2fs/ext2fs_vfsops.c			1.180
sys/ufs/ffs/ffs_vfsops.c			1.297
sys/ufs/lfs/lfs_vfsops.c			1.321
sys/ufs/mfs/mfs_vfsops.c			1.107

	Due to missing checks in the mount syscall, and a wrong
	assumption on the file systems side, the kernel could allocate
	an unbounded or zero-sized memory buffer, and could dereference
	a NULL pointer when particular arguments are given by a user.
	[maxv, ticket #1901]

src/sys/compat/linux/common/linux_exec_elf32.c	1.91 via patch

	A specially-crafted binary could easily control a kernel array index.
	Add some checks to ensure that nothing will be read outside the
	allocated area. Rewrite the code so that we don't need to allocate
	the whole section. Spotted by several developers, patch from
	chs@/enami@

	[maxv, ticket #1902]

xsrc/external/mit/libXfont/dist/src/fc/fsconvert.c	1.2
xsrc/external/mit/libXfont/dist/src/fc/fserve.c		1.2
xsrc/external/mit/libXfont/dist/src/fontfile/dirfile.c	1.2
xsrc/xfree/xc/lib/font/fc/fsconvert.c			1.5
xsrc/xfree/xc/lib/font/fc/fserve.c			1.5
xsrc/xfree/xc/lib/font/fontfile/dirfile.c		1.5

	Fix multiple vulnerabilities in libXfont:
	- CVE-2014-0209: integer overflow of allocations in font metadata
	  file parsing
	- CVE-2014-0210: unvalidated length fields when parsing xfs protocol
	  replies
	- CVE-2014-0211: integer overflows calculating memory needs for xfs
	  replies
	[spz, ticket #1905]
sys/fs/cd9660/cd9660_node.c			1.31

	PR kern/48787: inode calculation from ISO9660 block offset might get
	truncated to 32bit - force the whole expression to be evaluated
	as ino_t.
	Patch from Thomas Schmitt, with minor modifications
	(and reworded comment).
	[martin, ticket #1904]

doc/3RDPARTY					patch
share/zoneinfo/africa				patch
share/zoneinfo/antarctica			patch
share/zoneinfo/asia				patch
share/zoneinfo/australasia			patch
share/zoneinfo/backward				patch
share/zoneinfo/etcetera				patch
share/zoneinfo/europe				patch
share/zoneinfo/iso3166.tab			patch
share/zoneinfo/leap-seconds.list		patch
share/zoneinfo/leapseconds			patch
share/zoneinfo/leapseconds.awk			patch
share/zoneinfo/northamerica			patch
share/zoneinfo/southamerica			patch
share/zoneinfo/zone.tab				patch
distrib/sets/lists/base/mi			patch

	Update timezone database from tzdata2013d to tzdata2014c.
	This adds a new timezone, Antarctica/Troll, and updates
	many other timezones. The Asia/Riyadh{87,88,89} zones are
	retained for backward compatibility, although they have
	been removed from the upstream distribution.

	[apb, ticket #1906]

crypto/dist/openssl/crypto/bn/bn.h		patch
crypto/dist/openssl/crypto/bn/bn_lib.c		patch
crypto/dist/openssl/crypto/ec/ec2_mult.c	patch
crypto/dist/openssl/ssl/d1_both.c		patch
crypto/dist/openssl/ssl/s3_clnt.c		patch
crypto/dist/openssl/ssl/s3_pkt.c		patch
crypto/dist/openssl/ssl/s3_srvr.c		patch
crypto/dist/openssl/ssl/ssl3.h			patch

	Update openssl to 1.0.1h which includes CVE-2014-0224, CVE-2014-0221,
	CVE-2014-0195, CVE-2014-3470.
	[spz, ticket #1908]
