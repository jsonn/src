#	$NetBSD: CHANGES-2.0.4,v 1.1.2.6 2005/11/03 21:03:52 riz Exp $

A complete list of changes from the NetBSD 2.0.3 update to the NetBSD 2.0.4
update.

File						Revision(s)
----						--------
sys/sys/param.h					patch

	Update to 2.0.3_STABLE

sys/arch/sparc/sparc/cpu.c			1.193

	Compute c_totalsize for split caches correctly: it's max, not sum (and
	we even have that documented in cache.h).  Initialize c_nlines for
	split caches.
	This should fix srmmu cache flush routines for split I/D caches that
	has been broken since cache.c revision 1.79 started using c_nlines.
	[uwe, ticket #5950]

sys/kern/uipc_socket.c				1.112

	Check the argument to SO_LINGER.
	[nathanw, ticket #5939]

sys/kern/kern_exec.c				patch

	Don't clear unconditionally P_SUGID when we exec. Clear it only when
	the real and effective user and group ids match.
	[dan, ticket #5955]

dist/ntp/ntpd/ntpd.c				1.8

	Use group-id from ``gr'' and not ``pw''.
	Fixes security issue addressed by CAN-2005-2496.
	[dan, ticket #5958]

sys/dev/scsipi/scsipi_ioctl.c			1.54

	Don't claim there is a data in or out phase if the datalen is 0
	(userland shouldn't claim it either, but a buggy software shouldn't
	be able to crash the kernel anyway). Should fix port-sparc64/31925
	by Johan A.van Zanten (which should really be kern/31925).
	Analysed and patch tested by Martin Husemann.
	[bouyer, ticket #5961]

distrib/utils/sysinst/util.c			1.137

	Don't redisplay the title messages before displaying sub-menus
	during set selection (eg selecting the X sets).
	libcurses got changed earlier in the year so that the erase (and
	refresh) of the message window caused all the unchanged spaces
	to be redrawn overwriting most of the main set selection window.
	[dsl, ticket #5964]

