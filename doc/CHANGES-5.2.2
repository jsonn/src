# $NetBSD: CHANGES-5.2.2,v 1.1.2.5 2013/12/17 21:01:30 bouyer Exp $

A complete list of changes from the NetBSD 5.2 release to the NetBSD 5.2.1
release:

doc/README.files				patched by hand
gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 5.2.1_PATCH.
	[jdc]

xsrc/external/mit/xorg-server/dist/dix/dixfonts.c	1.2 via patch
xsrc/xfree/xc/programs/Xserver/dix/dixfonts.c		1.4 via patch

	Fix CVE-2013-4396 using a patch from Alan Coopersmith:
	Save a pointer to the passed in closure structure before copying it
	and overwriting the *c pointer to point to our copy instead of the
	original.  If we hit an error, once we free(c), reset c to point to
	the original structure before jumping to the cleanup code that
	references *c.
	[spz, ticket #966]

sys/arch/xen/xen/evtchn.c			1.70

	Remove the "evtchn_do_event: handler %p didn't lower ipl %d %d\n"
	printf as analysis shows it actually isn't a bug in the handler,
	but related to spin mutexes. Fixes port-xen/46313
	[bouyer, ticket #1890]

sys/netinet6/nd6.c				1.146
usr.sbin/ndp/ndp.c				1.42

	Instead of voodo casts use simple byte pointer arithmetic and memcpy to
	create the "packed" binary format we pass out to userland when querying
	the router/prefix list.
	Simplify code to print the router/prefix list: use memcpy and local
	structs properly aligned on the stack to decode the binary format
	passed by the kernel - instead of (bogusly) assuming the format will
	obey all local alignement requirements.
	[martin, ticket #1892]

sys/compat/common/compat_util.c			1.45

	Free pathbuf in an error path.
	[martin, ticket #1893]

