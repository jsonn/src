#	$NetBSD: CHANGES-4.1,v 1.1.2.9 2008/01/22 19:07:03 bouyer Exp $

A complete list of changes from the NetBSD 4.0 release to the NetBSD 4.1
release:

File						Revision(s)
----						--------
gnu/usr.bin/groff/tmac/mdoc.local		patch
sys/sys/param.h					patch

	Welcome to 4.0_STABLE

sys/arch/amd64/amd64/bios32.c			1.6
sys/arch/amd64/amd64/mainbus.c			1.17
sys/arch/amd64/conf/GENERIC			1.151
sys/arch/amd64/conf/files.amd64			1.39 via patch
sys/arch/x86/x86/ipmi.c				1.12
sys/arch/x86/x86/ipmi.c				1.8
sys/dev/DEVNAMES				1.228

	Use PRIx64 for a 64-bit quantity instead of llx in a debug print.
	Add (commented-out) support for IPMI on amd64--pretty much copied straight
	from i386.
	Check for duplicate sensor names in the IPMI table.  If a duplicate name
	is found, try to make it unique by appending a count (1-99) to the sensor
	description (truncating, if necessary).
	[briggs, ticket #989]

sys/dev/raidframe/rf_netbsdkintf.c		1.231 via patch

	Implement dumping kernel cores to RAID 1 sets.  The component used
	for the dump is selected in this order of preference:
	   1) the master
	   2) a used_spare of the master
	   3) the slave
	   4) a used_spare of the slave
	[oster, ticket #1014]

sys/dev/pci/arcmsr.c				patch
sys/dev/pci/arcmsrvar.h				patch
sys/dev/pci/pcidevs				patch
sys/dev/pci/files.pci				patch
sys/arch/i386/conf/GENERIC			patch
sys/arch/i386/conf/XEN2_DOM0			patch
sys/arch/i386/conf/INSTALL_LARGE		patch
sys/arch/amd64/conf/GENERIC			patch
sys/arch/amd64/conf/INSTALL			patch
share/man/man4/Makefile				patch
share/man/man4/arcmsr.4				patch
distrib/sets/lists/man/mi			patch

	Add the Areca Technology Corporation SATA RAID controller driver,
	ported from OpenBSD.
	[christos, ticket #1037]
xsrc/xfree/xc/lib/font/bitmap/pcfread.c		1.3

	Apply security fix for CVE-2008-0006.
	[tron, ticket #1047]

distrib/hp700/Makefile				1.3
distrib/hp700/sysnbsd/Makefile			1.1
distrib/notes/common/netboot			1.32
distrib/notes/common/sysinst			1.84
distrib/notes/common/xfer			1.61
distrib/notes/hp700/Makefile			1.2
distrib/notes/hp700/hardware			1.4
distrib/notes/hp700/install			1.2
distrib/notes/hp700/upgrade			1.2
distrib/notes/hp700/xfer			1.2

	Improve hp700 install notes somewhat.
	Actually build and install a SYSNBSD.
	[skrll, ticket #1035]

usr.bin/xargs/Makefile				1.4
usr.bin/xargs/pathnames.h			1.6
usr.bin/xargs/strnsubst.c			1.1
usr.bin/xargs/xargs.1				1.19
usr.bin/xargs/xargs.c				1.16, 1.18

	Bring in xargs from FreeBSD to gain -I, -J etc. but keep our
	GNU compatible exit values. Fixes PRs 36154 and 37666.
	[apb, ticket #1036]

distrib/sets/lists/base/mi			1.712
distrib/sets/lists/comp/mi			1.1035
distrib/sets/lists/man/mi			1.1010
sys/netinet/tcp_usrreq.c			1.133
sys/netinet/tcp_var.h				1.148
usr.sbin/Makefile				1.228 via patch
usr.sbin/tcpdrop/Makefile			1.1
usr.sbin/tcpdrop/tcpdrop.8			1.1
usr.sbin/tcpdrop/tcpdrop.c			1.1 - 1.3

	Import tcpdrop(8) from OpenBSD
	[ghen, ticket #1039]

sys/arch/algor/algor/algor_p4032_intr.c		1.15, 1.17 via patch
sys/arch/algor/algor/algor_p5064_intr.c		1.18, 1.20 via patch
sys/arch/algor/algor/algor_p6032_intr.c		1.12, 1.14 via patch
sys/arch/algor/algor/locore_machdep.S		1.4
sys/arch/algor/dev/mcclock_mainbus.c		1.7
sys/arch/algor/isa/mcclock_isa.c		1.9
sys/arch/mips/mips/mips3_clock.c		1.8, 1.9

	Fix botch on MI todr(9) migration of algor on September 2006:
	initialize necessary values for mips3_delay().
	[tsutsui, ticket #1040]

sys/dev/ic/bt8xx.h				1.9
sys/dev/pci/bktr/bktr_audio.c			1.18
sys/dev/pci/bktr/bktr_core.c			1.46
sys/dev/pci/bktr/bktr_core.h			1.10
sys/dev/pci/bktr/bktr_os.c			1.49
sys/dev/pci/bktr/bktr_reg.h			1.18

	Don't assume that sizeof(long) == sizeof(int);
	makes bktr work on amd64.
	[jmcneill, ticket #1046]

sys/dev/usb/if_aue.c				1.107, 1.108 via patch	
sys/dev/usb/if_auereg.h				1.19, 1.20 via patch 

	Prevents hang on close by unprotected creation of the formerly used
	workqueue item.
	[is, ticket #1048]

src/sys/arch/x86/isa/clock.c 1.23 via patch
	fixes clock accounting problem in i8254_get_timecount that caused
	the auich auich_calibrate() function to get the wrong ac97 freq
	(may cause audio to play at wrong speed on some systems).
	[chuck, ticket #1049]

