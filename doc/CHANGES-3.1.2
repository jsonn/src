#	$NetBSD: CHANGES-3.1.2,v 1.1.2.5 2007/08/26 20:28:34 bouyer Exp $

A complete list of changes from the NetBSD 3.1.1 release to the NetBSD 3.1.2
release:

File						Revision(s)
----						--------
doc/README.files				patch
gnu/usr.bin/groff/tmac/mdoc.local		patch
sys/sys/param.h					patch

	Welcome to NetBSD 3.1.1_PATCH.

sys/dev/ic/pcdisplay_subr.c			1.33 via patch
sys/dev/ic/vga.c				1.95 via patch
sys/dev/ic/vga_raster.c				1.29 via patch
sys/dev/isa/ega.c				1.23 via patch
sys/dev/rasops/rasops.c				1.56 via patch

	Implement bounds checking in some places in display driver code to
	avoid the possibility of a local user panic.
	[mjf, ticket #1815]

dist/bind/bin/named/client.c			1.1.1.6 via patch
dist/bind/lib/dns/dispatch.c			1.1.1.7 via patch
dist/bind/lib/dns/include/dns/dispatch.h	1.1.1.5 via patch

	Fix for a security issue in BIND 9.3.x (CVE-2007-2926):
	Query id generation was cryptographically weak.
	[adrianp, ticket #1829]

sys/sys/socketvar.h				1.97
	Fix a bug in sblock() that has existed since revision 1.1 from BSD:
	correctly return an error if M_NOWAIT is passed to sblock() and the
	operation might block.  This remarkably subtle macro bug appears to
	be responsible for quite a few undiagnosed socket buffer corruption
	and mbuf-related kernel panics.
	[christos, ticket #1808]

sbin/ping/ping.c				1.83 - 1.85

	PR/28741: Michael Santos: ping does [not] drop root privileges
	[ghen, ticket #1818]

lib/libc/gen/Makefile.inc			1.143
lib/libc/gen/cgetcap.3				1.1 - 1.3
lib/libc/gen/getcap.3				delete

	Both libcurses and libc installed a getcap(3) manpage, and both used it
	as target for a bunch of MLINKS. This had the effect that whatever came
	last in install overwrote everything from the other camp.
	Solve this by renaming the libc page -- this makes sense because no
	function is really named "getcap" here.
	[bad, ticket #1821]

sys/kern/uipc_usrreq.c				1.98

	PR kern/32842:
	do not leak file descriptors when sending a datagram with SCM_RIGHTS
	fails. Patch from Gary Thorpe, based on changes in FreeBSD and work
	from Christian Biere.
	[martin, ticket #1820]

