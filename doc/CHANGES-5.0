# $NetBSD: CHANGES-5.0,v 1.1.2.8 2008/11/06 00:37:07 snj Exp $

A complete list of changes from the initial NetBSD 5.0 branch on October 2008
until the 5.0 release:

gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 5.0_BETA!

sys/arch/arm/gemini/obio_wdt.c			1.2
distrib/evbarm/instkernel/instkernel/Makefile	1.14
distrib/evbarm/gzboot/gzimg/Makefile		1.20

	Register gemini watchdog with sysmon_wdog_register and rip out some
	debugging code.  Create gemini instkernel and gzimg.	
	[cliff, ticket #2]

etc/etc.cobalt/MAKEDEV.conf			1.10

	Create bpf(4) device node on ramdisk for sysinst.
	[tsutsui, ticket #4]

sys/kern/vfs_dirhash.c				1.5-1.8

	Clean up dirhash and use hash32_strn(). Remove old KASSERTS that
	were commented out. Protect the dirhash_queue when purging hashed
	directories in memory overflow situations. Clarify the dirhash
	locking protocol and remove unnessiary #ifdef DEBUG flag.
	[reinoud, ticket #5]

etc/etc.amd64/MAKEDEV.conf			1.13-1.15
etc/etc.i386/MAKEDEV.conf			1.17-1.19

	Create 4 Xen disks by default and all three Xen devices to make it
	usable out-of-the-box.  Create 8 dk instances by default, since GPT
	autodiscovery is enabled.
	[joerg, ticket #3]

sys/fs/udf/udf_strat_rmw.c			1.10

	Explicitly set buffer's block numbers. Blocks were always read/written
	correctly only the sheduling could go less than optimal.
	[reinoud, ticket #6]

external/mit/xorg/lib/Makefile			1.5

	Move libXft down in the hierarchy, because it depends on libXrandr.
	[cube, ticket #7]

sys/fs/udf/udf_strat_rmw.c			1.11

	Introduce an extra state to wich all pushed ecclines are pushed
	on.  This extra state has a holding time in wich no writeouts will
	be done effectively collecting more sectors before its even scheduled
	for writing.  Significantly boosts write performance.
	[reinoud, ticket #8]

sys/miscfs/genfs/genfs_io.c			1.14
sys/nfs/nfs_bio.c				1.180
sys/uvm/uvm_extern.h				1.149

	- allocate 8 pointers on the stack to avoid stack overflow in nfs.
	- make that 8 a constant
	- remove bogus panic
	Fixes PR kern/39777. 
	[tron, ticket #9]

dist/file/src/apprentice.c			1.20

	Fix build of file when cross-compiling on Solaris.
	[hubertf, ticket #11]

usr.sbin/mmcformat/mmcformat.8			1.2

	Fix manpage; it showed option -i where it had to be -I
	[reinoud, ticket #12]

sys/arch/atari/dev/clock.c			1.42

	Move tc_init(&clk_timecounter) to stop the "timecounter:" message
	appearing in the middle of the clock0 attach message.
	[abs, ticket #13]

sys/arch/atari/dev/md_root.c			1.26

	Use brelse() to unbusy bp buffer to allow user to swap floppy
	disks when prompted.
	[abs, ticket #14]

sys/dev/sysmon/sysmon_envsys_events.c		1.59-1.60

	Restore previous behavior concerning CRITICAL events.  Send an
	event whenever state enters or exits CRITICAL, or whenever value
	of sensor changes while the state is CRITICAL.
	[pgoyette, ticket #15]

external/mit/xorg/lib/libXaw7/Makefile		1.4

	Add necessary defines (-DXAW7).
	[cube, ticket #16]

