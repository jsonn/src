#	$NetBSD: CHANGES-4.0.2,v 1.1.2.108 2012/09/15 09:24:50 bouyer Exp $

A complete list of changes from the NetBSD 4.0.1 release to the NetBSD 4.0.2
release:

File						Revision(s)
----						--------
gnu/usr.bin/groff/tmac/mdoc.local		patch
sys/sys/param.h					patch

	Welcome to 4.0.1_PATCH

sys/arch/cobalt/conf/INSTALL                    1.32,1.35

        Enable bpfilter so that dhclient can work.  Allow root device to be
        detected, rather than hardcoding it to nfs.
        [tsutsui, ticket #1217]

doc/3RDPARTY                                    patch
distrib/sets/lists/base/mi                      1.773
share/zoneinfo/africa                           1.1.1.26
share/zoneinfo/asia                             1.1.1.43
share/zoneinfo/australasia                      1.17
share/zoneinfo/backward                         1.1.1.19
share/zoneinfo/europe                           1.1.1.38
share/zoneinfo/iso3166.tab                      1.1.1.17
share/zoneinfo/leapseconds                      1.1.1.15 
share/zoneinfo/northamerica                     1.1.1.42
share/zoneinfo/southamerica                     1.1.1.39,1.1.1.40
share/zoneinfo/zone.tab                         1.1.1.31

        Update to tzdata2008g.
        [jnemeth, ticket #1213]

share/man/man8/afterboot.8			1.35, 1.37, 1.38 via patch

	Fix reference to sshd_config and provide more information
	about DHCP.
	[tsutsui, ticket #1218]

distrib/notes/common/main			1.421
distrib/notes/common/sysinst			1.95
distrib/notes/i386/hardware			1.124
distrib/notes/mac68k/install			1.30

	Use `\*[Am]' rather than `\*&' for ampersand.
	[tsutsui, ticket #1219]

sys/arch/atari/dev/ncr5380.c                    1.56
 
	Fix hang when using SCSI devices on Atari Falcon and TT030.
	[abs, ticket #1222]
        
usr.bin/fsplit/fsplit.c				1.26 via patch

	Two robustness fixes:
	   (1) make ridiculously small filename buffer larger;
	   (2) don't accidentally try to generate files with names
	       containing '/'.
	[dholland, ticket #1238]

common/lib/libprop/prop_dictionary.c		1.33
common/lib/libprop/prop_number.c		1.20
common/lib/libprop/prop_object.c		1.23 via patch
common/lib/libprop/prop_object_impl.h		1.28

	Fix two race conditions in proplib.
	[haad, ticket #1243]

sys/dev/pci/if_wm.c				1.163

	Fixes nasty EEPROM-trashing bug on ich8 and ich9 chipsets
	as described in
	  http://mail-index.netbsd.org/current-users/2008/12/02/msg006435.html
	[sketch, ticket #1246]

sys/arch/atari/dev/clock.c			1.39
sys/arch/atari/include/param.h			1.31
	Simplify delay based on x86 version.
	[tsutsui, ticket #1253]

sys/arch/sparc/stand/bootblk/bootblk.fth	1.8

	Instead of bailing out with "Inode not directory", assume that
	the disk is a RAIDframe mirror, apply the RAID boot offset,
	and try to boot again.
	Fixes the problem where disks would be unbootable if partitioned
	normally and then converted to RAID 1 without being zeroed first.
	[jdc, ticket #1251]

lib/libc/gen/fts.c				1.35

	Ensure fts_close() doesn't spuriously close fd 0,
	by testing FTS_SYMFOLLOW in fts_flags instead of fts_options.
	Fix provided by Ben Harris in PR 40319
	[lukem, ticket #1256]

distrib/atari/floppies/common/dot.profile	1.3
distrib/atari/floppies/install/list		1.8
distrib/atari/floppies/prepare/install.md	1.3
distrib/atari/floppies/prepare/list		1.5
distrib/atari/miniroot/Makefile.inc		delete
distrib/atari/miniroot/disktab.shadow		delete
distrib/atari/miniroot/dot.profile		delete
distrib/atari/miniroot/install.md		delete
distrib/atari/miniroot/list			delete
distrib/atari/miniroot/termcap.vt		delete
sys/arch/atari/stand/installboot/installboot.c	1.21

	Since dl.d_type is always "unknown" now, pick the type of bootblock to
	install based on the device name: eg /dev/fd0c would be floppy
	Fix atari sysinst based miniroot image, and retire old (unreferenced)
	miniroot.
	[abs, ticket #1257]

usr.bin/make/make.1				1.151

	Fix blatantly wrong exposition of .WAIT example.
	PR bin/40372 from Gao Ya'nan.
	[dholland, ticket #1262]

sys/dev/pci/aac_pci.c				1.26

	Allocate enough space for the aac_pci_softc, not just the aac_softc.
	[briggs, ticket #1255]

share/misc/airport				1.31

	PR/40404 - Robert Elz -- Thailand airport updates
	[jnemeth, ticket #1265]

sys/arch/m68k/fpe/fpu_emulate.c			1.28

	In fpu_emul_arith(), check lower 7 bits in word1 rather than only
	6 bits to check 040/060 FP instructions, and don't call fpu_implode()
	and fpu_upd_fpsr() if no vaild emulated result is set otherwise these
	functions cause NULL pointer dereference.
	[tsutsui, ticket #1268]

usr.bin/locale/locale.c				1.7

	Fix off-by-one in malloc().
	[tnozaki, ticket #1269]

sbin/raidctl/raidctl.c				1.40

	Use correct format to print the "numBlocks" element in a RAIDframe
	component label. raidctl(8) should now print the correct number of
	blocks for RAID sets larger than 1TB.

	Patch supplied by Bernhard Moellemann in PR bin/40479.
	[tron, ticket #1270]

tools/compat/compat_defs.h			patch
tools/compat/configure				patch
tools/compat/configure.ac			patch
tools/compat/nbtool_config.h.in			patch

	Fix build on netbsd-5 amd64 hosts.
	[adrianp, ticket #1278]

sys/kern/init_sysctl.c				1.158

	always calculate "needed" for KERN_FILE2 calls.  this allows a caller
	to get an estimate of the needed space, like the intention is.
	[mrg, ticket #1287]

usr.sbin/pstat/pstat.c				1.113

	convert getfiles() to use KERN_FILE2 sysctl.
	Now it can survive "struct file" changing, as is upcoming.
	[mrg, ticket #1289]

share/man/man3/bits.3				1.3

	PR/39381 - Taylor R Campbell
	missing line break causing funny formatting
	[dholland, ticket #1293]

common/lib/libprop/prop_object.c		 patch

	Fix crash where user was able to crash proplib with trying to
	internalize bad xml file with non-existing data type e.g. <number>.
	[haad, ticket #1296]

sys/sys/file.h                                  patch
sys/kern/uipc_usrreq.c                          patch

        Avoid deep recursion and file descriptor exhaustion.
        1. unp_detach: go not call unp_gc directly for descriptors
        that are unixdomain sockets themselves. Instead mark them
        for cleanup during garbage collection.
        2. unp_gc: handle detach of descriptors that were marked earlier.
        3. prohibit transfer of descriptors within SCM_RIGHTS messages if
        (num_files_in_transit > maxfiles / unp_rights_ratio)
        [mlelstv, ticket #1303]

sys/dist/pf/net/pf.c				1.54

	Fix http://www.securityfocus.com/archive/1/502634.
	[christos, ticket #1305]

sys/arch/mvme68k/stand/Makefile.booters		1.18
sys/arch/mvme68k/stand/bootst/dev_tape.c	1.11
sys/arch/mvme68k/stand/bootst/version		1.5

	Fix for install/40961: The RAMDISK kernel has grown significantly
	since bootst was written. Grab 3MB of the kernel image from tape
	in hackprom_diskrd() instead of 2MB.
	Bump bootst version on account of the above fix.
	While here, use -Os instead of -O2 to compile mvme68k stand code.
	[scw, ticket #1304]

dist/ntp/ntpq/ntpq.c				1.12

	Fix CVE-2009-0159.
	[christos, ticket #1308]

lib/libc/db/btree/bt_split.c			1.19
lib/libc/db/hash/hash_buf.c			1.15, 1.16
lib/libc/db/mpool/mpool.c			1.19

	Avoid information leaks by zeroing memory.
	[christos, ticket #1310]

lib/libc/db/hash/hash_buf.c			1.17, 1.18

	Fix build fallout from ticket 1310
	[hauke, ticket #1311]

usr.sbin/racoonctl/Makefile			1.5 via patch

	adjust the ADMINPORTDIR to match that of racoon (with which
	it'll want to talk) fixes PR 41376
	[spz, ticket #1312]

lib/libc/stdio/vfwprintf.c			1.15

	printf("%zi\n", (ssize_t)-1); now correcly prints -1 on i386
	[cube, ticket #1313]

share/man/man8/afterboot.8			1.39

	Fix typo, from Shannon -jj Behrens in PR 41375.
	[dholland, ticket #1314]

sys/arch/sparc/include/psl.h			1.45

	Add memory clobbers to the inline assembler modifying/testing the %psr
	register, to avoid the compiler reordering instructions out of critical
	sections. Should fix PR port-sparc/41372.
	[martin, ticket #1317]

lib/libc/gen/sysctl.3				patch

	document PROC_PID_LIMIT_SBSIZE. Addresses PR 36463.
	[snj, ticket #1318]           

dist/ntp/ntpd/ntp_crypto.c			1.15

	Fix CVE-2009-1252: Buffer overflow in ntpd crypto code. A remote
	attacker can send a specially constructed request packet that
	would overflow the sprintf()'ed buffer causing ntpd to crash.
	[mrg, ticket #1320]

sys/net80211/ieee80211_netbsd.h			1.15
sys/sys/queue.h					1.49

	Move TAILQ_FOREACH_SAFE to sys/queue.h.
	[joerg, ticket #1321]

Makefile					patch
UPDATING					patch
distrib/sets/lists/base/mi			patch
distrib/sets/lists/base/shl.elf			patch
distrib/sets/lists/base/shl.mi			patch
distrib/sets/lists/comp/mi			patch
distrib/sets/lists/comp/shl.mi			patch
distrib/sets/lists/man/mi			patch
external/Makefile				patch
external/bsd/Makefile				patch
external/bsd/fetch/Makefile			patch
external/bsd/fetch/Makefile.inc			patch
external/bsd/fetch/dist/libfetch/common.c	patch
external/bsd/fetch/dist/libfetch/common.h	patch
external/bsd/fetch/dist/libfetch/errlist.sh	patch
external/bsd/fetch/dist/libfetch/fetch.3	patch
external/bsd/fetch/dist/libfetch/fetch.c	patch
external/bsd/fetch/dist/libfetch/fetch.cat3	patch
external/bsd/fetch/dist/libfetch/fetch.h	patch
external/bsd/fetch/dist/libfetch/file.c		patch
external/bsd/fetch/dist/libfetch/ftp.c		patch
external/bsd/fetch/dist/libfetch/ftp.errors	patch
external/bsd/fetch/dist/libfetch/http.c		patch
external/bsd/fetch/dist/libfetch/http.errors	patch
external/bsd/fetch/lib/Makefile			patch
external/bsd/fetch/lib/shlib_version		patch
external/bsd/libarchive/Makefile		patch
external/bsd/libarchive/Makefile.inc		patch
external/bsd/libarchive/prepare-import.sh	patch
external/bsd/libarchive/bin/Makefile		patch
external/bsd/libarchive/bin/Makefile.inc	patch
external/bsd/libarchive/bin/cpio/Makefile	patch
external/bsd/libarchive/bin/tar/Makefile	patch
external/bsd/libarchive/dist/COPYING		patch
external/bsd/libarchive/dist/NEWS		patch
external/bsd/libarchive/dist/cpio/bsdcpio.1	patch
external/bsd/libarchive/dist/cpio/cmdline.c	patch
external/bsd/libarchive/dist/cpio/cpio.c	patch
external/bsd/libarchive/dist/cpio/cpio.h	patch
external/bsd/libarchive/dist/cpio/cpio_platform.h patch
external/bsd/libarchive/dist/cpio/err.c		patch
external/bsd/libarchive/dist/cpio/matching.c	patch
external/bsd/libarchive/dist/cpio/matching.h	patch
external/bsd/libarchive/dist/cpio/pathmatch.c	patch
external/bsd/libarchive/dist/cpio/pathmatch.h	patch
external/bsd/libarchive/dist/cpio/test/list.h	patch
external/bsd/libarchive/dist/cpio/test/main.c	patch
external/bsd/libarchive/dist/cpio/test/test.h	patch
external/bsd/libarchive/dist/cpio/test/test_0.c	patch
external/bsd/libarchive/dist/cpio/test/test_basic.c patch
external/bsd/libarchive/dist/cpio/test/test_format_newc.c patch
external/bsd/libarchive/dist/cpio/test/test_gcpio_compat.c patch
external/bsd/libarchive/dist/cpio/test/test_gcpio_compat_ref.bin.uu patch
external/bsd/libarchive/dist/cpio/test/test_gcpio_compat_ref.crc.uu patch
external/bsd/libarchive/dist/cpio/test/test_gcpio_compat_ref.newc.uu patch
external/bsd/libarchive/dist/cpio/test/test_gcpio_compat_ref.ustar.uu patch
external/bsd/libarchive/dist/cpio/test/test_option_B.c patch
external/bsd/libarchive/dist/cpio/test/test_option_L.c patch
external/bsd/libarchive/dist/cpio/test/test_option_a.c patch
external/bsd/libarchive/dist/cpio/test/test_option_c.c patch
external/bsd/libarchive/dist/cpio/test/test_option_d.c patch
external/bsd/libarchive/dist/cpio/test/test_option_ell.c patch
external/bsd/libarchive/dist/cpio/test/test_option_f.c patch
external/bsd/libarchive/dist/cpio/test/test_option_f.cpio.uu patch
external/bsd/libarchive/dist/cpio/test/test_option_help.c patch
external/bsd/libarchive/dist/cpio/test/test_option_m.c patch
external/bsd/libarchive/dist/cpio/test/test_option_m.cpio.uu patch
external/bsd/libarchive/dist/cpio/test/test_option_t.c patch
external/bsd/libarchive/dist/cpio/test/test_option_t.cpio.uu patch
external/bsd/libarchive/dist/cpio/test/test_option_t.stdout.uu patch
external/bsd/libarchive/dist/cpio/test/test_option_tv.stdout.uu patch
external/bsd/libarchive/dist/cpio/test/test_option_u.c patch
external/bsd/libarchive/dist/cpio/test/test_option_version.c patch
external/bsd/libarchive/dist/cpio/test/test_option_y.c patch
external/bsd/libarchive/dist/cpio/test/test_option_z.c patch
external/bsd/libarchive/dist/cpio/test/test_owner_parse.c patch
external/bsd/libarchive/dist/cpio/test/test_pathmatch.c patch
external/bsd/libarchive/dist/libarchive/archive.h patch
external/bsd/libarchive/dist/libarchive/archive_check_magic.c patch
external/bsd/libarchive/dist/libarchive/archive_endian.h patch
external/bsd/libarchive/dist/libarchive/archive_entry.3 patch
external/bsd/libarchive/dist/libarchive/archive_entry.c patch
external/bsd/libarchive/dist/libarchive/archive_entry.h patch
external/bsd/libarchive/dist/libarchive/archive_entry_copy_stat.c patch
external/bsd/libarchive/dist/libarchive/archive_entry_link_resolver.c patch
external/bsd/libarchive/dist/libarchive/archive_entry_private.h patch
external/bsd/libarchive/dist/libarchive/archive_entry_stat.c patch
external/bsd/libarchive/dist/libarchive/archive_entry_strmode.c patch
external/bsd/libarchive/dist/libarchive/archive_platform.h patch
external/bsd/libarchive/dist/libarchive/archive_private.h patch
external/bsd/libarchive/dist/libarchive/archive_read.3 patch
external/bsd/libarchive/dist/libarchive/archive_read.c patch
external/bsd/libarchive/dist/libarchive/archive_read_data_into_fd.c patch
external/bsd/libarchive/dist/libarchive/archive_read_extract.c patch
external/bsd/libarchive/dist/libarchive/archive_read_open_fd.c patch
external/bsd/libarchive/dist/libarchive/archive_read_open_file.c patch
external/bsd/libarchive/dist/libarchive/archive_read_open_filename.c patch
external/bsd/libarchive/dist/libarchive/archive_read_open_memory.c patch
external/bsd/libarchive/dist/libarchive/archive_read_private.h patch
external/bsd/libarchive/dist/libarchive/archive_read_support_compression_all.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_compression_bzip2.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_compression_compress.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_compression_gzip.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_compression_none.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_compression_program.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_format_all.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_format_ar.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_format_cpio.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_format_empty.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_format_iso9660.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_format_mtree.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_format_tar.c patch
external/bsd/libarchive/dist/libarchive/archive_read_support_format_zip.c patch
external/bsd/libarchive/dist/libarchive/archive_string.c patch
external/bsd/libarchive/dist/libarchive/archive_string.h patch
external/bsd/libarchive/dist/libarchive/archive_string_sprintf.c patch
external/bsd/libarchive/dist/libarchive/archive_util.3 patch
external/bsd/libarchive/dist/libarchive/archive_util.c patch
external/bsd/libarchive/dist/libarchive/archive_virtual.c patch
external/bsd/libarchive/dist/libarchive/archive_windows.c patch
external/bsd/libarchive/dist/libarchive/archive_windows.h patch
external/bsd/libarchive/dist/libarchive/archive_write.3 patch
external/bsd/libarchive/dist/libarchive/archive_write.c patch
external/bsd/libarchive/dist/libarchive/archive_write_disk.3 patch
external/bsd/libarchive/dist/libarchive/archive_write_disk.c patch
external/bsd/libarchive/dist/libarchive/archive_write_disk_private.h patch
external/bsd/libarchive/dist/libarchive/archive_write_disk_set_standard_lookup.c patch
external/bsd/libarchive/dist/libarchive/archive_write_open_fd.c patch
external/bsd/libarchive/dist/libarchive/archive_write_open_file.c patch
external/bsd/libarchive/dist/libarchive/archive_write_open_filename.c patch
external/bsd/libarchive/dist/libarchive/archive_write_open_memory.c patch
external/bsd/libarchive/dist/libarchive/archive_write_private.h patch
external/bsd/libarchive/dist/libarchive/archive_write_set_compression_bzip2.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_compression_compress.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_compression_gzip.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_compression_none.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_compression_program.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_format.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_format_ar.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_format_by_name.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_format_cpio.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_format_cpio_newc.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_format_pax.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_format_shar.c patch
external/bsd/libarchive/dist/libarchive/archive_write_set_format_ustar.c patch
external/bsd/libarchive/dist/libarchive/config_freebsd.h patch
external/bsd/libarchive/dist/libarchive/config_windows.h patch
external/bsd/libarchive/dist/libarchive/cpio.5	patch
external/bsd/libarchive/dist/libarchive/filter_fork.c patch
external/bsd/libarchive/dist/libarchive/filter_fork.h patch
external/bsd/libarchive/dist/libarchive/libarchive-formats.5 patch
external/bsd/libarchive/dist/libarchive/libarchive.3 patch
external/bsd/libarchive/dist/libarchive/libarchive_internals.3 patch
external/bsd/libarchive/dist/libarchive/mtree.5	patch
external/bsd/libarchive/dist/libarchive/tar.5 patch
external/bsd/libarchive/dist/libarchive/test/list.h patch
external/bsd/libarchive/dist/libarchive/test/main.c patch
external/bsd/libarchive/dist/libarchive/test/read_open_memory.c patch
external/bsd/libarchive/dist/libarchive/test/test.h patch
external/bsd/libarchive/dist/libarchive/test/test_acl_basic.c patch
external/bsd/libarchive/dist/libarchive/test/test_acl_pax.c patch
external/bsd/libarchive/dist/libarchive/test/test_archive_api_feature.c patch
external/bsd/libarchive/dist/libarchive/test/test_bad_fd.c patch
external/bsd/libarchive/dist/libarchive/test/test_compat_gtar.c patch
external/bsd/libarchive/dist/libarchive/test/test_compat_gtar_1.tgz.uu patch
external/bsd/libarchive/dist/libarchive/test/test_compat_tar_hardlink.c patch
external/bsd/libarchive/dist/libarchive/test/test_compat_tar_hardlink_1.tar.uu patch
external/bsd/libarchive/dist/libarchive/test/test_compat_zip.c patch
external/bsd/libarchive/dist/libarchive/test/test_compat_zip_1.zip.uu patch
external/bsd/libarchive/dist/libarchive/test/test_empty_write.c patch
external/bsd/libarchive/dist/libarchive/test/test_entry.c patch
external/bsd/libarchive/dist/libarchive/test/test_entry_strmode.c patch
external/bsd/libarchive/dist/libarchive/test/test_link_resolver.c patch
external/bsd/libarchive/dist/libarchive/test/test_pax_filename_encoding.c patch
external/bsd/libarchive/dist/libarchive/test/test_pax_filename_encoding.tar.gz.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_compress_program.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_data_large.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_extract.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_ar.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_cpio_bin.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_cpio_bin_Z.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_cpio_bin_bz2.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_cpio_bin_gz.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_cpio_odc.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_cpio_svr4_gzip.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_cpio_svr4c_Z.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_empty.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_gtar_gz.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_gtar_sparse.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_gtar_sparse_1_13.tgz.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_gtar_sparse_1_17.tgz.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_gtar_sparse_1_17_posix00.tgz.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_gtar_sparse_1_17_posix01.tgz.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_gtar_sparse_1_17_posix10.tgz.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_gtar_sparse_1_17_posix10_modified.tar.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_iso_gz.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_isorr_bz2.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_isorr_bz2.iso.bz2.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_mtree.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_pax_bz2.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_tar.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_tar_empty_filename.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_tar_empty_filename.tar.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_tbz.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_tgz.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_tz.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_zip.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_format_zip.zip.uu patch
external/bsd/libarchive/dist/libarchive/test/test_read_large.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_pax_truncated.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_position.c patch
external/bsd/libarchive/dist/libarchive/test/test_read_truncated.c patch
external/bsd/libarchive/dist/libarchive/test/test_tar_filenames.c patch
external/bsd/libarchive/dist/libarchive/test/test_tar_large.c patch
external/bsd/libarchive/dist/libarchive/test/test_ustar_filenames.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_compress.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_compress_program.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_disk.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_disk_hardlink.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_disk_perms.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_disk_secure.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_format_ar.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_format_cpio.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_format_cpio_empty.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_format_cpio_newc.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_format_cpio_odc.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_format_shar_empty.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_format_tar.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_format_tar_empty.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_format_tar_ustar.c patch
external/bsd/libarchive/dist/libarchive/test/test_write_open_memory.c patch
external/bsd/libarchive/dist/tar/bsdtar.1	patch
external/bsd/libarchive/dist/tar/bsdtar.c	patch
external/bsd/libarchive/dist/tar/bsdtar.h	patch
external/bsd/libarchive/dist/tar/bsdtar_platform.h patch
external/bsd/libarchive/dist/tar/getdate.y	patch
external/bsd/libarchive/dist/tar/matching.c	patch
external/bsd/libarchive/dist/tar/read.c		patch
external/bsd/libarchive/dist/tar/siginfo.c	patch
external/bsd/libarchive/dist/tar/subst.c	patch
external/bsd/libarchive/dist/tar/tree.c		patch
external/bsd/libarchive/dist/tar/tree.h		patch
external/bsd/libarchive/dist/tar/util.cx	patch
external/bsd/libarchive/dist/tar/write.c	patch
external/bsd/libarchive/dist/tar/test/main.c	patch
external/bsd/libarchive/dist/tar/test/test.h	patch
external/bsd/libarchive/dist/tar/test/test_0.c	patch
external/bsd/libarchive/dist/tar/test/test_basic.c patch
external/bsd/libarchive/dist/tar/test/test_copy.c patch
external/bsd/libarchive/dist/tar/test/test_getdate.c patch
external/bsd/libarchive/dist/tar/test/test_help.c patch
external/bsd/libarchive/dist/tar/test/test_option_T.c patch
external/bsd/libarchive/dist/tar/test/test_patterns.c patch
external/bsd/libarchive/dist/tar/test/test_stdio.c patch
external/bsd/libarchive/dist/tar/test/test_version.c patch
external/bsd/libarchive/include/config_netbsd.h	patch
external/bsd/libarchive/lib/Makefile		patch
external/bsd/libarchive/lib/shlib_version	patch
external/bsd/pkg_install/Makefile		patch
external/bsd/pkg_install/Makefile.inc		patch
external/bsd/pkg_install/prepare-import.sh	patch
external/bsd/pkg_install/dist/add/add.h		patch
external/bsd/pkg_install/dist/add/main.c	patch
external/bsd/pkg_install/dist/add/perform.c	patch
external/bsd/pkg_install/dist/add/pkg_add.1	patch
external/bsd/pkg_install/dist/admin/README	patch
external/bsd/pkg_install/dist/admin/admin.h	patch
external/bsd/pkg_install/dist/admin/audit-packages.sh.in patch
external/bsd/pkg_install/dist/admin/audit.c	patch
external/bsd/pkg_install/dist/admin/check.c	patch
external/bsd/pkg_install/dist/admin/download-vulnerability-list.sh.in patch
external/bsd/pkg_install/dist/admin/main.c	patch
external/bsd/pkg_install/dist/admin/pkg_admin.1	patch
external/bsd/pkg_install/dist/bpm/bpm.1		patch
external/bsd/pkg_install/dist/bpm/bpm.sh.in	patch
external/bsd/pkg_install/dist/create/build.c	patch
external/bsd/pkg_install/dist/create/create.h	patch
external/bsd/pkg_install/dist/create/main.c	patch
external/bsd/pkg_install/dist/create/perform.c	patch
external/bsd/pkg_install/dist/create/pkg_create.1 patch
external/bsd/pkg_install/dist/create/pl.c	patch
external/bsd/pkg_install/dist/create/util.c	patch
external/bsd/pkg_install/dist/delete/pkg_delete.1 patch
external/bsd/pkg_install/dist/delete/pkg_delete.c patch
external/bsd/pkg_install/dist/info/info.h	patch
external/bsd/pkg_install/dist/info/main.c	patch
external/bsd/pkg_install/dist/info/perform.c	patch
external/bsd/pkg_install/dist/info/pkg_info.1	patch
external/bsd/pkg_install/dist/info/show.c	patch
external/bsd/pkg_install/dist/lib/automatic.c	patch
external/bsd/pkg_install/dist/lib/config.h.in	patch
external/bsd/pkg_install/dist/lib/conflicts.c	patch
external/bsd/pkg_install/dist/lib/decompress.c	patch
external/bsd/pkg_install/dist/lib/defs.h	patch
external/bsd/pkg_install/dist/lib/dewey.c	patch
external/bsd/pkg_install/dist/lib/dewey.hx	patch
external/bsd/pkg_install/dist/lib/fexec.c	patch
external/bsd/pkg_install/dist/lib/file.c	patch
external/bsd/pkg_install/dist/lib/global.c	patch
external/bsd/pkg_install/dist/lib/gpgsig.c	patch
external/bsd/pkg_install/dist/lib/iterate.c	patch
external/bsd/pkg_install/dist/lib/lib.h		patch
external/bsd/pkg_install/dist/lib/license.c	patch
external/bsd/pkg_install/dist/lib/lpkg.c	patch
external/bsd/pkg_install/dist/lib/opattern.c	patch
external/bsd/pkg_install/dist/lib/parse-config.c patch
external/bsd/pkg_install/dist/lib/pkcs7.c	patch
external/bsd/pkg_install/dist/lib/pkg_install.conf.5.in patch
external/bsd/pkg_install/dist/lib/pkg_io.c	patch
external/bsd/pkg_install/dist/lib/pkg_signature.c patch
external/bsd/pkg_install/dist/lib/pkg_summary.5	patch
external/bsd/pkg_install/dist/lib/pkgdb.c	patch
external/bsd/pkg_install/dist/lib/pkgsrc.7	patch
external/bsd/pkg_install/dist/lib/plist.c	patch
external/bsd/pkg_install/dist/lib/remove.c	patch
external/bsd/pkg_install/dist/lib/str.c		patch
external/bsd/pkg_install/dist/lib/var.c		patch
external/bsd/pkg_install/dist/lib/version.c	patch
external/bsd/pkg_install/dist/lib/version.h	patch
external/bsd/pkg_install/dist/lib/vulnerabilities-file.c patch
external/bsd/pkg_install/dist/lib/xwrapper.c	patch
external/bsd/pkg_install/dist/x509/pkgsrc.cnf	patch
external/bsd/pkg_install/dist/x509/pkgsrc.sh	patch
external/bsd/pkg_install/dist/x509/signing.txt patch
external/bsd/pkg_install/lib/Makefile		patch
external/bsd/pkg_install/lib/config.h		patch
external/bsd/pkg_install/lib/nbcompat.h		patch
external/bsd/pkg_install/sbin/Makefile		patch
external/bsd/pkg_install/sbin/Makefile.inc	patch
external/bsd/pkg_install/sbin/bpm/Makefile	patch
external/bsd/pkg_install/sbin/pkg_add/Makefile	patch
external/bsd/pkg_install/sbin/pkg_admin/Makefile patch
external/bsd/pkg_install/sbin/pkg_create/Makefile patch
external/bsd/pkg_install/sbin/pkg_delete/Makefile patch
external/bsd/pkg_install/sbin/pkg_info/Makefile	patch
external/lib/Makefile				patch
usr.sbin/Makefile				patch

	Pull up pkg_install-20090528, libarchive-2.5.5 and libfetch-2.23
	with the associated build infrastructure as of 20090529 from HEAD. 
	[joerg, ticket #1322]

sys/arch/sh3/sh3/locore_subr.S			1.52

	Fix logic error in copyinstr() when deciding whether to return EFAULT
	or ENAMETOOLONG.
	[uwe, ticket #1323]

lib/libpam/modules/pam_unix/pam_unix.c		1.13
	Restore the good old UNIX behavior of root password changing: only root
	may change the root password.

	(Checked that everybody else's password can be changed without any
	problem, and checked that root can still change the root password.)
	[tonnerre, ticket #1326]

sys/compat/linux/common/linux_sched.c		1.59

	In linux_sys_sched_getaffinity(), do not leak memory on error.
	[njoly, ticket #1328]

external/bsd/pkg_install/dist/admin/pkg_admin.1	1.1.1.7
external/bsd/pkg_install/dist/lib/license.c	1.1.1.3
external/bsd/pkg_install/dist/lib/version.h	1.1.1.16

	Merge pkg_install-20090610 from HEAD
	[joerg, ticket #1325]

dist/tcpdump/print-bgp.c			patch
dist/tcpdump/print-isoclns.c			patch
dist/tcpdump/print-ldp.c			patch
dist/tcpdump/print-rsvp.c			patch

	Fix CAN-2005-1278, CAN-2005-1279 and CAN-2005-1280.
	[tonnerre, ticket #1329]

games/hunt/huntd/answer.c			1.10

	Fix possible remote DoS of a running hunt game, and prevent
	a possible theoretical attack involving >= 1 billion ammo.
	[dholland, ticket #1330]

games/hack/extern.h				1.11
games/hack/hack.do_name.c			1.9, 1.10
games/hack/hack.eat.c				1.8
games/hack/hack.end.c				1.12 via patch
games/hack/hack.fight.c				1.10 via patch
games/hack/hack.h				1.13 via patch
games/hack/hack.invent.c			1.12, 1.13
games/hack/hack.main.c				1.12, 1.13
games/hack/hack.objnam.c			1.9
games/hack/hack.options.c			1.9
games/hack/hack.pri.c				1.11
games/hack/hack.rip.c				1.10, 1.11
games/hack/hack.shk.c				1.10
games/hack/hack.topl.c				1.10, 1.11
games/hack/hack.unix.c				1.12, 1.13

	sprintf -> snprintf, plus some use of strlcpy/strlcat where
	appropriate.
	Fix two serious string-handling bugs (one exploitable, one
	probably exploitable) and also add proper checking/paranoia
	in several other places.
	[dholland, ticket #1331]

crypto/dist/ssh/cipher.c			1.22 via patch
crypto/dist/ssh/cipher.h			1.3 via patch
crypto/dist/ssh/packet.c			1.32 via patch

	Add special handling for CBC cipher modes to make them appear
	less favorable than CTR modes. Also, in order to avoid creating
	oracles unnecessarily, change behavior in various situations
	from "Drop connection" to "Ignore packets up to 256kB". This
	affects CBC mode ciphers only.
	[tonnerre, ticket #1332]

crypto/dist/openssl/apps/speed.c 		patch	
crypto/dist/openssl/apps/spkac.c 		patch
crypto/dist/openssl/apps/verify.c 		patch
crypto/dist/openssl/apps/x509.c 		patch
crypto/dist/openssl/crypto/asn1/asn1.h 		patch
crypto/dist/openssl/crypto/asn1/asn1_err.c 	patch
crypto/dist/openssl/crypto/asn1/tasn_dec.c 	patch
crypto/dist/openssl/ssl/s2_clnt.c 		patch
crypto/dist/openssl/ssl/s2_srvr.c 		patch
crypto/dist/openssl/ssl/s3_clnt.c 		patch
crypto/dist/openssl/ssl/s3_srvr.c 		patch
crypto/dist/openssl/ssl/ssltest.c 		patch

	Fixes for CVE-2009-0590, CVE-2009-0789, and CVE-2008-5077.
	[tonnerre, ticket #1333]

crypto/dist/openssl/crypto/pqueue/pqueue.c	patch
crypto/dist/openssl/crypto/pqueue/pqueue.h	patch
crypto/dist/openssl/ssl/d1_both.c		patch
crypto/dist/openssl/ssl/d1_pkt.c		patch
crypto/dist/openssl/ssl/s3_pkt.c		patch
crypto/dist/openssl/ssl/ssl.h			patch
crypto/dist/openssl/ssl/ssl_err.c		patch

	Another OpenSSL security update.
	[tonnerre, ticket #1334]

crypto/dist/openssl/ssl/d1_both.c		patch

	Fix build problem introduced with ticket 1334.
	[spz, ticket #851]

dist/dhcp/client/dhclient.c			1.20

	Limit the length of the address mask before we copy it.
	Fixes CVE-2009-0692.
	[tonnerre, ticket #1336]

dist/dhcp/server/dhcp.c				1.11

	Fix behavior of dhcpd in the case where clientid and hardware
	ethernet definitions are mixed. Fixes a refcount assertion.
	[tonnerre, ticket #1337]

common/lib/libc/hash/sha2/sha2.c		patch
crypto/dist/openssl/crypto/evp/m_sha1.c		patch
distrib/sets/lists/base/shl.mi			patch
distrib/sets/lists/comp/mi			patch
lib/libc/shlib_version				patch
lib/libc/hash/sha2/Makefile.inc			patch
lib/libc/hash/sha2/sha2.3			patch
lib/libc/hash/sha2/sha224hl.c			patch
lib/libc/include/namespace.h			patch
lib/libcrypto/libc-sha256.c			patch
lib/libcrypto/libc-sha512.c			patch
lib/libcrypto/sha.inc				patch
lib/libcrypto/shlib_version			patch
sys/sys/sha2.h					patch

	- Add support for SHA224 to libc
	- Fix Big Endian support in some cases
	- Use libc support in libcrypto
	[joerg, ticket #1338]

dist/bind/bin/named/update.c			patch

	Fix CVE-2009-0696.
	[christos, ticket #1347]

lib/libc/sys/intro.2				1.53, 1.54

	Mention, along with the behavior of succeeding system calls, the
	normal behavior of succeeding library functions regarding errno.
	(That is, they may leave arbitrary nonzero values in errno.)
	Ok kleink@; related to PR lib/41567 as well as a recent thread on
	tech-userlevel.
	[dholland, ticket #1340]

lib/libc/stdlib/strtol.3			1.25, 1.26 via patch
lib/libc/stdlib/strtoul.3			1.22, 1.23 via patch

	Clarify the description of the errno behavior, based on the recent
	thread in tech-userlevel.
	[dholland, ticket #1341]

lib/libc/sys/intro.2				1.50 via patch

	PR/40060 - Bug Hunting -- grammar fix
	[dholland, ticket #1344]

sbin/wsconsctl/wsconsctl.8			1.26

	PR/40059 - Bug Hunting -- add Xref to wscons.conf(5)
	[dholland, ticket #1345]

lib/libc/sys/semctl.2				1.18
lib/libc/sys/shmctl.2				1.20

	Fix pastos. From Jukka Salmi in PR 41605, with a very minor adjustment.
	[dholland, ticket #1351]

usr.bin/xlint/lint1/init.c			1.22

	pushinit(): fix a use-after-free bug.
	[msaitoh, ticket #1353]

sbin/dkctl/dkctl.8				1.19, 1.20
sbin/dkctl/dkctl.c				1.18

	list the partition types addwedge understands, so you don't need to
	utsl to find out what strings to use here
	fixes PR 37252
	make dkctl conform to its man page and print the device name on
	addwedge when the addition was successful (as well as indicating
	success).
	[spz, ticket #1350]

bin/pax/options.c				1.105 via patch
usr.bin/ctags/C.c				1.19
usr.bin/ctags/ctags.h				1.9
usr.bin/ctags/fortran.c				1.11
usr.bin/ctags/lisp.c				1.11
usr.bin/ctags/print.c				1.10
usr.bin/ctags/yacc.c				1.12
usr.bin/gencat/gencat.c				1.30 via patch

	Rename internal getline() function to get_line() so it does
	not conflict with -current's getline(3) libc function.
	[plunky, ticket #1354]

sys/dev/pci/twa.c				1.32

	Disable completely bogus DIAGNOSTIC check.
	[bouyer, ticket #1349]

external/bsd/pkg_install/dist/info/perform.c     1.1.1.10
external/bsd/pkg_install/dist/lib/license.c      1.1.1.4 
external/bsd/pkg_install/dist/lib/pkg_install.conf.5.in  1.1.1.5
external/bsd/pkg_install/dist/lib/version.h      1.1.1.17
        
	Import pkg_install-20090724:
	- license handling: accept upper case letters. Keep license checks
	  case-sensitive as done in the older pkgsrc logic. Document this.
	  OK dillo@, schmonz@, wiz@
	- pkg_info:
	- fix handling of non-packages, that are valid archives
	- invert order of pkg_info -r to better match the expectations of
	  make update.' external/bsd/pkg_install
	[joerg, ticket #1346]

sys/kern/kern_exec.c				1.149 via patch

	Fix ktrace of data from iovec based system calls.
	Fixes PR/41819
	[dsl, ticket #1352]

etc/ssh/ssh_known_hosts				1.5

	add morden, mollari, pkgbuild and build
	adjust function names' keys
	add the proper names of hosts too in preparation of their
	function moving
	[spz, ticket #1355]

usr.bin/netstat/netstat.1			1.52

	Fix typo
	[dholland, ticket #1356]

usr.bin/chflags/chflags.1			1.18

	Add some markup to improve clarity.
	[dholland, ticket #1357]

sys/netinet/tcp_usrreq.c			1.148 via patch

	Make the sysctl routines take raise to splnet() before dealing with
	any data structures.
	[mlelstv, ticket #1358]

xfree/xc/extras/expat/lib/xmltok_impl.c		1.2

	Apply revisions 1.14 and 1.15 from expat CVS to fix SA36425.
	[snj, ticket #1359]

share/man/man7/release.7			1.31 via patch
distrib/cdrom/hide-hfs.lst			1.5
distrib/mac68k/stand/Makefile			1.6 via patch
distrib/notes/common/main			1.451
distrib/sets/Makefile				1.70
distrib/sets/makesrctars			1.37
distrib/sets/makesums				1.16

	Only generate SHA512 and MD5 checksums for releases.
	[snj, ticket #1365]

external/bsd/pkg_install/dist/add/add.h			1.1.1.3 - 1.1.1.5
external/bsd/pkg_install/dist/add/main.c		1.1.1.4 - 1.1.1.6
external/bsd/pkg_install/dist/add/perform.c		1.1.1.10 - 1.1.1.12
external/bsd/pkg_install/dist/add/pkg_add.1		1.1.1.8
external/bsd/pkg_install/dist/admin/audit.c		1.1.1.6
external/bsd/pkg_install/dist/admin/main.c		1.1.1.8 - 1.1.1.11
external/bsd/pkg_install/dist/admin/pkg_admin.1		1.1.1.9
external/bsd/pkg_install/dist/create/build.c		1.1.1.6
external/bsd/pkg_install/dist/create/create.h		1.1.1.4
external/bsd/pkg_install/dist/create/main.c		1.1.1.5
external/bsd/pkg_install/dist/create/perform.c		1.1.1.4
external/bsd/pkg_install/dist/delete/pkg_delete.1	1.1.1.5 - 1.1.1.6
external/bsd/pkg_install/dist/delete/pkg_delete.c	1.1.1.5
external/bsd/pkg_install/dist/info/info.h		1.1.1.4 - 1.1.1.5
external/bsd/pkg_install/dist/info/main.c		1.1.1.6 - 1.1.1.7
external/bsd/pkg_install/dist/info/perform.c		1.1.1.11
external/bsd/pkg_install/dist/info/show.c		1.1.1.7
external/bsd/pkg_install/dist/lib/config.h.in		1.1.1.4
external/bsd/pkg_install/dist/lib/conflicts.c		1.1.1.3
external/bsd/pkg_install/dist/lib/decompress.c		1.1.1.3
external/bsd/pkg_install/dist/lib/fexec.c		1.1.1.3
external/bsd/pkg_install/dist/lib/file.c		1.1.1.4 - 1.1.1.5
external/bsd/pkg_install/dist/lib/gpgsig.c		1.1.1.2
external/bsd/pkg_install/dist/lib/iterate.c		1.1.1.3
external/bsd/pkg_install/dist/lib/lib.h			1.1.1.8 - 1.1.1.9
external/bsd/pkg_install/dist/lib/license.c		1.1.1.5
external/bsd/pkg_install/dist/lib/parse-config.c	1.1.1.5 - 1.1.1.7
external/bsd/pkg_install/dist/lib/pkcs7.c		1.1.1.4
external/bsd/pkg_install/dist/lib/pkg_install.conf.5.in	1.1.1.6 - 1.1.1.8
external/bsd/pkg_install/dist/lib/pkg_io.c		1.1.1.7
external/bsd/pkg_install/dist/lib/pkg_signature.c	1.1.1.6
external/bsd/pkg_install/dist/lib/pkgdb.c		1.1.1.4 - 1.1.1.5
external/bsd/pkg_install/dist/lib/plist.c		1.1.1.5
external/bsd/pkg_install/dist/lib/remove.c		1.1.1.2
external/bsd/pkg_install/dist/lib/var.c			1.1.1.3
external/bsd/pkg_install/dist/lib/version.h		1.1.1.18 - 1.1.1.21

	Update to pkg_install-20091008:
	- pkg_add: add support to check license conditions before installation
	- pkg_delete: add -k option to skip over preserve packages.
	- WARNS=4 clean, fix some potential uses of uninitialized variables
	- Add a new command for pkg_admin: findbest. It takes one or more
	  patterns and searches for the best match in PKG_PATH, just like
	  pkg_add would.
	  It prints the URLs of the best match for each pattern to stdout.
	- Rewrite the config file parser to read the file only once.
	- Fix a bug in pkg_add's -P handling. For dependencies the pkgdb path
	  was computed incorrectly and included destdir more than once.
	- Fix the ACTIVE_FTP option to actually set the "a" flag and not the
	  old "p" flag.
	- restore pkg_add -f functionality for missing dependencies (PR 42001)
	- pkg_admin rebuild should count packages correctly (he@), also
	  count @pkgdir   
	- fix gpg-sign-package syntax in pkg_admin(1)
	- change default URL for pkg-vulnerabilities to use HTTP
	- Fix German accent
	- Don't dereference a null pointer for pkg_admin add
	[joerg, ticket #1364]

sys/netinet6/ip6_forward.c			1.67

	Clear cksum flags before any further processing like
	ip_forward does. Many drivers set the UDP/TCP v4 flags even
	for v6 traffic and if the packet is encapsulated with gif,
	the IPv6 header would get corrupted by ip_output.
	[joerg, ticket #1366]

dist/ntp/ntpd/ntp_request.c			patch

	Fix CVE-2009-3563.
	[kardel, ticket #1369]

sys/netbt/rfcomm_session.c			1.16

	When receiving a MCC PN response, the max frame size that the remote
	party requests must be less than the one we asked for which will not
	be greater than the max acceptable value so no need to test for that
	but make sure that it is not smaller than minimum acceptable value.
	[plunky, ticket #1372]

crypto/dist/openssl/ssl/s3_lib.c		patch
crypto/dist/openssl/ssl/s3_pkt.c		patch
crypto/dist/openssl/ssl/s3_srvr.c		patch
crypto/dist/openssl/ssl/ssl_locl.h		patch

	Disable OpenSSL renegotiation, thus avoiding CVE-2009-3555.
	[tonnerre, ticket #1373]

sys/lib/libkern/arc4random.c			1.21

	Keep arc4_i and arc4_j synchronised after a rekeying. This
	prevents accidentally ending up in a short ARC4 cycle.
	[joerg, ticket #1374]

sys/dev/pci/azalia.c				patch

	Signedness bug/crash in azalia.  Fixes PR 42604.
	[tonnerre, ticket #1375]

dist/bind/CHANGES				patch
dist/bind/FAQ					patch
dist/bind/FAQ.xml				patch
dist/bind/bin/named/query.c			patch
dist/bind/bin/tests/system/conf.sh.in		patch
dist/bind/bin/tests/system/dnssec/ns2/example.db.in patch
dist/bind/bin/tests/system/dnssec/ns2/sign.sh	patch
dist/bind/bin/tests/system/dnssec/tests.sh	patch
dist/bind/doc/rfc/index				patch
dist/bind/lib/dns/api				patch
dist/bind/lib/dns/include/dns/types.h		patch
dist/bind/lib/dns/masterdump.c			patch
dist/bind/lib/dns/openssldsa_link.c		patch
dist/bind/lib/dns/opensslrsa_link.c		patch
dist/bind/lib/dns/rbtdb.c			patch
dist/bind/lib/dns/resolver.c			patch
dist/bind/lib/dns/validator.c			patch
dist/bind/lib/lwres/man/lwres.html		patch
dist/bind/lib/lwres/man/lwres_buffer.html	patch
dist/bind/lib/lwres/man/lwres_config.html	patch
dist/bind/lib/lwres/man/lwres_context.html	patch
dist/bind/lib/lwres/man/lwres_gabn.html		patch
dist/bind/lib/lwres/man/lwres_gai_strerror.html	patch
dist/bind/lib/lwres/man/lwres_getaddrinfo.html	patch
dist/bind/lib/lwres/man/lwres_gethostent.html	patch
dist/bind/lib/lwres/man/lwres_getipnode.html	patch
dist/bind/lib/lwres/man/lwres_getnameinfo.html	patch
dist/bind/lib/lwres/man/lwres_getrrsetbyname.html patch
dist/bind/lib/lwres/man/lwres_gnba.html		patch
dist/bind/lib/lwres/man/lwres_hstrerror.html	patch
dist/bind/lib/lwres/man/lwres_inetntop.html	patch
dist/bind/lib/lwres/man/lwres_noop.html		patch
dist/bind/lib/lwres/man/lwres_packet.html	patch
dist/bind/lib/lwres/man/lwres_resutil.html	patch
dist/bind/version				patch

	Backport changes from 9.4.3-9.4.3-P5 to 9.4.2, fixing a number of
	security issues.
	[christos, ticket #1376]

xsrc/xfree/xc/extras/expat/lib/xmlparse.c	1.2

	Add patch from upstream CVS to fix CVE-2009-3560 (possible DOS due to
	crash on bad input).
	[tron, ticket #1383]

crypto/dist/openssl/crypto/comp/c_zlib.c	patch

	Fix to deal with CVE-2009-4355 from OpenSSL's repositroy.
	[taca, ticket #1378]

crypto/dist/openssl/ssl/s3_pkt.c		patch

	Apply patchset 19476 from openssl repository, fixing CVE-2010-0740.
	From http://www.openssl.org/news/secadv_20100324.txt:
	"In TLS connections, certain incorrectly formatted records can cause
	an OpenSSL client or server to crash due to a read attempt at NULL".
	[bouyer, ticket #1392]

sys/netinet6/udp6_output.c			1.41 via patch

	udp6_output(): call ip6_clearpktopts(&opt, ...) only if opt
	was initialized.
	[dyoung, ticket #1397]

sys/netsmb/mchain.h				1.9 via patch
sys/netsmb/smb_dev.h				1.7
sys/netsmb/smb_subr.c				1.35
sys/netsmb/smb_subr.h				1.19
sys/netsmb/subr_mchain.c			1.19 via patch

	Convert sizes/lengths to unsigned (size_t) or uint32_t
	(for binary compatibility).
	[christos, ticket #1398]

sys/coda/coda.h					1.16
sys/coda/coda_venus.c				1.28
sys/coda/coda_vnops.c				1.76

	Correct incomplete size checks for the coda ioctls. From Dan Rosenberg.
	[christos, ticket #1400]

crypto/dist/ssh/sftp-glob.c			patch
crypto/dist/ssh/sftp.c				patch
lib/libc/gen/glob.3				1.37 via patch
lib/libc/gen/glob.c				1.26 via patch

	Fix globbing in libc and sftp.
	[christos, ticket #1399]

dist/bzip2/decompress.c				1.2

	Avoid integer overflow that can lead to buffer overflow.
	[christos, ticket #1406]

crypto/external/bsd/openssl/dist/ssl/s3_clnt.c	1.2 via patch

	fix a double free() in error case (fixing CVE-2010-2939), see the
	thread "openssl-1.0.0a and glibc detected sthg ;)" in openssl-dev.
	I was getting a SEGV with the example posted there.
	[jnemeth, ticket #1408]

etc/ssh/ssh_known_hosts				1.6

	releng has been on mollari for a while now. Also, add wiki
	[riz, ticket #1415]

dist/bind/							patch
include/resolv.h						patch
include/arpa/nameser.h:						patch
lib/libc/include/isc/assertions.h:				patch
lib/libc/include/isc/eventlib.h					patch
lib/libc/isc/assertions.c:					patch
lib/libc/nameser/ns_parse.c					patch
lib/libc/resolv/herror.c:					patch
lib/libc/resolv/res_init.c					patch
lib/libc/resolv/res_mkquery.c:					patch
lib/libc/resolv/res_query.c					patch
lib/libc/resolv/res_send.c:					patch
usr.sbin/bind/Makefile.inc					patch
usr.sbin/bind/include/config.h:					patch
usr.sbin/bind/include/dns/code.h:				patch
usr.sbin/bind/include/dns/enumclass.h:				patch
usr.sbin/bind/include/dns/enumtype.h:				patch
usr.sbin/bind/include/dns/rdatastruct.h:			patch
usr.sbin/bind/include/isc/platform.h:				patch
usr.sbin/bind/include/lwres/netdb.h:				patch
usr.sbin/bind/include/lwres/platform.h:				patch
usr.sbin/bind/libisc/Makefile:					patch
lib/libc/inet/inet_addr.c 					new file

	Update bind to 9.4-ESV-R4, latest version of the 9.4 line.
	[spz, ticket #1413]

sys/kern/init_sysctl.c				patch

	Sanitize arguments before memory allocation.
	[joerg, ticket #1419]

sys/kern/vfs_syscalls.c				1.415 via patch

	Check for bogus flags to access() up front. Otherwise we end up
	calling VOP_ACCESS with flags 0 and something asserts deep in the
	bowels of kauth. PR 44648 from Taylor Campbell. (I moved the check
	earlier relative to the suggested patch.)
	[dholland, ticket #1417]

lib/libc/inet/inet_net_pton.c			1.2

	Check bits on each loop to prevent integer oveflow.
	Reported by Maksymilian Arciemowicz
	[spz, ticket #1418]

gnu/dist/postfix/HISTORY				patch
gnu/dist/postfix/RELEASE_NOTES				patch
gnu/dist/postfix/makedefs				patch
gnu/dist/postfix/html/postconf.5.html			patch
gnu/dist/postfix/man/man5/postconf.5			patch
gnu/dist/postfix/mantools/postlink			patch
gnu/dist/postfix/src/bounce/bounce_template.c		patch
gnu/dist/postfix/src/cleanup/cleanup_map1n.c		patch
gnu/dist/postfix/src/flush/flush.c			patch
gnu/dist/postfix/src/global/cleanup_user.h		patch
gnu/dist/postfix/src/global/db_common.c			patch
gnu/dist/postfix/src/global/mail_params.h		patch
gnu/dist/postfix/src/global/mail_version.h		patch
gnu/dist/postfix/src/global/pipe_command.c		patch
gnu/dist/postfix/src/local/recipient.c			patch
gnu/dist/postfix/src/master/master_sig.c		patch
gnu/dist/postfix/src/milter/milter8.c			patch
gnu/dist/postfix/src/oqmgr/qmgr_entry.c			patch
gnu/dist/postfix/src/pickup/pickup.c			patch
gnu/dist/postfix/src/pipe/pipe.c			patch
gnu/dist/postfix/src/postdrop/postdrop.c		patch
gnu/dist/postfix/src/postsuper/postsuper.c		patch
gnu/dist/postfix/src/qmgr/qmgr_entry.c			patch
gnu/dist/postfix/src/smtp/smtp.c			patch
gnu/dist/postfix/src/smtp/lmtp_params.c			patch
gnu/dist/postfix/src/smtp/smtp_params.c			patch
gnu/dist/postfix/src/smtp/smtp_proto.c			patch
gnu/dist/postfix/src/smtp/smtp_reuse.c			patch
gnu/dist/postfix/src/smtpd/smtpd.c			patch
gnu/dist/postfix/src/smtpd/smtpd_check.c		patch
gnu/dist/postfix/src/smtpd/smtpd_proxy.c		patch
gnu/dist/postfix/src/tls/Makefile.in			patch
gnu/dist/postfix/src/tls/tls_certkey.c			patch
gnu/dist/postfix/src/trivial-rewrite/resolve.c		patch
gnu/dist/postfix/src/util/events.c			patch
gnu/dist/postfix/src/util/host_port.c			patch
gnu/dist/postfix/src/util/make_dirs.c			patch
gnu/dist/postfix/src/util/match_ops.c			patch
gnu/dist/postfix/src/util/safe_open.c			patch
gnu/dist/postfix/src/util/sys_defs.h			patch
gnu/dist/postfix/src/util/valid_hostname.c		patch
gnu/dist/postfix/src/util/vstream.c			patch
gnu/dist/postfix/src/util/vstring.c			patch
gnu/dist/postfix/src/util/watchdog.c			patch
gnu/dist/postfix/src/xsasl/xsasl_dovecot_server.c	patch
gnu/dist/postfix/proto/postconf.proto			patch

	Update Postfix to version 2.4.16. This update fixes many bugs
	including the vulnerability reported in CVE-2011-0411.
	[tron, ticket #1420]

sys/kern/kern_exec.c				1.269 via patch

	Check for number of processes resource violation in execve().
	[spz, ticket #1421]

sys/netinet/tcp_output.c			1.170 via patch

	Clean up setting ECN bit in TOS.  Fixes PR 44742
	[spz, ticket #1424]

sys/netinet6/ipcomp_input.c			1.37 via patch
sys/netipsec/xform_ipcomp.c			1.26 via patch

	Prevent nesting ipcomp.  CVE-2011-1547.
	[spz, ticket #1425]

xsrc/xfree/xc/programs/xrdb/xrdb.c		patch

	Fix CVE-2011-0465
	[mrg, ticket #1426]

dist/dhcp/client/dhclient.c			1.21

	CVE-2011-0997 dhclient: insufficient sanitization of certain DHCP
	response values.
	[christos, ticket #1427]

dist/bind/CHANGES:				patch
dist/bind/version:				patch
dist/bind/lib/dns/api:				patch
dist/bind/lib/dns/ncache.c:			patch
dist/bind/lib/dns/rdataset.c:			patch
dist/bind/lib/dns/validator.c:			patch
dist/bind/lib/dns/include/dns/rdataset.h:	patch

	Fix security issue: An authoritative name server sending a negative
	 response containing a very large RRset could
	 trigger an off-by-one error in the ncache code
	 and crash named.
	Fix bug: Named could fail to validate zones listed in a DLV
	 that validated insecure without using DLV and had
	 DS records in the parent zone.
	[spz, ticket #1430]

dist/bind/lib/dns/masterdump.c				patch
dist/bind/lib/dns/message.c				patch
dist/bind/lib/dns/ncache.c				patch
dist/bind/lib/dns/rbtdb.c				patch
dist/bind/lib/dns/rdataset.c				patch
dist/bind/lib/dns/resolver.c				patch
dist/bind/lib/dns/validator.c				patch
dist/bind/lib/dns/include/dns/rdataset.h		patch

	Patch bind to address CVE-2011-2464.
	[spz, ticket #1431]

src/usr.bin/compress/zopen.c					1.14-1.15
src/usr.bin/gzip/zuncompress.c					1.9-1.11
xsrc/xfree/xc/extras/freetype2/src/lzw/zopen.c			1.2-1.3
xsrc/xfree/xc/lib/font/fontfile/decompress.c			1.2

	Address CVE-2011-2895, buffer overflow in decompression.
	[joerg, ticket #1433]

distrib/sets/lists/base/mi		patch
doc/3RDPARTY				patch
share/zoneinfo/africa			patch
share/zoneinfo/antarctica		patch
share/zoneinfo/asia			patch
share/zoneinfo/australasia		patch
share/zoneinfo/backward			patch
share/zoneinfo/etcetera			patch
share/zoneinfo/europe			patch
share/zoneinfo/factory			patch
share/zoneinfo/iso3166.tab		patch
share/zoneinfo/leapseconds		patch
share/zoneinfo/northamerica		patch
share/zoneinfo/pacificnew		patch
share/zoneinfo/solar87			patch
share/zoneinfo/solar88			patch
share/zoneinfo/solar89			patch
share/zoneinfo/southamerica		patch
share/zoneinfo/systemv			patch
share/zoneinfo/yearistype.sh		patch
share/zoneinfo/zone.tab			patch

	Update to tzdata2011n.
	[apb, ticket #1435]

sys/uvm/uvm_meter.c				1.57 via patch

	if you are going to dereference a variable, check the variable itself,
	not it cousin.
	[christos, ticket #1436]

sys/kern/kern_event.c				1.73

	PR/45618: Motoyuki OHMORI: kqueue EVFILT_TIMER with smaller timeout
	value makes DIAGNOSTIC kernel panic:  
		KASSERT((c->c_flags & CALLOUT_PENDING) !=3D 0);
	If the computed ticks are <= 0 set it to 1
	[christos, ticket #1438]

dist/openpam/lib/openpam_configure.c		1.6

	Don't allow '/' characters in the "service" argument to pam_start()
	The "service" is blindly appended to config directories ("/etc/pam.d/"),
	and if a user can control the "service" it can get PAM to read config
	files from any location.
	This is not a problem with most software because the "service" is
	usually a constant string. The check protects 3rd party software
	from being abused.
	(CVE-2011-4122)
	[drochner, ticket #1439]

src/dist/bind/CHANGES						patch
src/dist/bind/bin/named/query.c					patch
src/dist/bind/bin/nsupdate/nsupdate.8				patch
src/dist/bind/lib/dns/master.c					patch
src/dist/bind/lib/dns/rbtdb.c					patch
src/dist/bind/lib/isc/nothreads/condition.c			patch
src/dist/bind/lib/isc/nothreads/mutex.c				patch
src/dist/bind/lib/isc/unix/time.c				patch
src/dist/bind/lib/lwres/include/lwres/lwres.h			patch

	Cache lookup could return RRSIG data associated with nonexistent
	records, leading to an assertion failure.  Fixes CVE-2011-4313.
	[christos, ticket #1437]

lib/libtelnet/encrypt.c				1.15

	Avoid buffer overflow, reported by Colin Percival at FreeBSD
	[christos, ticket #1440]

distrib/sets/lists/base/mi			1.988
doc/3RDPARTY					1.920 via patch
share/zoneinfo/antarctica			patch
share/zoneinfo/asia				patch
share/zoneinfo/australasia			patch
share/zoneinfo/europe				patch
share/zoneinfo/leapseconds			patch
share/zoneinfo/northamerica			patch
share/zoneinfo/southamerica			patch
share/zoneinfo/zone.tab				patch

	Update to tzdata2012a.
	[apb, ticket #1441]

doc/3RDPARTY					1.921
share/zoneinfo/northamerica			patch
share/zoneinfo/zone.tab				patch

	Update to tzdata2012b.
	[apb, ticket #1442]

doc/HACKS					1.123 via patch
sys/arch/sparc64/conf/Makefile.sparc64		1.71 via patch
sys/arch/sparc64/conf/files.sparc64		1.138 via patch
sys/arch/sparc64/sparc64/locore.s		1.340 via patch

	Fix the root cause of the hack "disable optimizations for uvm_bio.c
	on 32 bit kernels".

	gcc converts a division in the calculation of UBC_UMAP_ADDR macro
	to multiplication (smul or combination of add/sll), and the
	register of its result contains a garbage in upper 32 bits (the
	upper 32 bits of smul/add/sll's result isn't zero cleared).

	Then it passes to pseg_get{,_real} through pmap_extract without the
	zero clear of upper 32 bits in the optimization case.  So the
	result of pseg_get and pmap_extact sometimes gets screwed up.
	[nakayama, ticket #1443]

crypto/dist/openssl/crypto/mem.c		patch
crypto/dist/openssl/crypto/asn1/a_d2i_fp.c	patch
crypto/dist/openssl/crypto/buffer/buffer.c	patch

	Address CVE-2012-2110.
	[drochner, ticket #1444]

sys/netsmb/subr_mchain.c			1.21

	Fix an smbfs regression introduced in ticket #1398.
	PR#44092.
	[nakayama, ticket #1445]

crypto/dist/openssl/ssl/d1_enc.c		patch

	Address CVE-2012-2333.
	[drochner, ticket #1446]

dist/bind/CHANGES					patch
dist/bind/version					patch
dist/bind/lib/dns/rdata.c				patch
dist/bind/lib/dns/rdataslab.c				patch
	
	Update bind to 9.4-ESV-R4-P2:
	3331.  [security]      dns_rdataslab_fromrdataset could produce bad
			       rdataslabs. [RT #29644]
	[christos, ticket #1447]

sys/arch/amd64/amd64/machdep.c			1.184 via patch
sys/arch/amd64/amd64/netbsd32_machdep.c		1.77 via patch

	If the user process provided a bogus signal handler address, kill it
	now instead of trying to jump to the bogus address.
	[spz, ticket #1450]

dist/bind/CHANGES				patch
dist/bind/version				patch
dist/bind/bin/tests/system/stub/tests.sh	patch
dist/bind/lib/dns/resolver.c			patch
dist/bind/lib/dns/zone.c			patch
dist/bind/lib/isc/random.c			patch

	Address bind CVE-2012-3817.
	[spz, ticket #1455]

gnu/dist/postfix/src/smtpd/smtpd_sasl_proto.c	patch
gnu/dist/postfix/README_FILES/RELEASE_NOTES	patch   

	Apply patch from upstream, fixing CVE-2011-1720
	[reed, ticket #1452]

usr.bin/cksum/cksum.1				1.44 via patch

	Omit outdated cryptographic claims as noted in PR 44160
	[dholland, ticket #1453]

sys/arch/amd64/amd64/trap.c			patch

	Fix potential stack frame corruption
	[spz, ticket #1454]

doc/3RDPARTY					patch
share/zoneinfo/africa				patch
share/zoneinfo/antarctica			patch
share/zoneinfo/asia				patch
share/zoneinfo/australasia			patch
share/zoneinfo/backward				patch
share/zoneinfo/etcetera				patch
share/zoneinfo/europe				patch
share/zoneinfo/factory				patch
share/zoneinfo/iso3166.tab			patch
share/zoneinfo/leapseconds			patch
share/zoneinfo/northamerica			patch
share/zoneinfo/pacificnew			patch
share/zoneinfo/solar87				patch
share/zoneinfo/solar88				patch
share/zoneinfo/solar89				patch
share/zoneinfo/southamerica			patch
share/zoneinfo/systemv				patch
share/zoneinfo/yearistype.sh			patch
share/zoneinfo/zone.tab				patch

	Update to tzdata2012e
	Major changes from tzdata2011b to tzdata2011c:
	africa
		Summer time changes for Morocco (to start late April 2012)
	asia
		Changes for 2012 for Gaza & the West Bank (Hebron) and Syria
	northamerica
		Haiti following US/Canada rules for 2012 (and we're assuming,
		for now anyway, for the future).

	Major changes from tzdata2011c to tzdata2011d:
		Morocco does not observe DST from Jul 20 03:00 to
		Aug 20 02:00 [2012].
	Major changes from tzdata2011d to tzdata2011e:
		* australasia (Pacific/Fakaofo): Tokelau is UTC+13, not UTC+14.
		(Thanks to Steffen Thorsen.)
		* Use a single version number for both code and data.

	[apb, ticket #1456]


dist/bind/CHANGES					patch
dist/bind/version					patch
dist/bind/lib/dns/master.c				patch
dist/bind/lib/dns/rdata.c				patch
dist/bind/lib/dns/rdataslab.c				patch
dist/bind/lib/dns/include/dns/rdata.h			patch

	apply fix for CVE-2012-4244 ("Named could die on specially crafted
	record") from upstream.
	[spz, ticket #1457]

