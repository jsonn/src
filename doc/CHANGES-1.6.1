#	$NetBSD: CHANGES-1.6.1,v 1.1.2.87 2003/01/12 12:37:01 tron Exp $

A complete list of changes from NetBSD 1.6 to NetBSD 1.6.1:

File						Revision(s)
----						--------

sys/conf/osrelease.sh				patch
share/tmac/doc-common				patch

	Mark this as 1.6_STABLE.

distrib/sets/lists/base/mi			1.350
distrib/sets/lists/base/obsolete.mi		1.52-1.53
distrib/sets/lists/man/mi			1.513
distrib/sets/lists/man/obsolete.mi		1.52
libexec/Makefile				1.43
libexec/kfd/Makefile				1.8
usr.bin/Makefile				1.126
usr.bin/kf/Makefile				1.10

	Don't build kf or kfd; there are security issues with
	Heimdal 0.4e, and we don't actually need them.
	[joda, ticket #782]

sys/arch/vax/vsa/asc_vsbus.c			1.25

	Increase sc_maxxfer from 63K to 64K, otherwise fsck
	fails for file systems with larger block sizes.
	[chuck, ticket #783]

sys/dev/pcmcia/if_ne_pcmcia.c			1.95
sys/dev/pcmcia/pcmciadevs			1.177
sys/dev/pcmcia/pcmciadevs.h			regenerate
sys/dev/pcmcia/pcmciadevs_data.h		regenerate

	Add support for ACCTON EN2216-PCMCIA-ETHERNET.
	[bouyer, ticket #829]

doc/LAST_MINUTE					1.1, patch
doc/CHANGES					1.1, patch
doc/CHANGES.prev				1.1, patch
doc/README.files				1.1

	Pull up documentation that was moved into the base source.
	Clean up for the 1.6 release.
	Update LAST_MINUTE for cats and alpha X set issues.

share/termcap/termcap.src			1.71

	Correct the escape sequences for F1-F4 in our xterm entry.
	Fixes PR#18272.
	[jdc, ticket #789]

distrib/sets/makesums				1.5

	Also sum symlinks (as well as files) which match.
	[lukem, ticket #822]

distrib/notes/sparc/hardware			1.22-1.23

	Mention that some non-Sun CD-ROM drives can't boot any OS
	on Sun hardware.  Fix broken link to CD-ROM FAQ.
	[mbw, ticket #833]

sys/netinet/ip_output.c				1.102

	In rare cases when there is no room for ip options
	ip_insertoptions() can fail and corrupt a header length.
	Initialize len and check what ip_insertoptions() returns.
	[darrenr, ticket #842]

libexec/ftpd/ftpd.c				1.142

	Fix to allow /etc/ftpchroot to work correctly for
	usernames with > 9 characters.
	[lukem, ticket #843]

distrib/utils/sysinst/menus.mi.en		1.57-1.58
distrib/utils/sysinst/menus.mi.fr		1.37-1.38
distrib/utils/sysinst/menus.mi.pl		1.8-1.9

	Nullify ftp password whenever the user is changed.
	Fixes PR#11436.
	[grant, ticket #852]

distrib/utils/sysinst/arch/hpcmips/msg.md.en	1.7
distrib/utils/sysinst/arch/i386/msg.md.en	1.28

	Add explanation of normal vs. serial bootblocks.
	Addresses part of PR#18192.
	[grant, ticket #854]

distrib/hpcmips/Makefile			1.22

	Reorder lines so that ${MAKESUMS} is executed after all
	files are installed.
	[shin, ticket #856]

sys/arch/shark/isa/isa_shark_machdep.c		1.2

	Improve the display of ISA interrupts.
	[cgd, ticket #858]

sys/arch/macppc/stand/ofwboot/Makefile		1.35
sys/arch/macppc/stand/ofwboot/alloc.c		1.3

	Re-add own alloc(), to fix recent issues with
	kernels randomly dying on boot.
	[wrstuden, ticket #866]

sys/arch/macppc/stand/ofwboot/Locore.c		1.11

	Remove vestiges of the syncicache() call.
	This change makes OpenFirmware 2.4 machines actually boot.
	[wrstuden, ticket #867]

sys/nfs/nfs_serv.c				1.64

	Remove unnecessary PNBUF_PUT() in the NFSv2 mknod case.
	Fixes PR#18013.
	[bouyer, ticket #879]

sys/nfs/nfs_serv.c				1.63,1.65

	Improve various checks in nfsrv_commit() and nfs_commit().
	Prevents DIAGNOSTIC panics with some NVSv3 clients.
	[bouyer, ticket #880]

sys/arch/macppc/conf/INSTALL			patch

	Add uninorth* bus, so that this kernel can boot on
	various newer systems.

games/rogue/inventory.c				1.8
games/rogue/message.c				1.9
games/rogue/rogue.h				1.13
games/rogue/save.c				1.8

	Fix buffer overflows.
	[mrg, ticket #892]

sys/arch/arm/arm32/fault.c			1.23

	Record growth of stack in fault handler,
	so that core dumps contain the entire stack.
	[nathanw, ticket #885]

usr.bin/sort/fsort.c				1.21

	Use the right file to output merge result.
	[enami, ticket #883]

sys/uvm/uvm_swap.c				1.68

	Fix writing of kernel core dumps to alternate dump devices.
	Fixes PR#15947.
	[drochner, ticket #876]

sys/dev/pci/if_fxp_pci.c			1.26

	Certain revisions of the i82558 would not initialise
	correctly; fix this.
	Fixes PR#18011.
	[itojun, ticket #870]

gnu/dist/groff/src/preproc/pic/pic.y		1.2

	Avoid a possible buffer overflow.
	[wiz, ticket #869]

sys/dev/pcmcia/if_xi.c				1.23

	Changes from FreeBSD to improve performance.
	From PR#18372.
	[martin, ticket #891]

libexec/talkd/extern.h				1.3
libexec/talkd/process.c				1.8 (via patch)
libexec/talkd/talkd.c				1.14

	Fix response buffer & string handling.
	[itojun, ticket #846]

usr.sbin/lpr/lpd/lpd.c				1.43 (via patch)

	Set IPV6_V6ONLY socket option on AF_INET6 sockets, to avoid
	complicated access control issues due to IPv4 mapped address.
	[itojun, ticket #857]

crypto/dist/kame/racoon/missing/crypto/rijndael/rijndael-api-fst.c 1.2

	Turn on strict alignment #define's, because racoon reliably core
	dumps on machines which require strict alignment such as sparc64.
	[elric, ticket #897]

gnu/dist/sendmail/smrsh/smrsh.c			1.9

	More strict checking on command invocation.
	Refer to http://www.sendmail.org/smrsh.adv.txt.
	Resolves PR#18516.
	[itojun, ticket #898]

gnu/dist/toolchain/gdb/i386nbsd-nat.c		1.7

	Make sure to write back correct FP state.
	Resolves PR#17927.
	[toshii, ticket #841]

sys/dev/pci/if_fxp_pci.c			1.25

	Recognise the Intel PRO/100 VM Network Controller as seen in
	the HP omnibook 6100.
	[abs, ticket #844]

gnu/dist/toolchain/gcc/config/arm/arm.h		1.9

	Pull up patch from FSF GCC to fix aborts when compiling
	large functions for ARMv4.
	[rearnsha, ticket #847]

sys/netinet6/ip6_output.c			1.58

	The length field on the PADN option before the jumbo
	payload option was wrong.
	[itojun, ticket #855]

sys/arch/i386/conf/INSTALL			1.204
sys/arch/i386/conf/INSTALL_SMALL		1.90
sys/arch/i386/conf/INSTALL_TINY			1.58

	Change "ep0 at isa?" to "ep* at isa?", so ep instances
	during install are consistent with GENERIC.
	[grant, ticket #860]

distrib/utils/sysinst/menus.mi.en		1.61 (via patch)
distrib/utils/sysinst/menus.mi.fr		1.41 (via patch)
distrib/utils/sysinst/menus.mi.pl		1.12 (via patch)

	Use current values for start/size/bsize/fsize as defaults
	when editing disklabel partitions.
	[grant, ticket #853]

distrib/utils/sysinst/msg.mi.pl			1.5-1.6

	Language improvements.
	[grant, ticket #864]

distrib/utils/sysinst/menus.mi.en		1.59
distrib/utils/sysinst/menus.mi.fr		1.39
distrib/utils/sysinst/menus.mi.pl		1.10
distrib/utils/sysinst/msg.mi.en			1.91
distrib/utils/sysinst/msg.mi.fr			1.44
distrib/utils/sysinst/msg.mi.pl			1.10

	Allow unsetting of mountpoints in disklabel editor.
	Partially addresses PR#17801.
	[grant, ticket #865]

usr.sbin/etcupdate/etcupdate			1.7-1.8

	Fix typo, and don't execute /etc/postinstall if -b was used.
	[martti, ticket #871]

usr.bin/cdplay/cdplay.c				1.21

	Fix to allow the first minute of a CD to be played
	when using absolute msf addresses.
	[is, ticket #872]

sys/netinet/ip_nat.c				1.54

	Relax overly-conservative TCP option parsing used by ipnat
	when hunting for an MSS option to clamp.
	[sommerfeld, ticket #884]

distrib/utils/sysinst/util.c			1.74

	During timezone selection, only update the clock once per minute.
	Once per second is painful and annoying over a serial line.
	[grant, ticket #902]

bin/ksh/main.c					1.8

	Remove (nonexistent) newgrp as a builtin alias.
	This prevents the shell from unexpectedly dying if a
	user enters the 'newgrp' command.
	[jschauma, ticket #910]

sys/miscfs/kernfs/kernfs_vnops.c		1.84

	Correctly calculate file length for (e.g.) msgbuf.
	[jdolecek, ticket #911]

distrib/common/parselist.awk			1.13

	Escape { and } in the regexp that matches e.g. ${FOO}.
	[thorpej, ticket #824]

sys/nfs/nfs_vnops.c				1.152

	Fix panic in NFS client code when unlinking certain paths.
	[thorpej, ticket #930]

usr.sbin/rarpd/rarpd.8				1.10
usr.sbin/rarpd/rarpd.c				1.46

	Allow more than one interface to be specified on the command line.
	[thorpej, ticket #920]

bin/ps/keyword.c				1.28

	Correct use of format string.
	Fixes PR#18679.
	[itojun, ticket #922]

sbin/route/route.c				1.60

	Make prefixlen check to make sure its argument is present before
	dereferencing.
	[itojun, ticket #923]

sys/ufs/ufs/ufs_readwrite.c			1.43

	Make sure to update the vnode's size even if uiomove failed.
	otherwise, softdep states can't be flushed later.
	Fixes PR#16670.
	[yamt, ticket #926]

games/trek/getpar.c				1.10

	Avoid buffer overrun.
	[itojun, ticket #927]

sys/arch/macppc/stand/ofwboot/version		1.7

	Bump to version 1.7 to indicate a working alloc.c.
	[wrstuden, ticket #931]

sys/arch/i386/i386/machdep.c			1.492 (via patch)
	Fix bugs in BIOS memory probe.
	Fixes PR#13399.
	[kanaoka, ticket #934]

sys/netinet/tcp_input.c				1.156 (via patch)

	Correct log_refused check.
	Fixes PR#18669.
	[itojun, ticket #915]

sys/dev/pci/if_pcn.c				1.16

	Fix typos in media configuration register init.
	May address PR#16346.
	[thorpej, ticket #940]

lib/libpcap/pcap-bpf.c				1.9

	Open the BPF file descriptor as read-write.
	[thorpej, ticket #932]

sys/miscfs/genfs/genfs_vnops.c			1.65

	Improve NFS read performance.
	[fvdl, ticket #935]

etc/services					1.58

	Add iscsi at 3260/tcp.
	[thorpej, ticket #937]

sys/netinet/tcp_input.c				1.158

	Make sure TF_REQ_TSTMP and TF_REQ_SCALE get set correctly
	in the new TCPCB in the passive-open case.
	Fixes PR#18677.
	[thorpej, ticket #938]

sys/dev/i2o/iop.c				1.27

	Don't issue I2O_EXEC_IOP_CLEAR to AMI boards, since some
	firmware revisions can't handle it.
	Fixes PR#18760.
	[ad, ticket #939]

etc/rc.d/network				1.39
share/man/man5/ifconfig.if.5			1.6

	Automatically create and destroy cloning interfaces and sync
	IP Filter immediately afterwards before bringing the interface up.
	[tron, ticket #901]

dist/ipf/HISTORY				1.14
dist/ipf/fils.c					1.17-1.21
dist/ipf/ipf.c					1.11-1.13
dist/ipf/ipfs.c					1.8-1.10
dist/ipf/ipft_ef.c				1.6-1.7
dist/ipf/ipft_td.c				1.6-1.7
dist/ipf/ipft_tx.c				1.7-1.8
dist/ipf/ipmon.c				1.12-1.17
dist/ipf/ipnat.c				1.11-1.12
dist/ipf/ipsend/ip_var.h			1.2
dist/ipf/ipsend/ipsend.c			1.8 
dist/ipf/ipsend/iptests.c			1.5
dist/ipf/ipt.c					1.8-1.10
dist/ipf/kmem.c					1.8-1.10
dist/ipf/man/ipf.4				1.10
dist/ipf/man/ipf.5				1.8
dist/ipf/man/ipftest.1				1.3
dist/ipf/man/ipmon.8				1.10
dist/ipf/man/ipnat.5				1.9-1.10
dist/ipf/man/ipnat.8				1.4 
dist/ipf/misc.c					1.7 
dist/ipf/natparse.c				1.10
dist/ipf/parse.c				1.13
dist/ipf/printnat.c				1.8-1.10
dist/ipf/relay.c				1.5-1.6
dist/ipf/rules/example.9			1.2
etc/rc.d/ipnat					1.8
regress/sys/kern/ipf/Makefile			1.3-1.4
regress/sys/kern/ipf/dotest6			1.2
regress/sys/kern/ipf/expected/f13		1.1.1.2
regress/sys/kern/ipf/expected/i12		1.1.1.1
regress/sys/kern/ipf/expected/ni3		1.1.1.1
regress/sys/kern/ipf/expected/ni5		1.2
regress/sys/kern/ipf/input/f13			1.1.1.2
regress/sys/kern/ipf/input/ipv6.1		1.1.1.1
regress/sys/kern/ipf/input/ni3			1.1.1.1
regress/sys/kern/ipf/regress/i12		1.1.1.1
regress/sys/kern/ipf/regress/ipv6.1		1.1.1.1
regress/sys/kern/ipf/regress/ni3.ipf		1.1.1.1
regress/sys/kern/ipf/regress/ni3.nat		1.1.1.1
sys/arch/alpha/conf/ALPHA			1.169,1.171
sys/arch/amiga/conf/GENERIC			1.185-1.186
sys/arch/amiga/conf/AMIGA			(regen from GENERIC)
sys/arch/amiga/conf/DRACO			(regen from GENERIC)
sys/arch/amiga/conf/INSTALL			(regen from GENERIC)
sys/arch/amiga/conf/WSCONS			(regen from GENERIC)
sys/arch/arc/conf/GENERIC			1.71-1.72
sys/arch/atari/conf/GENERIC.in			1.24-1.25
sys/arch/cats/conf/GENERIC			1.31-1.32
sys/arch/cobalt/conf/GENERIC			1.34-1.35
sys/arch/hp300/conf/GENERIC			1.83-1.84
sys/arch/i386/conf/CARDBUS			1.66-1.67
sys/arch/i386/conf/GENERIC			1.510,1.512
sys/arch/i386/conf/GENERIC_LAPTOP		1.58-1.59
sys/arch/i386/conf/GENERIC_PS2TINY		1.19-1.20
sys/arch/i386/conf/GENERIC_TINY			1.47-1.48
sys/arch/luna68k/conf/GENERIC			1.33-1.33
sys/arch/mac68k/conf/GENERIC			1.130-1.131
sys/arch/mac68k/conf/GENERICSBC			1.21-1.22
sys/arch/mac68k/conf/SMALLRAM			1.4-1.5
sys/arch/macppc/conf/GENERIC			1.142-1.143
sys/arch/mipsco/conf/GENERIC			1.21-1.22
sys/arch/mmeye/conf/GENERIC			1.44-1.45
sys/arch/news68k/conf/GENERIC			1.36-1.37
sys/arch/news68k/conf/GENERIC_TINY		1.18-1.19
sys/arch/newsmips/conf/GENERIC			1.50-1.51
sys/arch/ofppc/conf/GENERIC			1.56-1.57
sys/arch/pmax/conf/GENERIC			1.103-1.104
sys/arch/prep/conf/GENERIC			1.55-1.56
sys/arch/sbmips/conf/GENERIC			1.11-1.12
sys/arch/sgimips/conf/GENERIC			1.7-1.8
sys/arch/sparc/conf/GENERIC			1.138-1.139
sys/arch/sparc64/conf/GENERIC32			1.46-1.47
sys/arch/vax/conf/GENERIC			1.102-1.103
sys/arch/x68k/conf/ALL				1.55-1.56
sys/arch/x68k/conf/GENERIC			1.80-1.81
sys/lkm/netinet/if_ipl/mln_ipl.c		1.29
sys/netinet/fil.c				1.57-1.58
sys/netinet/ip_auth.c				1.29-1.30
sys/netinet/ip_compat.h				1.30-1.31
sys/netinet/ip_fil.c				1.81-1.86
sys/netinet/ip_fil.h				1.46-1.49
sys/netinet/ip_frag.c				1.33-1.34
sys/netinet/ip_frag.h				1.18
sys/netinet/ip_ftp_pxy.c			1.25-1.26
sys/netinet/ip_h323_pxy.c			1.5-1.6
sys/netinet/ip_log.c				1.22-1.23
sys/netinet/ip_nat.c				1.51-1.53
sys/netinet/ip_nat.h				1.27
sys/netinet/ip_netbios_pxy.c			1.4
sys/netinet/ip_proxy.c				1.35-1.36
sys/netinet/ip_proxy.h				1.18
sys/netinet/ip_state.c				1.41-1.42
sys/netinet/ip_state.h				1.23
sys/netinet/ipl.h				1.14

	Upgrade IPFilter to 3.4.29.

	NOTE:	this requires a new kernel, reinstalled headers,
		and a rebuilt /sbin/ipf.  The headers and ipf(8)
		can be rebuilt with:
			cd /usr/src/sys
			make includes
			cd /usr/src/usr.sbin/ipf
			make dependall install

	[martti, ticket #905]

libexec/ftpd/cmds.c				1.19

	Turns out that our implementation of STAT wasn't RFC 959 compliant.
	This version is now RFC 959 compliant.
	[itojun, ticket #942]

sys/ufs/mfs/mfs_vfsops.c			1.42

	Force MFS mounts to be "sync".
	Fixes PR#17128 and PR#17321.
	[tron, ticket #941]

sys/net/if.c					1.105
sys/net/if.h					1.76
sys/sys/sockio.h				1.19

	Add SIOCGIFDATA and SIOCZIFDATA ioctl's to get interface data.
	(The Z variant also zeroes the counters after copying them).
	In ifunit, add support for dealing all numeric ifname by treating
	them as an ifindex which is used to look up the interface.
	[martin, ticket #32]

sys/arch/acorn26/podulebus/if_eh.c		1.3
sys/arch/acorn26/podulebus/podulebusreg.h	1.2
sys/arch/acorn32/podulebus/amps.c		1.3
sys/arch/acorn32/podulebus/asc.c		1.6
sys/arch/acorn32/podulebus/cosc.c		1.4
sys/arch/acorn32/podulebus/csa.c		1.3
sys/arch/acorn32/podulebus/csc.c		1.3
sys/arch/acorn32/podulebus/icside.c		1.3
sys/arch/acorn32/podulebus/if_ie.c		1.6
sys/arch/acorn32/podulebus/if_ne_pbus.c		1.5
sys/arch/acorn32/podulebus/podulebus.c		1.9
sys/arch/acorn32/podulebus/rapide.c		1.3
sys/arch/acorn32/podulebus/simide.c		1.3
sys/dev/podulebus/acemidi.c			1.4
sys/dev/podulebus/if_ea.c			1.6
sys/dev/podulebus/if_eb.c			1.4
sys/dev/podulebus/if_ei.c			1.5
sys/dev/podulebus/oak.c				1.9
sys/dev/podulebus/podule_data.h			1.8
sys/dev/podulebus/podulebus.h			1.6
sys/dev/podulebus/podulelist2h.awk		1.2
sys/dev/podulebus/podules			1.10
sys/dev/podulebus/podules.h			1.8

	Substantial overhaul of podule IDs.  Unlike on PCI or USB, podule IDs
	are assigned by RISCOS Ltd (and were assigned by Acorn) to be unique
	across all manufacturers.  This means that associating each one with
	a manufacturer (and checking the manufacturer when attaching) is
	bogus. Thus, we don't do that any more.

	This should have the pleasant side-effect of getting APDL IDE
	interfaces working, since they're just ICS ones with a different
	manufacturer ID.
	[chris, ticket #120]

usr.sbin/greconfig/greconfig.c			1.7

	Avoid a NULL pointer access if passed bogus parameters.
	Unify exit codes to EXIST_SUCCESS/EXIT_FAILURE.
	[martin, ticket #225]

Makefile					1.176

	In afterinstall, only run postinstall check if DESTDIR != /
	(or equivalents).
	Fixes PR#17275.
	[lukem, ticket #319]

sys/netinet/ip_output.c				1.98-1.99

	Do not consult routing table under the following condition:
	- the destination is IPv4 multicast or 255.255.255.255, and
	- outgoing interface is specified via socket option
	This simplifies operation of routed
	(no longer require 224.0.0.0/4 to be set up)
	[itojun, ticket #356]

sys/dev/pci/pcidevs				1.466
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	Add Promise Ultra133TX2 and Ultra133TX2v2 PCI ID.
	[bouyer, ticket #724]

distrib/notes/i386/hardware			1.109
share/man/man4/pciide.4				1.41
sys/dev/pci/pciide.c				1.165

	Add support for Promise Ultra133TX2 and Ultra133TX2v2.
	Fixes PR#17509.
	[bouyer, ticket #724]

sys/dev/pci/pciide.c				1.166
sys/dev/pci/pciide_hpt_reg.h			1.8-1.9

	Add support for HPT372.
	Fixes PR#17908.
	[bouyer, ticket #725]

sys/dev/ic/wdc.c				1.117

	Add support for Ultra/133 (ultra-DMA6) in wdc_probe_caps().
	[bouyer, ticket #726]

sys/dev/pci/pciide.c				1.167
sys/dev/pci/pciide_apollo_reg.h			1.12

	Correct setup for Ultra133 capable VIA chipsets,
	Also don't set the APO_UDMA_CLK66 bit for Ultra/100
	capable chipset, and support Ultra/133 for the VT8233A.
	[bouyer, ticket #727]

sys/dev/pci/pciide.c				1.168

	Support Ultra/133 on promise controllers that can do it.
	[bouyer, ticket #728]

sys/dev/scsipi/atapi_wdc.c			1.53

	Do PIO transfers for len < 4 bytes.
	[bouyer, ticket #733]

sys/arch/powerpc/mpc6xx/pmap.c			1.46

	Set SR_PRKEY for user pmaps.  For the kernel SR(s) set
	SR_SUKEY|SR_PRKEY. Note that we never use a PTE PP of 0 or 1
	(supervisor protection) so the "key" is basically unused.  However,
	use SR_PRKEY for user space is conceptionally the right thing to do.
	Currently the kernel_pmap SR(s) are ignored but that is going to be
	fixed shortly.
	[matt, ticket #372]

sys/arch/powerpc/powerpc/trap_subr.S		1.22

	Revamp how SR(s) are loaded on the user/kernel boundary. We now load
	all 16 SR registers when transitioning between kernel and user.  Also,
	don't reload the kernel SR(s) on every trap but only on traps from
	user space. Instead of loading magic SRs for the kernel, load the
	kernel SRs from the kernel_pmap_. This makes trap_subr.S completely
	ignorant of SR uses and so they can change with having to change
	trap_subr.S. Also note that since the user and kernel get complete
	SR sets, user VA space can now be increased to 4GB if desired.
	[matt, ticket #373]

sys/arch/powerpc/include/mpc6xx/vmparam.h	1.2

	When not using the OLD pmap, bump kernel KVA space to 512MB
	(OLD pmap stays at 256MB).
	[matt, ticket #374]

sys/dev/pci/if_sip.c				1.55
sys/dev/pci/if_sipreg.h				1.11

	* Give symbolic names to the CFG bits in the EEPROM.
	* Get CFG_M64ADDR, CFG_T64ADDR, and CFG_DATA64_EN from the EEPROM.
	  Note, we still disable CFG_M64ADDR and CFG_T64ADDR later (XXX need
	  PCI bus capability flags for these).
	* Print a message if we're in a 64-bit slot and 64-bit data is
	  disabled in the EEPROM.  Make sure CFG_DATA64_EN is disabled if
	  we're not in a 64-bit slot.
	[thorpej, ticket #411]

sys/dev/pci/if_sip.c				1.56

	Implement a sliding interrupt delay window for Tx interrupts.
	[thorpej, ticket #412]

sys/dev/pci/if_sip.c				1.58

	Update the TODO list: We have some Tx interrupt mitigation now, so
	we need to do Rx interrupt mitigation next.
	[thorpej, ticket #413]

sys/dev/pci/if_sip.c				1.59

	Load configuration data from the EEPROM on the DP83820 differently:
	rather than grovel the EEPROM directly, initiate an "EEPROM load" in
	the PCI test register, and fetch the values from the CFG register.
	[thorpej, ticket #414]

sys/dev/pci/if_sip.c				1.60

	Add a table of known-64-bit DP83820-based cards.  Use this table
	to enable 64-bit data transfers on 64-bit cards when plugged into
	a 64-bit slot.  Right know the Asante GigaNIX is listed in that
	table.

	Sigh, there is an EEPROM bit that can be used to detect 64-bit vs
	32-bit cards.  Unfortunately, at least 2 vendors of 32-bit cards
	fail to clear the "DATA64_EN" bit in the EEPROM, which causes the
	card to lose badly, because it still manages to detect that it's
	plugged into a 64-bit PCI slot.  Yay, stupid hardware vendors.
	[thorpej, ticket #415]

sys/arch/i386/pci/pchb_rnd.c			1.10-1.12

	Add hardware random generator support for Intel i845, i850
	and i860 chipsets, and make sure to unmap if it's not there.
	[tron, ticket #231]

distrib/sets/lists/xcomp4/mi			1.2

	Add new files installed by XFree86 4.2.1.
	[tron, ticket #780]

distrib/macppc/floppies/ramdisk/list		1.21
distrib/utils/sysinst/arch/macppc/Makefile	1.3
distrib/utils/x_ftp/Makefile			1.14
distrib/utils/x_ifconfig/Makefile		1.17-1.18
distrib/utils/x_route/Makefile			1.14
sys/arch/macppc/conf/INSTALL			1.62

	Make macppc install floppy IPv6-ready.
	[itojun, ticket #347]

tools/host-mkdep/host-mkdep.in			1.3

	Delete a few things which appear in gcc 3.x's CPP output.
	[thorpej, ticket #784]

gnu/usr.sbin/dbsym/dbsym.c			1.5

	Pull in config.h if building as a host tool.
	bfd_vma is not a pointer type, so use 0 instead of NULL.
	[thorpej, ticket #785]

gnu/usr.sbin/mdsetimage/mdsetimage.c		1.7

	bfd_vms is not a pointer type, so use 0 instead of NULL.
	[thorpej, ticket #786]

usr.bin/man/manconf.c				1.1 (new)
usr.bin/man/manconf.h				1.1 (new)
usr.bin/man/Makefile				1.8
usr.bin/man/man.c				1.29
libexec/makewhatis/Makefile			1.15 via patch
libexec/makewhatis/makewhatis.c			1.26
usr.bin/man/config.c				delete
usr.bin/man/config.h				delete

	Rename man/config.{c,h} to man/manconf.{c,h}, so we do not
	have to worry about problems including "config.h" when
	building as a host tool.
	[thorpej, ticket #787]

usr.bin/man/manconf.c				1.2

	Pull in config.h when building as a host tool.
	[thorpej, ticket #788]

lib/libasn1/asn1_compile/Makefile		1.18

	When being built as a host tool, the <config.h> we use is
	actually the libnbcompat config.h, so -DKRB5=1 so that
	print_version.h actually has a version in it.
	[thorpej, ticket #790]

distrib/sets/lists/xcomp/md.macppc		1.1 (new)
distrib/sets/lists/xcomp4/md.macppc		1.1 (new)
distrib/sets/lists/xfont/md.macppc		1.1 (new)
distrib/sets/lists/xbase/md.macppc		1.4 (re-added)
distrib/sets/lists/xserver/md.macppc		1.4-1.5
distrib/sets/lists/xserver4/md.macppc		1.1-1.3 (new)

	Add XFree86 version 4 stuff for macppc.
	[mycroft, ticket #792]

bin/cat/cat.c					1.35

	Don't use MAX(); not all systems have it, and this is a
	host tool.
	[thorpej, ticket #793]

lib/libcom_err/compile_et/Makefile		1.15

	The config.h we use when building as a host tool is the
	libnbcompat config.h, not the heimdal config.h, so define
	KRB4=1 and KRB5=1 for print_version.h.
	[thorpej, ticket #794]

tools/compat/glob.h				1.1 (new)
tools/compat/md2.h				1.1 (new)
tools/compat/md4.h				1.1 (new)
tools/compat/md5.h				1.1 (new)
tools/compat/rmd160.h				1.1 (new)
tools/compat/sha1.h				1.1 (new)
tools/compat/vis.h				1.1 (new)
tools/compat/config.h.in			1.20 via patch
tools/compat/configure.ac			1.22 via patch
tools/compat/configure				regenerate
tools/compat/Makefile				1.14
tools/compat/README				1.4

	Include various more functions in libnbcompat, mostly
	because our tools use features not universally present in
	other versions. This applies to glob(3), vis(3), and the
	MD2, MD4, RMD160 and SHA1 implementations.
	Also add checks for random(3) and termios.h for the Heimdal
	host tools.
	Update README to indicate the current state of building the
	host tools on Solaris 8 (for SPARC).
	[thorpej, ticket #797]

tools/make/buildmake.sh.in			1.4

	Be more conservative with quoting, to play nice with
	Solaris 8's /bin/sh.
	[thorpej, ticket #798]

build.sh					1.67 via patch

	Use /usr/bin/env to invoke the real interpreter; this gets
	us a POSIX shell on more systems.
	Deal with a broken "pwd" on Solaris.
	[thorpej, ticket #800]

tools/compat/README				1.5

	Update Solaris section.
	[thorpej, ticket #801]

tools/compat/compat_defs.h			1.17

	Add __restrict to the set of tokens we #define away: our
	glob.h uses it.
	[thorpej, ticket #802]

libexec/makewhatis/makewhatis.c			1.25
usr.bin/apropos/apropos.c			1.18-1.20
usr.bin/apropos/Makefile			1.10
usr.bin/man/man.c				1.28
usr.bin/whatis/whatis.c				1.14-1.16
usr.bin/whatis/Makefile				1.7
usr.sbin/catman/catman.c			1.17-1.18
usr.sbin/catman/Makefile			1.7

	Make these compile again, after the changes in ticket #787.
	[he, ticket #787]

libexec/ftpd/ftpcmd.y				1.69

	We really, actually, positively want to apply the ftpd.conf
	"passive" option to all possible *PSV commands.  Some ftp servers
	are simply not capable of passive connections, hence the option....
	[tv, ticket #418]

sys/dev/usb/usbdevs				1.258
sys/dev/usb/usbdevs.h				regenerate
sys/dev/usb/usbdevs_data.h			regenerate

	Add product code for SMC 2206USB/ETH EZ Connect Ethernet adapter
	[rh, ticket #442]

sys/dev/usb/if_aue.c				1.77

	Add support for the SMC 2206USB/ETH EZ Connect adapter (Pegasus II)
	[rh, ticket #442]

libexec/fingerd/fingerd.c			1.16

	Typo in message.
	Fixes PR#17528.
	[itojun, ticket #445]

sys/net/if_gre.c				1.27

	Change default MTU to 1476 (same value that Cisco uses).
	Do not limit the MTU when set by the admin with ifconfig, per
	discussion on tech-net.
	Fixes PR#16761.
	[martin, ticket #226]

sys/dev/pci/pcidevs				1.451
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	Clean up Intel i8254x product names, and add i82540, i82545,
	and i82546 product IDs.
	[thorpej, ticket #452]

sys/dev/pci/if_wm.c				1.11

	Don't use internal names to identify chips.  Add types for the
	i82540, i82545, and i82546 (but don't match them yet).
	[thorpej, ticket #453]

sys/dev/pci/if_wm.c				1.17
sys/dev/pci/if_wmreg.h				1.3

	Add support for the new i82540, i82545, and i82546 Gig-E chips.  The
	i82546 chip has 2 Gig-E interfaces in a single chip.

	The main difference is these chips have a special handshaking protocol
	for accessing the EEPROM (due to the shared nature on the i82546).
	[thorpej, ticket #650]

sys/arch/sparc/fpu/fpu_explode.c		1.9
sys/arch/sparc64/dev/iommu.c			1.61
sys/arch/sparc64/sparc64/machdep.c		1.132

	Make 32bit sparc64 kernels with DEBUG and DIAGNOSTIC compile.
	[martin, ticket #916]

sys/kern/uipc_socket.c				1.68

	Fix 2 bugs with MSG_WAITALL. The first is to not block forever if one
	is trying to MSG_PEEK for more than the socket can hold. The second is
	that before sleeping waiting for more data, upcall the protocol
	telling it you have just received data so it can kick itself to
	re-fill the just drained socket buffer.
	[thorpej, ticket #429]

distrib/sets/lists/comp/mi			1.459
share/man/man9/Makefile				1.117
share/man/man9/copy.9				1.12
sys/kern/kern_subr.c				1.82
sys/sys/systm.h					1.146

	* Add copyin_proc() and copyout_proc(), which are like copyin() and
	  copyout(), except they can operate on any process, not just curproc.
	* Use this in uiomove() to allow UIO_USERSPACE to non-curproc.
	[thorpej, ticket #527]

sys/arch/powerpc/powerpc/trap_subr.S		patch

	Remove superflous #endif.
	[jdolecek, ticket #970]

sys/dev/audio.c					1.157

	The logic in audio_poll() was incorrect in full duplex mode;
	among other things, it behaved as if full-duplex audio devices
	were always ready for writing. Also commented the code in case.
	Fixes PR#11179 and PR#13829.
	[gson, ticket #972]

usr.bin/join/join.c				1.21

	Deal with ``-e'' option properly.
	Fixes PR#15412.
	[jonb, ticket #540]

sys/arch/vax/uba/uba_sbi.c			1.15

	Count adapter, stray and device interrupts separately.
	[ragge, ticket #546]

sys/dev/mscp/mscp_disk.c			1.32

	Correct ``ra'' disk instrumentation.
	[ragge, ticket #547]

sys/arch/powerpc/include/mpc6xx/pte.h		1.9
sys/arch/powerpc/mpc6xx/pmap.c			1.51

	Set normal memory PTEs with PTE_M (memory coherent).  Change
	how we remember the ``execness'' of a page, so that we can
	avoid I-cache syncing in some cases.
	[matt, ticket #559]

lib/libc/sys/Makefile.inc			1.128
lib/libc/sys/makelintstub			1.9

	Fix some problems using makelintstub as a cross-tool:
	 o Require that the path to the C preprocessor be passed
	   in the CPP environment variable, and use it rather than
	   hard-coding "cpp".  Provide the target's preprocessor
	   when invoking makelintstub.
	 o Fix some quoting issues found with Solaris 8's XPG4 sh
	   and sed.
	 o Do not use "echo -n".  The resulting whitespace is not
	   supposed to be syntactically significant anyway.
	[thorpej, ticket #803]

sys/arch/arm/xscale/i80321reg.h			1.4

	Several changes:
	 o Remove some AAU definitions, will be defined elsewhere
	   in a future commit.
	 o Fix a typo in the watchdog enable names.
	 o Add SSP (synchronous serial port, for SPI, Microwire, etc.)
	   definitions.
	[thorpej, ticket #570]

sys/arch/arm/xscale/files.i80321		1.4
sys/arch/arm/xscale/i80321.c			1.4
sys/arch/arm/xscale/i80321var.h			1.3

	Add support for attaching IOP built-in sub-devices (aau,
	dma, ssp, watchdog, etc.)
	[thorpej, ticket #571]

sys/arch/arm/xscale/files.i80321		1.5 via patch
sys/arch/arm/xscale/i80321_wdog.c		1.1 (new)

	Add support for the i80321 watchdog timer.
	[thorpej, ticket #575]

sys/arch/evbarm/conf/IQ80321			1.7

	Add iopwdog (i80321 built-in watchdog timer), fxp, and
	inphy.
	[thorpej, ticket #576]

sys/arch/arm/xscale/i80200_irq.S		1.3
sys/arch/arm/xscale/i80321_irq.S		1.2

	Clean up some comments.
	[thorpej, ticket #579]

distrib/notes/evbarm/hardware			1.5

	Note support for the i80321 watchdog timer.
	[thorpej, ticket #580]

sys/kern/subr_pool.c				1.78

	Bring down a fix from the "newlock" branch, slightly modified:
	 o In pool_prime_page(), assert that the object being placed
	   onto the free list meets the alignment constraints (that
	   "ioff" within the object is aligned to "align").
	 o In pool_init(), round up the object size to the alignment
	   value (or ALIGN(1), if no special alignment is needed) so
	   that the above invariant holds true.
	[thorpej, ticket #582]

sys/arch/arm/xscale/i80321_icu.c		1.3
sys/arch/arm/xscale/i80321var.h			1.4
sys/arch/evbarm/iq80321/iq80321_pci.c		1.2

	Use more descriptive interrupt names.
	[thorpej, ticket #583]

etc/defaults/rc.conf				1.41
etc/rc.d/Makefile				1.32 via patch
etc/rc.d/wdogctl				1.1 (new)
distrib/sets/lists/etc/mi			1.102

	Add a wdogctl startup/shutdown script.
	[thorpej, ticket #584]

sys/netinet/ip_input.c				1.160

	Always create pmtud timeout queue, as ip_mtudisc can be tweaked via
	sysctl at runtime.
	[itojun, ticket #977]

lib/libposix/sys/Makefile.inc			1.15

	Invoke makelintstub with CPP in the environment.
	[grant, ticket #988]

sys/arch/mips/conf/Makefile.mips		1.31

	Build kernel with -msoft-float.
	[thorpej, ticket #976]

sys/arch/sparc64/sparc64/autoconf.c		1.67-1.68

	Match channel & disk when trying to determine if this IDE disk is
	the boot device.  Now we can boot from any IDE disk on the system.
	[mrg, ticket #959]

sbin/sysctl/sysctl.c				1.59

	When printing out nodes of type "string", don't print anything if
	sysctl() reports that 0 bytes were returned.
	[simon, ticket #958]

lib/libc/net/getnetnamadr.c			1.25

	Fix remote buffer overrun.
	[itojun, ticket #986]

dist/bind/bin/named/db_defs.h			1.5
dist/bind/bin/named/db_sec.c			1.4
dist/bind/bin/named/ns_defs.h			1.7
dist/bind/bin/named/ns_ncache.c			1.4
dist/bind/bin/named/ns_req.c			1.6
dist/bind/bin/named/ns_resp.c			1.8
dist/bind/lib/nameser/ns_name.c			1.7
dist/bind/lib/nameser/ns_samedomain.c		1.2

	Apply http://www.isc.org/products/BIND/patches/bind833.diff
	to fix recent vulnerabilities:
	 o BIND: Remote Execution of Code (BIND 4 & 8)
	 o BIND: Multiple Denial of Service (BIND 8 only)
	[itojun, ticket #989]

lib/libc/net/getnetnamadr.c			1.26

	Pull in changes in
	http://www.isc.org/products/BIND/patches/bind4910.diff
	 o better error check on __dn_skipname
	 o more strict reverse lookup handling
	[itojun, ticket #990]

Makefile					1.177-1.180

	Change directory to .CURDIR before invoking ${MAKE}.  Only
	run postinstall-check if UNPRIVED is not set or the original
	target was not distribution, release or snapshot.
	[grant, ticket #993]

dist/am-utils/libamu/mount_fs.c			1.4-1.5
usr.sbin/amd/include/config.h			1.23

	Add new option ``xlatecookie'' to amd(8), to support NFSv3
	mounts with cookie translation.  Fixes PR#17245.
	[tron, ticket #624]

gnu/dist/toolchain/gcc/config/arm/arm.h		1.5
gnu/dist/toolchain/gcc/config/arm/arm.c		1.6

	 o Add -march=armv5, -march=armv5t, -march=armv5te, which are
	   internally treated like -march=armv4t, but which generate
	   __ARM_ARCH_5__, __ARM_ARCH_5T__, and __ARM_ARCH_5TE__
	   defines, respectively.
	 o Add -mcpu=xscale, which is internally treated like
	   -mcpu=strongarm, but which generates __ARM_ARCH_5TE__ and
	   __XSCALE__ defines.
	
	These command-line options and definitions are consistent
	with gcc 3.x, and allow NetBSD Makefiles to use them in a
	forward-compatible way, and also give hand-tuned source
	code (e.g. assembly) a chance of tuning for XScale.
	[thorpej, ticket #635]

gnu/dist/toolchain/gcc/config/arm/netbsd-elf.h	1.11

	Define __ARMEL__ if little-endian, as gcc 3.x does.
	[thorpej, ticket #636]

sys/arch/evbarm/conf/IQ80310			1.17
sys/arch/evbarm/conf/IQ80321			1.8
sys/arch/evbarm/conf/TEAMASA_NPWR		1.17

	Use -mcpu=xscale.
	[thorpej, ticket #637]

sys/arch/powerpc/include/ansi.h			1.13 via patch

	Correct __va_list typedef for GCC 3.x to match the GCC 3.x
	definition.
	[matt, ticket #638]

sys/dev/pci/pcidevs				1.459
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate
sys/dev/pci/aac_pci.c				1.3

	Add additional Adaptec RAID controller types.
	Fixes PR#17719.
	[ad, ticket #646]

sys/dev/mii/miidevs				1.41
sys/dev/mii/miidevs.h				regenerate
sys/dev/mii/miidevs_data.h			regenerate

	Add ID for Marvell 881011 phy found on newer i8254x-based
	gig-ether cards.
	[thorpej, ticket #648]

sys/dev/mii/makphy.c				1.8

	Match 881011 PHY.
	[thorpej, ticket #649]

share/man/man4/wm.4				1.3

	Update supported hardware list.
	[thorpej, ticket #651]

sys/arch/arm/arm32/fusu.S			1.4

	Use ldrt/strt.
	[thorpej, ticket #657]

sys/arch/arm/arm32/copystr.S			1.4

	Use ldrbt/strbt, and some other cleanups.
	[thorpej, ticket #658]

sys/arch/arm/arm/cpufunc_asm_xscale.S		1.14

	Drain write buffer after cleaning the mini-D$, and fix a
	typo in a comment.
	[thorpej, ticket #661]

sys/arch/arm/arm32/pmap.c			1.107

	Clean up some warts in pmap_protect().
	[thorpej, ticket #662]

libexec/ld.elf_so/Makefile			1.50 via patch

	Build for ``armeb''.
	[thorpej, ticket #663]

libexec/ld.elf_so/Makefile			patch

	Fix typo in previous.
	[zuntum, ticket #994]

distrib/sets/makeflist				1.50

	If ad.${machine_arch} exists, prefer it over ad.${machine_cpu}
	because it will have more specific information.
	[thorpej, ticket #664]

sys/arch/i386/stand/lib/gate20.c		1.5

	There are other systems besides the PS/2 L40 that enable
	A20 via the Configuration Port, so restructure the code a
	little to allow for them, and list at least one other system
	that does (anything based on the AMD Elan SC520).
	[thorpej, ticket #665]

sys/arch/i386/conf/NET4501			1.15

	The Elan SC520's PIT runs at 1.1892MHz; set TIMER_FREQ so
	that time is kept properly.
	[thorpej, ticket #666]

sys/arch/arm/include/bswap.h			1.2
sys/arch/arm/include/endian_machdep.h		1.4
sys/arch/arm/include/byte_swap.h		1.1 (new)
sys/arch/arm/include/Makefile			1.26

	Byte-swapping optimizations, enabled if compiling with GCC:
	 o Byte-swap 16-bit and 32-bit constants at compile-time
	 o Inline 16-bit and 32-bit variable byte-swaps
	[thorpej, ticket #667]

distrib/sets/lists/comp/ad.arm			1.10

	Add <arm/byte_swap.h>
	[thorpej, ticket #668]

sys/arch/arm/include/bswap.h			1.3
sys/arch/arm/include/byte_swap.h		1.2
sys/arch/arm/include/endian_machdep.h		1.5

	Rename ``word'' -> 16 and ``long'' -> 32.
	Replace __byte_swap_32_variable() with a C version that
	generates nearly identical assembly.
	[thorpej, ticket #673]

sys/kern/kern_malloc_debug.c			1.7

	Don't pass VM_PROT_EXEC to pmap_kenter_pa().
	[thorpej, ticket #674]

sys/uvm/uvm_km.c				1.57

	Don't pass VM_PROT_EXEC to pmap_kenter_pa().
	[thorpej, ticket #675]

share/man/man9/pmap.9				1.15

	o Document the existing requirement that machine-independent
	  code not pmap_kenter_pa() a mapping at a virtual address
	  for which a valid mapping already exists.
	o Document the new requirement that machine-idependent code
	  not pmap_kenter_pa() a mapping with VM_PROT_EXEC.
	[thorpej, ticket #676]

share/man/man9/pmap.9				1.16

	Mdoc nits in last, and bump date for last commit.
	[thorpej, ticket #677]

sys/arch/arm/xscale/i80321_icu.c		1.4

	Don't need to frob CPSR in _splraise().
	[thorpej, ticket #679]

sys/arch/evbarm/iq80310/iq80310_intr.c		1.16

	Don't need to frob CPSR in _splraise().
	[thorpej, ticket #680]

sys/arch/arm/arm/cpufunc_asm_xscale.S		1.15

	Fix a fencepost error in the cache flush routines, caused
	by using the wrong condition on a branch.
	[thorpej, ticket #681]

sys/arch/arm/include/cpufunc.h			1.26

	Garbage-collect some unused routines.
	[thorpej, ticket #682]

sys/arch/arm/arm/cpufunc.c			1.51

	If __ARMEB__ is defined, always set CPU_CONTROL_BEND_ENABLE
	in the CPU control register.
	[thorpej, ticket #685]

sys/arch/acorn26/acorn26/machdep.c		1.3

	Disable IRQs and FIQs when rebooting.
	[bjh21, ticket #686]

sys/arch/acorn26/acorn26/stubs.c		1.2

	The only caller of fuswintr() and suswintr(), addupc_intr(),
	can handle their returning -1, so have them always do that
	rather than panicking.
	[bjh21, ticket #687]

sys/arch/acorn26/acorn26/Locore.c		1.2
sys/arch/acorn26/acorn26/machdep.c		1.4
sys/arch/acorn26/acorn26/copyinout.S		1.3
sys/arch/arm/arm/bcopyinout.S			1.1 (new)
sys/arch/arm/conf/files.arm			1.62
sys/arch/arm/arm32/bcopyinout.S			delete

	New and much improved version of copyin(), copyout(), and
	kcopy() which works on both 26-bit and 32-bit machines.
	[bjh21, ticket #689]

sys/arch/arm/arm/cpufunc_asm_sa1.S		1.7

	Convert bpl's to bhi's, saves looping more than needed in
	some cases.
	[thorpej, ticket #690]

crypto/dist/openssl/apps/progs.h		1.3

	More NO_xx cleanup.
	[itojun, ticket #696]

sys/net/if_ethersubr.c				1.96-1.97

	In ether_output(), don't bother calling memcpy() to plop the ethertype
	into the packet: On system with no strict alignment constraints, just
	assign the value, and on others, do an inline 2 byte copy.
	[thorpej, ticket #702]

sys/netkey/key.c				1.73

	Fixed that the incorrect time was set to sadb_comb_{hard|soft}_usetime.
	Sync w/KAME.
	[itojun, ticket #704]

sys/netkey/key.c				1.74

	Should return error code from key_senderror().  Sync w/KAME.
	[itojun, ticket #705]

sys/dev/pcmcia/if_wi_pcmcia.c			1.25
sys/dev/pcmcia/pcmciadevs			1.176
sys/dev/pcmcia/pcmciadevs.h			regenerate
sys/dev/pcmcia/pcmciadevs_data.h		regenerate

	Support this device, which is evidently a rebadged GEMTEK WLAN which we
	already support under another name:

	wi0 at pcmcia0 function 0: NETGEAR MA401RA Wireless PC, Card,
	  ISL37300PEval-RevA
	wi0: 802.11 address <whatever>
	wi0: using RF:PRISM2.5 MAC:ISL3873B(PCMCIA)
	wi0: Intersil Firmware: Primary (1.0.7), Station (1.3.6)
	[abs, ticket #971]

sys/netinet/tcp_output.c			1.85

	Never send more than half a socket buffer of data in a
	segment.  This ensures that we can always keep 2 packets
	on the wire, and we will therefore not cause any delayed
	ACKs.  Otherwise, this causes performance problems when
	using large-MTU interfaces, such as the loopback interface.
	[thorpej, ticket #707]

sys/netinet6/in6_pcb.c				1.50
sys/netinet6/in6_proto.c			1.45

	Allow bind() of deprecated addresses, trusting userland
	application knows what it's doing.
	[itojun, ticket #708]

sys/lib/libkern/libkern.h			1.41

	GCC 2.95 supports __builtin_ffs(), so use it.
	[thorpej, ticket #710]

sys/dev/pci/if_sip.c				1.62

	Do not treat the ``reset complete'' interrupts as errors.
	Doing so causes us to go into a reset/interrupt/reset loop.
	[tls, ticket #1007]

sys/arch/acorn32/acorn32/rpc_machdep.c		1.39
sys/arch/arm/arm32/pmap.c			1.110
sys/arch/cats/cats/cats_machdep.c		1.33
sys/arch/evbarm/integrator/integrator_machdep.c	1.26
sys/arch/evbarm/iq80310/iq80310_machdep.c	1.43
sys/arch/evbarm/iq80321/iq80321_machdep.c	1.10
sys/arch/hpcarm/hpcarm/hpc_machdep.c		1.52
sys/arch/netwinder/netwinder/netwinder_machdep.c 1.35
sys/arch/shark/ofw/ofw.c			1.18

	Do cached memory access to L1 tables, making sure to
	write-back the cache after any L1 table modifications.
	[thorpej, ticket #712]

sys/arch/powerpc/include/ansi.h			patch

	Back out latest change -- it is somewhat controversial,
	ref. revision 1.14 and causes a build problem.
	[he, ticket #638]

sys/dev/pci/if_wmreg.h				1.4
sys/dev/pci/pcidevs				1.474
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	Fix typos; ``Wiseman'' is 82542, not 82452.
	[yamt, ticket #925]

sys/arch/sparc64/dev/pci_machdep.c		1.33

	Set the PCI latency timer for bus master devices, based
	on PR#18451.  Additionally do not hard code the bus frequency,
	instead get it from OpenFirmware.
	[martin, ticket #875]

sys/arch/sparc64/sparc64/machdep.c		1.131,1.133 via patch

	Fix typo: set _asi depending on requested endianess, not
	_sasi (the streaming accessors take care of this themselfs).
	Fixes 32-bit kernels on PCI machines.  Since we now use
	pmap_kenter_pa, which ignores PMAP_LITTLE, don't bother to
	pass that as flags. We've already changed the ASIs used to
	access the mapped pages acordingly.
	[martin, ticket #917]

sys/arch/sparc/include/bsd_openprom.h		1.18
sys/arch/sparc64/include/bsd_openprom.h		1.4

	* Refine the comment describing openprom_addr.
	* Add openprom_range and openprom_intr structures.
	[martin, ticket #948]

sys/arch/sparc64/include/bsd_openprom.h		1.5

	Protect against multiple inclusion.
	[martin, ticket #948]

sys/arch/sparc/dev/cgfourteen.c			1.25
sys/arch/sparc/dev/cgfourteenvar.h		1.4
sys/arch/sparc/dev/sbus.c			1.46
sys/arch/sparc/dev/sbusvar.h			1.12
sys/arch/sparc/dev/vme_machdep.c		1.36
sys/arch/sparc/sparc/autoconf.c			1.172
sys/arch/sparc/sparc/iommu.c			1.66
sys/arch/sparc/sparc/iommuvar.h			1.6
sys/arch/sparc/sparc/timer.c			1.6
sys/arch/sparc64/dev/sbus.c			1.51
sys/arch/sparc64/dev/sbusvar.h			1.11
sys/dev/sbus/be.c				1.33
sys/dev/sbus/esp_sbus.c				1.21
sys/dev/sbus/if_hme_sbus.c			1.12
sys/dev/sbus/p9100.c				1.9
sys/dev/sbus/qe.c				1.24
sys/dev/sbus/qec.c				1.20
sys/dev/sbus/qecvar.h				1.5
sys/dev/sbus/sbusvar.h				1.18
sys/dev/sbus/tcx.c				1.8

	Use the structures defined in bsd_openprom.h for ``reg'',
	``range'', and ``intr'' properties, rather than having
	identical-except-for-names sbus_* and iommu_* versions.
	[martin, ticket #948]

sys/dev/ic/ncr53c9x.c				1.94-1.103
sys/dev/ic/ncr53c9xvar.h			1.36-1.39
sys/dev/sbus/esp_sbus.c				1.22

	Additional fixes to make 16 targets work on FAS366.
	[martin, ticket #948]

sys/dev/ic/lsi64854.c				1.21-1.22

	Adjust residual counter for wide transfers.
	[martin, ticket #948]

bin/rcp/rcp.c					1.30

	Change storage for file size from int to off_t.
	[ragge, ticket #1008]

sys/lib/libkern/ffs.c				1.9

	#undef ffs before the ffs() function definition, so that
	the name isn't rewritten to __builtin_ffs() on gcc 2.95+;
	this fixes compilation on sun2.
	Also change the comment for function
	[skrll, ticket #1009]

usr.sbin/pkg_install/Makefile.inc		1.20-1.21

	Under no circumstances should this Makefile test the output
	of ``uname''.  Doing do breaks cross compiling.
	[thorpej, tickets #830 and #831]

share/man/man4/wm.4				1.5

	Note that checksum offload is supported.
	[thorpej, ticket #716]

sys/arch/macppc/pci/pci_machdep.c		1.19

	Enable memory for cards with 64-bit memory mappings in addition to
	32-bit memory mappings. Makes Intel GigE card work in my Beige G3.
	[thorpej, ticket #717]

sys/arch/alpha/alpha/pmap.c			1.192

	Add missing PMAP_TLB_SHOOTDOWN() after PMAP_INVALIDATE_TLB() in
	pmap_page_protect().  Fixes PR#18045.
	[mhitch, ticket #722]

etc/rc.subr					1.52
share/man/man5/rc.conf.5			1.65

	Append ' - see rc.conf(5)' to unset variable warning:
	  /etc/rc.d/fu: WARNING: $fu is not set properly - see rc.conf(5).
	Add a note to rc.conf that third party packages may test for additional
	variables.
	[abs, ticket #732]

etc/Makefile					1.228
distrib/sets/lists/etc/mi			1.108

	Create /etc/mail/local-host-names, required by sendmail(8).
	[grant, ticket #904]

gnu/usr.sbin/sendmail/cf/cf/netbsd-proto.mc	1.10

	Include DOMAIN(generic) so that various standard configuration items
	are included, notably enabling the use of /etc/mail/local-host-names.
	[grant, ticket #881]

sys/arch/i386/i386/mtrr_k6.c			1.3

	Follow AMD's recommendations for programming the
	uncachable/write-combine bits of the K6 cache-control-register:
	disable the cache; flush the cache; set the bits; re-enable the cache
	(all much like programming the pentium mtrr's). See reference posted
	to tech-kern; also review there by thorpej.
	[fredb, ticket #734]

crypto/dist/kame/racoon/isakmp.c		1.10

	Tighten isakmp header length validation.
	[itojun, ticket #740]

usr.sbin/rpc.yppasswdd/yppasswdd_mkpw.c		1.10

	As discussed on tech-userlevel on Jun, 10 2002, make changes to not use
	getpwnam() to get the user's passwd entry but read it from the passwd
	file yppasswdd will later update. This allows a NetBSD machine to be
	master NIS server without requiring the NIS accounts to exist (via
	/etc/master.passwd, nis or other ways) on the local machine.
	[martti, ticket #741]

gnu/dist/toolchain/gcc/config/alpha/netbsd.h	1.10
gnu/dist/toolchain/gcc/config/i386/netbsd-elf.h	1.6

	Fix SELECT_SECTION() so that C++ run-time type info constructors do
	not go in .rodata on PIC systems, which was causing text relocations
	(and associated performance loss).
	[mycroft, ticket #742]

crypto/dist/openssl/crypto/md32_common.h	1.4

	Somehow main trunk was not in sync with 0.9.6f for this file.
	[itojun, ticket #744]

sys/dev/ic/siopreg.h				1.13

	Add definitions for the AIP control registers (1010 only).
	[bouyer, ticket #746]

sys/dev/ic/siop_common.c			1.30

	The 1010 will generate a scsi gross error if a RAM entry is read
	before being written (i.e. is used uninitialised). The esiop SCRIPT
	may do this in some circonstances (and it is safe) so
	bus_space_set_region_4() the RAM in reset routine.
	[bouyer, ticket #747]

usr.sbin/pkg_install/Makefile.inc		1.22-1.23
usr.sbin/pkg_install/add/extract.c		1.24
usr.sbin/pkg_install/add/futil.c		1.9
usr.sbin/pkg_install/add/perform.c		1.71-1.75
usr.sbin/pkg_install/add/pkg_add.1		1.35-1.38
usr.sbin/pkg_install/admin/pkg_admin.1		1.18-1.20
usr.sbin/pkg_install/create/perform.c		1.34
usr.sbin/pkg_install/create/pkg_create.1	1.33-1.34
usr.sbin/pkg_install/delete/perform.c		1.37-1.38
usr.sbin/pkg_install/delete/pkg_delete.1	1.25-1.26
usr.sbin/pkg_install/info/pkg_info.1		1.30-1.32
usr.sbin/pkg_install/lib/file.c			1.56
usr.sbin/pkg_install/lib/ftpio.c		1.42-1.47
usr.sbin/pkg_install/lib/lib.h			1.44
usr.sbin/pkg_install/lib/path.c			1.2-1.4
usr.sbin/pkg_install/lib/path.h			1.2-1.3
usr.sbin/pkg_install/lib/str.c			1.40
usr.sbin/pkg_install/lib/version.h		1.16-1.19

	Update the package tools to version 20021123.
	[jschauma, ticket #1011]

share/man/man4/pciide.4				1.46

	Remove the note about Ultra/133 from the bug section.
	[bouyer, ticket #1015]

sys/dev/pci/pcidevs				1.488

	Add Intel i80321 I/O processor.
	[thorpej, ticket #1017]

sys/dev/pci/pcidevs				1.489
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	Add IBM 133 PCI-X Bridge.
	[thorpej, ticket #1018]

sys/arch/powerpc/mpc6xx/pmap.c			patch

	This change causes icache corruption, and reverting it shouldn't
	re-introduce any old problems.
	[chs, ticket #1016]

sys/dev/pci/pcidevs				1.472
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	- Broadcom BCM4401
	- VIA VT8235
	- Modify description of VT8233_AC97: "VT8233 AC-97 ..." ->
	  "VT8233/VT8235 AC-97 ..."
	[kent, ticket #1019]

sys/dev/pci/pciide.c				1.174

	Add support for VIA VT8235
	[kent, ticket #1019]

share/man/man4/pciide.4				1.43-1.45

	Note VIA VT8235.
	Add some commas in enumerations, and bump date for recent changes.
	Fix a major whitespace error; new sentence, new line.
	[kent, ticket #1019]

sys/arch/hpcmips/vr/mq200_vrip.c		1.8

	Fix this driver; revision 1.7 was incomplete.
	[takemura, ticket #753]

sys/dev/hpc/hpcfb.c				1.22

	Make WSDISPLAYIO_SVIDEO and WSDISPLAYIO_GVIDEO work.
	[takemura, ticket #754]

sys/conf/Makefile.kern.inc			1.21
sys/gdbscripts/Makefile.inc			1.1 (new)

	Build a .gdbinit in the kernel build directory.  The new
	.gdbinit will source all of the system-provided gdb scripts
	in sys/gdbscripts, as well as any files specified by the
	user in the GDBINIT make variable.
	[thorpej, ticket #756]

sys/arch/sparc/include/vmparam.h		1.31
sys/arch/sparc64/include/vmparam.h		1.20

	Increase the default stack limit to 2M (from 512K on sparc
	and 1M on sparc64).
	[thorpej, ticket #763]

sys/dev/isapnp/isapnpdevs			1.48
sys/dev/isapnp/isapnpdevs.c			regenerate
sys/dev/isapnp/isapnpdevs.h			regenerate

	Add Cabletron 22xx as a Lance Ethernet instance.
	Fixes PR#17695.
	[jdolecek, ticket #765]

sys/dev/ic/lancereg.h				1.9

	Fix the PARTID for the original 79c970.  Fixes PR#18029.
	[thorpej, ticket #766]

sys/dev/pci/if_pcn.c				1.11
sys/dev/pci/if_pcnreg.h				1.3

	Add support for memory-mapped PCnet-PCI chips.
	[thorpej, ticket #767]

sys/arch/sparc64/conf/GENERIC32			1.44

	Add ``audio* at uaudio?'' so that uaudio is actually useful.
	Fixes PR#15610.
	[chs, ticket #769]

sys/uvm/uvm_fault.c				1.77

	Be sure that the page we allocate to break a loan is put
	on a paging queue.  Fixes PR#18037.
	[chs, ticket #770]

sys/uvm/uvm_fault.c				1.78

	When breaking a loan due to a page fault, check to see if
	the other kind of reference-holder (anon or object) is
	referencing the page.  If not, the page must be removed
	from the paging queue.
	[thorpej, ticket #759]

etc/postinstall					1.27
etc/mtree/special				1.64
etc/rc.d/Makefile				1.34
etc/rc.d/raidframe				1.7
etc/rc.d/raidframeparity			1.1 (new)
distrib/sets/lists/etc/mi			1.106

	Split raidframe parity checking/rebuilding out into
	raidframeparity, which is called after quota, so we don't
	end up with fsck and raidframe parity rebuild taking forever
	after a crash/reboot.
	While here, check for raid[0-9].conf and raid[1-9][0-9].conf
		      and not raid[0-9].conf and raid[0-9][0-9].conf
	[abs, ticket #772]

libexec/ld.elf_so/arch/alpha/alpha_reloc.c	1.3
libexec/ld.elf_so/arch/alpha/rtld_start.S	1.9

	There is no need to do an imb after each call to the binder,
	because we only patch the GOT, not the PLT.  However, do
	an imb when setting up the PLT thunk, just in case.
	[thorpej, ticket #774]

gnu/dist/toolchain/bfd/elf32-vax.c		1.8

	Apply changes which among other things fix -Bsymbolic links.
	[matt, ticket #791]

sys/netinet/tcp_output.c			1.86

	In the txsegsize bounding code, it is not necessary to
	adjust for the options length.
	[thorpej, ticket #795]

tools/mktemp/Makefile				1.3
tools/Makefile					1.56-1.57

	Re-add mktemp as a host tool.
	[thorpej, ticket #804]

usr.bin/mktemp/Makefile				1.5
usr.bin/mktemp/mktemp.c				1.5

	Allow mktemp to build as a host tool.
	[thorpej, ticket #805]

lib/libc/stdio/gettemp.c			1.8
lib/libc/stdio/mkdtemp.c			1.6
lib/libc/stdio/mkstemp.c			1.5

	Allow mktemp to build as a host tool.
	[thorpej, ticket #806]

tools/compat/compat_defs.h			1.18
tools/compat/config.h.in			1.21
tools/compat/configure.ac			1.23 via patch
tools/compat/configure				regenerate
tools/compat/Makefile				1.15
tools/compat/scripts/mktemp			delete

	 o Check for mkstemp() and mkdtemp(), and build them into
	   libcompat if necessary.
	 o mktemp is now a host-tool, so remove the now obsoleted
	   script.
	[thorpej, ticket #807]

usr.bin/lorder/lorder.sh			1.12

	Get MKTEMP from the environment.
	[thorpej, ticket #808]

share/mk/bsd.own.mk				1.308

	 o Add MKTEMP as a host tool.
	 o Pass MKTEMP to lorder, and invoke lorder with sh.
	[thorpej, ticket #809]

usr.sbin/rpc.pcnfsd/Makefile			1.14

	Resolve rpcgen's path in a way that works with other shells.
	[thorpej, ticket #810]

lib/libpcap/Makefile				1.23

	Don't override the definition of LEX.
	[thorpej, ticket #811]

usr.bin/make/pathnames.h			1.10

	If MAKE_BOOTSTRAP and HAVE_CONFIG_H, pull in "config.h" so
	that we get the correct _PATH_BSHELL.
	[thorpej, ticket #812]

Makefile					1.186 via patch

	Add a do-lib-libc target which is processed after do-lib-csu.
	This ensures that the results of the libc build are available
	to other lib builds (notably, llib-lc.ln).
	[thorpej, ticket #813]

share/mk/bsd.lib.mk				1.206

	If DESTDIR is set, add ${DESTDIR}/usr/libdata to the lint
	library search path.  This works around the problem of lint
	using the wrong lint libraries until a "lint -d ..."
	equivalent is implemented for libraries.
	[thorpej, ticket #814]

lib/libposix/Makefile				1.11 via patch

	Set LLIBS to nothing; no sense in warning about routines
	from libc that we know we are replacing.
	[thorpej, ticket #817]

bin/sh/Makefile					1.59

	Use ``unsigned char'' and ``char'' instead of ``u_int8_t''
	and ``int8_t'' for TARGET_CHAR when building mksyntax.
	This lets the host tool work on non-BSD systems without
	causing too many changes to how sh is built.
	[thorpej, ticket #819]

usr.bin/file/apprentice.c			1.35
usr.bin/file/print.c				1.28

	Don't include <sys/cdefs.h> directly.  On NetBSD systems,
	it will be pulled in by <sys/types.h>, and on non-NetBSD
	systems (host tool case), it doesn't really matter since
	it's just for the __RCSID macro.
	[thorpej, ticket #820]

usr.bin/tn3270/api/asc_ebc.c			1.6
usr.bin/tn3270/api/ebc_disp.c			1.6
usr.bin/tn3270/tools/mkastods/Makefile		1.10
usr.bin/tn3270/tools/mkastods/mkastods.c	1.8
usr.bin/tn3270/tools/mkastosc/Makefile		1.10
usr.bin/tn3270/tools/mkastosc/mkastosc.c	1.10
usr.bin/tn3270/tools/mkdctype/Makefile		1.11
usr.bin/tn3270/tools/mkdstoas/Makefile		1.10
usr.bin/tn3270/tools/mkdstoas/mkdstoas.c	1.8
usr.bin/tn3270/tools/mkhits/Makefile		1.10
usr.bin/tn3270/tools/mkhits/dohits.c		1.11-1.12
usr.bin/tn3270/tools/mkhits/mkhits.c		1.7-1.8

	Make the tn3270 host tools build on non-BSD systems.
	Also, remove some non-__STDC__ handling.
	[thorpej, ticket #821]

share/locale/ctype/Makefile			1.8

	Use ${CPP}, not cpp.
	[thorpej, ticket #823]

tools/compat/defs.mk.in				1.5

	Add a HOST_BSHELL make variable which contains the path to
	the working shell.
	[thorpej, ticket #825]

tools/lorder/Makefile				1.5

	Patch lorder wirh the host's working shell.
	[thorpej, ticket #826]

share/mk/bsd.own.mk				1.309

	No longer have to invoke lorder with the shell explicitly;
	the host tool is patched to use the working shell as the
	interpreter.
	[thorpej, ticket #827]

tools/host-mkdep/configure.ac			1.2
tools/host-mkdep/configure			1.2
tools/host-mkdep/host-mkdep.in			1.4

	Patch host-mkdep with the working host shell.
	[thorpej, ticket #828]

lib/libc/gen/__fts13.c				1.40
tools/compat/config.h.in			1.22
tools/compat/configure.ac			1.24
tools/compat/configure				1.24
tools/compat/fts.h				1.1 (new)

	Always NetBSD's own fts(3) in compat builds.  Some systems
	(among them RedHat 7.3) do not have fts(3) implementations
	which work correctly with -D_FILE_OFFSET_BITS=64.
	[thorpej, ticket #834]

usr.bin/file/config.h				1.11-1.12

	Allow cross-compile on 1.5.x, don't include <stdint.h>
	there.  Also HAVE_STDINT_H if defined(__linux__).
	[thorpej, ticket #835]

sys/lib/libsa/tftp.c				1.11

	Do not #include "/usr/incloude/arpa/tftp.h" directly.
	Fixes problem for cross-compiling.
	[thorpej, ticket #836]

sys/dev/pci/tga.c				1.43-1.45

	Simplify blitting code slightly, fix fenceposts.
	Copy forward when moving to the right if no overlap.
	Force GPSR to 0 before a blit, so text doesn't shift right.
	Fixes a few problems causing occasional corruption with
	TGA/TGA2 consoles.
	[mycroft, ticket #837]

usr.bin/find/find.1				1.34

	-path is an extension, so document it as such.
	[thorpej, ticket #838]

distrib/sets/checkflist				1.17

	Do not use the -path extension to find.  Instead, filter
	out the metalog file using a separate loop in the pipeline.
	[thorpej, ticket #839]

gnu/dist/toolchain/gcc/config/arm/arm.h		1.10

	Define __XSCALE__ and __ARM_ARCH_5TE__ for -march=xscale
	as well, the way GCC 3.x does.
	[thorpej, ticket #850]

gnu/dist/toolchain/gcc/config/arm/arm.h		1.11

	Define __STRONGARM__ for -mcpu=strongarm*.
	[thorpej, ticket #851]

lib/libcrypto/mdc2.inc				1.5
lib/libcrypto/mdc2dgst_dummy.c			1.1 (new)
lib/libcrypto_mdc2/Makefile			1.1 (new)
lib/Makefile					1.78
usr.bin/openssl/Makefile			1.16
share/mk/bsd.README				1.99,1.105
share/mk/bsd.own.mk				1.312
share/mk/bsd.prog.mk				1.158

	MDC2 is a patented algorithm, so don't ship it in the
	default libcrypto.  Defining MKCRYPTO_MDC2 will build a
	separate library, libcrypto_mdc2.
	[itojun, ticket #861]

sys/arch/sparc64/sparc64/clock.c		1.50

	Fix the rtc clock on Netra X1 machines; fixes PR#15611
	and PR#16816.
	[martin, ticket #868]

sys/arch/sparc64/dev/iommu.c			1.59

	Fix broken timeval comparison.  Fixes PR#18453.
	[martin, ticket #874]

sys/conf/Makefile.kern.inc			1.23

	Replace COPTS?= with COPTS+=, so that setting COPTS in
	/etc/mk.conf (common on sparc systems) does not cause the
	-O2 in DEFCOPTS to be lost, resulting an an unloadable
	kernel on sparc.
	[sjg, ticket #877]

sys/arch/vax/vax/trap.c				1.73

	Record stack growth, done inline to avoid another function
	call on every user page fault.
	[thorpej, ticket #878]

sys/lib/libkern/libkern.h			1.42-1.43

	Don't use __builtin_ffs() on vax, ffs is an instruction
	there already.  Also, always provide an ffs() prototype.
	[thorpej, ticket #1024]

gnu/dist/toolchain/gcc/f/fini.c			1.2

	Fix a bug with list handling which causes this to abort
	with an ``extraneous <string>'' message when it should not.
	[he, ticket #1025]

bin/sh/Makefile					1.60

	Use ``signed char'' instead of ``char'' to replace ``int8_t''.
	Should fix cross-building problem introudced by the pull-up
	in ticket #874.
	[thorpej, ticket #1027]

usr.sbin/user/user.c				1.60 via patch

	Support MD5 and blowfish password encryption.  Fixes
	PR#18474.
	[itojun, ticket #882]


gnu/dist/map-mbone/map-mbone.8			1.1 (new)
gnu/dist/map-mbone/mapper.c			1.1 (new)
gnu/dist/mrinfo/mrinfo.8			1.1 (new)
gnu/dist/mrinfo/mrinfo.c			1.1 (new)
gnu/dist/mrouted/LICENSE			1.1 (new)
gnu/dist/mrouted/callout.c			1.1 (new)
gnu/dist/mrouted/cfparse.y			1.1 (new)
gnu/dist/mrouted/config.c			1.1 (new)
gnu/dist/mrouted/defs.h				1.1 (new)
gnu/dist/mrouted/dvmrp.h			1.1 (new)
gnu/dist/mrouted/igmp.c				1.1 (new)
gnu/dist/mrouted/inet.c				1.1 (new)
gnu/dist/mrouted/kern.c				1.1 (new)
gnu/dist/mrouted/main.c				1.1 (new)
gnu/dist/mrouted/mrouted.8			1.1 (new)
gnu/dist/mrouted/pathnames.h			1.1 (new)
gnu/dist/mrouted/prune.c			1.1 (new)
gnu/dist/mrouted/prune.h			1.1 (new)
gnu/dist/mrouted/route.c			1.1 (new)
gnu/dist/mrouted/route.h			1.1 (new)
gnu/dist/mrouted/rsrr.c				1.1-1.2 (new)
gnu/dist/mrouted/rsrr.h				1.1-1.2 (new)
gnu/dist/mrouted/rsrr_var.h			1.1-1.2 (new)
gnu/dist/mrouted/snmp.c				1.1 (new)
gnu/dist/mrouted/snmp.h				1.1 (new)
gnu/dist/mrouted/vif.c				1.1 (new)
gnu/dist/mrouted/vif.h				1.1 (new)
gnu/dist/mtrace/mtrace.8			1.1 (new)
gnu/dist/mtrace/mtrace.c			1.1 (new)
gnu/usr.sbin/Makefile				1.6-1.7
gnu/usr.sbin/map-mbone/Makefile			1.1 (new)
gnu/usr.sbin/mrinfo/Makefile			1.1 (new)
gnu/usr.sbin/mrouted/Makefile			1.1 (new)
gnu/usr.sbin/mtrace/Makefile			1.1 (new)
usr.sbin/Makefile				1.180-1.181 via patch
usr.sbin/map-mbone/Makefile			deleted
usr.sbin/map-mbone/map-mbone.8			deleted
usr.sbin/map-mbone/mapper.c			deleted
usr.sbin/mrinfo/Makefile			deleted
usr.sbin/mrinfo/mrinfo.8			deleted
usr.sbin/mrinfo/mrinfo.c			deleted
usr.sbin/mrouted/LICENSE			deleted
usr.sbin/mrouted/Makefile			deleted
usr.sbin/mrouted/callout.c			deleted
usr.sbin/mrouted/cfparse.y			deleted
usr.sbin/mrouted/config.c			deleted
usr.sbin/mrouted/defs.h				deleted
usr.sbin/mrouted/dvmrp.h			deleted
usr.sbin/mrouted/igmp.c				deleted
usr.sbin/mrouted/inet.c				deleted
usr.sbin/mrouted/kern.c				deleted
usr.sbin/mrouted/main.c				deleted
usr.sbin/mrouted/mrouted.8			deleted
usr.sbin/mrouted/pathnames.h			deleted
usr.sbin/mrouted/prune.c			deleted
usr.sbin/mrouted/prune.h			deleted
usr.sbin/mrouted/route.c			deleted
usr.sbin/mrouted/route.h			deleted
usr.sbin/mrouted/rsrr.c				deleted
usr.sbin/mrouted/rsrr.h				deleted
usr.sbin/mrouted/rsrr_var.h			deleted
usr.sbin/mrouted/snmp.c				deleted
usr.sbin/mrouted/snmp.h				deleted
usr.sbin/mrouted/vif.c				deleted
usr.sbin/mrouted/vif.h				deleted
usr.sbin/mtrace/Makefile			deleted
usr.sbin/mtrace/mtrace.8			deleted
usr.sbin/mtrace/mtrace.c			deleted

	Move mrouted out of basesrc, as it carries a non-BSD
	license.
	[itojun, tickets #886, #887, #888]

sys/arch/arm/xscale/files.i80321		1.3
sys/arch/arm/xscale/i80321.c			1.3
sys/arch/arm/xscale/i80321var.h			1.2
sys/arch/arm/xscale/i80321_local_dma.c		1.1 (new)

	Add support for DMA to/from the on-chip devices of the
	i80321.
	[thorpej, ticket #568]

sys/arch/arm/arm32/bus_dma.c			1.13-1.14
sys/arch/arm/include/bus.h			1.5
sys/arch/arm/xscale/i80312_pci_dma.c		1.4
sys/arch/arm/xscale/i80321_pci_dma.c		1.4
sys/arch/arm/xscale/i80321_local_dma.c		1.2
sys/arch/evbarm/integrator/int_bus_dma.c	1.9

	Remove warning from bus_dmamap_destroy().
	Change the way DMA map syncs are done.  Instead of remembering
	the virtual address for each DMA segment, just cache a
	pointer to the original buffer/buftype used to load the
	DMA map, and use that.  Shrinks bus_dma_segment_t from 12
	to 8 bytes, and the cache flushing is also more efficient.
	[thorpej, ticket #568]

sys/arch/arm/arm32/bus_dma.c			1.16

	When making a mapping ``coherent'', clear *all* the cache
	bits, not just L2_B and L2_C.
	[thorpej, ticket #678]

sys/arch/arm/arm/cpufunc.c			1.53

	Enable branch prediction and write coalescing on XScale.
	[thorpej, ticket #703]

sys/arch/arm/arm/bus_space_asm_generic.S	1.2

	Add generic_bs_sr_4.
	[briggs, ticket #748]

sys/arch/arm/include/arm32/vmparam.h		1.10
sys/arch/arm/arm32/pmap.c			1.105

	Add code, conditional on PMAP_ALIAS_DEBUG, which can be
	used to hunt for virtual aliases between managed (pmap_enter)
	and unmanaged (pmap_kenter_pa) mappings.
	[thorpej, ticket #714]

sys/arch/arm/arm32/pmap.c			1.111

	Use a pool cache for PT-PTs.
	[thorpej, ticket #714]

sys/arch/arm/xscale/i80312_space.c		1.4
sys/arch/arm/xscale/i80321_space.c		1.3

	Use generic_bs_sr_4 for bus_space_set_region_4.
	[briggs, ticket #749]

sys/arch/sparc64/sparc64/conf.c			patch
etc/etc.sparc64/MAKEDEV				1.40
share/man/man8/man8.sparc64/MAKEDEV.8		1.17

	Add support for various USB devices.
	[martin, ticket #873]

sys/arch/vax/conf/GENERIC			1.104-1.105

	Enable ppp and PPP_* options.
	[abs, ticket #889]

sys/arch/sparc64/dev/zs.c			1.36
sys/arch/sparc64/include/z8530var.h		1.6

	Allow sparc64 kernels to be compiled without kbd.
	[abs, ticket #890]

lib/libc/locale/towlower.3			1.4

	Replace duplicate towlower with towupper.
	[junyoung, ticket #893]

sys/arch/vax/include/asm.h			1.15

	Use the register prefix in the ELF case in _PROF_PROLOGUE.
	[thorpej, ticket #894]

gnu/dist/toolchain/gcc/config/vax/netbsd-elf.h	1.8

	__mcount uses jsb linkage, so there is no need to skip the
	(non-existent) register save mask.  Profiling now works.
	Also, use asm_fprintf() in FUNCTION_PROFILER.
	[thorpej, ticket #895]

usr.sbin/cron/popen.c				1.7
sys/dev/isa/spkr.c				1.11
lib/libc/time/strftime.c			1.14

	License / copyright clarifications.
	[itojun, ticket #896]

usr.sbin/lpr/lpd/lpd.8				1.27 via patch
usr.sbin/lpr/lpd/printjob.c			1.35-1.36 via patch

	When ``-r'' is given, actually pass the file through ``of'',
	and also enable ``if''.
	[abs, ticket #906]

sys/arch/sparc/include/types.h			1.30
sys/arch/sparc64/include/rnd.h			1.1 (new)

	All sparc64 CPUs do __HAVE_CPU_COUNTER (aka %tick).
	[martin, ticket #907]

sys/arch/sparc/dev/zs.c				1.92

	Check only the physical address of serial ports on a Sun4.
	[jdc, ticket #908]

etc/root/dot.profile				1.16

	Use /root instead of ${HOME}, so that $ENV points to the
	right place when in single user mode.
	[abs, ticket #909]

sys/dev/mii/pnaphy.c				1.9

	Fix media detection on this PHY.  Part of fix for PR#18590.
	[fair, ticket #912]

share/misc/country				1.9

	Update to 20 May 2002 version.
	[kleink, ticket #913]

share/misc/domains				1.4

	Update list to 26 Nov 2002 data.  Re-sort, and capitalize
	country names.
	[kleink, ticket #914]

lib/libc/gen/basename.3				1.8
lib/libc/gen/dirname.3				1.8
lib/libc/gen/basename.c				1.5
lib/libc/gen/dirname.c				1.6-1.7

	Change basename(3) and dirname(3) to return a pointer to
	static storage instead of modifying their arguments.  Fixes
	PR#18647.
	[thorpej, ticket #918]

share/zoneinfo/asia				1.1.1.23
share/zoneinfo/australasia			1.1.1.22
share/zoneinfo/iso3166.tab			1.1.1.7
share/zoneinfo/southamerica			1.1.1.21
share/zoneinfo/zone.tab				1.1.1.18

	Update to tzdata2002d.
	[kleink, ticket #919]

gnu/dist/toolchain/gcc/config/alpha/alpha.c	1.4

	In alpha_initialize_trampoline, use tramp, not addr, to
	pass the trampoline address to __enable_execute_stack.
	Otherwise, incorrect behaviour would result if the trampoline
	happened to straddle a page boundary.
	[thorpej, ticket #921]

lib/libc/rpc/rpcb_clnt.c			1.11

	Add missing __rpc_fixup_addr.  This is needed to make
	mount_nfs -T work for scoped addresses.
	[yamt, ticket #924]

crypto/dist/kame/racoon/samples/racoon.conf.sample	1.6

	Discourage the use of aggressive mode for identity disclosure.
	[itojun, ticket #928]

dist/tcpdump/print-atalk.c			1.5
dist/tcpdump/print-ip.c				1.5 via patch
dist/tcpdump/print-ip6.c			1.4
usr.sbin/tcpdump/Makefile			1.30

	Correct LBL_ALIGN behaviour, sync with tcpdump.org.
	Enable LBL_ALIGN codepath to use byte-by-byte fetch
	in extract.h.  Fixes PR#18688 and PR#18398.
	[itojun, ticket #933]

include/heimdal/version.h			patch

	Bump version number by affixing ``-nb1''.  This is to signal
	that we have a minor fix on-board relative to the original.
	[joda, ticket #936]

sys/dev/ic/tulip.c				1.121

	Check existence of the default 10baseT media for 21140.
	If none exists, fall back to the first.
	[minoura, ticket #943]

sys/arch/i386/pci/pci_machdep.c			1.46

	Add a quirk for Connectix Virtual PC 5 (for Windows, at
	least) emulated PCI bridge (440BX).
	[minoura, ticket #944]

usr.sbin/lpr/lpd/printjob.c			1.37
usr.sbin/lpr/lpd/recvjob.c			1.17

	Rather than relying on pure luck to get the log file on
	STDERR_FILENO, explicitly dup2 the log file descriptor to
	STDERR_FILENO and close the original.
	[thorpej, ticket #947]

usr.bin/pkill/pkill.c				1.5

	Add missing ``-u euid'' option to optstring.  Fixes PR#18827.
	[kleink, ticket #949]

gnu/dist/toolchain/ld/emultempl/elf32.em	1.2-1.3

	Use basename() in a safe way.
	[thorpej, ticket #1028]

usr.bin/vgrind/vgrind.sh			1.3-1.4

	Psroff has been dead for quite some time.
	[kleink, ticket #950]

sys/netinet6/esp_input.c			1.26-1.27

	Increase correct stat.  KAME pr 445.
	[itojun, ticket #951]

sys/uvm/uvm_fault.c				1.78-1.79

	Change ``uoff'' to voff_t from vaddr_t as it's offset within
	uvm object.  Fixes PR#18855.
	[thorpej, ticket #952]

usr.sbin/mopd/mopcopy/mopcopy.c			1.2

	Show the load address in hex.
	[thorpej, ticket #960]

usr.sbin/mopd/mopcopy/mopcopy.c			1.3

	Make sure to fill in the load address in the destination
	MOP header.
	[thorpej, ticket #961]

usr.sbin/mopd/common/file.c			1.10

	For ELF, set d->loadaddr to 0, as we do for a.out.  Fixes
	a problem which causes the program to load 0x5200 too high
	in memory, causing a fatal trap before self-relocation.
	[thorpej, ticket #962]

sys/arch/vax/boot/boot/Makefile			1.29

	Set the entry point to 0 for the ELF case as well.
	[thorpej, ticket #963]

sys/arch/vax/boot/common/srt0.S			1.3

	Only skip the copy if we are already relocated; always
	clear the BSS.
	[thorpej, ticket #964]

usr.sbin/mopd/mopd/mopd.8			1.8
usr.sbin/mopd/mopd/mopd.c			1.10 via patch

	Allow more than one interface to be specified on the command
	line.
	[thorpej, ticket #965]

gnu/dist/toolchain/gcc/config/vax/netbsd.h	1.7
gnu/dist/toolchain/gcc/config/vax/vax.h		1.15

	Tidy up CC1_SPEC; remove the -mno-pic flag, which didn't
	actually work properly.
	Add a new -mno-asm-pic flag which tells the assembler to
	assemble the code non-PIC even if it was compiled PIC.
	[thorpej, ticket #966]

gnu/dist/toolchain/gas/config/tc-vax.c		1.19

	Bring in change from binutils-current:
	Only try to convert undefined references to GOT32/PLT32 if
	PIC code is requested.
	[thorpej, ticket #967]

sys/arch/arm/include/ansi.h			1.3
sys/arch/arm/include/stdarg.h			1.4
sys/arch/arm/include/varargs.h			1.2

	Adjust stdargs/varargs for GCC 3.x.
	[thorpej, ticket #973]

sys/arch/arm/include/stdarg.h			1.5

	Fix error in previous.
	[thorpej, ticket #974]

sys/dev/ic/siop.c				1.65

	In siop_reset(), reset sc_ntargets to 0; it will be
	computed again in siop_add_reselsw().
	In siop_reset(), reset the tag reseloff to 0, in addition
	to the lun reseloff.  If siop_add_dev() fails this time,
	we would use the old reseloff, clobbering memory new used
	for something else.
	[bouyer, ticket #975]

lib/libc/time/strftime.3			1.17

	Fix typo UCT -> UTC.  Fixes PR#19007.
	[kleink, ticket #978]

sys/dev/cardbus/cardbusdevs			1.23 via patch
sys/dev/cardbus/cardbusdevs.h			regenerate
sys/dev/cardbus/cardbusdevs_data.h		regenerate
sys/dev/cardbus/if_rtk_cardbus.c		1.12

	Add support for ``Planex FNW-3603 cardbus ethernet''.
	Fixes PR#18961.
	[kanaoka, ticket #979]

sys/dev/ic/ac97.c				1.37 via patch

	Fix LR reversal problem of mixer and record gain
	polarity problem.  Based on PR#12878 and PR#18901.
	[kent, ticket #980]

sys/dev/audio.c					1.168

	Fix LR reversal problem of play.balance vs. record.balance.
	Based on PR#18901.
	[kent, ticket #981]

sys/net/route.c					1.54
sys/net/route.h					1.31

	Add an argument to rt_timer_remove_all(), to specify if we
	need to call timeout routine on removal.
	[itojun, ticket #982]

usr.bin/hexdump/hexdump.c			1.8

	Do setlocale(LC_ALL, "") on startup.
	[kleink, ticket #985]

sys/arch/vax/boot/common/srt0.S			1.4

	Revert the effects of the previous pull-up, it has undesireable
	and unintended side-effects.
	[thorpej, ticket #1032]

sys/compat/linux/common/linux_misc.c		1.112

	Correct linux_sys_times(): if tms is NULL, just return the
	number of ticks since boot instead of returning error; this
	matches what Linux does.  Fixes PR#19027.
	[jdolecek, ticket #987]

sys/dev/ic/elinkxl.c				1.67
sys/dev/ic/elinkxlreg.h				1.11

	Fix multicast handling on 3C905B or later card;
	 o Handle IFF_ALLMULTI case correctly.  This is necessary
	   to get mrouted working.
	 o Clear unnecessary multicast hash bit.  Otherwise,
	   unnecessary multicast packet is received.
	[taca, ticket #992]

etc/postinstall				1.20-1.24,1.28-1.32,1.34-1.36 via patch

	Add checks and fixes for: dev/MAKEDEV, etc/postfix/*,
	/etc/moduli.  Improve output, including highlighting if
	``fix'' is a no-op from a particular check.
	[lukem, ticket #995]

gnu/dist/toolchain/gcc/config/arm/netbsd-elf.h	1.13

	Put const data in .rodata.  Pass -matpcs to the assembler.
	[thorpej, ticket #996]

sys/arch/hpcmips/conf/GENERIC			1.132

	Add ``xi'' to GENERIC.  Fixes PR#19059.
	[takemura, ticket #997]

dist/bind/README				1.7
dist/bind/Version				1.3
dist/bind/bin/named/db_defs.h			1.6
dist/bind/bin/named/db_sec.c			1.5
dist/bind/bin/named/ns_ncache.c			1.5
dist/bind/bin/named/ns_defs.h			1.8
dist/bind/bin/named/ns_req.c			1.7
dist/bind/bin/named/ns_resp.c			1.9
dist/bind/lib/nameser/ns_name.c			1.8
dist/bind/lib/nameser/ns_samedomain.c		1.3
dist/bind/man/named.conf.5			1.8

	Upgrade BIND to version 8.3.4.
	[itojun, ticket #998]

usr.bin/vmstat/vmstat.c				1.105

	In getuptime(), use kread() instead of time(3) to get the
	current time and boottime.  This makes rate calculations
	of crash dumps sensible.
	[nathanw, ticket #999]

sys/arch/shark/conf/Makefile.shark.inc		1.2
sys/arch/shark/conf/kern.ldscript		1.1 (new)

	Use a linker script to craft an ELF image that will work
	when copied to a.out via objcopy.  Stop using the frightening
	elf2aout.sh shell script.
	[thorpej, ticket #1002]

gnu/dist/toolchain/include/coff/arm.h		1.2
gnu/dist/toolchain/include/elf/arm.h		1.2

	Define the header bit indicating VFP-format floating point.
	[thorpej, ticket #1003]

gnu/dist/toolchain/bfd/elf32-arm.h		1.6

	In elf32_arm_merge_private_bfd_data(), if the input-bfd and
	output-bfd do not have matching VFP indication, report error.
	[thorpej, ticket #1004]

gnu/dist/toolchain/gas/config/tc-arm.c		1.13

	Various changes to support soft-vfp.
	[thorpej, ticket #1005]

gnu/dist/toolchain/gcc/config/arm/netbsd-elf.h	1.14

	In ASM_SPEC:
	 o If -mhard-float is given, pass -mfpa10 to assembler.
	 o If -msoft-float is given, pass -mfpu=softvfp to assembler.
	 o If neither is given, pass -mfpu=softvfp to the assembler.
	These changes properly mark objects as using soft-VFP, as
	is the default code generation for NetBSD ARM ELF.

	PLEASE NOTE: This is a minor flag day: new and old object
	files cannot be mixed when linking new programs.
	[thorpej, ticket #1006]

distrib/x68k/Makefile				1.4
distrib/x68k/stand/Makefile			1.1 (new)
distrib/x68k/stand/gzip.uue			1.1 (new)
distrib/x68k/stand/rawrite.uue			1.1 (new)

	Place installation tools in RELEASEDIR/installation/misc:
	 o gzip.x, gz124x5f.lzh
	 o rawrite.{x,doc,lzh}
	[isaki, ticket #1010]

sys/arch/x68k/stand/loadbsd/Makefile		1.10

	Place loadbsd manual page in RELEASEDIR/installation/misc.
	[isaki, ticket #1010]

etc/etc.sparc64/MAKEDEV				1.45 via patch
sys/arch/sparc64/sparc64/conf.c			patch

	Add MAKEDEV and cdevsw entries for the already existing
	``lpt* at ebus?'' driver.
	[martin, ticket #1012]

sys/arch/hpcmips/hpcmips/locore_machdep.S	1.5
sys/arch/hpcmips/vr/vr.c			1.40
sys/arch/hpcmips/vr/vrdsu.c			1.7

	Wipe out all physical memory before hibernate/reset.
	Otherwise, WinCE will not boot on some machines (e.g. IBM
	z50).
	[shin, ticket #1013]

usr.sbin/pkg_install/add/extract.c		1.25

	Add ``p'' option to TARX_CMD's argument for preserving file
	modes.  This fixes the problem that pkg_add(1) drops setuid/
	setgid aquired privileges.
	[taca, ticket #1020]

sys/arch/i386/i386/machdep.c			1.497

	Add support for National Semiconductor Geode(TM) family of
	processors.
	[minoura, ticket #1022]

etc/etc.sparc/MAKEDEV				1.83 via patch
etc/etc.sparc64/MAKEDEV				1.46 via patch

	Add entries for /dev/bpp (parallel port on sbus machines).
	[martin, ticket #1023]

sbin/ping6/ping6.c				1.53

	Correct the use of sizeof() in memset().
	[itojun, ticket #1026]

distrib/acorn32/stand/BtNetBSD/!BtNetBSD/fastboot	1.4

	Default to MDF and screen mode configured in RiscOS.
	[gavan, ticket #1029]

sys/dev/pci/pcidevs				1.483,1.485
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate
sys/dev/pci/iop_pci.c				1.11-1.13
sys/dev/i2o/dpti.c				1.10
sys/dev/i2o/dptivar.h				1.3
sys/dev/i2o/iopsp.c				1.17
sys/dev/i2o/iopvar.h				1.11-1.12
sys/dev/i2o/iop.c				1.29-1.32
share/man/man4/dpti.4				1.3-1.4

	Add support for Adaptec 2005S.
	Handle DPT ioctls() from native binaries.
	Fix SCSI probe problem.
	[ad, ticket #1030]

sys/dev/isa/dpt_isa.c				1.11
sys/dev/eisa/dpt_eisa.c				1.10
sys/dev/pci/dpt_pci.c				1.13
sys/dev/ic/dptvar.h				1.9
sys/dev/ic/dptreg.h				1.11
etc/etc.i386/MAKEDEV				1.187
share/man/man4/dpt.4				1.19-1.20
sys/conf/files					patch
sys/arch/i386/i386/conf.c			patch
sys/dev/ic/dpt.c				patch

	Implement DPT EATA ioctl interface.
	[ad, ticket #1031]

sys/dev/scsipi/cd_scsi.c			1.26-1.27

	Apply patch from Takeshi Nakayama on current-users which fixes problems
	when trying to play audio CD's on some drives.
	Fixes PR 7299 and probably PR 15155 and PR 16883 too.
	[jdc, ticket #969]

sys/sys/param.h					1.153-1.154
sys/kern/init_main.c				1.213-1.214
share/man/man4/options.4			1.191-1.192

	Allow NOFILE to be more easily overridden.
	[abs, ticket #1033]

sys/arch/arm/include/varargs.h			1.3

	Fix pasto which caused compile problem.
	[he, ticket #1034]

sys/dev/pci/eap.c				1.59

	Don't use tsleep() in attach, use delay().  Makes the driver
	work properly with ``Ensoniq CT5880''-based audio card.
	[pooka, ticket #1035]

etc/etc.i386/MAKEDEV				1.188-1.189

	Reorder dpti and dpt cases so that 'dptiN' is not interpreted as dpt 
	unit number 'iN'.
	[seb, ticket #1036]

sys/arch/sun3/include/bswap.h			1.3

	Make this identical to the other m68k machine/bswap.h by including
	m68k/bswap.h instead of sys/bswap.h.
	Fixes part of PR#18314.
	[kristerw, ticket #1038]

gnu/dist/toolchain/gcc/except.c			1.2
gnu/dist/toolchain/gcc/integrate.c		1.2

	Place EH labels on the permanent obstack.
	Fixes reset of PR#18314.
	[kristerw, ticket #1039]

sys/sys/malloc.h                                1.80-1.81 (via hand patch)

        M_ZERO for inline'ed MALLOC.
        [yamt, ticket #957]

usr.sbin/user/user.c				1.52-1.53

	Remove user from supplementary groups when deleting a user and not
	preserving information.
	Remove BUGS section from userdel(8) accordingly.
	Make this utility compile with WARNS=3 - add const-poisoning and
	shadow variable name resolution.
	[he, ticket #1041]

usr.sbin/user/user.c				1.61-1.62

	Handle PR 18474 in a more safe and scalable fashion - keep a table of
	password types, and their associated lengths, and check in useradd or
	usermod whether the given encrypted password has the correct length.
	This removes the (duplicated) hardcoded lengths which had crept in
	with the last commit, and also checks the length of the given password
	against the expected length.
	[he, ticket #1041]

usr.sbin/sunlabel/sunlabel.c			1.6

	sweep of errx/warnx, remove unnecessary trailing \n
	[lukem, ticket #1042]

usr.sbin/sunlabel/sunlabel.c			1.7

	improve help display
	minor KNF
	[lukem, ticket #1042]

usr.sbin/sunlabel/sunlabel.8			1.4
usr.sbin/sunlabel/sunlabel.c			1.8

	- make "device" non optional and remove "-d device", and actually make
	  it work with "device"...
	- tweak the docco a bit
	[lukem, ticket #1042]

usr.sbin/Makefile				1.182

	enable sunlabel
	[lukem, ticket #1043]

distrib/sets/lists/base/mi			1.375
distrib/sets/lists/man/mi			1.537

	add sunlabel
	[lukem, ticket #1043]

tools/Makefile					1.61

	enable sunlabel...
	[lukem, ticket #1043]

share/mk/bsd.sys.mk				1.83

	add SUNLABEL
	[lukem, ticket #1043]

distrib/sparc/bootfs/Makefile			1.38

	Add some magic with ${SUNLABEL} into ${IMAGEPOSTBUILD} (after
	${INSTALLBOOT} runs) to ensure that boot.fs has a valid Sun disklabel.
	Sparc boot floppies now boot.
	[lukem, ticket #1044]

etc/daily					1.47

	fix /etc/security stderr redirection.
	from rad@twig.com in PR bin/19553.
	[grant, ticket #1046]

sys/sys/cdefs.h					1.46
crypto/dist/krb4/lib/krb/krb.h.in		1.4

	It is not valid C++ to have a semicolon after
	   extern "C" {}
	so remove it from __END_DECLS.
	[kristerw, ticket #1052]

sys/dev/usb/umass.c				1.93

	Assign NULL to sc_pipe after closing, so that usbd_close_pipe isn't
	called twice. At least in NetBSD, the detach function is called when
	the device is removed, even if the attach function has failed.
	This is probably the cause of panics reported in kern/19326.
	[toshii, ticket #1054]

sys/dev/pci/emuxki.c				1.13-1.14

	Use bus_space_write_2() to write the 16 bit register "EMU_TIMER" which
	should fix PR kern/15663. Patch supplied by Yorick Hardy via GNATS.
	[tron, ticket #1056]

sys/dev/usb/umass.c				1.91-1.92

	Use "NULL" instead of "0" in pointer checks.
	[tron, ticket #1055]

usr.sbin/etcupdate/etcupdate			1.7-1.8

	Fix a typo in the yesno() function: add a missing question mark.
	[jmmv, ticket #1050]

usr.bin/cksum/cksum.1				1.20-1.21

	Fix typo: extra 'a' word in plural sentence.
	[jmmv, ticket #1051]

lib/libedit/refresh.c				1.18-1.19

	PR/17954: SAITOH Masanobu: since we have opost and onlcr set, we don't 
	need to output \r to go to the end of line; \n is enough. 
	From David Laight.
	[masanobu, ticket #1048]

sys/arch/i386/i386/db_trace.c			1.31-1.32

	stack frames can be overwrapped for eg. softintr.
	[masanobu, ticket #1047]

usr.bin/file/ascmagic.c				1.20-1.21

	Actually return a different code for big-endian UTF-16 in 
	looks_unicode().  Fixes PR 19487.
	[is, ticket #1045]

bin/pax/gen_subs.c				1.26-1.27 (via patch)
bin/pax/pax.1					1.36-1.37

	Change verbose output for symbolic links from "%s => %s" to
	"%s -> %s", which matches ls(1) (per POSIX), as well as GNU
	tar output.
	[kleink, ticket #1040]

sys/ufs/ffs/ffs_alloc.c				1.56-1.57

	Clear IN_SPACECOUNTED on (re-)used inodes.
	This cures the "unmount pending error:" on softdep umounts.
	[hannken, ticket #1049]

sys/ufs/ffs/ffs_softdep.c			1.38 (via patch)

	several bugs:
	- move calls to softdep_setup_pagecache() (which can sleep to allocate
	  memory) outside the softdep lock.
	- replace the softdep_flush_indir() hack (which tries to find another
	  vnode to fsync when we are holding lots of buffer-cache buffers
	  locked for long periods of time) with softdep_trackbufs() (which
	  just kicks the syncer and sleeps under the same circumstances). the
	  former method had a lock-ordering problem which would occasionally
	  deadlock.
	- relax the assertion in softdep_sync_metadata() which says that we
	  should never see D_ALLOCDIRECT deps for VREG vnodes. it's ok to see
	  those attached to indirect blocks.
	also, there's no need to splbio() while allocating the buffer headers
	to which pagecache dependencies are attached, so remove that.
	fixes all the problems in PR 19288.
	[chs, ticket #1053]

include/rpc/rpc_com.h				0-1.1

	Moved here from libc/rpc. Install this in /usr/include/rpc, just
	like on Solaris. This wasn't done before, since it only contained
	internal libc interfaces. These have been moved to rpc_internal.h,
	and this file now contains some actual exported definitions.
	[fvdl, ticket #1037]

include/rpc/Makefile				1.9-1.10

	Install rpc_com.h
	[fvdl, ticket #1037]

include/rpc/svc.h				1.19-1.20

	include rpc_com.h, and define SVC{GET,SET}_CONNMAXREC
	[fvdl, ticket #1037]

include/rpc/clnt.h				1.16-1.17
	Include rpc_com.h.
	[fvdl, ticket #1037]        

lib/libc/rpc/clnt_bcast.c			1.8-1.9
lib/libc/rpc/clnt_dg.c				1.7-1.8
lib/libc/rpc/clnt_generic.c			1.19-1.20
lib/libc/rpc/clnt_vc.c				1.7-1.8
lib/libc/rpc/getnetconfig.c			1.7-1.8
lib/libc/rpc/pmap_clnt.c			1.16-1.17
lib/libc/rpc/rpc_generic.c			1.9-1.10
lib/libc/rpc/rpc_soc.c				1.8-1.9
lib/libc/rpc/rpcb_clnt.c			1.11-1.12
lib/libc/rpc/svc.c				1.22-1.23
lib/libc/rpc/svc_dg.c				1.6-1.7
lib/libc/rpc/svc_generic.c			1.3-1.4
lib/libc/rpc/svc_run.c				1.17-1.18
lib/libc/rpc/svc_simple.c			1.21-1.22
lib/libc/rpc/svc_vc.c				1.9-1.10
lib/libc/rpc/xdr_rec.c				1.18-1.19
lib/libc/rpc/rpc_internal.h			0-1.1
lib/libc/rpc/rpc_com.h				1.3-0

	* Adapt include files for rpc_com.h/rpc_internal.h split.
	* Add rpc_control to svc.c
	* Implement non-blocking connections.
	[fvdl, ticket #1037]

lib/libc/include/namespace.h			1.71-1.72

	Add rpc_control.
	[fvdl, ticket #1037]

lib/libc/shlib_version				1.121-1.122 (via hand patch)

	Bump teeny version to account for minor bump on trunk
	[fvdl, ticket #1037]

dist/am-utils/conf/transp/transp_sockets.c	1.1.1.4-1.2
usr.sbin/mountd/mountd.c			1.80-1.81 (required hand patch)
usr.sbin/rpc.lockd/lockd.c			1.7-1.8
usr.sbin/rpc.statd/statd.c			1.20-1.21
usr.sbin/rpc.yppasswdd/rpc.yppasswdd.c		1.10-1.11
usr.sbin/rpcbind/rpcb_svc_com.c			1.8-1.9
usr.sbin/rpcbind/rpcbind.c			1.2-1.3

	Use a non-blocking SVC for TCP connections.
	[fvdl, ticket #1037]

usr.bin/rpcinfo/rpcinfo.c			1.15-1.16

	Don't include obsolete include file "rpc_com.h" any more.
	[fvdl, ticket #1037]

distrib/sets/lists/base/shl.mi			1.161.2.2-1.161.2.3 (hand patch)

	Bump libc to 12.83.1 to reflect new teeny version
	[fvdl, ticket #1037]

distrib/sets/lists/comp/mi			1.440.2.4-1.440.2.5 (hand patch)
	
	Add rpc_com.h
	[fvdl, ticket #1037] 

usr.sbin/pppd/pppd/main.c			1.41-1.42

	Use "%u" instead "%d" in format string for bytes count reported at
	termination. This should fix PR bin/19731.
	[tron, ticket #1058]

lib/libc/stdio/snprintf.c			1.16-1.17
lib/libc/stdio/vsnprintf.c			1.16-1.17

	Fix two bugs:
	1. snprintf(foo, 0. "XXX") is guaranteed not to write in foo by the
	   standard (ISO/IEC 9899 7.19.6.5) but our implementation handles this
	   as if the buffer has a size of (size_t)-1.
	2. snprintf(NULL, 0, "XXX") leaks memory since cantwrite() allocates
	   memory if _bf._base == NULL, and this buffer is never freed
	   (PR 16483).
	[kristerw, ticket #1059]

sys/netinet6/esp_rijndael.c			1.8-1.9
sys/netkey/keydb.h				1.11-1.12 (hand patched)
sys/netkey/keysock.c				1.20-1.21

	allocate route_in6 in struct secashead, to avoid mistakenly overrun
	the end of secashead.  Fixes PR18751.
	[itojun, ticket #1060]

sys/net/if_spppsubr.c				1.47-1.48

	correct tcp header chasing in pp_fastq processing. should fix kern/17491
	[tron, ticket #1061]

sys/arch/atari/conf/GENERIC.in			1.29-1.30
sys/arch/atari/conf/ATARITT			1.47.4.1-1.47.4.2 (regen)
sys/arch/atari/conf/BOOT			1.46.4.1-1.46.4.2 (regen)
sys/arch/atari/conf/BOOTX			1.40.4.1-1.40.4.2 (regen)
sys/arch/atari/conf/FALCON			1.47.4.1-1.47.4.2 (regen)
sys/arch/atari/conf/HADES			1.37.4.2-1.37.4.3 (regen)
sys/arch/atari/conf/MILAN-ISAIDE		1.12.4.3-1.12.4.4 (regen)
sys/arch/atari/conf/MILAN-PCIIDE		1.12.4.3-1.12.4.4 (regen)

	Since 1.6 we have 3 images (not 2!):
	  - 1Mb on HD floppy's
	  - 1.44Mb on HD floppy's
	  - 1.44Mb on a DD floppy
	[leo, ticket #1062]

sys/adosfs/advnops.c				via hand patch of diffs 
						from 1.1-1.2 of 
						sys/fs/adosfs/advnops.c

	Don't scale file block numbers. Fixes mmap() and UBCified read() 
	problems.
	[lonewolf, ticket #1063]

libexec/ftpd/cmds.c				1.19-1.20

	ftpd was unable to service the pwd request once you entered a directory
	without search permission. This confused some ftp clients.

	We fix this problem by maitaining a cached path when getcwd() does not
	work. The symbolic links and ../ are resolved in the cached path, and it
	is finnally checked for accuracy by comparing ./ and the cached path
	with stat (device and inode comparison). If the comparison fails, pwd
	fails as it did before, and if the comparison succeeds, the cached path
	is displayed.

	If paths are too long, we should just compare ./ with a truncated path
	and fail, thus making pwd displaying an error as it did before.
	[manu, ticket #1064]

sbin/fdisk/fdisk.c				1.58-1.59

	Print missing newline in two bootselector-related messages.
	[jmmv, ticket #1065]

sys/arch/amiga/amiga/locore.s			1.132-1.133
sys/arch/amiga/amiga/amiga_init.c		1.82-1.83 (hand patched)

	Change the bootstrap procedure to avoid temporarily mapping physical 
	memory.
	
	Now, on the Amiga, we copy a small piece of code to chip memory and 
	enable the MMU from here.
	On the DraCo, we setup %itt0 so that we shadow physical memory without
	touching the page tables and very temporarily. The DraCo's memory layout
	guarantees that there is no overlap in this case between physical and
	virtual addresses.
	
	This fixes a bug where Amiga's with physical memory at 0x200000 
	wouldn't boot kernels >2M in size, and possibly other corner cases.
	[aymeric, ticket #1066]

sys/arch/i386/stand/biosboot/version		1.13-1.14
sys/arch/i386/stand/lib/biosdisk_ll.c		1.12-1.13

	If booting from floppy in 2.88MB drive, actually test if it's possible
	to read sector 18, and fallback to 1.44MB drive geometry if that fails.
	This allows to boot from 1.44MB floppy disk in 2.88MB drive.
	Tested with 2.88MB drive in IBM PS/2 model 95 donated
	by 'Yokotashi' <lhc at kanal ucw cz> and Pavel Cahyna
	<pavel.cahyna at st ms mff cuni cz>
	Bump biosboot version.

	Fixes PR kern/3418 by Keith Moore.
	[jdolecek, ticket #1067]

share/termcap/termcap.src			1.73

	Wscons terminals (wsvt25) have 25 lines, so we shouldn't use the vt220
	initialisation sequence (which sets the scrolling region to the top 24
	lines).
	Noticed by Martin Husemann.
	[jdc, ticket #1068]

