#	$NetBSD: CHANGES-1.6.1,v 1.1.2.10 2002/10/21 02:30:14 lukem Exp $

A complete list of changes from NetBSD 1.6 to NetBSD 1.6.1:

File						Revision(s)
----						--------

sys/conf/osrelease.sh				patch
share/tmac/doc-common				patch

	Mark this as 1.6_STABLE.

distrib/sets/lists/base/mi			1.350
distrib/sets/lists/base/obsolete.mi		1.52-1.53
distrib/sets/lists/man/mi			1.513
distrib/sets/lists/man/obsolete.mi		1.52
libexec/Makefile				1.43
libexec/kfd/Makefile				1.8
usr.bin/Makefile				1.126
usr.bin/kf/Makefile				1.10

	Don't build kf or kfd; there are security issues with
	Heimdal 0.4e, and we don't actually need them.
	[joda, ticket #782]

sys/arch/vax/vsa/asc_vsbus.c			1.25

	Increase sc_maxxfer from 63K to 64K, otherwise fsck
	fails for file systems with larger block sizes.
	[chuck, ticket #783]

sys/dev/pcmcia/if_ne_pcmcia.c			1.95
sys/dev/pcmcia/pcmciadevs			1.177
sys/dev/pcmcia/pcmciadevs.h			regen
sys/dev/pcmcia/pcmciadevs_data.h		regen

	Add support for ACCTON EN2216-PCMCIA-ETHERNET.
	[bouyer, ticket #829]

doc/LAST_MINUTE					1.1, patch
doc/CHANGES					1.1, patch
doc/CHANGES.prev				1.1, patch
doc/README.files				1.1

	Pull up documentation that was moved into the base source.
	Clean up for the 1.6 release.
	Update LAST_MINUTE for cats and alpha X set issues.

share/termcap/termcap.src			1.71

	Correct the escape sequences for F1-F4 in our xterm entry.
	Fixes PR#18272.
	[jdc, ticket #789]

distrib/sets/makesums				1.5

	Also sum symlinks (as well as files) which match.
	[lukem, ticket #822]

distrib/notes/sparc/hardware			1.22-1.23

	Mention that some non-Sun CD-ROM drives can't boot any OS
	on Sun hardware.  Fix broken link to CD-ROM FAQ.
	[mbw, ticket #833]

sys/netinet/ip_output.c				1.102

	In rare cases when there is no room for ip options
	ip_insertoptions() can fail and corrupt a header length.
	Initialize len and check what ip_insertoptions() returns.
	[darrenr, ticket #842]

libexec/ftpd/ftpd.c				1.142

	Fix to allow /etc/ftpchroot to work correctly for
	usernames with > 9 characters.
	[lukem, ticket #843]

distrib/utils/sysinst/menus.mi.en		1.57-1.58
distrib/utils/sysinst/menus.mi.fr		1.37-1.38
distrib/utils/sysinst/menus.mi.pl		1.8-1.9

	Nullify ftp password whenever the user is changed.
	Fixes PR#11436.
	[grant, ticket #852]

distrib/utils/sysinst/arch/hpcmips/msg.md.en	1.7
distrib/utils/sysinst/arch/i386/msg.md.en	1.28

	Add explanation of normal vs. serial bootblocks.
	Addresses part of PR#18192.
	[grant, ticket #854]

distrib/hpcmips/Makefile			1.22

	Reorder lines so that ${MAKESUMS} is executed after all
	files are installed.
	[shin, ticket #856]

sys/arch/shark/isa/isa_shark_machdep.c		1.2

	Improve the display of ISA interrupts.
	[cgd, ticket #858]

sys/arch/macppc/stand/ofwboot/Makefile		1.35
sys/arch/macppc/stand/ofwboot/alloc.c		1.3

	Re-add own alloc(), to fix recent issues with
	kernels randomly dying on boot.
	[wrstuden, ticket #866]

sys/arch/macppc/stand/ofwboot/Locore.c		1.11

	Remove vestiges of the syncicache() call.
	This change makes OpenFirmware 2.4 machines actually boot.
	[wrstuden, ticket #867]

sys/nfs/nfs_serv.c				1.64

	Remove unnecessary PNBUF_PUT() in the NFSv2 mknod case.
	Fixes PR#18013.
	[bouyer, ticket #879]

sys/nfs/nfs_serv.c				1.63,1.65

	Improve various checks in nfsrv_commit() and nfs_commit().
	Prevents DIAGNOSTIC panics with some NVSv3 clients.
	[bouyer, ticket #880]

sys/arch/macppc/conf/INSTALL			patch

	Add uninorth* bus, so that this kernel can boot on
	various newer systems.

games/rogue/inventory.c				1.8
games/rogue/message.c				1.9
games/rogue/rogue.h				1.13
games/rogue/save.c				1.8

	Fix buffer overflows.
	[mrg, ticket #892]

sys/arch/arm/arm32/fault.c			1.23

	Record growth of stack in fault handler,
	so that core dumps contain the entire stack.
	[nathanw, ticket #885]

usr.bin/sort/fsort.c				1.21

	Use the right file to output merge result.
	[enami, ticket #883]

sys/uvm/uvm_swap.c				1.68

	Fix writing of kernel core dumps to alternate dump devices.
	Fixes PR#15947.
	[drochner, ticket #876]

sys/dev/pci/if_fxp_pci.c			1.26

	Certain revisions of the i82558 would not initialise
	correctly; fix this.
	Fixes PR#18011.
	[itojun, ticket #870]

gnu/dist/groff/src/preproc/pic/pic.y		1.2

	Avoid a possible buffer overflow.
	[wiz, ticket #869]

sys/dev/pcmcia/if_xi.c				1.23

	Changes from FreeBSD to improve performance.
	From PR#18372.
	[martin, ticket #891]

libexec/talkd/extern.h				1.3
libexec/talkd/process.c				1.8 (via patch)
libexec/talkd/talkd.c				1.14

	Fix response buffer & string handling.
	[itojun, ticket #846]

usr.sbin/lpr/lpd/lpd.c				1.43 (via patch)

	Set IPV6_V6ONLY socket option on AF_INET6 sockets, to avoid
	complicated access control issues due to IPv4 mapped address.
	[itojun, ticket #857]

crypto/dist/kame/racoon/missing/crypto/rijndael/rijndael-api-fst.c 1.2

	Turn on strict alignment #define's, because racoon reliably core
	dumps on machines which require strict alignment such as sparc64.
	[elric, ticket #897]

gnu/dist/sendmail/smrsh/smrsh.c			1.9

	More strict checking on command invocation.
	Refer to http://www.sendmail.org/smrsh.adv.txt.
	Resolves PR#18516.
	[itojun, ticket #898]

gnu/dist/toolchain/gdb/i386nbsd-nat.c		1.7

	Make sure to write back correct FP state.
	Resolves PR#17927.
	[toshii, ticket #841]

sys/dev/pci/if_fxp_pci.c			1.25

	Recognise the Intel PRO/100 VM Network Controller as seen in
	the HP omnibook 6100.
	[abs, ticket #844]

gnu/dist/toolchain/gcc/config/arm/arm.h		1.9

	Pull up patch from FSF GCC to fix aborts when compiling
	large functions for ARMv4.
	[rearnsha, ticket #847]

sys/netinet6/ip6_output.c			1.58

	The length field on the PADN option before the jumbo
	payload option was wrong.
	[itojun, ticket #855]

sys/arch/i386/conf/INSTALL			1.204
sys/arch/i386/conf/INSTALL_SMALL		1.90
sys/arch/i386/conf/INSTALL_TINY			1.58

	Change "ep0 at isa?" to "ep* at isa?", so ep instances
	during install are consistent with GENERIC.
	[grant, ticket #860]

distrib/utils/sysinst/menus.mi.en		1.61 (via patch)
distrib/utils/sysinst/menus.mi.fr		1.41 (via patch)
distrib/utils/sysinst/menus.mi.pl		1.12 (via patch)

	Use current values for start/size/bsize/fsize as defaults
	when editing disklabel partitions.
	[grant, ticket #853]

distrib/utils/sysinst/msg.mi.pl			1.5-1.6

	Language improvements.
	[grant, ticket #864]

distrib/utils/sysinst/menus.mi.en		1.59
distrib/utils/sysinst/menus.mi.fr		1.39
distrib/utils/sysinst/menus.mi.pl		1.10
distrib/utils/sysinst/msg.mi.en			1.91
distrib/utils/sysinst/msg.mi.fr			1.44
distrib/utils/sysinst/msg.mi.pl			1.10

	Allow unsetting of mountpoints in disklabel editor.
	Partially addresses PR#17801.
	[grant, ticket #865]

usr.sbin/etcupdate/etcupdate			1.7-1.8

	Fix typo, and don't execute /etc/postinstall if -b was used.
	[martti, ticket #871]

usr.bin/cdplay/cdplay.c				1.21

	Fix to allow the first minute of a CD to be played
	when using absolute msf addresses.
	[is, ticket #872]

sys/netinet/ip_nat.c				1.54

	Relax overly-conservative TCP option parsing used by ipnat
	when hunting for an MSS option to clamp.
	[sommerfeld, ticket #884]

distrib/utils/sysinst/util.c			1.74

	During timezone selection, only update the clock once per minute.
	Once per second is painful and annoying over a serial line.
	[grant, ticket #902]

bin/ksh/main.c					1.8

	Remove (nonexistent) newgrp as a builtin alias.
	This prevents the shell from unexpectedly dying if a
	user enters the 'newgrp' command.
	[jschauma, ticket #910]

sys/miscfs/kernfs/kernfs_vnops.c		1.84

	Correctly calculate file length for (e.g.) msgbuf.
	[jdolecek, ticket #911]

distrib/common/parselist.awk			1.13

	Escape { and } in the regexp that matches e.g. ${FOO}.
	[thorpej, ticket #824]

sys/nfs/nfs_vnops.c				1.152

	Fix panic in NFS client code when unlinking certain paths.
	[thorpej, ticket #930]

usr.sbin/rarpd/rarpd.8				1.10
usr.sbin/rarpd/rarpd.c				1.46

	Allow more than one interface to be specified on the command line.
	[thorpej, ticket #920]

bin/ps/keyword.c				1.28

	Correct use of format string.
	Fixes PR#18679.
	[itojun, ticket #922]

sbin/route/route.c				1.60

	Make prefixlen check to make sure its argument is present before
	dereferencing.
	[itojun, ticket #923]

sys/ufs/ufs/ufs_readwrite.c			1.43

	Make sure to update the vnode's size even if uiomove failed.
	otherwise, softdep states can't be flushed later.
	Fixes PR#16670.
	[yamt, ticket #926]

games/trek/getpar.c				1.10

	Avoid buffer overrun.
	[itojun, ticket #927]

sys/arch/macppc/stand/ofwboot/version		1.7

	Bump to version 1.7 to indicate a working alloc.c.
	[wrstuden, ticket #931]

sys/arch/i386/i386/machdep.c			1.492 (via patch)
	Fix bugs in BIOS memory probe.
	Fixes PR#13399.
	[kanaoka, ticket #934]

sys/netinet/tcp_input.c				1.156 (via patch)

	Correct log_refused check.
	Fixes PR#18669.
	[itojun, ticket #915]

