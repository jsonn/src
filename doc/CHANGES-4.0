#       $NetBSD: CHANGES-4.0,v 1.1.4.90 2007/03/06 20:44:25 bouyer Exp $

A complete list of changes from the initial NetBSD 4.0 branch on
1 December 2006 until the 4.0 release:

gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 4.0_BETA2

sys/lib/libsa/dosfs.c				1.11

	make bootxx_msdos fit in 8k again; thanks, __internal_memset_, for
	spilling registers all over the place.
	[dogcow, ticket #240]

sys/uvm/uvm_swap.c				1.114

	We are required to hold uvm.swap_data_lock here too.
	[elad, ticket #241]

sys/dev/pci/ahcisata.c				1.2

	Don't call the done callback twice if a special action is waiting on
	the queue. Don't forget to free the xfer in the normal bio path.
	[bouyer, ticket #242]

usr.bin/msgc/msg_sys.def			1.37

	Eliminate an alloca(3) use. This is required for USE_SSP builds to
	complete.
	[tls, ticket #243]

sys/conf/Makefile.kern.inc			1.95

	Add arch/xen/i386/gdt.c to list of kernel files that do variable-size
	allocations on the stack. This allocation could potentially be quite
	large -- I am not sure how to best fix that.
	Fixes USE_SSP i386 build.sh failure.
	[tls, ticket #244]

share/man/man9/kauth.9				1.37
sys/dev/i2o/dpti.c				1.31
sys/dev/i2o/iop.c				1.62
sys/dev/ic/dpt.c				1.55
sys/dev/ic/icp_ioctl.c				1.14
sys/dev/ic/mlx.c				1.49
sys/dev/pci/amr.c				1.43
sys/dev/pci/mly.c				1.33
sys/dev/pci/twe.c				1.82
sys/dev/tc/stic.c				1.37
sys/kern/kern_auth.c				1.33
sys/secmodel/bsd44/secmodel_bsd44_securelevel.c	1.19
sys/sys/kauth.h					1.25

	Change kauth(9) KPI for kauth_authorize_device_passthru() to add
	another argument, u_long, serving as a bit-mask of generic requests
	for the passthru request.
	[elad, ticket #247]

doc/CHANGES					patch

	Add entry for etherip(4).
	[rpaulo, ticket #249]

sys/miscfs/procfs/procfs_vnops.c		1.141

	Make procfs work again for non-root users.
	[elad, ticket #248]

gnu/usr.bin/gdb53/libiberty/Makefile		1.5

	Fix SSP build for the poor archs that have not converted yet.
	[tls, ticket #250]

gnu/usr.bin/gdb53/gdb/Makefile			1.8

	Allow to build NetBSD-amd64 with USE_SSP set.
	[tls, ticket #251]

sys/ufs/ffs/ffs_snapshot.c			1.38

	Prevent kernel panics when creating snapshots on filesystems which
	uses quotas. This fixes PR kern/35121.
	[hannken, ticket #252]

share/man/man9/scheduler.9			1.4

	Update to describe current API (only), and not duplicate that can be
	found elsewhere. (And which will appear in the NetBSD Internals Guide
	soonish).
	Submitted by Daniel Sieger <dsieger@TechFak.Uni-Bielefeld.DE>,
	OK'd by martin@ and  yamt@
	[hubertf, ticket #253]

sys/arch/sparc/conf/GENERIC			1.197
sys/arch/sparc64/conf/GENERIC			1.80

	sparc64: don't enable PaX MPROTECT by default for now.
	sparc: add commented out 'FILEASSOC'.
	[elad, ticket #254]

usr.sbin/veriexecgen/veriexecgen.8		1.9
usr.sbin/veriexecgen/veriexecgen.c		1.9

	More verbose error messages in veriexecgen(8).
	Also introduce a new -W flag, which will warn the user about the
	error, but will still continue processing - it treats errors as
	warnings, and allows a signatures file to be built.
	[elad, ticket #255]

distrib/utils/sysinst/net.c			1.114

	Ensure the generated ifconfig.* file has proper media selection.
	[martin, ticket #256]

sys/kern/kern_resource.c			1.109

	Fix PR/35021: allow root cannot get/set rlimit information of user
	processes through sysctl again.
	[elad, ticket #257]

distrib/hp700/ramdisk/dot.profile		1.2
distrib/hp700/ramdisk/dot.profile		1.2
distrib/hp700/ramdisk/list			1.4
distrib/hp700/ramdisk/list			1.4
etc/etc.hp700/MAKEDEV.conf			1.3
etc/etc.hp700/MAKEDEV.conf			1.3
sys/arch/hp700/conf/majors.hp700		1.21
sys/arch/hp700/conf/majors.hp700		1.21

	Various installation fixes for hp700.
	[skrll, ticket #258]

sys/netinet/ip_etherip.c			1.2
sys/netinet6/ip6_etherip.c			1.2

	Allow etherip support to be compiled on ports other than i386.
	[jdc, ticket #259]

share/man/man9/uvm.9				1.79
sys/uvm/uvm_extern.h				1.123
sys/uvm/uvm_swap.c				1.115

	Back out uvm_is_swap_device().
	[elad, ticket #261]

sys/arch/i386/i386/powernow_k7.c		1.21

	Add another model that needs to be added into the quirk table.
	[xtraeme, ticket #262]

lib/libc/arch/sparc64/gen/resumecontext.c	1.3

	getcontext(2)/setcontext(2) fixes for sparc64.
	[martin, ticket #263]

lib/libc/arch/arm/gen/resumecontext.c		1.3
lib/libc/arch/hppa/gen/resumecontext.c		1.2
lib/libc/arch/mips/gen/resumecontext.c		1.3
lib/libc/arch/powerpc/gen/resumecontext.c	1.3
lib/libc/arch/powerpc64/gen/resumecontext.c	1.2
lib/libc/arch/sh3/gen/resumecontext.c		1.3
lib/libc/arch/sh5/gen/resumecontext.c		1.2
lib/libc/arch/sparc/gen/resumecontext.c		1.3
lib/libc/arch/vax/gen/resumecontext.c		1.2

	getcontext(2)/setcontext(2) fixes for arm, hppa, mips, powerpc,
	powerpc64, sh3,  sh5, sparc, vax.
	[martin, ticket #264]

sbin/veriexecctl/veriexecctl_parse.y		1.20

	fixes a bug where entries with multiple flags only counted the
	last flag.
	[elad, ticket #265]

doc/3RDPARTY					1.489
share/zoneinfo/zone.tab				1.1.1.27 via patch
share/zoneinfo/australasia			1.12

	tz{code,data}2006p out; tzdata2006p imported.
	[kleink, ticket #260]

sys/arch/xen/x86/consinit.c			1.7

	Remove extra ) causing compile failure when CONS_OVERRIDE is defined.
	From Hideo Masuda in PR port-xen/35217.
	[bouyer, ticket #266]

sys/dev/pci/pcidevs				1.857
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	Add another PCI ID for Dell PERC 5.
	[bouyer, ticket #267]

share/man/man9/KASSERT.9			1.3

	Fix description to match the code.
	[pooka, ticket #268]

sys/miscfs/deadfs/dead_vnops.c			1.43

	Teach deadfs about vm object locking for getpages. This avoids
	errors resulting from situations where we take a page fault for a
	vnode which has been converted a deadfs vnode.
	[pooka, ticket #269]

sys/dev/sbus/stp4020.c				1.49

	Fix build of STP4020 SBus/PCMCIA driver.
	[jdc, ticket #270]

gnu/dist/gcc4/gcc/config/pa/pa.md		1.2

	Fix PA code generatation on 64bit hosts.
	[skrll, ticket #271]

sys/arch/mac68k/dev/if_mc.c			1.28
sys/arch/mac68k/dev/if_mcvar.h			1.12
sys/arch/mac68k/obio/if_mc_obio.c		1.16

	Convert DMA memory allocation to bus_dmamem_alloc.
	[martin, ticket #272]

lib/libc/arch/m68k/gen/resumecontext.S		1.4

	Fix regression tests in "regress/lib/libc/context" for m68k based
	NetBSD ports.
	[martin, ticket #273]

sys/kern/kern_verifiedexec.c			1.80

	entry-type is uint8.
	[elad, ticket #274]

sys/kern/kern_verifiedexec.c			1.81

	Call veriexec_table_delete() in the cases where we won't be failing the
	unmount request.  PR#35252.
	[elad, ticket #275]

usr.bin/cdplay/cdplay.c				1.35

	Take into account the 150 frame start offset time when computing the
	duration of a track.
	[chuck, ticket #276]

sys/netbt/l2cap_signal.c			1.3

	Do not use the output buffer to store data unless we mean it to go
	in the packet, as there is a problem with overwriting information
	while we still need it (opt->length in particular) which causes
	connections to fail.
	[plunky, ticket #277]

sys/dev/pci/eso.c				1.46-1.47

	Un-break clock selection after -Wsign-compare cleanup in rev. 1.43;
	from Stephen Ma in PR kern/35220.
	[kleink, ticket #278]

share/dict/web2					1.15

	Remove an accidentally duplicated word. This also fixes regression
	tests in "regress/lib/libc/db regression".
	[martin, ticket #279]

sys/net/if_fddisubr.c				1.64
sys/net/if_llc.h				1.17
sys/netiso/clnp_input.c				1.32,1.34

	Fix iso(4) over FDDI.
	[is, ticket #280]

usr.bin/column/column.c				1.16

	Stop column(1) from generating an infinite stream of NUL characters.
	This could cause "/etc/security" to fill up "/tmp" during the
	nightly security check.
	[jdc, ticket #281]

sys/arch/alpha/conf/GENERIC			1.302-1.305
sys/arch/alpha/conf/INSTALL			1.91-1.92

	Add the following network devices:
	- pcn at pci
	- wm at pci
	- makphy at mii
	- rgephy at mii
	- rlphy at mii
	and reduce diffs between GENERIC and INSTALL.
	[tsutsui, ticket #282]

share/man/man4/re.4				1.11
sys/dev/ic/rtl8169.c				1.74

	Fix and reenable HW VLAN tagging on re(4):
	- clear re_vlanctl in DMA descriptors before starting TX and RX
	  to avoid stale tags
	- use bswap16() rather than be16toh() or htons() on VLAN tag access
	  since we already use htole32()

	Closes PR kern/32643 and also fixes HW VLAN tagging on big endian
	machines.

	[tsutsui, ticket #283]

distrib/utils/sysinst/arch/i386/msg.md.de	1.9
distrib/utils/sysinst/arch/i386/msg.md.en	1.51
distrib/utils/sysinst/arch/i386/msg.md.es	1.4
distrib/utils/sysinst/arch/i386/msg.md.fr	1.41
distrib/utils/sysinst/arch/i386/msg.md.pl	1.24

	Update message strings to match reordered kernels after TINY ones got
	killed.  Fixes PR/35264
	[dsl, ticket #284]

usr.bin/make/cond.c				1.36
usr.bin/make/main.c				1.138-1.139
usr.bin/make/make.h				1.65
usr.bin/make/parse.c				1.121-1.124
usr.bin/make/targ.c				1.46

	performance improvements and bug fixes for make(1)
	[dsl, ticket #285]

sys/arch/mips/mips/pmap.c			1.169

	Fixes panic running regress/sys/kern/umount on MIPS platforms
	reported by Martin Husemann.
	[simonb, ticket #289]

sys/conf/Makefile.kern.inc			1.97

	use -fstack-protector instead of -fstack-protector-all since this breaks
	on amd64 (it works on sparc64).
	[tls, ticket #290]

sys/conf/Makefile.kern.inc			1.98

	Fix for SSP enabled Xen kernels
	[tls, ticket #291]

share/man/man9/veriexec.9			1.10

	Markup fix - forgot 'Fn'.
	[elad, ticket #292]

sys/netinet6/ipsec.c				1.114

	do not compare ipv6 ipsec tunnel addresses against uninitialized data.
	Fixes PR kern/34734
	[mlelstv, ticket #293]

distrib/sets/lists/man/mi			1.958
share/man/man4/Makefile				1.416
share/man/man4/mfi.4				1.1-1.2
sys/arch/amd64/conf/GENERIC			1.122
sys/arch/amd64/conf/INSTALL			1.61
sys/arch/i386/conf/ALL				1.75
sys/arch/i386/conf/GENERIC			1.802
sys/arch/i386/conf/INSTALL			1.298
sys/arch/i386/conf/XEN2_DOM0			1.19
sys/conf/files					1.821
sys/dev/ic/mfi.c				1.1-1.2
sys/dev/ic/mfireg.h				1.1-1.2
sys/dev/ic/mfivar.h				1.1-1.2
sys/dev/pci/files.pci				1.274
sys/dev/pci/mfi_pci.c				1.1-1.2

	Add mfi(4), a driver for LSI Logic & Dell MegaRAID SAS RAID controller.
	Tested on NetBSD-i386 and NetBSD-amd64.
	[bouyer, ticket #286]

distrib/sets/lists/man/mi			1.959
share/man/man4/Makefile				1.417
share/man/man4/bnx.4				1.1-1.2
sys/arch/amd64/conf/GENERIC			1.123
sys/arch/amd64/conf/INSTALL			1.62
sys/arch/i386/conf/ALL				1.76
sys/arch/i386/conf/GENERIC			1.803
sys/arch/i386/conf/GENERIC_LAPTOP		1.218
sys/arch/i386/conf/INSTALL			1.299
sys/arch/i386/conf/INSTALL_LAPTOP		1.112
sys/arch/i386/conf/XEN2_DOM0			1.20
sys/dev/microcode/bnx/bnxfw.h			1.1-1.2
sys/dev/pci/files.pci				1.275
sys/dev/pci/if_bnx.c				1.1
sys/dev/pci/if_bnxreg.h				1.1

	Add bnx(4), a driver for Broadcom NetXtreme II 10/100/1000 Ethernet
	device. Tested on NetBSD-i386 and NetBSD-amd64.
	[bouyer, ticket #287]

share/man/man4/pci.4				1.85

	Add references to bnx(4) and mfi(4).
	[bouyer, ticket #288]

sys/kern/exec_script.c				1.53
sys/kern/kern_exec.c				1.233
sys/sys/exec.h					1.115

	Remove the third argument from check_exec() and just check for ep_flags
	in the exec_package to know if we need to use VERIEXEC_DIRECT or
	VERIEXEC_INDIRECT.
	[elad, ticket #294]

sys/dist/ipf/netinet/ip_state.c			1.16

	TCP window scaling was being recognised but the recorded settins were
	being clobbered and thus effectively disabled.
	[darrenr, ticket #303]

sys/kern/subr_prof.c				1.37

	Add missing initializer.  PR#35248
	[liamjfoy, ticket #295]

sys/dev/pci/if_iwi.c				1.59
sys/dev/pci/if_iwireg.h				1.17
sys/dev/pci/if_iwivar.h				1.13

	Several fixes for iwi(4).
	[skrll, ticket #296]

sys/dev/ieee1394/fwohci.c			1.104

	Fix memory allocation, in case isochronous transfer fails.
	[kiyohara, ticket #297]

sbin/sysctl/sysctl.c				1.122

	PR/35304: C J Coleman: Off-by-one nul byte overwrite in mode_bits
	routine of sbin/sysctl
	[elad, ticket #298]

sys/kern/kern_exec.c				1.234

	Use ndp->ni_cnd.cn_pnbuf, not epp->ep_ndp->ni_dirp, for the pathname
	for Veriexec/PaX purposes.  Fixes part of PR/35278.
	[elad, ticket #299]

usr.bin/netstat/show.c				1.6

	Fix minor display error.
	[jdc, ticket #300]

etc/daily					1.69

	Make the daily script immune to changes of the current working
	directory in /etc/daily.local.  PR#33461.
	[hubertf, ticket #301]

distrib/notes/sgimips/hardware			1.13
distrib/notes/sgimips/prep			1.7

	Add note on handling the O2 framebuffer, and how to work around the
	non-support, by giving instructions for a serial console.
	[hubertf, ticket #302]

sys/arch/i386/conf/INSTALL			1.300

	Remove the ppp(4) driver from the INSTALL kernel, without pppd it
	is not useful. Should make the install system fit on a 2.88M floppy.
	[dogcow, ticket #327]

sys/kern/vfs_lookup.c				1.76
sys/kern/vfs_syscalls.c				1.282
sys/sys/namei.h					1.47

	Fix PR kern/35278: veriexec sometimes feeds user va to log(9).
	[elad, ticket #304]

sys/miscfs/procfs/procfs_vnops.c		1.142

	Fix procfs for Linux applications.
	[elad, ticket #307]

lib/libc/arch/sparc64/sys/__clone.S		1.5

	Make regression test in "regress/lib/libc/clone" work under
	NetBSD-sparc64. This fixes PR port-sparc64/33075.
	[martin, ticket #309]

sys/miscfs/procfs/procfs_vnops.c		1.144
sys/secmodel/bsd44/secmodel_bsd44_suser.c	1.21 via patch

	PR kern/35226: Problems with permissions in "/usr/pkg/emul/linux/proc".
	[elad, ticket #308]

share/man/man9/kauth.9				1.39
sys/miscfs/procfs/procfs_ctl.c			1.38
sys/sys/kauth.h					1.27

	pullup KAUTH_REQ_PROCESS_CANPROCFS_CTL and associated changes,
	to make the netbsd-4 branch build again.
	[hubert, ticket #334]

share/man/man9/veriexec.9			1.11
sys/kern/kern_verifiedexec.c			1.85
sys/sys/verified_exec.h				1.47

	veriexec_lookup() should not return an internal data-structure, but
	rather just a boolean value.
	[elad, ticket #310]

lib/libc/arch/sparc64/sys/__clone.S		1.6

	After discussing this further with uwe, rearange stack usage slightly
	and replace a comment with words suggested by him.
	[martin, ticket #311]

lib/libc/arch/sparc/gen/setjmp.S		1.10
lib/libc/arch/sparc/sys/__clone.S		1.4
lib/libc/arch/sparc/sys/cerror.S		1.9

	Use CCFSZ instead of 96 for standard save operations.
	[martin, ticket #312]

lib/libc/arch/sparc/sys/__clone.S		1.5

	Provide a full frame stack space in the clone'd child.
	[martin, ticket #313]

sys/kern/kern_pax.c				1.11
sys/kern/kern_verifiedexec.c			1.86

	Fix copy/paste error: Veriexec's sysctl setup routine was named after
	PaX's.
	[elad, ticket #314]

sys/kern/kern_verifiedexec.c			1.87

	Veriexec should not explicitly allow anything (raw disk access).
	[elad, ticket #315]

sys/arch/vax/vax/in4_cksum.c			1.11
sys/arch/vax/vax/in_cksum.c			1.10

	GCC constraints error for inline assembler, causing in_cksum to
	calculate the checksum wrong in the non-optimized case.
	Fix provided in PR#14614 by Rhialto, so this solves this PR.
	[ragge, ticket #321]

sys/arch/hppa/hppa/trap.c			1.39
sys/uvm/uvm_unix.c				1.37

	Update uvm_grow to support stacks that grow upwards.
	Use on hppa and fix a bug in the hppa trap handler.
	[skrll, ticket #323]

sys/dev/cgdvar.h				1.6-1.8

	int -> size_t, fix build on 64-bit architectures
	[jdc, ticket #326]

share/man/man4/iwi.4				1.6

	Reflect changed name of the firmware package after the update to
	version 3.
	[joerg, ticket #328]

sys/arch/i386/conf/INSTALL_XEN2_DOMU		1.10

	Having ppp(4) and sl(4) enabled in this kernel configuration is
	completely pointless because it doesn't support any serial interfaces.
	[tron, ticket #330]

sys/arch/amd64/conf/INSTALL			1.63
sys/arch/i386/conf/INSTALL_LAPTOP		1.113

	Disable ppp(4) because pppd(8) isn't on the installation image anyway.
	[tron, ticket #331]

sys/fs/udf/udf.h				1.9
sys/fs/udf/udf_subr.c				1.26
sys/fs/udf/udf_vfsops.c				1.19

	Implement read-only access to UDF 2.50 and UDF 2.60 discs that use
	metadata partition mappings. This brings the NetBSD implementation
	to read all discs upto date and will read all discs currently
	defined by OSTA.
	[reinoud, ticket #332]

sys/fs/udf/ecma167-udf.h			1.6
sys/fs/udf/udf_subr.c				1.27-1.29
sys/fs/udf/udf_vnops.c				1.9

	Fix various issues related to ticket #332
	[reinoud, ticket #333]

sys/dev/pci/ahcisata.c				1.3

	Don't print version 1.0 if we have a version 1.1 controller.
	[bouyer, ticket #329]

regress/sys/fs/tmpfs/t_remove			1.8
sys/fs/tmpfs/tmpfs_vnops.c			1.34

	* fix locking gotchas when trying to unlink "."
	* return standard EPERM when trying to unlink a directory
	* reorder some checks in rmdir avoid problems if trying to rmdir ".."
	* add a test to check that unlink of "." is not succesful
	[pooka, ticket #324]

share/examples/secmodel/secmodel_example.c	1.10 via patch
share/man/man9/kauth.9				1.43 via patch
share/man/man9/secmodel_bsd44.9			1.9
sys/arch/alpha/alpha/machdep.c			1.291
sys/arch/amd64/amd64/netbsd32_machdep.c		1.31
sys/arch/amd64/amd64/sys_machdep.c		1.10
sys/arch/arm/arm32/mem.c			1.17 via patch
sys/arch/i386/i386/sys_machdep.c		1.79
sys/arch/pc532/pc532/mem.c			1.43 via patch
sys/arch/powerpc/powerpc/mem.c			1.27 via patch
sys/arch/sh3/sh3/mem.c				1.23 via patch
sys/arch/sh5/sh5/mem.c				1.14 via patch
sys/arch/vax/vax/mem.c				1.34 via patch
sys/arch/x86/x86/x86_machdep.c			1.5
sys/arch/xen/i386/sys_machdep.c			1.10
sys/kern/kern_auth.c				1.35
sys/secmodel/bsd44/secmodel_bsd44_securelevel.c	1.20
sys/secmodel/bsd44/secmodel_bsd44_suser.c	1.22 via patch
sys/sys/kauth.h					1.29 via patch

	Make machdep scope architecture-agnostic by removing all arch-specific
	requests and centralizing them all. The result is that some of these
	are not used on some architectures, but the documentation was updated
	to reflect that.
	[elad, ticket #316]

sys/compat/linux/arch/i386/linux_machdep.c	1.120
sys/dev/wscons/wsdisplay_compat_usl.c		1.38

	Adapt to recent machdep scope changes.
	[elad, ticket #317]

sys/kern/kern_verifiedexec.c			1.88
sys/kern/vfs_vnops.c				1.130
sys/sys/verified_exec.h				1.48

	Avoid TOCTOU in Veriexec by introducing veriexec_openchk() to enforce
	the policy and using a single namei() call in vn_open().
	[elad, ticket #318]

share/man/man9/veriexec.9			1.12

	Document veriexe_openchk().
	[elad, ticket #320]

share/man/man9/kauth.9				1.44
sys/kern/kern_auth.c				1.36

	Make kauth_deregister_scope() and kauth_unlisten_scope() free the
	passed kauth_scope_t and kauth_listener_t objects, respectively.
	[elad, ticket #322]

sys/secmodel/bsd44/secmodel_bsd44_securelevel.c	1.25

	Consistent naming in sysctl(9) setup routines.
	[elad, ticket #325]

sys/arch/mac68k/dev/if_ae.c			1.79

	If we have a single byte left over after filling in all mbuf data, we
	need to increase the "totlen" count too. From Sungwon Chung.
	[martin, ticket #335]

sys/kern/kern_auth.c				1.34

	Allocate space for scopes and listeners with kmem.
	[elad, ticket #339]

sys/net/if_ethersubr.c				1.142

	Make kernel without ISO or NETATALK build. This fixes PR kern/35364.
	[bouyer, ticket #337]

sys/arch/xen/xen/xbd_xenbus.c			1.16

	Avoid kernel panic at boot if more than one xbd device is configured.
	[bouyer, ticket #338]

sys/arch/xen/xen/xencons.c			1.20

	Fix Xen console hangs.
	[bouyer, ticket #342]

share/man/man4/it.4				1.3
sys/dev/isa/it.c				1.7
sys/dev/isa/itvar.h				1.3

	- Remove unused sensors.
	- Provide more rfact values for the voltage sensors.
	- Remove the limit of 1.5 seconds for refreshing the sensors.
	[xtraeme, ticket #340]

sys/arch/mac68k/mac68k/locore.s			1.146

	Avoid kernel panic before reboot. This fixes PR port-mac68k/35068.
	[chs, ticket #345]

xsrc/xfree/xc/programs/Xserver/dbe/dbe.c		1.2
xsrc/xfree/xc/programs/Xserver/render/render.c	1.3
xsrc/xorg/xserver/xorg/dbe/dbe.c			1.2
xsrc/xorg/xserver/xorg/render/render.c		1.2

	fix integer overflow in dbe and render extensions
	(CVE-2006-6101, CVE-2006-6102 and CVE-2006-6103), from xfree86 CVS

	apply the xorg vendor patch for CVE-2006-6101, CVE-2006-6102 and
	CVE-2006-6103; afaict nothing is built from these sources yet
	[drochner, ticket #363]

distrib/sets/lists/man/mi			1.965
share/man/man4/Makefile				1.418
share/man/man4/envsys.4				1.21
share/man/man4/ug.4				1.1
sys/arch/amd64/conf/GENERIC			1.124
sys/dev/isa/files.isa				1.145
sys/dev/isa/ug.c				1.1
sys/dev/isa/ugvar.h				1.1

	Driver for the Abit uGuru Hardware system monitor, contributed by
	Mihai Chelaru. Minor changes (simplification and KNF) by me.
	[xtraeme, ticket #341]

gnu/dist/gcc4/gcc/config.gcc			1.15

	apply part of gcc SVN rev 112421 (for building on solaris):
		* config.gcc (sh*-*-*): Don't use c-c ranges for tr.
	[chs, ticket #343]

sys/arch/acorn32/conf/Makefile.acorn32		1.20
	feed /dev/null to awk for building modedef.c (for building on solaris).
	[chs, ticket #344]

sys/ufs/ext2fs/ext2fs_alloc.c			1.33
sys/ufs/ext2fs/ext2fs_inode.c			1.56

	several ext2fs fixes provided by Barry Bouwsma:
	 - set ip->i_e2fs_dtime to time_second, not time_uptime.
	 - don't allow ipref to go negative
	 - fs->e2fs.e2fs_icount is a valid inode number, allow it.
	[chs, ticket #346]

sys/arch/bebox/stand/elf2pef/elf2pef.c		1.13
sys/arch/bebox/stand/mkbootimage/mkbootimage.c	1.7

	don't include <sys/endian.h> when building as a host tool.
	[chs, ticket #347]

sys/lib/libsa/loadfile.c			1.25

	in fdloadfile(), fail if we can't read the entire exec header.
	[chs, ticket #348]

sys/arch/macppc/dev/ofb.c			1.53
sys/arch/macppc/dev/ofb_cons.c			1.2

	(hopefully) fix a panic when ofb attaches without being console
	[macallan, ticket #349]

sys/arch/shark/conf/files.shark			1.12
sys/arch/shark/isa/isa_io.c			1.7
sys/arch/shark/ofw/igsfb_ofbus.c		1.1
sys/arch/shark/ofw/igsfb_ofbusvar.h		1.1
sys/arch/shark/shark/consinit.c			1.5

	add glue for igsfb at ofbus
	[macallan, ticket #350]

sys/arch/shark/conf/GENERIC			1.68

	add igsfb at ofbus
	[macallan, ticket #351]

sys/arch/macppc/dev/mediabay.c			1.12

	when powering up the mediabay wait two seconds before looking for 
	devices
	Without this CDROM drives wouldn't be found when hotplugged.
	[macallan, ticket #352]

sys/arch/macppc/dev/ofb_cons.c			1.3
sys/arch/macppc/macppc/machdep.c		1.143

	make ofb compile without wsdisplay
	[macallan, ticket #353]

distrib/sets/lists/xserver/md.shark		1.7
share/mk/bsd.x11.mk				1.54
x11/Xserver/Makefile.common			1.33
x11/Xserver/hw/xfree86/drivers/Makefile		1.16
x11/Xserver/hw/xfree86/xf86_os/Makefile		1.14

	build XFree86 on shark
	[macallan, ticket #354]

xsrc/xsrc/xfree/xc/programs/Xserver/hw/xfree86/drivers/wsfb/wsfb_driver.c	1.7

	correctly report fb memory on wsfb
	[macallan, ticket #355]

sys/dev/ic/wdc.c				1.244
sys/dev/scsipi/cd.c				1.261

	fix PR 34202 by removing the alignement constraints on PIO data
	transfers and undo the alignment hacks used previously to work
	around the problem.
	[martin, ticket #371]

lib/Makefile					1.112

	take into account that libpam depends on libkafs, fixes parallel
	builds.
	[bouyer, ticket #364]

dist/ipf/ipsend/sock.c				1.10
sys/dist/ipf/netinet/ip_nat.c			1.20
sys/dist/ipf/netinet/ip_scan.c			1.7

	Fix IPF bugs found by Coverty scans.
	[martti, ticket #356]

sys/ufs/ufs/ufs_vnops.c				1.145

	Avoids problems while reading directories on an UFS volume if the
	caller provided invalid offsets.
	[yamt, ticket #357]

sys/arch/xen/i386/autoconf.c			1.21

	Fix wedge handling under NetBSD-xen.
	[yamt, ticket #358]

sys/arch/xen/xen/xbd_xenbus.c			1.17

	Fix occasional panics in NetBSD domUs caused by a race condition.
	[bouyer, ticket #365]

sys/arch/xen/xen/xbd_xenbus.c			1.15

	PR port-xen/34005: NetBSD Xen3 domU-s can get stuck waiting for I/O.
	[yamt, ticket #360]

sys/netinet/ip_output.c				1.173

	Avoid problems if PF's fragment reassemble feature is used.
	[yamt, ticket #361]

usr.sbin/etcupdate/etcupdate			1.30

	Clean ${SRCDIR}/etc when done. Patch provided by rudolf.
	http://mail-index.netbsd.org/tech-toolchain/2007/01/11/0001.html
	[martti, ticket #359]

share/man/man9/veriexec.9			1.13
sys/dev/verified_exec.c				1.57
sys/kern/kern_verifiedexec.c			1.94
sys/sys/verified_exec.h				1.53

	veriexec_file_delete() and veriexec_table_delete() now take
	'struct lwp *' too.
	[elad, ticket #362]

share/man/man4/re.4				1.12

	- add some note and Xref for rgephy(4) and rlphy(4), as per
	  suggestion from Steve Bellovin in PR kern/35376
	- add some more 8169S based products which have their own PCI
	  vendor ID and are listed in if_re_pci.c
	- fix/remove some error messages in DIAGNOSTIC section to sync
	  with reality.
	- bump date
	[tsutsui, ticket #368]

sys/arch/i386/conf/XEN2_DOM0			1.22

	Add ciphy(4) for vge(4) and rgephy(4) for re(4).
	[tsutsui, ticket #369]

sys/dev/pci/if_nfe.c				1.8 - 1.13
sys/dev/pci/if_nfereg.h				1.2 - 1.3

	several bug fixes and hardware checksum support for nfe(4)
	[tsutsui, ticket #370]

sys/arch/sparc/sparc/machdep.c			1.266

	Allow SUN4 class machines to boot again by making process virtual
	addresses avoid the MMU "hole", as is done on SUN4C class machines.

	[jdc, ticket #372]

sys/arch/macppc/dev/ams.c			1.23
sys/arch/macppc/dev/amsvar.h			1.6

	for trackpads add a sysctl to control wether tapping causes button 
	events
	[macallan, ticket #373]

sys/kern/kern_verifiedexec.c			patch

	fix build failure introduced by ticket #362
	[elad, ticket #378]

sys/opencrypto/crypto.c				1.18

	Make the opencrypto framework work with more than one driver again.
	Fixes PR/35412.
	[daniel, ticket #367]

sys/kern/vfs_syscalls.c				1.293

	Close a file descriptor leak issue where erronious parameters to an
	fsync_range(2) call could cause the file descriptor to never be closed.
	[wrstuden, ticket #374]

games/hack/hack.termcap.c			1.14 - 1.15

	fixes problem introduced in 1.13 where the setting of "BC"
	(backspace char) was left to libterm rather than being done by
	hack itself.  the problem with this was that hack was directly
	setting BC to \b if there was no "bc" in the termcap entry, but
	libterm does not do this.   this resulted in the xputs(BC) calls
	in nocmov() and backsp() incorrectly doing nothing, thus messing
	up the display.  added new var BC_BS to provide the old behavior
	for nocmov() and backsp().
	[chuck, ticket #375]

sys/fs/udf/udf_subr.c				1.30 - 1.31
	Use the generic clock_ymdhms_to_secs() instead of home-brewn
	version to translate UDF timestamps to timespec.
	Fix important directory lookup bug that could result in an
	endless loop. It fixes the case where a directory lookup is
	done in a directory has never been visted/listed; the search
	optimalisation that searches the directory from where it
	left behind the last time would never reach the initial offset
	of zero since it would always have at least processed one entry.
	[reinoud, ticket #376]

sys/kern/kern_sig.c				1.241 - 1.242

	Plug memory leak in __sigtimedwait1(): make sure to free `waitset'
	on error return path.
	Plug another memory leak in __sigtimedwait1() which is introduced
	by rev. 1.208: free `waitset' and ksiginfo on success.
	[enami, ticket #377]

sys/dev/isa/ug.c				1.2 - 1.3
sys/dev/isa/ugvar.h				1.2 - 1.3

	PR kern/35438: uGuru 2005 support from Mihai Chelaru.
	[xtraeme, ticket #382]

share/examples/secmodel/secmodel_example.c	1.14 via patch
share/man/man9/kauth.9				1.48 via patch
sys/kern/kern_resource.c			1.112 via patch
sys/secmodel/bsd44/secmodel_bsd44_suser.c	1.33 via patch
sys/sys/kauth.h					1.35 via patch

	Kill KAUTH_PROCESS_RESOURCE and just replace it with two actions for
	nice and rlimit.
	[elad, ticket #379]

sys/dev/ic/wdc.c				1.245

	Fix code handling unaligned transfers.
	[bouyer, ticket #380]

sys/dev/usb/ugraphire_rdesc.h			1.5-1.6
sys/dev/usb/uhidev.c				1.33
sys/dev/usb/usbdevs				1.450
sys/dev/usb/usbdevs.h				regen
sys/dev/usb/usbdevs_data.h			regen

	Add support for newer Wacom Graphire USB tablets.
	[ghen, ticket #384]

distrib/sets/lists/base/mi			1.682
doc/3RDPARTY					1.500
share/zoneinfo/africa				1.1.1.22 via patch
share/zoneinfo/australasia			1.13
share/zoneinfo/backward				1.1.1.18 via patch
share/zoneinfo/europe				1.1.1.35 via patch
share/zoneinfo/iso3166.tab			1.1.1.16 via patch
share/zoneinfo/northamerica			1.1.1.38 via patch
share/zoneinfo/southamerica			1.1.1.36 via patch
share/zoneinfo/zone.tab				1.1.1.28 via patch

	Update to tzdata2007a.
	[kleink, ticket #381]

sys/kern/init_sysctl.c				1.94

	Don't rely on KAUTH_PROCESS_CANSEE for environment just yet.
	[elad, ticket #383]

sys/dev/pci/if_iwi.c				1.60

	Fix panic in kernels compiled with the DIAGNOSTIC option.
	[skrll, ticket #385]

doc/CHANGES					1.783 via patch
sys/arch/amd64/conf/GENERIC			1.125
sys/arch/i386/conf/GENERIC			1.806
sys/arch/i386/conf/GENERIC_LAPTOP		1.220
sys/arch/i386/conf/GENERIC_TINY			1.103
sys/arch/i386/conf/INSTALL			1.303
sys/arch/i386/conf/INSTALL_LAPTOP		1.114
sys/arch/i386/conf/INSTALL_SMALL		1.132
sys/arch/i386/conf/INSTALL_TINY			1.109
sys/arch/i386/conf/INSTALL_XEN2_DOMU		1.11

	Remove option COMPAT_386BSD_MBRPART from default kernels.  NetBSD has
	not used partition ID 0x165 for many, many years, and the presence of
	this option in INSTALL kernels can cause overwriting of existing
	FreeBSD installations when sysinst writes back the disklabel.
	[tls, ticket #386]

sys/arch/i386/pci/pchb.c			1.63-1.64

	According to http://www.intel.com/design/chipsets/specupdt/290639.htm,
	the BIOS bug workaround for the i82443BX chipset's DRAM leadoff timing
	parameter is not needed for revisions >= C0, so avoid tweaking that
	parameter in that case.
	Earlier, this would trigger NMIs on fully memory-populated Compaq
	1850R systems, where the BIOS appears to program and require a non-
	standard value for this parameter.
	[he, ticket #392]

sys/dev/ic/wdc.c				1.246

	Add missing bus_space_(read,write)_stream macros.
	Approved by martin@
	[sborrill, ticket #389]

sys/dev/scsipi/atapi_wdc.c			1.104

	Fix for atapi devices that have 32 bit databusses selected.
	The devices won't error out but will return garbage data.
	Implemented by generalising the odd-check for PIO selection
	to check for 4 byte alignment in offset and size.
	[reinoud, ticket #388]

usr.sbin/postinstall/postinstall		1.32

	Fix method to find pf.os so it works with '-s etc.tgz'.
	This fixes PR bin/35185.
	[lukem, ticket #393]

doc/CHANGES					patch
share/man/man4/iwi.4				1.9

	Fix the path reference to the firmware package.
	[skrll, ticket #387]

gnu/dist/gcc4/gcc/cfgexpand.c			1.2

	Don't mark 0 length arrays as being too small for stack protection.
	[elad, ticket #390]

share/man/man9/kauth.9				1.49 via patch

	Remove extra '.El', left in previous commit.
	[elad, ticket #391]

distrib/sets/lists/base/mi			1.685
distrib/sets/lists/comp/mi			1.995
distrib/sets/lists/man/mi			1.971
tools/paxctl/Makefile				1.4
usr.bin/Makefile				1.156
usr.bin/paxctl/Makefile				delete
usr.bin/paxctl/paxctl.1				delete
usr.bin/paxctl/paxctl.c				delete
usr.sbin/Makefile				1.225
usr.sbin/paxctl/Makefile			1.1
usr.sbin/paxctl/paxctl.8			1.1
usr.sbin/paxctl/paxctl.c			1.1

	Move paxctl from usr.bin/paxctl to usr.sbin/paxctl, and make it an
	admin tool (man-page moved from section 1 to section 8).
	[elad, ticket #396]

sys/arch/amd64/amd64/machdep.c			1.45
sys/arch/amd64/amd64/pmap.c			1.28
sys/arch/i386/i386/machdep.c			1.589-1.590
sys/arch/i386/i386/pmap.c			1.195
sys/arch/xen/i386/pmap.c			1.21

	Don't put the kernel message buffer on an invalid physical address
	on certain motherboards (e.g. Intel D945 motherboard).
	This fixes PR port-i386/34186.
	[pavel, ticket #397]

usr.bin/gzip/gzip.c				1.90

	PR bin/35526: Fix typo in message.
	[martin, ticket #398]

sys/kern/vfs_lookup.c				1.80

	PR kern/35524: Fix panic from free in pathname_get.
	[elad, ticket #399]

distrib/notes/common/sysinst			1.79

	PR install/35528: Fix typo in install documentation.
	[martin, ticket #400]

share/man/man9/secmodel.9			1.8

	Fix markup.
	[elad, ticket #401]

sys/dev/firmload.c				1.7

	Don't crash if firmware_open is before the root filesystem was mounted.
	[is, ticket #402]

dist/file/src/apprentice.c			1.13

	Fix file(1) endianess problem in cross builds.
	[skrill, ticket #403]

share/man/man4/cardbus.4			1.30

	Correct documentation about ACPI related kernel options.
	Patch provided by Joerg Niendorf in PR misc/35514.
	[tron, ticket #394]

distrib/amd64/ramdisks/ramdisk/list             1.2
sys/arch/amd64/conf/INSTALL                     1.64-1.65

	Add RAIDframe support to the NetBSD-amd64 installation floppies.
	This fixes PR port-amd64/35532.
	[tron, ticket #405]

sys/arch/hp700/conf/GENERIC			1.73
sys/arch/hp700/gsc/if_iee_gsc.c			1.3

	Workaround PR port-hp700/35531 by preventing iee(4) from matching the
	82596DX/SX chip variant and adding ie(4) to the kernel to match it
	because ie(4) works.
	[skrll, ticket #404]

sys/secmodel/bsd44/secmodel_bsd44_suser.c	1.34

	Add another hardwired exception to the SOCK_RAW / superuser rule,
	because PF_BLUETOOTH, SOCK_RAW, BTPROTO_HCI) sockets need to be
	accessable for normal users.
	[plunky, ticket #406]

sys/conf/Makefile.kern.inc			1.99

	We don't need to include kern_exit43.c to the list of files that we
	cannot use SSP on now that zero sized arrays are treated properly in
	gcc.
	[elad, ticket #408]

share/man/man8/security.8			1.13 via patch

	paxctl(1) -> paxctl(8), add "table of contents".
	[elad, ticket #410]

sys/arch/i386/i386/identcpu.c			1.53,1.55
sys/arch/amd64/amd64/machdep.c			1.46
sys/arch/x86/include/specialreg.h		1.14

	PR port-i386/35430: Identify amd64 CPU on NetBSD/i386.
	[chs, ticket #411]

etc/rc.subr					1.68

	PR misc/35366: Improve logic of finding the correct process id
	from interpretes like Perl that change the process title.
	[hubertf, ticket #433]

sys/dev/ic/rtl8169.c				1.75-1.79
sys/dev/ic/rtl81x9.c				1.67-1.69
sys/dev/pci/if_re_pci.c				1.22-1.23
sys/dev/ic/rtl81x9reg.h				1.26

	Improvements for the re(4) and rtk(4) ethernet drivers:
	- improved EEPROM handling
	- support more 8100E and 8169SC variants
	- Fix multicast handling (PR kern/35579).
	- various bug-fixes
	[tsutsui, ticket #437]

etc/etc.amd64/MAKEDEV.conf			1.9
etc/etc.i386/MAKEDEV.conf			1.14

	Increase the number of raid(4) device node sets to four and the number
	of wd(4) device node sets to eight. This fixes another problem
	reported in PR port-amd64/35532
	[tron, ticket #425]

sys/arch/i386/i386/identcpu.c			1.54

	Add AMD Geode LX.
	OK'ed by tsutsui@ on port-i386.
	[tron, ticket #438]

share/dict/web2					1.16

	"Transvaal" should be capitalized.
	Patch provided by David A. Holland in PR misc/35517.
	[tron, ticket #395]

sys/kern/vfs_syscalls.c				1.299

	Fix a potential panic.
	[elad, ticket #412]

gnu/dist/gdb6/gdb/Makefile.in			1.3
gnu/usr.bin/gdb6/gdb/Makefile			1.6
gnu/usr.bin/gdb6/libgdb/Makefile		1.6-1.7

	- Remove generated files "ada-exp.c" and "c-exp.c".
	- Don't try to write to the source directory while building "gdb6".
	  This fixes PR toolchain/35271.
	[skrll, ticket #413]

gnu/dist/gdb6/gdb/i386nbsd-nat.c		1.4

	Make printing backtraces of kernel crash dumps work in "gdb6".
	This fixes PR toolchain/35118.
	[skrll, ticket #414]

lib/libkvm/kvm_proc.c				1.65

	PR lib/35506: Teach "libkvm" about kauth to make "ps" work on
	crash dumps again.
	[elad, ticket #415]

share/i18n/csmapper/CP/charset.pivot.CP.src	1.5

	Make conversions from "cp932" to "eucjp-ms" work again.
	[tnozaki, ticket #417]

sys/kern/subr_kmem.c				1.12

	Fix a potential kernel panic in kmem_alloc().
	[chs, ticket #418]

etc/MAKEDEV.tmpl				1.73

	Fix off-by-one error in the creation of dk(4) device nodes.
	[riz, ticket #443]

sys/dev/ld.c					1.43

	Add disk-info properties to ld(4) similar to wd(4).
	[riz, ticket #444]

sys/ufs/ufs/ufs_lookup.c			1.85-1.86

	In ufs_dirremove swap ep->d_reclen before use if needed. 
	[chs, ticket #419]

usr.bin/kdump/kdump.c				1.88

	skip over the "self" sa when printing upcalls.
	[chs, ticket #420]

lib/libkvm/kvm_proc.c				1.64

	fill in p_stat for crashdumps like the kernel does for the sysctl.
	[chs, ticket #421]

sbin/init/init.c				1.88

	Increase the numbers of inodes available on the "/dev" MFS to 1280.
	This should fix the "sysinst" problems caused by adding more devices
	node to resolve PR port-amd64/35532.
	[tron, ticket #441]

share/man/man9/namei.9				1.13 via patch
share/man/man9/vnodeops.9			1.59 via patch
sys/coda/coda_vfsops.c				1.53 via patch
sys/coda/coda_vnops.c				1.51 via patch
sys/fs/adosfs/adlookup.c			1.9 via patch
sys/fs/cd9660/cd9660_lookup.c			1.12 via patch
sys/fs/filecorefs/filecore_lookup.c		1.8 via patch
sys/fs/filecorefs/filecore_vfsops.c		1.29 via patch
sys/fs/msdosfs/msdosfs_lookup.c			1.11 via patch
sys/fs/msdosfs/msdosfs_vnops.c			1.35 via patch
sys/fs/ntfs/ntfs.h				1.15 via patch
sys/fs/ntfs/ntfs_vnops.c			1.31 via patch
sys/fs/ptyfs/ptyfs_vfsops.c			1.22 via patch
sys/fs/ptyfs/ptyfs_vnops.c			1.19 via patch
sys/fs/puffs/puffs_vfsops.c			1.15 via patch
sys/fs/puffs/puffs_vnops.c			1.22 via patch
sys/fs/smbfs/smbfs_vfsops.c			1.61 via patch
sys/fs/smbfs/smbfs_vnops.c			1.57 via patch
sys/fs/sysvbfs/sysvbfs.c			1.3 via patch
sys/fs/sysvbfs/sysvbfs_vnops.c			1.6 via patch
sys/fs/tmpfs/tmpfs_vnops.c			1.33 via patch
sys/fs/udf/udf_vnops.c				1.8 via patch
sys/fs/union/union_subr.c			1.22,1.24 via patch
sys/fs/union/union_vfsops.c			1.41,1.43 via patch
sys/fs/union/union_vnops.c			1.18-1.19 via patch
sys/kern/vfs_cache.c				1.67 via patch
sys/kern/vfs_getcwd.c				1.34 via patch
sys/kern/vfs_lookup.c				1.73-1.75,1.77-1.79 via patch
sys/kern/vfs_syscalls.c				1.280,1.290,1.298 via patch
sys/kern/vnode_if.src				1.51 via patch
sys/miscfs/deadfs/dead_vnops.c			1.42 via patch
sys/miscfs/fdesc/fdesc_vfsops.c			1.63 via patch
sys/miscfs/fdesc/fdesc_vnops.c			1.95 via patch
sys/miscfs/genfs/layer_subr.c			1.21 via patch
sys/miscfs/genfs/layer_vnops.c			1.29 via patch
sys/miscfs/kernfs/kernfs_vfsops.c		1.75 via patch
sys/miscfs/kernfs/kernfs_vnops.c		1.129 via patch
sys/miscfs/portal/portal_vfsops.c		1.59 via patch
sys/miscfs/portal/portal_vnops.c		1.69 via patch
sys/miscfs/procfs/procfs_vfsops.c		1.68 via patch
sys/miscfs/procfs/procfs_vnops.c		1.143 via patch
sys/miscfs/umapfs/umap_vnops.c			1.43 via patch
sys/nfs/nfs_export.c				1.23,1.25-1.26 via patch
sys/nfs/nfs_serv.c				1.120,1.123 via patch
sys/nfs/nfs_subs.c				1.178 via patch
sys/nfs/nfs_vnops.c				1.245 via patch
sys/sys/namei.h					1.46 via patch
sys/sys/param.h					patch
sys/ufs/ext2fs/ext2fs_lookup.c			1.47 via patch
sys/ufs/ext2fs/ext2fs_vnops.c			1.70 via patch
sys/ufs/lfs/lfs_vnops.c				1.194 via patch
sys/ufs/ufs/ufs_extattr.c			1.11 via patch
sys/ufs/ufs/ufs_lookup.c			1.81 via patch
sys/ufs/ufs/ufs_vnops.c				1.144 via patch
sys/uvm/uvm_vnode.c				1.78 via patch

	- Fix various deadlock problems with nullfs and unionfs.
	- Speed up path lookups by upto 25%.
	[chs, ticket #422]

sys/dev/pci/pcidevs				1.865
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	Add another Realtek WiFi, some SIIG serial cards and another
	nForce chipset. Remove some duplicate entries.
	[chs, ticket #423]

share/man/man4/kttcp.4				1.3
sys/dev/kttcp.c					1.22

	Fill manpage with some data, taken from comments in the kernel source.
	[hubertf, ticket #428]

sys/dev/pci/pcidevs				1.867
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen
sys/dev/pci/viaide.c				1.40

	Add support for VT8237A/VT82C586A PCI-ISA-Bridge.
	This fixes PR kern/35314.
	[mlelstv, ticket #449]

sys/dev/pci/if_bnx.c				1.2

	Fix two panics in DIAGNOSTIC kernels.
	[bouyer, ticket #451]

sys/dev/pci/pucdata.c				1.51

	Add some SIIG and Moxa cards.
	[chs, ticket #424]

etc/MAKEDEV.tmpl				1.71
etc/etc.acorn32/MAKEDEV.conf			1.8
etc/etc.algor/MAKEDEV.conf			1.4
etc/etc.alpha/MAKEDEV.conf			1.7
etc/etc.amd64/MAKEDEV.conf			1.8
etc/etc.amiga/MAKEDEV.conf			1.10
etc/etc.arc/MAKEDEV.conf			1.6
etc/etc.atari/MAKEDEV.conf			1.7
etc/etc.bebox/MAKEDEV.conf			1.5
etc/etc.cobalt/MAKEDEV.conf			1.4
etc/etc.evbmips/MAKEDEV.conf			1.4
etc/etc.evbppc/MAKEDEV.conf			1.5
etc/etc.hp300/MAKEDEV.conf			1.11
etc/etc.hp700/MAKEDEV.conf			1.4
etc/etc.hpcarm/MAKEDEV.conf			1.7
etc/etc.hpcmips/MAKEDEV.conf			1.4
etc/etc.i386/MAKEDEV.conf			1.12
etc/etc.ibmnws/MAKEDEV.conf			1.6
etc/etc.mac68k/MAKEDEV.conf			1.7
etc/etc.macppc/MAKEDEV.conf			1.7
etc/etc.mipsco/MAKEDEV.conf			1.3
etc/etc.mmeye/MAKEDEV.conf			1.5
etc/etc.mvme68k/MAKEDEV.conf			1.6
etc/etc.mvmeppc/MAKEDEV.conf			1.6
etc/etc.next68k/MAKEDEV.conf			1.3
etc/etc.ofppc/MAKEDEV.conf			1.5
etc/etc.pc532/MAKEDEV.conf			1.5
etc/etc.pmppc/MAKEDEV.conf			1.6
etc/etc.prep/MAKEDEV.conf			1.4
etc/etc.sandpoint/MAKEDEV.conf			1.4
etc/etc.sgimips/MAKEDEV.conf			1.8
etc/etc.sparc/MAKEDEV.conf			1.11
etc/etc.sparc64/MAKEDEV.conf			1.12
etc/etc.vax/MAKEDEV.conf			1.10
etc/etc.x68k/MAKEDEV.conf			1.8

	Fix MAKEDEV on shark: Move ses(4) devices from MI code (MAKEDEV.tmpl)
	to those platforms that actually have the driver.
	This fixes PR install/26511 properly.
	[hubertf, ticket #429]

distrib/common/Makefile.bootcd			1.7

	Add CDRELEASE_NOISOS to allow excluding installation/cdroms from
	CDs that have full releases.
	[hubertf, ticket #430]

share/man/man0/mkman				1.5

	Exclude working directories.
	[hubertf, ticket #431]

regress/usr.bin/cut/cut_tests			1.2

	Allow using something else than 'cut' to test this with the CUT
	environment variable.
	[hubertf, ticket #432]

sys/arch/i386/conf/ALL				1.78 via patch

	Enable ALTQ and some others, taken from GENERIC kernel configuration.
	[hubertf, ticket #434]

usr.bin/mail/Makefile				1.29
usr.bin/mail/cmdtab.c				1.17-1.18
usr.bin/mail/collect.c				1.38
usr.bin/mail/complete.c				1.12
usr.bin/mail/def.h				1.23
usr.bin/mail/extern.h				1.28
usr.bin/mail/format.c				1.3-1.4
usr.bin/mail/lex.c				1.31-1.33
usr.bin/mail/list.c				1.19-1.20
usr.bin/mail/mail.1				1.41-1.49
usr.bin/mail/main.c				1.26
usr.bin/mail/mime_attach.c			1.4
usr.bin/mail/mime_decode.c			1.6-1.8
usr.bin/mail/names.c				1.25
usr.bin/mail/thread.c				1.3
usr.bin/mail/version.c				1.11-1.12

	Message selection based on message body, documentation improvements,
	and many bug fixes.
	[christos, ticket #454]

common/lib/libc/hash/sha2/sha2.c		1.3-1.4

	Make SHA512_Last static since it is not part of the API. This fixes
	errors while building the toolchain on a NetBSD 4.x system using
	the "-static" link option.
	[christos, ticket #456]

usr.sbin/pcictl/pcictl.8			1.6

	Xref drvctl(8), bump date
	[hubertf, ticket #435]

usr.sbin/pcictl/pcictl.c			1.11

	Make the output of 'list -n' aligned  by always printing 8 hex digits.
	[hubertf, ticket #436]

usr.sbin/etcupdate/etcupdate			1.31

	Run pwd_mkdb before running mtree.  PR#35570.
	[martti, ticket #440]

etc/defaults/weekly.conf			1.3
etc/weekly					1.22
share/man/man5/weekly.conf.5			1.8-1.9

	Remove unused references to "clean_uucp" variable. 
	Add rebuild_whatisdb weekly variable that defaults to NO.
	[reed, ticket #442]

sys/dev/scsipi/scsiconf.c			1.242

	Add PQUIRK_CAP_SYNC | PQUIRK_CAP_WIDE16 for Seagate
	ST318203LSUN18G.
	[bouyer, ticket #452]

sys/arch/amd64/include/signal.h			1.9

	Accept the old ABI versions of signal trampolines for 32-bit
	compatibility.
	[pavel, ticket #455]

sbin/gpt/add.c					1.4
sbin/gpt/gpt.c					1.3
sbin/gpt/label.c				1.4
sbin/gpt/remove.c				1.3

	Makes "gpt add" work with an offset of more than 2147483647 sectors.
	[riz, ticket #445]

sys/dev/pci/pcidevs				1.868
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	Add Intel i965Q chipset.
	[markd, ticket #446]

sys/compat/linux/common/linux_socket.c		1.70

	Make setsockopt(2) return compatible error codes for AF_UNIX sockets.
	[mlelstv, ticket #447]

share/man/man4/ubsa.4				1.5
sys/dev/usb/ubsa.c				1.17
sys/dev/usb/usbdevs				1.458
sys/dev/usb/usbdevs.h				regen
sys/dev/usb/usbdevs_data.h			regen

	Add support for Globetrotter Fusion Quad Lite cards.
	[mlelstv, ticket #448]

sys/dev/usb/ehci.c				1.122
sys/dev/usb/ohci.c				1.181
sys/dev/usb/uhci.c				1.207
sys/dev/usb/usbdi.c				1.118

	Avoid infinite loop in the DIAGNOSTIC code in the USB drivers.
	[mlelstv, ticket #450]

sys/arch/arm/arm/cpufunc.c			1.78
sys/arch/arm/arm/cpufunc_asm_arm10.S		1.6
sys/arch/arm/arm/cpufunc_asm_armv5.S		1.3
sys/arch/arm/arm/cpufunc_asm_armv5_ec.S		1.1
sys/arch/arm/arm32/cpu.c			1.63-1.64
sys/arch/arm/arm32/genassym.cf			1.31
sys/arch/arm/arm32/pmap.c			1.158
sys/arch/arm/conf/files.arm			1.82
sys/arch/arm/include/arm32/vmparam.h		1.20
sys/arch/arm/include/armreg.h			1.37
sys/arch/arm/include/cpuconf.h			1.13
sys/arch/arm/include/cpufunc.h			1.38
sys/arch/arm/omap/files.omap			1.1-1.4
sys/arch/arm/omap/omap5912_intr.c		1.1
sys/arch/arm/omap/omap5912_intr.h		1.1
sys/arch/arm/omap/omap_a2x_io.S			1.1
sys/arch/arm/omap/omap_a2x_space.c		1.1
sys/arch/arm/omap/omap_a4x_space.c		1.1
sys/arch/arm/omap/omap_com.c			1.1
sys/arch/arm/omap/omap_com.h			1.1
sys/arch/arm/omap/omap_emifs.c			1.1
sys/arch/arm/omap/omap_emifs.h			1.1
sys/arch/arm/omap/omap_gpio.c			1.1
sys/arch/arm/omap/omap_gpio.h			1.1
sys/arch/arm/omap/omap_gpioreg.h		1.1
sys/arch/arm/omap/omap_intr.c			1.1
sys/arch/arm/omap/omap_intr.h			1.1
sys/arch/arm/omap/omap_mputmr.c			1.1
sys/arch/arm/omap/omap_nobyteacc_io.S		1.1
sys/arch/arm/omap/omap_nobyteacc_space.c	1.1
sys/arch/arm/omap/omap_ocp.c			1.1
sys/arch/arm/omap/omap_ocp.h			1.1
sys/arch/arm/omap/omap_reg.h			1.1
sys/arch/arm/omap/omap_rtc.c			1.1 
sys/arch/arm/omap/omap_space.c			1.1
sys/arch/arm/omap/omap_start.S			1.1
sys/arch/arm/omap/omap_tipb.c			1.1
sys/arch/arm/omap/omap_tipb.h			1.1
sys/arch/evbarm/conf/OSK5912			1.1
sys/arch/evbarm/conf/files.osk5912		1.1
sys/arch/evbarm/conf/mk.osk5912			1.1
sys/arch/evbarm/conf/std.osk5912		1.1
sys/arch/evbarm/osk5912/if_sm_emifs.c		1.1
sys/arch/evbarm/osk5912/osk5912_machdep.c	1.1

	Add support for the TI OMAP family of ARM processors.
	[matt, ticket #457]

sys/dev/ld.c					1.45

	Defer dkwedge_discover() until after interrupts are enabled.  This
	allows a kernel with options DKWEDGE_AUTODISCOVER to boot
	on a machine with a twa(4) card.

	ok matt@
	[riz, ticket #458]

usr.sbin/sdpd/server.c				1.2

	use CMSG_LEN and SOCKCREDSIZE macros to validate length because when
	there are zero extra groups, the size of the cmsg is smaller than
	sizeof(struct sockcred). This fixes a problem with registering
	services during rc.d

	while here, validate the pdu header length before using the contents
	[plunky, ticket #459]

sys/dev/usb/if_rum.c				1.5
sys/dev/usb/ugen.c				1.90

	Fix debug format strings (found on amd64).
	[wiz, ticket #460]

sys/arch/newsmips/dev/sc_wrap.c			1.29

	Add a missing break, which causes bogus debug messages on
	check condition during device probe.
	[tsutsui, ticket #461]

sys/dev/ic/rtl8169.c				1.80 - 1.81
sys/dev/ic/rtl81x9.c				1.70

	Use new RTK_HWREV_8100E_SPIN2 macro. (missed in the previous)

	Don't set RTK_CFG1_FULLDUPLEX bit in RTK_CFG1 register
	since it's available only on RTL8129. From FreeBSD.

	As defined in rtl81x9reg.h, bits of 0x80 and 0x40 in RTK_CFG1
	seem to indicate LEDS0 and LEDS1 configuration initialized by
	EEPROM settings, and they seem read only on my quick tests with
	two 8169S based cards.

	RTK_HWREV_8100E_SPIN2 is a PCIe device so also check it
	in rtk_setmulti() to handle quirk. Noticed by OpenBSD.
	[tsutsui, ticket #462]

sys/dev/ic/smc83c170reg.h			1.12
sys/dev/ic/smc83c170var.h			1.11

	fix timeouts caused by race condition.
	[tsutsui, ticket #463]

sys/arch/news68k/conf/GENERIC			1.87
sys/arch/news68k/conf/GENERIC_TINY		1.56
sys/arch/news68k/conf/INSTALL			1.41
sys/arch/news68k/conf/LIBERO			1.44
sys/arch/news68k/dev/si.c			1.19

	Make disconnect/reselect work on news68k si(4) with DMA and
	enable it by default.
	[tsutsui, ticket #464]

sys/fs/msdosfs/msdosfs_vfsops.c			1.41-1.44 via patch

	Fix the problem reported in kern/35457, "cant mount msdosfs on floppy".
	[kochi, ticket #453]

sys/net/if_ethersubr.c				1.144

	Drop M_PROMISC before passing the packet to a carp device, for the same
	reason it's dropped before passing to bridge: when a vlan interface is
	in promisc mode, it will loop the packet back to ether_input() with
	M_PROMISC set, and when carp calls ether_input again the flag is still
	there and the packet is dropped. If the carp interface doesn't take
	the packet M_PROMISC is set just after is needed anyway.
	[bouyer, ticket #465]

sys/dev/pci/if_bge.c				1.124-1.125
sys/dev/pci/if_bgereg.h				1.40

	Fix bge(4) on architectures where bus_dmamap_sync() isn't a noop.
	[bouyer, ticket #466]

sys/kern/vfs_syscalls.c				1.303

	Avoid lock leak in error branch of sys_fchdir(). Fixes a bug
	introduced in ticket #422 which shows up e.g. as an unkillable find
	process wedged in vnlock.
	[pooka, ticket #480]

distrib/notes/common/main			1.328

	Update release engineering member list with reality.
	[tron, ticket #467]

etc/etc.amd64/Makefile.inc			1.6
etc/etc.i386/Makefile.inc			1.48
sys/arch/i386/stand/pxeboot/Makefile		1.14

	Install pxeboot_ia32.bin as part of a "make release" on i386 and amd64.
	[he, ticket #469]

sys/arch/arm/arm32/cpuswitch.S			1.46
sys/arch/arm/arm32/genassym.cf			1.30
sys/arch/evbarm/ifpga/pl030_rtc.c		1.8
sys/arch/evbarm/include/types.h			1.7
sys/arch/evbarm/iq80310/iq80310_timer.c		1.20

	Get DOMAIN_CLIENT directly from arm/arm32/pte.h instead of from
	genassym to avoid redefinition when both assymh and pte.h are
	included (as in INTEGRATOR's intmmu.S, which uses more macros
	from pte.h).
	Convert evbarm to __HAVE_GENERIC_TODR.
	[matt, ticket #470]

sys/arch/macppc/pci/pci_machdep.c		1.33

	if we encounter a cardbus bridge with bogus bus number try to get OF to
	assign it a bus number so cardbus* will attach properly.
	Should fix PR26508
	[macallan, ticket #471]

sys/dev/pci/radeonfb.c				1.9
sys/dev/pci/radeonfbreg.h			1.3
sys/dev/pci/radeonfbvar.h			1.3

	add preliminary support for setting backlight levels via ioctl()
	from Johan Wallen
	[macallan, ticket #472]

sys/dev/ofw/files.ofw				1.13

	pull in ofw_subr.c with openfirm so we can use stuff like 
	of_compatible() without ofbus
	[macallan, ticket #473]

sys/arch/macppc/macppc/autoconf.c		1.50
sys/arch/macppc/macppc/machdep.c		1.144

	use properties to pass additional data to the console device,
	like static EDID, framebuffer parameters etc.
	[macallan, ticket #474]

sys/arch/macppc/dev/ofb_cons.c			1.4

	finding the console node / instance handle moved into machdep.c
	[macallan, ticket #475]

sys/arch/shark/include/bus.h			1.2
sys/arch/shark/isa/isa_io.c			1.8

	add bus_space_*_stream() methods
	[macallan, ticket #476]

sys/dev/pci/radeonfb.c				1.10
sys/dev/pci/radeonfbvar.h			1.4

	don't hardcode inverted backlight levels needed on some macppc models
	[macallan, ticket #477]

sys/dev/ic/tulip.c				1.148
sys/dev/pci/if_tl.c				1.78-1.80

	Make the ThunderLAN part of the Set Engineering GIO board for
	sgimips (IP22) work.
	Extract mac addresses on Phobos G100 boards.
	[rumble, ticket #478]

share/man/man9/in_getifa.9			1.3
sys/netinet/in_selsrc.c				1.4-1.5

	Add net.inet.ip.selectsrc.default even if GETIFA_DEBUG is not
	#define'd.
	Reverse sense of preference numbers: prefer source addresses with
	higher preference numbers.
	[dyoung, ticket #481]

distrib/sets/lists/base/md.prep			1.13
distrib/sets/lists/comp/md.prep			1.22
distrib/sets/lists/man/mi			1.978
etc/etc.prep/MAKEDEV.conf			1.5
etc/mtree/NetBSD.dist				1.333
share/man/man4/Makefile				1.421
share/man/man4/man4.prep/Makefile		1.1
share/man/man4/man4.prep/intro.4		1.1
share/man/man4/man4.prep/nvram.4		1.1
sys/arch/prep/conf/majors.prep			1.19
sys/arch/prep/include/Makefile			1.19
sys/arch/prep/include/nvram.h			1.3
sys/arch/prep/pnpbus/nvram_pnpbus.c		1.6
usr.sbin/eeprom/Makefile			1.14
usr.sbin/eeprom/defs.h				1.10
usr.sbin/eeprom/eeprom.8			1.12
usr.sbin/eeprom/main.c				1.17
usr.sbin/eeprom/pathnames.h			1.3
usr.sbin/eeprom/prephandlers.c			1.1

	Finish the code in the prep nvram driver that makes it an actual
	device (/dev/nvram) and implement all the associated ioctls fully.
	Tested with a hacked up copy of eeprom(8).  Right now it can only
	be used to see the nvram GEV contents, not actually edit them.
	[garbled, ticket #482]

sbin/restore/tape.c				1.59 via patch

	Add support for Solaris ufsdump volumes with more than 512*1024 inodes.
	[hannken, ticket #483]

sys/dev/fss.c					1.30 via patch

	Initialize resid to prevent a kernel assertion on DEBUG-enabled kernels.
	[hannken, ticket #484]

lib/libc/compat/sys/compat_getdents.c		1.2

	PR lib/34210: Avoid bus error (unaligned 64-bit access) on sparc64.
	[nakayama, ticket #485]

share/man/man9/in_getifa.9			1.4

	Bump date for previous.
	[dyoung, ticket #486]

usr.bin/rfcomm_sppd/rfcomm_sppd.1		1.2-1.4
usr.bin/rfcomm_sppd/rfcomm_sppd.c		1.2-1.3

This comprises a rewrite, which
	- adds a server mode for incoming bluetooth connections
	- does not cfmakeraw the slave tty as this caused problems
	- does not hold open the slave tty as this prevented multiple opens
	- modifies the termios for stdio so that this can be used directly
	  by a user.

[plunky, ticket #487]

sys/kern/subr_kmem.c				1.14

	kmem_backend_alloc: fix a null dereference.
	[yamt, ticket #488]

dist/bind/lib/dns/resolver.c                    patch
dist/bind/lib/dns/validator.c                   patch
dist/bind/lib/dns/include/dns/validator.h       patch   
dist/bind/version                               patch

	Fix CVE-2007-0493 and CVE-2007-0494.
	[adrianp, ticket #489]

distrib/sets/Makefile				1.55

	Let do-${tar} depend on sanitise_METALOG. Fix PR 35925.
	[apb, ticket #490]

build.sh					1.161 via patch
distrib/sets/regpkg				1.15
distrib/sets/regpkgset				1.9
distrib/sets/sets.subr				1.56
tools/gcc/mknative.common			1.9

	Whenever we try to parse the output from make, run make with the -B
	flag.  This ensures that -j<N> isn't accidentally inherited from the
	environment, because the "--- foo ---" headers printed with -j<N> would
	interfere with parsing the output.
	[apb, ticket #491]

distrib/sets/lists/base/mi			1.690
distrib/sets/lists/man/mi			1.980

	Add man4/prep, cat4/prep, html4/prep directories, and a couple of
	missed cat4/prep manpages.
	[jdc, ticket #492]

