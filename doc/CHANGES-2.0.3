#	$NetBSD: CHANGES-2.0.3,v 1.1.2.17 2005/05/31 21:55:33 riz Exp $

A complete list of changes from the NetBSD 2.0.2 release to the NetBSD 2.0.3
release.

File						Revision(s)
----						--------
sys/ufs/ufs/ufs_bmap.c				patch

	Fix a silent truncation problem that could cause corruption with large
	FFSv1 file systems.
	[mycroft, ticket #1035]

sys/sys/param.h					patch

	Welcome to 2.0.2_STABLE

sys/netinet/tcp_input.c				patch

	If an echoed RFC 1323 time stamp appears to be later than the current
	time, ignore it and fall back to old-style RTT calculation. This
	prevents ending up with a negative RTT and panicking later.
	[christos, ticket #1401]

sys/arch/sgimips/hpc/if_sq.c			1.21

	When adding or deleting multicast addresses, only change
	the address filter if the interface is marked RUNNING.
	Fixes PR#27678.
	[thorpej, ticket #939]

sys/arch/sgimips/hpc/if_sq.c			1.22-1.23
sys/arch/sgimips/hpc/sqvar.h			1.6-1.7

	Fix the HPC1 transmit logic, which was previously very broken.
	[rumble, ticket #1054]

sys/netinet6/nd6.c                              1.92

	Make sure that prefixes get purged.  Fixes PR#21189,
	PR#25968, and PR#37873.
	[tron, ticket #1394]

usr.bin/telnet/telnet.c                         1.30

	Plug buffer overflows, ref. CAN 2005-0468 and 2005-0469.
	Patch from MIT/Kerberos (MITKRB5-SA-2005-001-telnet.txt).
	[tron, ticket #1410]

sys/arch/powerpc/powerpc/trap.c			1.106

	Drop the big lock in upcallret() like all the other platforms do.
	[chs, ticket #1066]

sys/netinet/tcp_input.c				patch

	Fix TCP performance problems introduced in ticket 1401.
	[chs, ticket #1445]

sys/arch/sparc64/sparc64/locore.c		1.197-1.204 via patch

	Various changes from NetBSD-current, revisions 1.197 to 1.204.
	Interrupt and soft-interrupt handling changes that appear to fix
	the "sleep forever" problem (PR port-sparc64/21750).
	[martin, ticket #1487]

sys/kern/uipc_mbuf2.c				1.19

	In m_pulldown avoid a prepend to the next mbuf in the chain if the
	result would still not have all data we want continous. Fixes PR#30098
	[martin, ticket #1503]

sys/arch/powerpc/powerpc/trap_subr.S		1.57

	Don't enable interrupts while calling trap() if the trapping frame
	didn't have them enabled either.
	Addresses PR#29559.
	[matt, ticket #1286]

sys/ufs/ext2fs/ext2fs_bmap.c			1.19

	getblk() can return NULL if we are the pagedaemon. Check for this.
	[bouyer, ticket #1355]

sys/kern/kern_descrip.c				1.132

	The file being closed is (fdp->fd_lastfile - i), not i. So compare
	(fdp->fd_lastfile - i) against fd_knlistsize. Otherwise we can
	call knote_fdclose() on a file descriptor that doesn't have a knote.
	This issue explains random panics I have had on process exit over the
	past few years.
	[wrstuden, ticket #1537]

sys/miscfs/kernfs/kernfs.h			1.24
sys/miscfs/kernfs/kernfs_vnops.c		1.108

	kernfs does not support mmap(), remove code that pretends that it does.
	[chs, ticket #1540]

sys/dev/ata/ata.c				1.69 via patch

	Close a window where (disks) interrupts could be enabled while the
	ATACH_TH_RUN flag is still set. Should fix panic reported by Jukka Salmi
	on netbsd-users@.
	[bouyer, ticket #1543]

sys/arch/sun3/dev/if_ie.c			1.42

	Avoid NULL pointer dereference in case of #if NBPFILTER == 0.
	Closes PR port-sun3/21699.
	[tsutsui, ticket #1874]

